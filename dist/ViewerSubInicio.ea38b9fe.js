parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"hUM3":[function(require,module,exports) {
"use strict";function e(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"Ia3Z":[function(require,module,exports) {
"use strict";function t(t,e){return t(e={exports:{}},e.exports),e.exports}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(function(t){var e=t.exports=function(t,r){if(r||(r=16),void 0===t&&(t=128),t<=0)return"0";for(var o=Math.log(Math.pow(2,t))/Math.log(r),n=2;o===1/0;n*=2)o=Math.log(Math.pow(2,t/n))/Math.log(r)*n;var a=o-Math.floor(o),i="";for(n=0;n<Math.floor(o);n++){i=Math.floor(Math.random()*r).toString(r)+i}if(a){var s=Math.pow(r,a);i=Math.floor(Math.random()*s).toString(r)+i}var h=parseInt(i,r);return h!==1/0&&h>=Math.pow(2,t)?e(t,r):i};e.rack=function(t,r,o){var n=function(n){var i=0;do{if(i++>10){if(!o)throw new Error("too many ID collisions, use more bits");t+=o}var s=e(t,r)}while(Object.hasOwnProperty.call(a,s));return a[s]=n,s},a=n.hats={};return n.get=function(t){return n.hats[t]},n.set=function(t,e){return n.hats[t]=e,n},n.bits=t||128,n.base=r||16,n}});function r(t){if(!(this instanceof r))return new r(t);t=t||[128,36,1],this._seed=t.length?e.rack(t[0],t[1],t[2]):t}r.prototype.next=function(t){return this._seed(t||!0)},r.prototype.nextPrefixed=function(t,e){var r;do{r=t+this.next(!0)}while(this.assigned(r));return this.claim(r,e),r},r.prototype.claim=function(t,e){this._seed.set(t,e||!0)},r.prototype.assigned=function(t){return this._seed.get(t)||!1},r.prototype.unclaim=function(t){delete this._seed.hats[t]},r.prototype.clear=function(){var t,e=this._seed.hats;for(t in e)this.unclaim(t)};var o=exports.default=r;
},{}],"AmEv":[function(require,module,exports) {
"use strict";function t(t){return Array.prototype.concat.apply([],t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.assign=z,exports.bind=q,exports.debounce=T,exports.ensureArray=l,exports.every=g,exports.filter=b,exports.find=a,exports.findIndex=y,exports.flatten=t,exports.forEach=d,exports.get=K,exports.groupBy=k,exports.has=x,exports.isArray=i,exports.isDefined=o,exports.isFunction=s,exports.isNil=u,exports.isNumber=f,exports.isObject=c,exports.isString=p,exports.isUndefined=e,exports.keys=v,exports.map=m,exports.matchPattern=E,exports.merge=C,exports.omit=U,exports.pick=M,exports.reduce=j,exports.set=I,exports.size=w,exports.some=_,exports.sortBy=B,exports.throttle=G,exports.unionBy=void 0,exports.uniqueBy=A,exports.values=O,exports.without=h;const n=Object.prototype.toString,r=Object.prototype.hasOwnProperty;function e(t){return void 0===t}function o(t){return void 0!==t}function u(t){return null==t}function i(t){return"[object Array]"===n.call(t)}function c(t){return"[object Object]"===n.call(t)}function f(t){return"[object Number]"===n.call(t)}function s(t){const r=n.call(t);return"[object Function]"===r||"[object AsyncFunction]"===r||"[object GeneratorFunction]"===r||"[object AsyncGeneratorFunction]"===r||"[object Proxy]"===r}function p(t){return"[object String]"===n.call(t)}function l(t){if(!i(t))throw new Error("must supply array")}function x(t,n){return!u(t)&&r.call(t,n)}function a(t,n){const r=P(n);let e;return d(t,function(t,n){if(r(t,n))return e=t,!1}),e}function y(t,n){const r=P(n);let e=i(t)?-1:void 0;return d(t,function(t,n){if(r(t,n))return e=n,!1}),e}function b(t,n){const r=P(n);let e=[];return d(t,function(t,n){r(t,n)&&e.push(t)}),e}function d(t,n){let r,o;if(e(t))return;const u=i(t)?S:D;for(let e in t)if(x(t,e)&&!1===(o=n(r=t[e],u(e))))return r}function h(t,n){if(e(t))return[];l(t);const r=P(n);return t.filter(function(t,n){return!r(t,n)})}function j(t,n,r){return d(t,function(t,e){r=n(r,t,e)}),r}function g(t,n){return!!j(t,function(t,r,e){return t&&n(r,e)},!0)}function _(t,n){return!!a(t,n)}function m(t,n){let r=[];return d(t,function(t,e){r.push(n(t,e))}),r}function v(t){return t&&Object.keys(t)||[]}function w(t){return v(t).length}function O(t){return m(t,t=>t)}function k(t,n,r={}){return n=F(n),d(t,function(t){let e=n(t)||"_",o=r[e];o||(o=r[e]=[]),o.push(t)}),r}function A(t,...n){t=F(t);let r={};return d(n,n=>k(n,t,r)),m(r,function(t,n){return t[0]})}const N=exports.unionBy=A;function B(t,n){n=F(n);let r=[];return d(t,function(t,e){let o=n(t,e),u={d:o,v:t};for(var i=0;i<r.length;i++){let{d:t}=r[i];if(o<t)return void r.splice(i,0,u)}r.push(u)}),m(r,t=>t.v)}function E(t){return function(n){return g(t,function(t,r){return n[r]===t})}}function F(t){return s(t)?t:n=>n[t]}function P(t){return s(t)?t:n=>n===t}function D(t){return t}function S(t){return Number(t)}function T(t,n){let r,e,o,u;function i(r){let i=Date.now(),s=r?0:u+n-i;if(s>0)return c(s);t.apply(o,e),f()}function c(t){r=setTimeout(i,t)}function f(){r&&clearTimeout(r),r=u=e=o=void 0}function s(...t){u=Date.now(),e=t,o=this,r||c(n)}return s.flush=function(){r&&i(!0),f()},s.cancel=f,s}function G(t,n){let r=!1;return function(...e){r||(t(...e),r=!0,setTimeout(()=>{r=!1},n))}}function q(t,n){return t.bind(n)}function z(t,...n){return Object.assign(t,...n)}function I(t,n,r){let i=t;return d(n,function(t,c){if("number"!=typeof t&&"string"!=typeof t)throw new Error("illegal key type: "+typeof t+". Key should be of type number or string.");if("constructor"===t)throw new Error("illegal key: constructor");if("__proto__"===t)throw new Error("illegal key: __proto__");let f=n[c+1],s=i[t];o(f)&&u(s)&&(s=i[t]=isNaN(+f)?{}:[]),e(f)?e(r)?delete i[t]:i[t]=r:i=s}),t}function K(t,n,r){let o=t;return d(n,function(t){if(u(o))return o=void 0,!1;o=o[t]}),e(o)?r:o}function M(t,n){let r={},e=Object(t);return d(n,function(n){n in e&&(r[n]=t[n])}),r}function U(t,n){let r={};return d(Object(t),function(t,e){-1===n.indexOf(e)&&(r[e]=t)}),r}function C(t,...n){return n.length?(d(n,function(n){n&&c(n)&&d(n,function(n,r){if("__proto__"===r)return;let e=t[r];c(n)?(c(e)||(e={}),t[r]=C(e,n)):t[r]=n})}),t):t}
},{}],"fWg5":[function(require,module,exports) {
"use strict";function t(t,e){return e.forEach(function(e){e&&"string"!=typeof e&&!Array.isArray(e)&&Object.keys(e).forEach(function(r){if("default"!==r&&!(r in t)){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})}),Object.freeze(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.assignStyle=s,exports.attr=a,exports.classes=f,exports.clear=h,exports.closest=y,exports.event=exports.domify=exports.delegate=void 0,exports.matches=P,exports.query=k,exports.queryAll=D,exports.remove=H;const e=Object.prototype.toString,r=Object.prototype.hasOwnProperty;function n(t){return void 0===t}function o(t){return"[object Array]"===e.call(t)}function i(t,e){return r.call(t,e)}function l(t,e){let r,l;if(n(t))return;const s=o(t)?u:c;for(let n in t)if(i(t,n)&&!1===(l=e(r=t[n],s(n))))return r}function c(t){return t}function u(t){return Number(t)}function s(t,...e){const r=t.style;return l(e,function(t){t&&l(t,function(t,e){r[e]=t})}),t}function a(t,e,r){return 2==arguments.length?t.getAttribute(e):null===r?t.removeAttribute(e):(t.setAttribute(e,r),t)}const d=Object.prototype.toString;function f(t){return new p(t)}function p(t){if(!t||!t.nodeType)throw new Error("A DOM element reference is required");this.el=t,this.list=t.classList}function h(t){for(var e;e=t.firstChild;)t.removeChild(e);return t}function y(t,e,r){var n=r?t:t.parentNode;return n&&"function"==typeof n.closest&&n.closest(e)||null}p.prototype.add=function(t){return this.list.add(t),this},p.prototype.remove=function(t){return"[object RegExp]"==d.call(t)?this.removeMatching(t):(this.list.remove(t),this)},p.prototype.removeMatching=function(t){const e=this.array();for(let r=0;r<e.length;r++)t.test(e[r])&&this.remove(e[r]);return this},p.prototype.toggle=function(t,e){return void 0!==e?e!==this.list.toggle(t,e)&&this.list.toggle(t):this.list.toggle(t),this},p.prototype.array=function(){return Array.from(this.list)},p.prototype.has=p.prototype.contains=function(t){return this.list.contains(t)};var v,g,b,m={};function x(){v=window.addEventListener?"addEventListener":"attachEvent",g=window.removeEventListener?"removeEventListener":"detachEvent",b="addEventListener"!==v?"on":""}var w=m.bind=function(t,e,r,n){return v||x(),t[v](b+e,r,n||!1),r},E=m.unbind=function(t,e,r,n){return g||x(),t[g](b+e,r,n||!1),r},O=exports.event=t({__proto__:null,bind:w,unbind:E,default:m},[m]),C=["focus","blur"];function j(t,e,r,n,o){return-1!==C.indexOf(r)&&(o=!0),O.bind(t,r,function(r){var o=r.target||r.srcElement;r.delegateTarget=y(o,e,!0),r.delegateTarget&&n.call(t,r)},o)}function A(t,e,r,n){return-1!==C.indexOf(e)&&(n=!0),O.unbind(t,e,r,n)}var L,T=exports.delegate={bind:j,unbind:A},_=S,M=!1;"undefined"!=typeof document&&((L=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',M=!L.getElementsByTagName("link").length,L=void 0);var N={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:M?[1,"X<div>","</div>"]:[0,"",""]};function S(t,e){if("string"!=typeof t)throw new TypeError("String expected");e||(e=document);var r=/<([\w:]+)/.exec(t);if(!r)return e.createTextNode(t);t=t.replace(/^\s+|\s+$/g,"");var n=r[1];if("body"==n)return(o=e.createElement("html")).innerHTML=t,o.removeChild(o.lastChild);var o,i=Object.prototype.hasOwnProperty.call(N,n)?N[n]:N._default,l=i[0],c=i[1],u=i[2];for((o=e.createElement("div")).innerHTML=c+t+u;l--;)o=o.lastChild;if(o.firstChild==o.lastChild)return o.removeChild(o.firstChild);for(var s=e.createDocumentFragment();o.firstChild;)s.appendChild(o.removeChild(o.firstChild));return s}N.td=N.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],N.option=N.optgroup=[1,'<select multiple="multiple">',"</select>"],N.thead=N.tbody=N.colgroup=N.caption=N.tfoot=[1,"<table>","</table>"],N.polyline=N.ellipse=N.polygon=N.circle=N.text=N.line=N.path=N.rect=N.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var q=exports.domify=_;function P(t,e){return t&&"function"==typeof t.matches&&t.matches(e)||!1}function k(t,e){return(e=e||document).querySelector(t)}function D(t,e){return(e=e||document).querySelectorAll(t)}function H(t){t.parentNode&&t.parentNode.removeChild(t)}
},{}],"WdCh":[function(require,module,exports) {
"use strict";function e(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch(r){}return e}function t(t,r){return r.appendChild(e(t,r))}function r(e,r){return t(r,e),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.append=r,exports.appendTo=t,exports.attr=c,exports.classes=u,exports.clear=p,exports.clone=d,exports.create=y,exports.createMatrix=A,exports.createPoint=C,exports.createTransform=N,exports.innerSVG=z,exports.off=b,exports.on=x,exports.prepend=$,exports.prependTo=q,exports.remove=_,exports.replace=B,exports.select=L,exports.selectAll=P,exports.transform=Z;var n=2,o={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":n,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":n,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function i(e,t){return o[t]?e.style[t]:e.getAttributeNS(null,t)}function s(e,t,r){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),s=o[i];s?(s===n&&"number"==typeof r&&(r=String(r)+"px"),e.style[i]=r):e.setAttributeNS(null,t,r)}function a(e,t){var r,n,o=Object.keys(t);for(r=0;n=o[r];r++)s(e,n,t[n])}function c(e,t,r){if("string"==typeof t){if(void 0===r)return i(e,t);s(e,t,r)}else a(e,t);return e}const l=Object.prototype.toString;function u(e){return new f(e)}function f(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}function p(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function d(e){return e.cloneNode(!0)}f.prototype.add=function(e){return this.list.add(e),this},f.prototype.remove=function(e){return"[object RegExp]"==l.call(e)?this.removeMatching(e):(this.list.remove(e),this)},f.prototype.removeMatching=function(e){const t=this.array();for(let r=0;r<t.length;r++)e.test(t[r])&&this.remove(t[r]);return this},f.prototype.toggle=function(e,t){return void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this},f.prototype.array=function(){return Array.from(this.list)},f.prototype.has=f.prototype.contains=function(e){return this.list.contains(e)};var h={svg:"http://www.w3.org/2000/svg"},m='<svg xmlns="'+h.svg+'"';function g(e){var t=!1;"<svg"===e.substring(0,4)?-1===e.indexOf(h.svg)&&(e=m+e.substring(4)):(e=m+">"+e+"</svg>",t=!0);var r=v(e);if(!t)return r;for(var n=document.createDocumentFragment(),o=r.firstChild;o.firstChild;)n.appendChild(o.firstChild);return n}function v(e){var t;return(t=new DOMParser).async=!1,t.parseFromString(e,"text/xml")}function y(e,t){var r;return"<"===(e=e.trim()).charAt(0)?(r=g(e).firstChild,r=document.importNode(r,!0)):r=document.createElementNS(h.svg,e),t&&c(r,t),r}function x(e,t,r,n){e.addEventListener(t,r,n)}function b(e,t,r,n){e.removeEventListener(t,r,n)}var w=null;function k(){return null===w&&(w=y("svg")),w}function S(e,t){var r,n,o=Object.keys(t);for(r=0;n=o[r];r++)e[n]=t[n];return e}function C(e,t){var r=k().createSVGPoint();switch(arguments.length){case 0:return r;case 2:e={x:e,y:t}}return S(r,e)}function A(e,t,r,n,o,i){var s=k().createSVGMatrix();switch(arguments.length){case 0:return s;case 1:return S(s,e);case 6:return S(s,{a:e,b:t,c:r,d:n,e:o,f:i})}}function N(e){return e?k().createSVGTransformFromMatrix(e):k().createSVGTransform()}var V=/([&<>]{1})/g,M=/([&<>\n\r"]{1})/g,T={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function j(e,t){return e.replace(t,function(e,t){return T[t]||t})}function E(e,t){var r,n,o,i,s;switch(e.nodeType){case 3:t.push(j(e.textContent,V));break;case 1:if(t.push("<",e.tagName),e.hasAttributes())for(r=0,n=(o=e.attributes).length;r<n;++r)i=o.item(r),t.push(" ",i.name,'="',j(i.value,M),'"');if(e.hasChildNodes()){for(t.push(">"),r=0,n=(s=e.childNodes).length;r<n;++r)E(s.item(r),t);t.push("</",e.tagName,">")}else t.push("/>");break;case 8:t.push("\x3c!--",j(e.nodeValue,V),"--\x3e");break;case 4:t.push("<![CDATA[",e.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+e.nodeType)}return t}function G(e,r){var n=g(r);if(p(e),r){O(n)||(n=n.documentElement);for(var o=F(n.childNodes),i=0;i<o.length;i++)t(o[i],e)}}function D(e){for(var t=e.firstChild,r=[];t;)E(t,r),t=t.nextSibling;return r.join("")}function O(e){return"#document-fragment"===e.nodeName}function z(e,t){if(void 0!==t){try{G(e,t)}catch(r){throw new Error("error parsing SVG: "+r.message)}return e}return D(e)}function F(e){return Array.prototype.slice.call(e)}function L(e,t){return e.querySelector(t)}function P(e,t){var r=e.querySelectorAll(t);return[].map.call(r,function(e){return e})}function q(t,r){return r.insertBefore(e(t,r),r.firstChild||null)}function $(e,t){return q(t,e),e}function _(e){var t=e.parentNode;return t&&t.removeChild(e),e}function B(t,r){return t.parentNode.replaceChild(e(r,t),t),r}function I(e,t){return t instanceof SVGMatrix?e.createSVGTransformFromMatrix(t):t}function R(e,t){var r,n;for(e.clear(),r=0;n=t[r];r++)e.appendItem(I(e,n))}function Z(e,t){var r=e.transform.baseVal;return t&&(Array.isArray(t)||(t=[t]),R(r,t)),r.consolidate()}
},{}],"cPfe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Injector=f,exports.annotate=o,exports.parseAnnotations=u;const n=/^class[ {]/;function t(t){return n.test(t.toString())}function e(n){return Array.isArray(n)}function r(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function o(...n){1===n.length&&e(n[0])&&(n=n[0]);const t=(n=[...n]).pop();return t.$inject=n,t}const i=/constructor\s*[^(]*\(\s*([^)]*)\)/m,c=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,s=/\/\*([^*]*)\*\//m;function u(n){if("function"!=typeof n)throw new Error(`Cannot annotate "${n}". Expected a function!`);const e=n.toString().match(t(n)?i:c);if(!e)return[];const r=e[1]||e[2];return r&&r.split(",").map(n=>{const t=n.match(s);return(t&&t[1]||n).trim()})||[]}function f(n,t){t=t||{get:function(n,t){if(i.push(n),!1===t)return null;throw _(`No provider for "${n}"!`)}};const i=[],c=this._providers=Object.create(t._providers||null),s=this._instances=Object.create(null),a=s.injector=this,_=function(n){const t=i.join(" -> ");return i.length=0,new Error(t?`${n} (Resolving: ${t})`:n)};function l(n,e){if(!c[n]&&-1!==n.indexOf(".")){const t=n.split(".");let e=l(t.shift());for(;t.length;)e=e[t.shift()];return e}if(r(s,n))return s[n];if(r(c,n)){if(-1!==i.indexOf(n))throw i.push(n),_("Cannot resolve circular dependency!");return i.push(n),s[n]=c[n][0](c[n][1]),i.pop(),s[n]}return t.get(n,e)}function d(n,t){if(void 0===t&&(t={}),"function"!=typeof n){if(!e(n))throw _(`Cannot invoke "${n}". Expected a function!`);n=o(n.slice())}return{fn:n,dependencies:(n.$inject||u(n)).map(n=>r(t,n)?t[n]:l(n))}}function h(n){const{fn:t,dependencies:e}=d(n);return new(Function.prototype.bind.apply(t,[null].concat(e)))}function v(n,t,e){const{fn:r,dependencies:o}=d(n,e);return r.apply(t,o)}function y(n){return o(t=>n.get(t))}function O(n,t){if(t&&t.length){const e=Object.create(null),r=Object.create(null),o=[],i=[],s=[];let u,f,p,a;for(let n in c)u=c[n],-1!==t.indexOf(n)&&("private"===u[2]?-1===(f=o.indexOf(u[3]))?(a=y(p=u[3].createChild([],t)),o.push(u[3]),i.push(p),s.push(a),e[n]=[a,n,"private",p]):e[n]=[s[f],n,"private",i[f]]:e[n]=[u[2],u[1]],r[n]=!0),"factory"!==u[2]&&"type"!==u[2]||!u[1].$scope||t.forEach(t=>{-1!==u[1].$scope.indexOf(t)&&(e[n]=[u[2],u[1]],r[t]=!0)});t.forEach(n=>{if(!r[n])throw new Error('No provider for "'+n+'". Cannot use provider from the parent!')}),n.unshift(e)}return new f(n,a)}const g={factory:v,type:h,value:function(n){return n}};function j(n,t){const e=n.__init__||[];return function(){e.forEach(n=>{"string"==typeof n?t.get(n):t.invoke(n)})}}function x(n){const t=n.__exports__;if(t){const e=n.__modules__,r=Object.keys(n).reduce((t,e)=>("__exports__"!==e&&"__modules__"!==e&&"__init__"!==e&&"__depends__"!==e&&(t[e]=n[e]),t),Object.create(null)),i=O((e||[]).concat(r)),s=o(function(n){return i.get(n)});t.forEach(function(n){c[n]=[s,n,"private",i]});const u=(n.__init__||[]).slice();return u.unshift(function(){i.init()}),j(n=Object.assign({},n,{__init__:u}),i)}return Object.keys(n).forEach(function(t){if("__init__"===t||"__depends__"===t)return;if("private"===n[t][2])return void(c[t]=n[t]);const e=n[t][0],r=n[t][1];c[t]=[g[e],p(e,r),e]}),j(n,a)}function m(n,t){return-1!==n.indexOf(t)?n:-1!==(n=(t.__depends__||[]).reduce(m,n)).indexOf(t)?n:n.concat(t)}this.get=l,this.invoke=v,this.instantiate=h,this.createChild=O,this.init=function(n){const t=n.reduce(m,[]).map(x);let e=!1;return function(){e||(e=!0,t.forEach(n=>n()))}}(n)}function p(n,t){return"value"!==n&&e(t)&&(t=o(t.slice())),t}
},{}],"ebx3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=1e3;function t(t,n){var r=this;n=n||e,t.on(["render.shape","render.connection"],n,function(e,t){var n=e.type,o=t.element,a=t.gfx,p=t.attrs;if(r.canRender(o))return"render.shape"===n?r.drawShape(a,o,p):r.drawConnection(a,o,p)}),t.on(["render.getShapePath","render.getConnectionPath"],n,function(e,t){if(r.canRender(t))return"render.getShapePath"===e.type?r.getShapePath(t):r.getConnectionPath(t)})}t.prototype.canRender=function(e){},t.prototype.drawShape=function(e,t){},t.prototype.drawConnection=function(e,t){},t.prototype.getShapePath=function(e){},t.prototype.getConnectionPath=function(e){};
},{}],"D85W":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.componentsToPath=r,exports.createLine=x,exports.toSVGPoints=e,exports.updateLine=p;var t=require("min-dash"),n=require("tiny-svg");function r(t){return t.flat().join(",").replace(/,?([A-z]),?/g,"$1")}function e(t){for(var n,r="",e=0;n=t[e];e++)r+=n.x+","+n.y+" ";return r}function o(t){return["M",t.x,t.y]}function u(t){return["L",t.x,t.y]}function s(t,n,r){return["C",t.x,t.y,n.x,n.y,r.x,r.y]}function i(t,n){const r=t.length,e=[o(t[0])];for(let o=1;o<r;o++){const r=t[o-1],i=t[o],x=t[o+1];if(!x||!n){e.push(u(i));continue}const p=Math.min(n,a(i.x-r.x,i.y-r.y),a(x.x-i.x,x.y-i.y));if(!p){e.push(u(i));continue}const f=c(i,r,p),y=c(i,r,.5*p),h=c(i,x,p),d=c(i,x,.5*p);e.push(u(f)),e.push(s(y,d,h))}return e}function c(t,n,r){const e=n.x-t.x,o=n.y-t.y,u=r/a(e,o);return{x:t.x+e*u,y:t.y+o*u}}function a(t,n){return Math.sqrt(Math.pow(t,2)+Math.pow(n,2))}function x(r,e,o){(0,t.isNumber)(e)&&(o=e,e=null),e||(e={});const u=(0,n.create)("path",e);return(0,t.isNumber)(o)&&(u.dataset.cornerRadius=String(o)),p(u,r)}function p(t,e){const o=parseInt(t.dataset.cornerRadius,10)||0;return(0,n.attr)(t,{d:r(i(e,o))}),t}
},{"min-dash":"AmEv","tiny-svg":"WdCh"}],"KTcn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=t,exports.eachElement=r,exports.getBBox=c,exports.getClosure=d,exports.getEnclosedElements=a,exports.getParents=e,exports.getType=f,exports.isFrameElement=h,exports.selfAndAllChildren=u,exports.selfAndChildren=o,exports.selfAndDirectChildren=s;var n=require("min-dash");function e(e){return(0,n.filter)(e,function(t){return!(0,n.find)(e,function(n){return n!==t&&i(t,n)})})}function i(n,e){if(e){if(n===e)return e;if(n.parent)return i(n.parent,e)}}function t(n,e,i){var t=!i||-1===n.indexOf(e);return t&&n.push(e),t}function r(e,i,t){t=t||0,(0,n.isArray)(e)||(e=[e]),(0,n.forEach)(e,function(e,o){var s=i(e,o,t);(0,n.isArray)(s)&&s.length&&r(s,i,t+1)})}function o(n,e,i){var o=[],s=[];return r(n,function(n,r,u){t(o,n,e);var d=n.children;if((-1===i||u<i)&&d&&t(s,d,e))return d}),o}function s(n,e){return o(n,!e,1)}function u(n,e){return o(n,!e,-1)}function d(e,i,t){(0,n.isUndefined)(i)&&(i=!0),(0,n.isObject)(i)&&(t=i,i=!0);var o=l((t=t||{}).allShapes),s=l(t.allConnections),u=l(t.enclosedElements),d=l(t.enclosedConnections),c=l(t.topLevel,i&&(0,n.groupBy)(e,function(n){return n.id}));function a(n){c[n.source.id]&&c[n.target.id]&&(c[n.id]=[n]),o[n.source.id]&&o[n.target.id]&&(d[n.id]=u[n.id]=n),s[n.id]=n}return r(e,function(e){if(u[e.id]=e,!e.waypoints)return o[e.id]=e,(0,n.forEach)(e.incoming,a),(0,n.forEach)(e.outgoing,a),e.children;d[e.id]=s[e.id]=e}),{allShapes:o,allConnections:s,topLevel:c,enclosedConnections:d,enclosedElements:u}}function c(e,i){var t,r,o,s;return i=!!i,(0,n.isArray)(e)||(e=[e]),(0,n.forEach)(e,function(n){var e=n;n.waypoints&&!i&&(e=c(n.waypoints,!0));var u=e.x,d=e.y,a=e.height||0,f=e.width||0;(u<t||void 0===t)&&(t=u),(d<r||void 0===r)&&(r=d),(u+f>o||void 0===o)&&(o=u+f),(d+a>s||void 0===s)&&(s=d+a)}),{x:t,y:r,height:s-r,width:o-t}}function a(e,i){var t={};return(0,n.forEach)(e,function(e){var r=e;r.waypoints&&(r=c(r)),!(0,n.isNumber)(i.y)&&r.x>i.x&&(t[e.id]=e),!(0,n.isNumber)(i.x)&&r.y>i.y&&(t[e.id]=e),r.x>i.x&&r.y>i.y&&((0,n.isNumber)(i.width)&&(0,n.isNumber)(i.height)&&r.width+r.x<i.width+i.x&&r.height+r.y<i.height+i.y?t[e.id]=e:(0,n.isNumber)(i.width)&&(0,n.isNumber)(i.height)||(t[e.id]=e))}),t}function f(n){return"waypoints"in n?"connection":"x"in n?"shape":"root"}function h(n){return!(!n||!n.isFrame)}function l(e,i){return(0,n.assign)({},e||{},i||{})}
},{"min-dash":"AmEv"}],"Vjeg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var t=o(require("inherits-browser")),e=o(require("./BaseRenderer")),r=require("../util/RenderUtil"),i=require("tiny-svg"),n=require("min-dash"),s=require("../util/Elements");function o(t){return t&&t.__esModule?t:{default:t}}var a=1;function u(t,r){e.default.call(this,t,a),this.CONNECTION_STYLE=r.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=r.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=r.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}(0,t.default)(u,e.default),u.prototype.canRender=function(){return!0},u.prototype.drawShape=function(t,e,r){var o=(0,i.create)("rect");return(0,i.attr)(o,{x:0,y:0,width:e.width||0,height:e.height||0}),(0,s.isFrameElement)(e)?(0,i.attr)(o,(0,n.assign)({},this.FRAME_STYLE,r||{})):(0,i.attr)(o,(0,n.assign)({},this.SHAPE_STYLE,r||{})),(0,i.append)(t,o),o},u.prototype.drawConnection=function(t,e,s){var o=(0,r.createLine)(e.waypoints,(0,n.assign)({},this.CONNECTION_STYLE,s||{}));return(0,i.append)(t,o),o},u.prototype.getShapePath=function(t){var e=t.x,i=t.y,n=t.width,s=[["M",e,i],["l",n,0],["l",0,t.height],["l",-n,0],["z"]];return(0,r.componentsToPath)(s)},u.prototype.getConnectionPath=function(t){var e,i,n=t.waypoints,s=[];for(e=0;i=n[e];e++)i=i.original||i,s.push([0===e?"M":"L",i.x,i.y]);return(0,r.componentsToPath)(s)},u.$inject=["eventBus","styles"];
},{"inherits-browser":"hUM3","./BaseRenderer":"ebx3","../util/RenderUtil":"D85W","tiny-svg":"WdCh","min-dash":"AmEv","../util/Elements":"KTcn"}],"zph5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("min-dash");function t(){var t={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},n=this;this.cls=function(t,n,s){var r=this.style(n,s);return(0,e.assign)(r,{class:t})},this.style=function(n,s){(0,e.isArray)(n)||s||(s=n,n=[]);var r=(0,e.reduce)(n,function(n,s){return(0,e.assign)(n,t[s]||{})},{});return s?(0,e.assign)(r,s):r},this.computeStyle=function(t,s,r){return(0,e.isArray)(s)||(r=s,s=[]),n.style(s||[],(0,e.assign)({},r,t||{}))}}
},{"min-dash":"AmEv"}],"JrPQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./DefaultRenderer")),t=r(require("./Styles"));function r(e){return e&&e.__esModule?e:{default:e}}var u=exports.default={__init__:["defaultRenderer"],defaultRenderer:["type",e.default],styles:["type",t.default]};
},{"./DefaultRenderer":"Vjeg","./Styles":"zph5"}],"Pujo":[function(require,module,exports) {
"use strict";function e(e,r){if(!e||!r)return-1;var i=e.indexOf(r);return-1!==i&&e.splice(i,1),i}function r(e,r,i){if(e&&r){"number"!=typeof i&&(i=-1);var n=e.indexOf(r);if(-1!==n){if(n===i)return;if(-1===i)return;e.splice(n,1)}-1!==i?e.splice(i,0,r):e.push(r)}}function i(e,r){return e&&r?e.indexOf(r):-1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=r,exports.indexOf=i,exports.remove=e;
},{}],"aD2B":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMidPoint=x,exports.pointDistance=n,exports.pointInRect=s,exports.pointsAligned=o,exports.pointsAlignedOnAxis=i,exports.pointsOnLine=r;var t=require("min-dash");function n(t,n){return t&&n?Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)):-1}function r(t,r,e,o){if(void 0===o&&(o=5),!t||!r||!e)return!1;var i=(r.x-t.x)*(e.y-t.y)-(r.y-t.y)*(e.x-t.x),s=n(t,r);return Math.abs(i/s)<=o}var e=2;function o(t,n){var r=Array.from(arguments).flat();const e={x:"v",y:"h"};for(const[o,s]of Object.entries(e))if(i(o,r))return s;return!1}function i(n,r){const o=r[0];return(0,t.every)(r,function(t){return Math.abs(o[n]-t[n])<=e})}function s(t,n,r){return r=r||0,t.x>n.x-r&&t.y>n.y-r&&t.x<n.x+n.width+r&&t.y<n.y+n.height+r}function x(t,n){return{x:Math.round(t.x+(n.x-t.x)/2),y:Math.round(t.y+(n.y-t.y)/2)}}
},{"min-dash":"AmEv"}],"DKLd":[function(require,module,exports) {
"use strict";var t=/,?([a-z]),?/gi,r=parseFloat,e=Math,n=e.PI,a=e.min,c=e.max,i=e.pow,o=e.abs,u=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/gi,s=/(-?\d*\.?\d*(?:e[-+]?\d+)?)[\s]*,?[\s]*/gi,x=Array.isArray||function(t){return t instanceof Array};function y(t,r){return Object.prototype.hasOwnProperty.call(t,r)}function l(t){if("function"==typeof t||Object(t)!==t)return t;var r=new t.constructor;for(var e in t)y(t,e)&&(r[e]=l(t[e]));return r}function f(t,r){for(var e=0,n=t.length;e<n;e++)if(t[e]===r)return t.push(t.splice(e,1)[0])}function p(t){return function r(){var e=Array.prototype.slice.call(arguments,0),n=e.join("␀"),a=r.cache=r.cache||{},c=r.count=r.count||[];return y(a,n)?(f(c,n),a[n]):(c.length>=1e3&&delete a[c.shift()],c.push(n),a[n]=t.apply(0,e),a[n])}}function h(t){if(!t)return null;var r=v(t);if(r.arr)return l(r.arr);var e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},n=[];return x(t)&&x(t[0])&&(n=l(t)),n.length||String(t).replace(u,function(t,r,a){var c=[],i=r.toLowerCase();for(a.replace(s,function(t,r){r&&c.push(+r)}),"m"==i&&c.length>2&&(n.push([r].concat(c.splice(0,2))),i="l",r="m"==r?"l":"L");c.length>=e[i]&&(n.push([r].concat(c.splice(0,e[i]))),e[i]););}),n.toString=v.toString,r.arr=l(n),n}function v(t){var r=v.ps=v.ps||{};return r[t]?r[t].sleep=100:r[t]={sleep:100},setTimeout(function(){for(var e in r)y(r,e)&&e!=t&&(r[e].sleep--,!r[e].sleep&&delete r[e])}),r[t]}function g(t,r,e,n){return 1===arguments.length&&(r=t.y,e=t.width,n=t.height,t=t.x),{x:t,y:r,width:e,height:n,x2:t+e,y2:r+n}}function d(){return this.join(",").replace(t,"$1")}function b(t){var r=l(t);return r.toString=d,r}function C(t,r,e,n,a,c,o,u,s){var x=1-s,y=i(x,3),l=i(x,2),f=s*s*s,p=y*r+3*l*s*n+3*x*s*s*c+f*u;return{x:A(y*t+3*l*s*e+3*x*s*s*a+f*o),y:A(p)}}function q(t){var r=Q.apply(null,t);return g(r.x0,r.y0,r.x1-r.x0,r.y1-r.y0)}function F(t,r,e){return r>=t.x&&r<=t.x+t.width&&e>=t.y&&e<=t.y+t.height}function k(t,r){return t=g(t),F(r=g(r),t.x,t.y)||F(r,t.x2,t.y)||F(r,t.x,t.y2)||F(r,t.x2,t.y2)||F(t,r.x,r.y)||F(t,r.x2,r.y)||F(t,r.x,r.y2)||F(t,r.x2,r.y2)||(t.x<r.x2&&t.x>r.x||r.x<t.x2&&r.x>t.x)&&(t.y<r.y2&&t.y>r.y||r.y<t.y2&&r.y>t.y)}function w(t,r,e,n,a){return t*(t*(-3*r+9*e-9*n+3*a)+6*r-12*e+6*n)-3*r+3*e}function M(t,r,n,a,c,i,o,u,s){null==s&&(s=1);for(var x=(s=s>1?1:s<0?0:s)/2,y=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],l=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],f=0,p=0;p<12;p++){var h=x*y[p]+x,v=w(h,t,n,c,o),g=w(h,r,a,i,u),d=v*v+g*g;f+=l[p]*e.sqrt(d)}return x*f}function m(t,r,e,n,i,o,u,s){if(!(c(t,e)<a(i,u)||a(t,e)>c(i,u)||c(r,n)<a(o,s)||a(r,n)>c(o,s))){var x=(t*n-r*e)*(o-s)-(r-n)*(i*s-o*u),y=(t-e)*(o-s)-(r-n)*(i-u);if(y){var l=A(((t*n-r*e)*(i-u)-(t-e)*(i*s-o*u))/y),f=A(x/y),p=+l.toFixed(2),h=+f.toFixed(2);if(!(p<+a(t,e).toFixed(2)||p>+c(t,e).toFixed(2)||p<+a(i,u).toFixed(2)||p>+c(i,u).toFixed(2)||h<+a(r,n).toFixed(2)||h>+c(r,n).toFixed(2)||h<+a(o,s).toFixed(2)||h>+c(o,s).toFixed(2)))return{x:l,y:f}}}}function A(t){return Math.round(1e11*t)/1e11}function S(t,r,e){if(!k(q(t),q(r)))return e?0:[];for(var n=M.apply(0,t),a=M.apply(0,r),c=T(t)?1:~~(n/5)||1,i=T(r)?1:~~(a/5)||1,u=[],s=[],x={},y=e?0:[],l=0;l<c+1;l++){var f=C.apply(0,t.concat(l/c));u.push({x:f.x,y:f.y,t:l/c})}for(l=0;l<i+1;l++)f=C.apply(0,r.concat(l/i)),s.push({x:f.x,y:f.y,t:l/i});for(l=0;l<c;l++)for(var p=0;p<i;p++){var h,v=u[l],g=u[l+1],d=s[p],b=s[p+1],F=o(g.x-v.x)<.01?"y":"x",w=o(b.x-d.x)<.01?"y":"x",A=m(v.x,v.y,g.x,g.y,d.x,d.y,b.x,b.y);if(A){if(x[h=A.x.toFixed(9)+"#"+A.y.toFixed(9)])continue;x[h]=!0;var S=v.t+o((A[F]-v[F])/(g[F]-v[F]))*(g.t-v.t),j=d.t+o((A[w]-d[w])/(b[w]-d[w]))*(b.t-d.t);S>=0&&S<=1&&j>=0&&j<=1&&(e?y++:y.push({x:A.x,y:A.y,t1:S,t2:j}))}}return y}function j(t,r,e){t=U(t),r=U(r);for(var n,a,c,i,o,u,s,x,y,l,f=e?0:[],p=0,h=t.length;p<h;p++){var v=t[p];if("M"==v[0])n=o=v[1],a=u=v[2];else{"C"==v[0]?(y=[n,a].concat(v.slice(1)),n=y[6],a=y[7]):(y=[n,a,n,a,o,u,o,u],n=o,a=u);for(var g=0,d=r.length;g<d;g++){var b=r[g];if("M"==b[0])c=s=b[1],i=x=b[2];else{"C"==b[0]?(l=[c,i].concat(b.slice(1)),c=l[6],i=l[7]):(l=[c,i,c,i,s,x,s,x],c=s,i=x);var C=S(y,l,e);if(e)f+=C;else{for(var q=0,F=C.length;q<F;q++)C[q].segment1=p,C[q].segment2=g,C[q].bez1=y,C[q].bez2=l;f=f.concat(C)}}}}}return f}function z(t){var r=v(t);if(r.abs)return b(r.abs);if(x(t)&&x(t&&t[0])||(t=h(t)),!t||!t.length)return[["M",0,0]];var e,n=[],a=0,c=0,i=0,o=0,u=0;"M"==t[0][0]&&(i=a=+t[0][1],o=c=+t[0][2],u++,n[0]=["M",a,c]);for(var s,y,l=u,f=t.length;l<f;l++){if(n.push(s=[]),(e=(y=t[l])[0])!=e.toUpperCase())switch(s[0]=e.toUpperCase(),s[0]){case"A":s[1]=y[1],s[2]=y[2],s[3]=y[3],s[4]=y[4],s[5]=y[5],s[6]=+y[6]+a,s[7]=+y[7]+c;break;case"V":s[1]=+y[1]+c;break;case"H":s[1]=+y[1]+a;break;case"M":i=+y[1]+a,o=+y[2]+c;default:for(var p=1,g=y.length;p<g;p++)s[p]=+y[p]+(p%2?a:c)}else for(var C=0,q=y.length;C<q;C++)s[C]=y[C];switch(e=e.toUpperCase(),s[0]){case"Z":a=+i,c=+o;break;case"H":a=s[1];break;case"V":c=s[1];break;case"M":i=s[s.length-2],o=s[s.length-1];default:a=s[s.length-2],c=s[s.length-1]}}return n.toString=d,r.abs=b(n),n}function T(t){return t[0]===t[2]&&t[1]===t[3]&&t[4]===t[6]&&t[5]===t[7]}function H(t,r,e,n){return[t,r,e,n,e,n]}function L(t,r,e,n,a,c){return[1/3*t+2/3*e,1/3*r+2/3*n,1/3*a+2/3*e,1/3*c+2/3*n,a,c]}function O(t,r,a,c,i,u,s,x,y,l){var f,h=120*n/180,v=n/180*(+i||0),g=[],d=p(function(t,r,n){return{x:t*e.cos(n)-r*e.sin(n),y:t*e.sin(n)+r*e.cos(n)}});if(l)A=l[0],S=l[1],M=l[2],m=l[3];else{t=(f=d(t,r,-v)).x,r=f.y;var b=(t-(x=(f=d(x,y,-v)).x))/2,C=(r-(y=f.y))/2,q=b*b/(a*a)+C*C/(c*c);q>1&&(a*=q=e.sqrt(q),c*=q);var F=a*a,k=c*c,w=(u==s?-1:1)*e.sqrt(o((F*k-F*C*C-k*b*b)/(F*C*C+k*b*b))),M=w*a*C/c+(t+x)/2,m=w*-c*b/a+(r+y)/2,A=e.asin(((r-m)/c).toFixed(9)),S=e.asin(((y-m)/c).toFixed(9));(A=t<M?n-A:A)<0&&(A=2*n+A),(S=x<M?n-S:S)<0&&(S=2*n+S),s&&A>S&&(A-=2*n),!s&&S>A&&(S-=2*n)}var j=S-A;if(o(j)>h){var z=S,T=x,H=y;S=A+h*(s&&S>A?1:-1),g=O(x=M+a*e.cos(S),y=m+c*e.sin(S),a,c,i,0,s,T,H,[S,z,M,m])}j=S-A;var L=e.cos(A),Q=e.sin(A),U=e.cos(S),V=e.sin(S),X=e.tan(j/4),Y=4/3*a*X,P=4/3*c*X,Z=[t,r],I=[t+Y*Q,r-P*L],$=[x+Y*V,y-P*U],B=[x,y];if(I[0]=2*Z[0]-I[0],I[1]=2*Z[1]-I[1],l)return[I,$,B].concat(g);for(var D=[],E=0,G=(g=[I,$,B].concat(g).join().split(",")).length;E<G;E++)D[E]=E%2?d(g[E-1],g[E],v).y:d(g[E],g[E+1],v).x;return D}function Q(t,r,n,i,u,s,x,y){for(var l,f,p,h,v,g,d,b,C=[],q=[[],[]],F=0;F<2;++F)if(0==F?(f=6*t-12*n+6*u,l=-3*t+9*n-9*u+3*x,p=3*n-3*t):(f=6*r-12*i+6*s,l=-3*r+9*i-9*s+3*y,p=3*i-3*r),o(l)<1e-12){if(o(f)<1e-12)continue;0<(h=-p/f)&&h<1&&C.push(h)}else d=f*f-4*p*l,b=e.sqrt(d),d<0||(0<(v=(-f+b)/(2*l))&&v<1&&C.push(v),0<(g=(-f-b)/(2*l))&&g<1&&C.push(g));for(var k,w=C.length,M=w;w--;)k=1-(h=C[w]),q[0][w]=k*k*k*t+3*k*k*h*n+3*k*h*h*u+h*h*h*x,q[1][w]=k*k*k*r+3*k*k*h*i+3*k*h*h*s+h*h*h*y;return q[0][M]=t,q[1][M]=r,q[0][M+1]=x,q[1][M+1]=y,q[0].length=q[1].length=M+2,{x0:a.apply(0,q[0]),y0:a.apply(0,q[1]),x1:c.apply(0,q[0]),y1:c.apply(0,q[1])}}function U(t){var e=v(t);if(e.curve)return b(e.curve);for(var n=z(t),a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},c=function(t,r,e){var n,a;if(!t)return["C",r.x,r.y,r.x,r.y,r.x,r.y];switch(!(t[0]in{T:1,Q:1})&&(r.qx=r.qy=null),t[0]){case"M":r.X=t[1],r.Y=t[2];break;case"A":t=["C"].concat(O.apply(0,[r.x,r.y].concat(t.slice(1))));break;case"S":"C"==e||"S"==e?(n=2*r.x-r.bx,a=2*r.y-r.by):(n=r.x,a=r.y),t=["C",n,a].concat(t.slice(1));break;case"T":"Q"==e||"T"==e?(r.qx=2*r.x-r.qx,r.qy=2*r.y-r.qy):(r.qx=r.x,r.qy=r.y),t=["C"].concat(L(r.x,r.y,r.qx,r.qy,t[1],t[2]));break;case"Q":r.qx=t[1],r.qy=t[2],t=["C"].concat(L(r.x,r.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(H(r.x,r.y,t[1],t[2]));break;case"H":t=["C"].concat(H(r.x,r.y,t[1],r.y));break;case"V":t=["C"].concat(H(r.x,r.y,r.x,t[1]));break;case"Z":t=["C"].concat(H(r.x,r.y,r.X,r.Y))}return t},i=function(t,r){if(t[r].length>7){t[r].shift();for(var e=t[r];e.length;)o[r]="A",t.splice(r++,0,["C"].concat(e.splice(0,6)));t.splice(r,1),y=n.length}},o=[],u="",s="",x=0,y=n.length;x<y;x++){n[x]&&(u=n[x][0]),"C"!=u&&(o[x]=u,x&&(s=o[x-1])),n[x]=c(n[x],a,s),"A"!=o[x]&&"C"==u&&(o[x]="C"),i(n,x);var l=n[x],f=l.length;a.x=l[f-2],a.y=l[f-1],a.bx=r(l[f-4])||a.x,a.by=r(l[f-3])||a.y}return e.curve=b(n),n}module.exports=j;
},{}],"aRzT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asBounds=s,exports.asTRBL=u,exports.filterRedundantWaypoints=g,exports.getBoundsMid=h,exports.getConnectionMid=a,exports.getElementLineIntersection=f,exports.getIntersections=l,exports.getMid=d,exports.getOrientation=c,exports.roundBounds=o,exports.roundPoint=i;var t=require("min-dash"),n=require("../util/Geometry"),e=r(require("path-intersection"));function r(t){return t&&t.__esModule?t:{default:t}}function o(t){return{x:Math.round(t.x),y:Math.round(t.y),width:Math.round(t.width),height:Math.round(t.height)}}function i(t){return{x:Math.round(t.x),y:Math.round(t.y)}}function u(t){return{top:t.y,right:t.x+(t.width||0),bottom:t.y+(t.height||0),left:t.x}}function s(t){return{x:t.left,y:t.top,width:t.right-t.left,height:t.bottom-t.top}}function h(t){return i({x:t.x+(t.width||0)/2,y:t.y+(t.height||0)/2})}function a(t){for(var n=t.waypoints,e=n.reduce(function(t,e,r){var o=n[r-1];if(o){var i=t[t.length-1],u=i&&i.endLength||0,s=p(o,e);t.push({start:o,end:e,startLength:u,endLength:u+s,length:s})}return t},[]),r=e.reduce(function(t,n){return t+n.length},0)/2,o=0,i=e[o];i.endLength<r;)i=e[++o];var u=(r-i.startLength)/i.length;return{x:i.start.x+(i.end.x-i.start.x)*u,y:i.start.y+(i.end.y-i.start.y)*u}}function d(t){return x(t)?a(t):h(t)}function c(n,e,r){r=r||0,(0,t.isObject)(r)||(r={x:r,y:r});var o=u(n),i=u(e),s=o.bottom+r.y<=i.top,h=o.left-r.x>=i.right,a=o.top-r.y>=i.bottom,d=s?"top":a?"bottom":null,c=o.right+r.x<=i.left?"left":h?"right":null;return c&&d?d+"-"+c:c||d||"intersect"}function f(e,r,o){var u=l(e,r);return 1===u.length?i(u[0]):2===u.length&&(0,n.pointDistance)(u[0],u[1])<1?i(u[0]):u.length>1?i((u=(0,t.sortBy)(u,function(t){var n=Math.floor(100*t.t2)||1;return n=((n=100-n)<10?"0":"")+n,t.segment2+"#"+n}))[o?0:u.length-1]):null}function l(t,n){return(0,e.default)(t,n)}function g(t){t=t.slice();for(var e,r,o,i=0;t[i];)e=t[i],r=t[i-1],o=t[i+1],0===(0,n.pointDistance)(e,o)||(0,n.pointsOnLine)(r,o,e)?t.splice(i,1):i++;return t}function p(t,n){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function x(t){return!!t.waypoints}
},{"min-dash":"AmEv","../util/Geometry":"aD2B","path-intersection":"DKLd"}],"kYe2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=f;var t=require("min-dash"),e=require("min-dom"),i=require("../util/Collections"),o=require("../util/Elements"),r=require("../layout/LayoutUtil"),n=require("tiny-svg");function s(t,e){return Math.round(t*e)/e}function h(e){return(0,t.isNumber)(e)?e+"px":e}function a(t){for(;t.parent;)t=t.parent;return t}function l(i){const o=(i=(0,t.assign)({},{width:"100%",height:"100%"},i)).container||document.body,r=document.createElement("div");return r.setAttribute("class","djs-container djs-parent"),(0,e.assignStyle)(r,{position:"relative",overflow:"hidden",width:h(i.width),height:h(i.height)}),o.appendChild(r),r}function c(t,e,i){const o=(0,n.create)("g");(0,n.classes)(o).add(e);const r=void 0!==i?i:t.childNodes.length-1;return t.insertBefore(o,t.childNodes[r]||null),o}const d="base",p=0,u=1,y={shape:["x","y","width","height"],connection:["waypoints"]};function f(t,e,i,o){this._eventBus=e,this._elementRegistry=o,this._graphicsFactory=i,this._rootsIdx=0,this._layers={},this._planes=[],this._rootElement=null,this._init(t||{})}function _(t,e){const i="matrix("+e.a+","+e.b+","+e.c+","+e.d+","+e.e+","+e.f+")";t.setAttribute("transform",i)}f.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],f.prototype._init=function(e){const i=this._eventBus,o=this._container=l(e),r=this._svg=(0,n.create)("svg");(0,n.attr)(r,{width:"100%",height:"100%"}),(0,n.append)(o,r);const s=this._viewport=c(r,"viewport");!1!==e.deferUpdate&&(this._viewboxChanged=(0,t.debounce)((0,t.bind)(this._viewboxChanged,this),300)),i.on("diagram.init",()=>{i.fire("canvas.init",{svg:r,viewport:s})}),i.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","root.set"],()=>{delete this._cachedViewbox}),i.on("diagram.destroy",500,this._destroy,this),i.on("diagram.clear",500,this._clear,this)},f.prototype._destroy=function(){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});const t=this._container.parentNode;t&&t.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._rootElement,delete this._viewport},f.prototype._clear=function(){this._elementRegistry.getAll().forEach(t=>{const e=(0,o.getType)(t);"root"===e?this.removeRootElement(t):this._removeElement(t,e)}),this._planes=[],this._rootElement=null,delete this._cachedViewbox},f.prototype.getDefaultLayer=function(){return this.getLayer("base",0)},f.prototype.getLayer=function(t,e){if(!t)throw new Error("must specify a name");let i=this._layers[t];if(i||(i=this._layers[t]=this._createLayer(t,e)),void 0!==e&&i.index!==e)throw new Error("layer <"+t+"> already created at index <"+e+">");return i.group},f.prototype._getChildIndex=function(e){return(0,t.reduce)(this._layers,function(t,i){return i.visible&&e>=i.index&&t++,t},0)},f.prototype._createLayer=function(t,e){void 0===e&&(e=1);const i=this._getChildIndex(e);return{group:c(this._viewport,"layer-"+t,i),index:e,visible:!0}},f.prototype.showLayer=function(t){if(!t)throw new Error("must specify a name");const e=this._layers[t];if(!e)throw new Error("layer <"+t+"> does not exist");const i=this._viewport,o=e.group,r=e.index;if(e.visible)return o;const n=this._getChildIndex(r);return i.insertBefore(o,i.childNodes[n]||null),e.visible=!0,o},f.prototype.hideLayer=function(t){if(!t)throw new Error("must specify a name");const e=this._layers[t];if(!e)throw new Error("layer <"+t+"> does not exist");const i=e.group;return e.visible?((0,n.remove)(i),e.visible=!1,i):i},f.prototype._removeLayer=function(t){const e=this._layers[t];e&&(delete this._layers[t],(0,n.remove)(e.group))},f.prototype.getActiveLayer=function(){const t=this._findPlaneForRoot(this.getRootElement());return t?t.layer:null},f.prototype.findRoot=function(t){if("string"==typeof t&&(t=this._elementRegistry.get(t)),!t)return;return(this._findPlaneForRoot(a(t))||{}).rootElement},f.prototype.getRootElements=function(){return this._planes.map(function(t){return t.rootElement})},f.prototype._findPlaneForRoot=function(e){return(0,t.find)(this._planes,function(t){return t.rootElement===e})},f.prototype.getContainer=function(){return this._container},f.prototype._updateMarker=function(e,i,o){let r;e.id||(e=this._elementRegistry.get(e)),(r=this._elementRegistry._elements[e.id])&&((0,t.forEach)([r.gfx,r.secondaryGfx],function(t){t&&(o?(0,n.classes)(t).add(i):(0,n.classes)(t).remove(i))}),this._eventBus.fire("element.marker.update",{element:e,gfx:r.gfx,marker:i,add:!!o}))},f.prototype.addMarker=function(t,e){this._updateMarker(t,e,!0)},f.prototype.removeMarker=function(t,e){this._updateMarker(t,e,!1)},f.prototype.hasMarker=function(t,e){t.id||(t=this._elementRegistry.get(t));const i=this.getGraphics(t);return(0,n.classes)(i).has(e)},f.prototype.toggleMarker=function(t,e){this.hasMarker(t,e)?this.removeMarker(t,e):this.addMarker(t,e)},f.prototype.getRootElement=function(){const t=this._rootElement;return t||this._planes.length?t:this.setRootElement(this.addRootElement(null))},f.prototype.addRootElement=function(t){const e=this._rootsIdx++;t||(t={id:"__implicitroot_"+e,children:[],isImplicit:!0});const i=t.layer="root-"+e;this._ensureValid("root",t);const o=this.getLayer(i,0);return this.hideLayer(i),this._addRoot(t,o),this._planes.push({rootElement:t,layer:o}),t},f.prototype.removeRootElement=function(t){if("string"==typeof t&&(t=this._elementRegistry.get(t)),this._findPlaneForRoot(t))return this._removeRoot(t),this._removeLayer(t.layer),this._planes=this._planes.filter(function(e){return e.rootElement!==t}),this._rootElement===t&&(this._rootElement=null),t},f.prototype.setRootElement=function(e,i){if((0,t.isDefined)(i))throw new Error("override not supported");if(e===this._rootElement)return;let o;if(!e)throw new Error("rootElement required");return(o=this._findPlaneForRoot(e))||(e=this.addRootElement(e)),this._setRoot(e),e},f.prototype._removeRoot=function(t){const e=this._elementRegistry,i=this._eventBus;i.fire("root.remove",{element:t}),i.fire("root.removed",{element:t}),e.remove(t)},f.prototype._addRoot=function(t,e){const i=this._elementRegistry,o=this._eventBus;o.fire("root.add",{element:t}),i.add(t,e),o.fire("root.added",{element:t,gfx:e})},f.prototype._setRoot=function(t,e){const i=this._rootElement;i&&(this._elementRegistry.updateGraphics(i,null,!0),this.hideLayer(i.layer)),t&&(e||(e=this._findPlaneForRoot(t).layer),this._elementRegistry.updateGraphics(t,this._svg,!0),this.showLayer(t.layer)),this._rootElement=t,this._eventBus.fire("root.set",{element:t})},f.prototype._ensureValid=function(e,i){if(!i.id)throw new Error("element must have an id");if(this._elementRegistry.get(i.id))throw new Error("element <"+i.id+"> already exists");const o=y[e];if(!(0,t.every)(o,function(t){return void 0!==i[t]}))throw new Error("must supply { "+o.join(", ")+" } with "+e)},f.prototype._setParent=function(t,e,o){(0,i.add)(e.children,t,o),t.parent=e},f.prototype._addElement=function(t,e,i,o){i=i||this.getRootElement();const r=this._eventBus,n=this._graphicsFactory;this._ensureValid(t,e),r.fire(t+".add",{element:e,parent:i}),this._setParent(e,i,o);const s=n.create(t,e,o);return this._elementRegistry.add(e,s),n.update(t,e,s),r.fire(t+".added",{element:e,gfx:s}),e},f.prototype.addShape=function(t,e,i){return this._addElement("shape",t,e,i)},f.prototype.addConnection=function(t,e,i){return this._addElement("connection",t,e,i)},f.prototype._removeElement=function(t,e){const o=this._elementRegistry,r=this._graphicsFactory,n=this._eventBus;if(t=o.get(t.id||t))return n.fire(e+".remove",{element:t}),r.remove(t),(0,i.remove)(t.parent&&t.parent.children,t),t.parent=null,n.fire(e+".removed",{element:t}),o.remove(t),t},f.prototype.removeShape=function(t){return this._removeElement(t,"shape")},f.prototype.removeConnection=function(t){return this._removeElement(t,"connection")},f.prototype.getGraphics=function(t,e){return this._elementRegistry.getGraphics(t,e)},f.prototype._changeViewbox=function(t){this._eventBus.fire("canvas.viewbox.changing"),t.apply(this),this._cachedViewbox=null,this._viewboxChanged()},f.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},f.prototype.viewbox=function(t){if(void 0===t&&this._cachedViewbox)return this._cachedViewbox;const e=this._viewport,i=this.getSize();let o,r,h,a,l,c,d;return t?(this._changeViewbox(function(){l=Math.min(i.width/t.width,i.height/t.height);const o=this._svg.createSVGMatrix().scale(l).translate(-t.x,-t.y);(0,n.transform)(e,o)}),t):(o=(h=this._rootElement?this.getActiveLayer():null)&&h.getBBox()||{},r=(a=(0,n.transform)(e))?a.matrix:(0,n.createMatrix)(),l=s(r.a,1e3),c=s(-r.e||0,1e3),d=s(-r.f||0,1e3),t=this._cachedViewbox={x:c?c/l:0,y:d?d/l:0,width:i.width/l,height:i.height/l,scale:l,inner:{width:o.width||0,height:o.height||0,x:o.x||0,y:o.y||0},outer:i})},f.prototype.scroll=function(e){const i=this._viewport;let o=i.getCTM();return e&&this._changeViewbox(function(){e=(0,t.assign)({dx:0,dy:0},e||{}),o=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(o),_(i,o)}),{x:o.e,y:o.f}},f.prototype.scrollToElement=function(t,e){let i=100;"string"==typeof t&&(t=this._elementRegistry.get(t));const n=this.findRoot(t);n!==this.getRootElement()&&this.setRootElement(n),e||(e={}),"number"==typeof e&&(i=e),e={top:e.top||i,right:e.right||i,bottom:e.bottom||i,left:e.left||i};const s=(0,o.getBBox)(t),h=(0,r.asTRBL)(s),a=this.viewbox(),l=this.zoom();let c,d;a.y+=e.top/l,a.x+=e.left/l,a.width-=(e.right+e.left)/l,a.height-=(e.bottom+e.top)/l;const p=(0,r.asTRBL)(a);if(s.width<a.width&&s.height<a.height){const t=Math.max(0,h.right-p.right),e=Math.min(0,h.left-p.left),i=Math.max(0,h.bottom-p.bottom),o=Math.min(0,h.top-p.top);c=t||e,d=i||o}else c=s.x-a.x,d=s.y-a.y;this.scroll({dx:-c*l,dy:-d*l})},f.prototype.zoom=function(t,e){if(!t)return this.viewbox(t).scale;if("fit-viewport"===t)return this._fitViewport(e);let i,o;return this._changeViewbox(function(){"object"!=typeof e&&(i=this.viewbox().outer,e={x:i.width/2,y:i.height/2}),o=this._setZoom(t,e)}),s(o.a,1e3)},f.prototype._fitViewport=function(t){const e=this.viewbox(),i=e.outer,o=e.inner;let r,n;return o.x>=0&&o.y>=0&&o.x+o.width<=i.width&&o.y+o.height<=i.height&&!t?n={x:0,y:0,width:Math.max(o.width+o.x,i.width),height:Math.max(o.height+o.y,i.height)}:(r=Math.min(1,i.width/o.width,i.height/o.height),n={x:o.x+(t?o.width/2-i.width/r/2:0),y:o.y+(t?o.height/2-i.height/r/2:0),width:i.width/r,height:i.height/r}),this.viewbox(n),this.viewbox(!1).scale},f.prototype._setZoom=function(e,i){const o=this._svg,r=this._viewport,n=o.createSVGMatrix(),s=o.createSVGPoint();let h,a,l,c,d;const p=(l=r.getCTM()).a;return i?(a=(h=(0,t.assign)(s,i)).matrixTransform(l.inverse()),c=n.translate(a.x,a.y).scale(1/p*e).translate(-a.x,-a.y),d=l.multiply(c)):d=n.scale(e),_(this._viewport,d),d},f.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},f.prototype.getAbsoluteBBox=function(t){const e=this.viewbox();let i;if(t.waypoints){i=this.getGraphics(t).getBBox()}else i=t;return{x:i.x*e.scale-e.x*e.scale,y:i.y*e.scale-e.y*e.scale,width:i.width*e.scale,height:i.height*e.scale}},f.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};
},{"min-dash":"AmEv","min-dom":"fWg5","../util/Collections":"Pujo","../util/Elements":"KTcn","../layout/LayoutUtil":"aRzT","tiny-svg":"WdCh"}],"KLl9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var t=require("tiny-svg"),e="data-element-id";function r(t){this._elements={},this._eventBus=t}r.$inject=["eventBus"],r.prototype.add=function(r,n,i){var o=r.id;this._validateId(o),(0,t.attr)(n,e,o),i&&(0,t.attr)(i,e,o),this._elements[o]={element:r,gfx:n,secondaryGfx:i}},r.prototype.remove=function(r){var n=this._elements,i=r.id||r,o=i&&n[i];o&&((0,t.attr)(o.gfx,e,""),o.secondaryGfx&&(0,t.attr)(o.secondaryGfx,e,""),delete n[i])},r.prototype.updateId=function(t,e){this._validateId(e),"string"==typeof t&&(t=this.get(t)),this._eventBus.fire("element.updateId",{element:t,newId:e});var r=this.getGraphics(t),n=this.getGraphics(t,!0);this.remove(t),t.id=e,this.add(t,r,n)},r.prototype.updateGraphics=function(r,n,i){var o=r.id||r,s=this._elements[o];return i?s.secondaryGfx=n:s.gfx=n,n&&(0,t.attr)(n,e,o),n},r.prototype.get=function(r){var n;n="string"==typeof r?r:r&&(0,t.attr)(r,e);var i=this._elements[n];return i&&i.element},r.prototype.filter=function(t){var e=[];return this.forEach(function(r,n){t(r,n)&&e.push(r)}),e},r.prototype.find=function(t){for(var e=this._elements,r=Object.keys(e),n=0;n<r.length;n++){var i=e[r[n]],o=i.element;if(t(o,i.gfx))return o}},r.prototype.getAll=function(){return this.filter(function(t){return t})},r.prototype.forEach=function(t){var e=this._elements;Object.keys(e).forEach(function(r){var n=e[r],i=n.element,o=n.gfx;return t(i,o)})},r.prototype.getGraphics=function(t,e){var r=t.id||t,n=this._elements[r];return n&&(e?n.secondaryGfx:n.gfx)},r.prototype._validateId=function(t){if(!t)throw new Error("element must have an id");if(this._elements[t])throw new Error("element with id "+t+" already added")};
},{"tiny-svg":"WdCh"}],"QPVg":[function(require,module,exports) {
"use strict";function e(e,t,i,n){var r=i.inverse;return Object.defineProperty(e,"remove",{value:function(e){var i=this.indexOf(e);return-1!==i&&(this.splice(i,1),t.unset(e,r,n)),e}}),Object.defineProperty(e,"contains",{value:function(e){return-1!==this.indexOf(e)}}),Object.defineProperty(e,"add",{value:function(e,i){var s=this.indexOf(e);if(void 0===i){if(-1!==s)return;i=this.length}-1!==s&&this.splice(s,1),this.splice(i,0,e),-1===s&&t.set(e,r,n)}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e}function t(e){return!0===e.__refs_collection}module.exports.extend=e,module.exports.isExtended=t;
},{}],"R3qm":[function(require,module,exports) {
"use strict";var e=require("./collection");function n(e,n){return Object.prototype.hasOwnProperty.call(e,n.name||n)}function t(n,t,o){var r=e.extend(o[t.name]||[],n,t,o);Object.defineProperty(o,t.name,{enumerable:t.enumerable,value:r}),r.length&&r.forEach(function(e){n.set(e,t.inverse,o)})}function o(e,n,t){var o=n.inverse,r=t[n.name];Object.defineProperty(t,n.name,{configurable:n.configurable,enumerable:n.enumerable,get:function(){return r},set:function(n){if(n!==r){var i=r;r=null,i&&e.unset(i,o,t),r=n,e.set(r,o,t)}}})}function r(e,n){if(!(this instanceof r))return new r(e,n);e.inverse=n,n.inverse=e,this.props={},this.props[e.name]=e,this.props[n.name]=n}r.prototype.bind=function(e,n){if("string"==typeof n){if(!this.props[n])throw new Error("no property <"+n+"> in ref");n=this.props[n]}n.collection?t(this,n,e):o(this,n,e)},r.prototype.ensureRefsCollection=function(n,o){var r=n[o.name];return e.isExtended(r)||t(this,o,n),r},r.prototype.ensureBound=function(e,t){n(e,t)||this.bind(e,t)},r.prototype.unset=function(e,n,t){e&&(this.ensureBound(e,n),n.collection?this.ensureRefsCollection(e,n).remove(t):e[n.name]=void 0)},r.prototype.set=function(e,n,t){e&&(this.ensureBound(e,n),n.collection?this.ensureRefsCollection(e,n).add(t):e[n.name]=t)},module.exports=r;
},{"./collection":"QPVg"}],"fV6y":[function(require,module,exports) {
module.exports=require("./lib/refs"),module.exports.Collection=require("./lib/collection");
},{"./lib/refs":"R3qm","./lib/collection":"QPVg"}],"av0a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Base=c,exports.Connection=h,exports.Label=d,exports.Root=b,exports.Shape=u,exports.create=m;var e=require("min-dash"),t=i(require("inherits-browser")),n=i(require("object-refs"));function i(e){return e&&e.__esModule?e:{default:e}}var a=new n.default({name:"children",enumerable:!0,collection:!0},{name:"parent"}),r=new n.default({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),l=new n.default({name:"attachers",collection:!0},{name:"host"}),o=new n.default({name:"outgoing",collection:!0},{name:"source"}),s=new n.default({name:"incoming",collection:!0},{name:"target"});function c(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),a.bind(this,"parent"),r.bind(this,"labels"),o.bind(this,"outgoing"),s.bind(this,"incoming")}function u(){c.call(this),a.bind(this,"children"),l.bind(this,"host"),l.bind(this,"attachers")}function b(){u.call(this)}function d(){u.call(this),r.bind(this,"labelTarget")}function h(){c.call(this),o.bind(this,"source"),s.bind(this,"target")}(0,t.default)(u,c),(0,t.default)(b,u),(0,t.default)(d,u),(0,t.default)(h,c);var f={connection:h,shape:u,label:d,root:b};function m(t,n){var i=f[t];if(!i)throw new Error("unknown type: <"+t+">");return(0,e.assign)(new i,n)}
},{"min-dash":"AmEv","inherits-browser":"hUM3","object-refs":"fV6y"}],"eiiQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("../model"),t=require("min-dash");function r(){this._uid=12}r.prototype.createRoot=function(e){return this.create("root",e)},r.prototype.createLabel=function(e){return this.create("label",e)},r.prototype.createShape=function(e){return this.create("shape",e)},r.prototype.createConnection=function(e){return this.create("connection",e)},r.prototype.create=function(r,o){return(o=(0,t.assign)({},o||{})).id||(o.id=r+"_"+this._uid++),(0,e.create)(r,o)};
},{"../model":"av0a","min-dash":"AmEv"}],"GNhD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var t=require("min-dash"),e="__fn",r=1e3,n=Array.prototype.slice;function i(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}function o(){}function s(t,e){return t.apply(null,e)}i.prototype.on=function(n,i,o,s){if(n=(0,t.isArray)(n)?n:[n],(0,t.isFunction)(i)&&(s=o,o=i,i=r),!(0,t.isNumber)(i))throw new Error("priority must be a number");var p=o;s&&((p=(0,t.bind)(o,s))[e]=o[e]||o);var a=this;n.forEach(function(t){a._addListener(t,{priority:i,callback:p,next:null})})},i.prototype.once=function(n,i,o,s){var p=this;if((0,t.isFunction)(i)&&(s=o,o=i,i=r),!(0,t.isNumber)(i))throw new Error("priority must be a number");function a(){a.__isTomb=!0;var t=o.apply(s,arguments);return p.off(n,a),t}a[e]=o,this.on(n,i,a)},i.prototype.off=function(e,r){e=(0,t.isArray)(e)?e:[e];var n=this;e.forEach(function(t){n._removeListener(t,r)})},i.prototype.createEvent=function(t){var e=new o;return e.init(t),e},i.prototype.fire=function(t,e){var r,i,s,p;if(p=n.call(arguments),"object"==typeof t&&(t=(e=t).type),!t)throw new Error("no event type specified");if(i=this._listeners[t]){r=e instanceof o?e:this.createEvent(e),p[0]=r;var a=r.type;t!==a&&(r.type=t);try{s=this._invokeListeners(r,p,i)}finally{t!==a&&(r.type=a)}return void 0===s&&r.defaultPrevented&&(s=!1),s}},i.prototype.handleError=function(t){return!1===this.fire("error",{error:t})},i.prototype._destroy=function(){this._listeners={}},i.prototype._invokeListeners=function(t,e,r){for(var n;r&&!t.cancelBubble;)n=this._invokeListener(t,e,r),r=r.next;return n},i.prototype._invokeListener=function(t,e,r){var n;if(r.callback.__isTomb)return n;try{void 0!==(n=s(r.callback,e))&&(t.returnValue=n,t.stopPropagation()),!1===n&&t.preventDefault()}catch(i){if(!this.handleError(i))throw console.error("unhandled error in event listener",i),i}return n},i.prototype._addListener=function(t,e){var r,n=this._getListeners(t);if(n){for(;n;){if(n.priority<e.priority)return e.next=n,void(r?r.next=e:this._setListeners(t,e));r=n,n=n.next}r.next=e}else this._setListeners(t,e)},i.prototype._getListeners=function(t){return this._listeners[t]},i.prototype._setListeners=function(t,e){this._listeners[t]=e},i.prototype._removeListener=function(t,r){var n,i,o,s=this._getListeners(t);if(r)for(;s;)n=s.next,(o=s.callback)!==r&&o[e]!==r||(i?i.next=n:this._setListeners(t,n)),i=s,s=n;else this._setListeners(t,null)},o.prototype.stopPropagation=function(){this.cancelBubble=!0},o.prototype.preventDefault=function(){this.defaultPrevented=!0},o.prototype.init=function(e){(0,t.assign)(this,e||{})};
},{"min-dash":"AmEv"}],"CFFf":[function(require,module,exports) {
"use strict";function e(e){return e.childNodes[0]}function t(e){return e.parentNode.childNodes[1]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getChildren=t,exports.getVisual=e;
},{}],"EK9i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rotate=a,exports.scale=s,exports.transform=e,exports.translate=t;var r=require("tiny-svg");function e(e,t,a,s,o){var n=(0,r.createTransform)();n.setTranslate(t,a);var f=(0,r.createTransform)();f.setRotate(s||0,0,0);var c=(0,r.createTransform)();c.setScale(o||1,o||1),(0,r.transform)(e,[n,f,c])}function t(e,t,a){var s=(0,r.createTransform)();s.setTranslate(t,a),(0,r.transform)(e,s)}function a(e,t){var a=(0,r.createTransform)();a.setRotate(t,0,0),(0,r.transform)(e,a)}function s(e,t){var a=(0,r.createTransform)();a.setScale(t,t),(0,r.transform)(e,a)}
},{"tiny-svg":"WdCh"}],"PXhG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=require("min-dash"),t=require("../util/GraphicsUtil"),r=require("../util/SvgTransformUtil"),n=require("min-dom"),i=require("tiny-svg"),a=require("../util/Elements");function o(e,t){this._eventBus=e,this._elementRegistry=t}function s(e,t,r){var n=r||t.firstChild;e!==n&&t.insertBefore(e,n)}o.$inject=["eventBus","elementRegistry"],o.prototype._getChildrenContainer=function(e){var r,n=this._elementRegistry.getGraphics(e);return e.parent?(r=(0,t.getChildren)(n))||(r=(0,i.create)("g"),(0,i.classes)(r).add("djs-children"),(0,i.append)(n.parentNode,r)):r=n,r},o.prototype._clear=function(e){var r=(0,t.getVisual)(e);return(0,n.clear)(r),r},o.prototype._createContainer=function(e,t,r,n){var a=(0,i.create)("g");(0,i.classes)(a).add("djs-group"),void 0!==r?s(a,t,t.childNodes[r]):(0,i.append)(t,a);var o=(0,i.create)("g");(0,i.classes)(o).add("djs-element"),(0,i.classes)(o).add("djs-"+e),n&&(0,i.classes)(o).add("djs-frame"),(0,i.append)(a,o);var p=(0,i.create)("g");return(0,i.classes)(p).add("djs-visual"),(0,i.append)(o,p),o},o.prototype.create=function(e,t,r){var n=this._getChildrenContainer(t.parent);return this._createContainer(e,n,r,(0,a.isFrameElement)(t))},o.prototype.updateContainments=function(t){var r,n=this,i=this._elementRegistry;r=(0,e.reduce)(t,function(e,t){return t.parent&&(e[t.parent.id]=t.parent),e},{}),(0,e.forEach)(r,function(t){var r=t.children;if(r){var a=n._getChildrenContainer(t);(0,e.forEach)(r.slice().reverse(),function(e){s(i.getGraphics(e).parentNode,a)})}})},o.prototype.drawShape=function(e,t){return this._eventBus.fire("render.shape",{gfx:e,element:t})},o.prototype.getShapePath=function(e){return this._eventBus.fire("render.getShapePath",e)},o.prototype.drawConnection=function(e,t){return this._eventBus.fire("render.connection",{gfx:e,element:t})},o.prototype.getConnectionPath=function(e){return this._eventBus.fire("render.getConnectionPath",e)},o.prototype.update=function(e,t,n){if(t.parent){var a=this._clear(n);if("shape"===e)this.drawShape(a,t),(0,r.translate)(n,t.x,t.y);else{if("connection"!==e)throw new Error("unknown type: "+e);this.drawConnection(a,t)}t.hidden?(0,i.attr)(n,"display","none"):(0,i.attr)(n,"display","block")}},o.prototype.remove=function(e){var t=this._elementRegistry.getGraphics(e);(0,i.remove)(t.parentNode)};
},{"min-dash":"AmEv","../util/GraphicsUtil":"CFFf","../util/SvgTransformUtil":"EK9i","min-dom":"fWg5","tiny-svg":"WdCh","../util/Elements":"KTcn"}],"mhLf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=d(require("../draw")),t=d(require("./Canvas")),r=d(require("./ElementRegistry")),a=d(require("./ElementFactory")),u=d(require("./EventBus")),s=d(require("./GraphicsFactory"));function d(e){return e&&e.__esModule?e:{default:e}}var i=exports.default={__depends__:[e.default],__init__:["canvas"],canvas:["type",t.default],elementRegistry:["type",r.default],elementFactory:["type",a.default],eventBus:["type",u.default],graphicsFactory:["type",s.default]};
},{"../draw":"JrPQ","./Canvas":"kYe2","./ElementRegistry":"KLl9","./ElementFactory":"eiiQ","./EventBus":"GNhD","./GraphicsFactory":"PXhG"}],"YVAp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=require("didi"),t=i(require("./core"));function i(e){return e&&e.__esModule?e:{default:e}}function r(t){var i=new e.Injector(t);return i.init(),i}function n(e){return r([{config:["value",e=e||{}]},t.default].concat(e.modules||[]))}function o(e,t){this.injector=t=t||n(e),this.get=t.get,this.invoke=t.invoke,this.get("eventBus").fire("diagram.init")}o.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},o.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")};
},{"didi":"cPfe","./core":"mhLf"}],"zTA6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return e.default}});var e=r(require("./lib/Diagram"));function r(e){return e&&e.__esModule?e:{default:e}}
},{"./lib/Diagram":"YVAp"}],"AwVM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Moddle=m,exports.coerceType=o,exports.isBuiltInType=p,exports.isSimpleType=s,exports.parseNameNS=a;var e=require("min-dash");function t(){}function r(e,t){this.model=e,this.properties=t}t.prototype.get=function(e){return this.$model.properties.get(this,e)},t.prototype.set=function(e,t){this.$model.properties.set(this,e,t)},r.prototype.createType=function(r){var i=this.model,n=this.properties,o=Object.create(t.prototype);(0,e.forEach)(r.properties,function(e){e.isMany||void 0===e.default||(o[e.name]=e.default)}),n.defineModel(o,i),n.defineDescriptor(o,r);var p=r.ns.name;function s(t){n.define(this,"$type",{value:p,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),(0,e.forEach)(t,(0,e.bind)(function(e,t){this.set(t,e)},this))}return s.prototype=o,s.hasType=o.$instanceOf=this.model.hasType,n.defineModel(s,i),n.defineDescriptor(s,r),s};var i={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},n={String:function(e){return e},Boolean:function(e){return"true"===e},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e)}};function o(e,t){var r=n[e];return r?r(t):t}function p(e){return!!i[e]}function s(e){return!!n[e]}function a(e,t){var r,i,n=e.split(/:/);if(1===n.length)r=e,i=t;else{if(2!==n.length)throw new Error("expected <prefix:localName> or <localName>, got "+e);r=n[1],i=n[0]}return{name:e=(i?i+":":"")+r,prefix:i,localName:r}}function f(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}function y(t,r){this.packageMap={},this.typeMap={},this.packages=[],this.properties=r,(0,e.forEach)(t,(0,e.bind)(this.registerPackage,this))}function c(e,t,r){var i=t[r];if(i in e)throw new Error("package with "+r+" <"+i+"> already defined")}function u(e){this.model=e}function d(e){return void 0===e}function h(e,t,r){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:r,configurable:!0})}function l(e){return e.replace(/^:/,"")}function m(e,t={}){this.properties=new u(this),this.factory=new r(this,this.properties),this.registry=new y(e,this.properties),this.typeCache={},this.config=t}f.prototype.build=function(){return(0,e.pick)(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])},f.prototype.addProperty=function(e,t,r){"boolean"==typeof t&&(r=t,t=void 0),this.addNamedProperty(e,!1!==r);var i=this.properties;void 0!==t?i.splice(t,0,e):i.push(e)},f.prototype.replaceProperty=function(e,t,r){var i=e.ns,n=this.properties,o=this.propertiesByName,p=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var s=n.indexOf(e);if(-1===s)throw new Error("property <"+i.name+"> not found in property list");n.splice(s,1),this.addProperty(t,r?void 0:s,p),o[i.name]=o[i.localName]=t},f.prototype.redefineProperty=function(e,t,r){var i=e.ns.prefix,n=t.split("#"),o=a(n[0],i),p=a(n[1],o.prefix).name,s=this.propertiesByName[p];if(!s)throw new Error("refined property <"+p+"> not found");this.replaceProperty(s,e,r),delete e.redefines},f.prototype.addNamedProperty=function(e,t){var r=e.ns,i=this.propertiesByName;t&&(this.assertNotDefined(e,r.name),this.assertNotDefined(e,r.localName)),i[r.name]=i[r.localName]=e},f.prototype.removeNamedProperty=function(e){var t=e.ns,r=this.propertiesByName;delete r[t.name],delete r[t.localName]},f.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e},f.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e},f.prototype.assertNotTrait=function(e){if((e.extends||[]).length)throw new Error(`cannot create <${e.name}> extending <${e.extends}>`)},f.prototype.assertNotDefined=function(e,t){var r=e.name,i=this.propertiesByName[r];if(i)throw new Error("property <"+r+"> already defined; override of <"+i.definedBy.ns.name+"#"+i.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")},f.prototype.hasProperty=function(e){return this.propertiesByName[e]},f.prototype.addTrait=function(t,r){r&&this.assertNotTrait(t);var i=this.allTypesByName,n=this.allTypes,o=t.name;o in i||((0,e.forEach)(t.properties,(0,e.bind)(function(i){i=(0,e.assign)({},i,{name:i.ns.localName,inherited:r}),Object.defineProperty(i,"definedBy",{value:t});var n=i.replaces,o=i.redefines;n||o?this.redefineProperty(i,n||o,n):(i.isBody&&this.setBodyProperty(i),i.isId&&this.setIdProperty(i),this.addProperty(i))},this)),n.push(t),i[o]=t)},y.prototype.getPackage=function(e){return this.packageMap[e]},y.prototype.getPackages=function(){return this.packages},y.prototype.registerPackage=function(t){t=(0,e.assign)({},t);var r=this.packageMap;c(r,t,"prefix"),c(r,t,"uri"),(0,e.forEach)(t.types,(0,e.bind)(function(e){this.registerType(e,t)},this)),r[t.uri]=r[t.prefix]=t,this.packages.push(t)},y.prototype.registerType=function(t,r){var i=a((t=(0,e.assign)({},t,{superClass:(t.superClass||[]).slice(),extends:(t.extends||[]).slice(),properties:(t.properties||[]).slice(),meta:(0,e.assign)(t.meta||{})})).name,r.prefix),n=i.name,o={};(0,e.forEach)(t.properties,(0,e.bind)(function(t){var r=a(t.name,i.prefix),n=r.name;p(t.type)||(t.type=a(t.type,r.prefix).name),(0,e.assign)(t,{ns:r,name:n}),o[n]=t},this)),(0,e.assign)(t,{ns:i,name:n,propertiesByName:o}),(0,e.forEach)(t.extends,(0,e.bind)(function(e){var t=a(e,i.prefix),r=this.typeMap[t.name];r.traits=r.traits||[],r.traits.push(n)},this)),this.definePackage(t,r),this.typeMap[n]=t},y.prototype.mapTypes=function(t,r,i){var n=p(t.name)?{name:t.name}:this.typeMap[t.name],o=this;function s(e,i){var n=a(e,p(e)?"":t.prefix);o.mapTypes(n,r,i)}function f(e){return s(e,!0)}if(!n)throw new Error("unknown type <"+t.name+">");(0,e.forEach)(n.superClass,i?f:function(e){return s(e,!1)}),r(n,!i),(0,e.forEach)(n.traits,f)},y.prototype.getEffectiveDescriptor=function(e){var t=a(e),r=new f(t);this.mapTypes(t,function(e,t){r.addTrait(e,t)});var i=r.build();return this.definePackage(i,i.allTypes[i.allTypes.length-1].$pkg),i},y.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})},u.prototype.set=function(t,r,i){if(!(0,e.isString)(r)||!r.length)throw new TypeError("property name must be a non-empty string");var n=this.getProperty(t,r),o=n&&n.name;d(i)?n?delete t[o]:delete t.$attrs[l(r)]:n?o in t?t[o]=i:h(t,n,i):t.$attrs[l(r)]=i},u.prototype.get=function(e,t){var r=this.getProperty(e,t);if(!r)return e.$attrs[l(t)];var i=r.name;return!e[i]&&r.isMany&&h(e,r,[]),e[i]},u.prototype.define=function(t,r,i){if(!i.writable){var n=i.value;delete(i=(0,e.assign)({},i,{get:function(){return n}})).value}Object.defineProperty(t,r,i)},u.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})},u.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})},u.prototype.getProperty=function(e,t){var r=this.model,i=r.getPropertyDescriptor(e,t);if(i)return i;if(t.includes(":"))return null;const n=r.config.strict;if(void 0!==n){const r=new TypeError(`unknown property <${t}> on <${e.$type}>`);if(n)throw r;"undefined"!=typeof console&&console.warn(r)}return null},m.prototype.create=function(e,t){var r=this.getType(e);if(!r)throw new Error("unknown type <"+e+">");return new r(t)},m.prototype.getType=function(t){var r=this.typeCache,i=(0,e.isString)(t)?t:t.ns.name,n=r[i];return n||(t=this.registry.getEffectiveDescriptor(i),n=r[i]=this.factory.createType(t)),n},m.prototype.createAny=function(t,r,i){var n=a(t),o={$type:t,$instanceOf:function(e){return e===this.$type},get:function(e){return this[e]},set:function(t,r){(0,e.set)(this,[t],r)}},p={name:t,isGeneric:!0,ns:{prefix:n.prefix,localName:n.localName,uri:r}};return this.properties.defineDescriptor(o,p),this.properties.defineModel(o,this),this.properties.define(o,"get",{enumerable:!1,writable:!0}),this.properties.define(o,"set",{enumerable:!1,writable:!0}),this.properties.define(o,"$parent",{enumerable:!1,writable:!0}),this.properties.define(o,"$instanceOf",{enumerable:!1,writable:!0}),(0,e.forEach)(i,function(t,r){(0,e.isObject)(t)&&void 0!==t.value?o[t.name]=t.value:o[r]=t}),o},m.prototype.getPackage=function(e){return this.registry.getPackage(e)},m.prototype.getPackages=function(){return this.registry.getPackages()},m.prototype.getElementDescriptor=function(e){return e.$descriptor},m.prototype.hasType=function(e,t){return void 0===t&&(t=e,e=this),t in e.$model.getElementDescriptor(e).allTypesByName},m.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]},m.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};
},{"min-dash":"AmEv"}],"SIOl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Parser=p,exports.decode=s;var e=String.fromCharCode,n=Object.prototype.hasOwnProperty,r=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/gi,t={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};function i(r,i,s,u){return u?n.call(t,u)?t[u]:"&"+u+";":e(i||parseInt(s,16))}function s(e){return e.length>3&&-1!==e.indexOf("&")?e.replace(r,i):e}Object.keys(t).forEach(function(e){t[e.toUpperCase()]=t[e]});var u="http://www.w3.org/2001/XMLSchema-instance",o="xsi",a="xsi:type",f="non-whitespace outside of root node";function l(e){return new Error(e)}function c(e){return"missing namespace for prefix <"+e+">"}function g(e){return{get:e,enumerable:!0}}function d(e){var n,r={};for(n in e)r[n]=e[n];return r}function b(e){return e+"$uri"}function h(e){var n,r,t={};for(n in e)t[r=e[n]]=r,t[b(r)]=n;return t}function m(){return{line:0,column:0}}function x(e){throw e}function p(e){if(!this)return new p(e);var n,r,t,i,O,v,C,w,A,k=e&&e.proxy,q=x,y=m,j=!1,N=!1,E=null,M=!1;function P(e){e instanceof Error||(e=l(e)),E=e,q(e,y)}function T(e){O&&(e instanceof Error||(e=l(e)),O(e,y))}this.on=function(e,s){if("function"!=typeof s)throw l("required args <name, cb>");switch(e){case"openTag":r=s;break;case"text":n=s;break;case"closeTag":t=s;break;case"error":q=s;break;case"warn":O=s;break;case"cdata":i=s;break;case"attention":w=s;break;case"question":C=s;break;case"comment":v=s;break;default:throw l("unsupported event: "+e)}return this},this.ns=function(e){if(void 0===e&&(e={}),"object"!=typeof e)throw l("required args <nsMap={}>");var n,r={};for(n in e)r[n]=e[n];return r[u]=o,N=!0,A=r,this},this.parse=function(e){if("string"!=typeof e)throw l("required args <xml=string>");return E=null,function(e){var u,o,l,m,x,p,O,q,E,S,_,D=N?[]:null,I=N?h(A):null,L=[],U=0,X=!1,$=!1,z=0,B=0,F="",G=0;function H(){if(null!==_)return _;var e,n,r,t,i,u,o,f,l,g,h,m=N&&I.xmlns,x=N&&j?[]:null,p=G,O=F,v=O.length,C={},w={};e:for(;p<v;p++)if(l=!1,!(32===(g=O.charCodeAt(p))||g<14&&g>8)){for((g<65||g>122||g>90&&g<97)&&95!==g&&58!==g&&(T("illegal first char attribute name"),l=!0),h=p+1;h<v;h++)if(!((g=O.charCodeAt(h))>96&&g<123||g>64&&g<91||g>47&&g<59||46===g||45===g||95===g)){if(32===g||g<14&&g>8){T("missing attribute value"),p=h;continue e}if(61===g)break;T("illegal attribute name char"),l=!0}if("xmlns:xmlns"===(f=O.substring(p,h))&&(T("illegal declaration of xmlns"),l=!0),34===(g=O.charCodeAt(h+1)))-1===(h=O.indexOf('"',p=h+2))&&-1!==(h=O.indexOf("'",p))&&(T("attribute value quote missmatch"),l=!0);else if(39===g)-1===(h=O.indexOf("'",p=h+2))&&-1!==(h=O.indexOf('"',p))&&(T("attribute value quote missmatch"),l=!0);else for(T("missing attribute value quotes"),l=!0,h+=1;h<v&&!(32===(g=O.charCodeAt(h+1))||g<14&&g>8);h++);for(-1===h&&(T("missing closing quotes"),h=v,l=!0),l||(u=O.substring(p,h)),p=h;h+1<v&&!(32===(g=O.charCodeAt(h+1))||g<14&&g>8);h++)p===h&&(T("illegal character after attribute end"),l=!0);if(p=h+1,!l)if(f in w)T("attribute <"+f+"> already defined");else if(w[f]=!0,N)if(j){if(null!==(i="xmlns"===f?"xmlns":120===f.charCodeAt(0)&&"xmlns:"===f.substr(0,6)?f.substr(6):null)){if(e=s(u),n=b(i),!(o=A[e])){if("xmlns"===i||n in I&&I[n]!==e)do{o="ns"+U++}while(void 0!==I[o]);else o=i;A[e]=o}I[i]!==o&&(t||(I=d(I),t=!0),I[i]=o,"xmlns"===i&&(I[b(o)]=e,m=o),I[n]=e),C[f]=u;continue}x.push(f,u)}else-1!==(g=f.indexOf(":"))?(r=I[f.substring(0,g)])?((f=m===r?f.substr(g+1):r+f.substr(g))===a&&(-1!==(g=u.indexOf(":"))?(r=u.substring(0,g),r=I[r]||r,u=r+u.substring(g)):u=m+":"+u),C[f]=u):T(c(f.substring(0,g))):C[f]=u;else C[f]=u}if(j)for(p=0,v=x.length;p<v;p++){if(f=x[p++],u=x[p],-1!==(g=f.indexOf(":"))){if(!(r=I[f.substring(0,g)])){T(c(f.substring(0,g)));continue}(f=m===r?f.substr(g+1):r+f.substr(g))===a&&(-1!==(g=u.indexOf(":"))?(r=u.substring(0,g),r=I[r]||r,u=r+u.substring(g)):u=m+":"+u)}C[f]=u}return _=C}y=function(){for(var n,r,t=/(\r\n|\r|\n)/g,i=0,s=0,u=0,o=B;z>=u&&(n=t.exec(e))&&!((o=n[0].length+n.index)>z);)i+=1,u=o;return-1==z?(s=o,r=e.substring(B)):0===B?r=e.substring(B,z):(s=z-u,r=-1==B?e.substring(z):e.substring(z,B+1)),{data:r,line:i,column:s}},k&&(S=Object.create({},{name:g(function(){return q}),originalName:g(function(){return E}),attrs:g(H),ns:g(function(){return I})}));for(;-1!==B;){if(-1===(z=60===e.charCodeAt(B)?B:e.indexOf("<",B)))return L.length?P("unexpected end of file"):0===B?P("missing start tag"):void(B<e.length&&e.substring(B).trim()&&T(f));if(B!==z)if(L.length){if(n&&(n(e.substring(B,z),s,y),M))return}else if(e.substring(B,z).trim()&&(T(f),M))return;if(33===(x=e.charCodeAt(z+1))){if(91===(m=e.charCodeAt(z+2))&&"CDATA["===e.substr(z+3,6)){if(-1===(B=e.indexOf("]]>",z)))return P("unclosed cdata");if(i&&(i(e.substring(z+9,B),y),M))return;B+=3;continue}if(45===m&&45===e.charCodeAt(z+3)){if(-1===(B=e.indexOf("--\x3e",z)))return P("unclosed comment");if(v&&(v(e.substring(z+4,B),s,y),M))return;B+=3;continue}}if(63!==x){for(o=z+1;;o++){if(p=e.charCodeAt(o),isNaN(p))return B=-1,P("unclosed tag");if(34===p)m=e.indexOf('"',o+1),o=-1!==m?m:o;else if(39===p)m=e.indexOf("'",o+1),o=-1!==m?m:o;else if(62===p){B=o;break}}if(33!==x){if(_={},47===x){if(X=!1,$=!0,!L.length)return P("missing open tag");if(o=q=L.pop(),m=z+2+o.length,e.substring(z+2,m)!==o)return P("closing tag mismatch");for(;m<B;m++)if(!(32===(x=e.charCodeAt(m))||x>8&&x<14))return P("close tag")}else{if(47===e.charCodeAt(B-1)?(o=q=e.substring(z+1,B-1),X=!0,$=!0):(o=q=e.substring(z+1,B),X=!0,$=!1),!(x>96&&x<123||x>64&&x<91||95===x||58===x))return P("illegal first char nodeName");for(m=1,l=o.length;m<l;m++)if(!((x=o.charCodeAt(m))>96&&x<123||x>64&&x<91||x>47&&x<59||45===x||95===x||46==x)){if(32===x||x<14&&x>8){q=o.substring(0,m),_=null;break}return P("invalid nodeName")}$||L.push(q)}if(N){if(u=I,X&&($||D.push(u),null===_&&(j=-1!==o.indexOf("xmlns",m))&&(G=m,F=o,H(),j=!1)),E=q,-1!==(x=q.indexOf(":"))){if(!(O=I[q.substring(0,x)]))return P("missing namespace on <"+E+">");q=q.substr(x+1)}else O=I.xmlns;O&&(q=O+":"+q)}if(X&&(G=m,F=o,r&&(k?r(S,s,$,y):r(q,H,s,$,y),M)))return;if($){if(t&&(t(k?S:q,s,X,y),M))return;N&&(I=X?u:D.pop())}B+=1}else{if(w&&(w(e.substring(z,B+1),s,y),M))return;B+=1}}else{if(-1===(B=e.indexOf("?>",z)))return P("unclosed question");if(C&&(C(e.substring(z,B+2),y),M))return;B+=2}}}(e),y=m,M=!1,E},this.stop=function(){M=!0}}
},{}],"ML73":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Reader=A,exports.Writer=Z;var e=require("min-dash"),t=require("saxen"),n=require("moddle");function r(e){return e.xml&&"lowerCase"===e.xml.tagAlias}var i={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},a="xsi:type";function o(e){return e.xml&&e.xml.serialize}function s(e){return o(e)===a}function p(e){return"property"===o(e)}function u(e){return e.charAt(0).toUpperCase()+e.slice(1)}function c(e,t){return r(t)?e.prefix+":"+u(e.localName):e.name}function l(e,t){var n=e.name,r=e.localName,i=t.xml&&t.xml.typePrefix;return i&&0===r.indexOf(i)?e.prefix+":"+r.slice(i.length):n}function f(e,t){var r=(0,n.parseNameNS)(e);return l(r,t.getPackage(r.prefix))}function h(e){return new Error(e)}function d(e){return e.$descriptor}function m(t){(0,e.assign)(this,t),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(e){this.references.push(e)},this.addElement=function(e){if(!e)throw h("expected element");var t,n=this.elementsById,r=d(e).idProperty;if(r&&(t=e.get(r.name))){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(t))throw new Error("illegal ID <"+t+">");if(n[t])throw h("duplicate ID <"+t+">");n[t]=e}},this.addWarning=function(e){this.warnings.push(e)}}function y(){}function g(){}function N(){}function v(e,t){this.property=e,this.context=t}function x(e,t){this.element=t,this.propertyDesc=e}function b(){}function w(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}function T(e,t,n){w.call(this,e,t,n)}function E(e,t,n){this.model=e,this.context=n}function A(t){t instanceof n.Moddle&&(t={model:t}),(0,e.assign)(this,{lax:!1},t)}function P(){var e=[];return Object.defineProperty(e,"peek",{value:function(){return this[this.length-1]}}),e}y.prototype.handleEnd=function(){},y.prototype.handleText=function(){},y.prototype.handleNode=function(){},g.prototype=Object.create(y.prototype),g.prototype.handleNode=function(){return this},N.prototype=Object.create(y.prototype),N.prototype.handleText=function(e){this.body=(this.body||"")+e},v.prototype=Object.create(N.prototype),v.prototype.handleNode=function(e){if(this.element)throw h("expected no sub nodes");return this.element=this.createReference(e),this},v.prototype.handleEnd=function(){this.element.id=this.body},v.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}},x.prototype=Object.create(N.prototype),x.prototype.handleEnd=function(){var e=this.body||"",t=this.element,r=this.propertyDesc;e=(0,n.coerceType)(r.type,e),r.isMany?t.get(r.name).push(e):t.set(r.name,e)},b.prototype=Object.create(N.prototype),b.prototype.handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t},w.prototype=Object.create(b.prototype),w.prototype.addReference=function(e){this.context.addReference(e)},w.prototype.handleText=function(e){if(!d(this.element).bodyProperty)throw h("unexpected body text <"+e+">");N.prototype.handleText.call(this,e)},w.prototype.handleEnd=function(){var e=this.body,t=this.element,r=d(t).bodyProperty;r&&void 0!==e&&(e=(0,n.coerceType)(r.type,e),t.set(r.name,e))},w.prototype.createElement=function(t){var r,i=t.attributes,a=this.type,o=d(a),s=this.context,p=new a({}),u=this.model;return(0,e.forEach)(i,function(t,i){var a,c=o.propertiesByName[i];c&&c.isReference?c.isMany?(a=t.split(" "),(0,e.forEach)(a,function(e){s.addReference({element:p,property:c.ns.name,id:e})})):s.addReference({element:p,property:c.ns.name,id:t}):(c?t=(0,n.coerceType)(c.type,t):"xmlns"!==i&&(r=(0,n.parseNameNS)(i,o.ns.prefix),u.getPackage(r.prefix)&&s.addWarning({message:"unknown attribute <"+i+">",element:p,property:i,value:t})),p.set(i,t))}),p},w.prototype.getPropertyForNode=function(t){var r,i,o=t.name,p=(0,n.parseNameNS)(o),u=this.type,l=this.model,m=d(u),y=p.name,g=m.propertiesByName[y];if(g&&!g.isAttr)return s(g)&&(r=t.attributes[a])?(r=f(r,l),i=l.getType(r),(0,e.assign)({},g,{effectiveType:d(i).name})):g;var N=l.getPackage(p.prefix);if(N){if(r=c(p,N),i=l.getType(r),g=(0,e.find)(m.properties,function(e){return!e.isVirtual&&!e.isReference&&!e.isAttribute&&i.hasType(e.type)}))return(0,e.assign)({},g,{effectiveType:d(i).name})}else if(g=(0,e.find)(m.properties,function(e){return!e.isReference&&!e.isAttribute&&"Element"===e.type}))return g;throw h("unrecognized element <"+p.name+">")},w.prototype.toString=function(){return"ElementDescriptor["+d(this.type).name+"]"},w.prototype.valueHandler=function(e,t){return new x(e,t)},w.prototype.referenceHandler=function(e){return new v(e,this.context)},w.prototype.handler=function(e){return"Element"===e?new E(this.model,e,this.context):new w(this.model,e,this.context)},w.prototype.handleChild=function(t){var r,i,a,o;if(r=this.getPropertyForNode(t),a=this.element,i=r.effectiveType||r.type,(0,n.isSimpleType)(i))return this.valueHandler(r,a);var s=(o=r.isReference?this.referenceHandler(r).handleNode(t):this.handler(i).handleNode(t)).element;return void 0!==s&&(r.isMany?a.get(r.name).push(s):a.set(r.name,s),r.isReference?((0,e.assign)(s,{element:a}),this.context.addReference(s)):s.$parent=a),o},T.prototype=Object.create(w.prototype),T.prototype.createElement=function(e){var t=e.name,r=(0,n.parseNameNS)(t),i=this.model,a=this.type,o=i.getPackage(r.prefix),s=o&&c(r,o)||t;if(!a.hasType(s))throw h("unexpected element <"+e.originalName+">");return w.prototype.createElement.call(this,e)},E.prototype=Object.create(b.prototype),E.prototype.createElement=function(e){var t=e.name,r=(0,n.parseNameNS)(t).prefix,i=e.ns[r+"$uri"],a=e.attributes;return this.model.createAny(t,i,a)},E.prototype.handleChild=function(e){var t=new E(this.model,"Element",this.context).handleNode(e),n=this.element,r=t.element;return void 0!==r&&((n.$children=n.$children||[]).push(r),r.$parent=n),t},E.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)},A.prototype.fromXML=function(n,r,i){var a=r.rootHandler;r instanceof w?(a=r,r={}):"string"==typeof r?(a=this.handler(r),r={}):"string"==typeof a&&(a=this.handler(a));var o=this.model,s=this.lax,p=new m((0,e.assign)({},r,{rootHandler:a})),u=new t.Parser({proxy:!0}),c=P();function l(e,t,n){var r=t(),i=r.line,a=r.column,o=r.data;"<"===o.charAt(0)&&-1!==o.indexOf(" ")&&(o=o.slice(0,o.indexOf(" "))+">");var s="unparsable content "+(o?o+" ":"")+"detected\n\tline: "+i+"\n\tcolumn: "+a+"\n\tnested error: "+e.message;if(n)return p.addWarning({message:s,error:e}),!0;throw h(s)}function f(e,t){return l(e,t,!0)}a.context=p,c.push(a);var y=/^<\?xml /i,N=/ encoding="([^"]+)"/i,v=/^utf-8$/i;function x(e,t){try{c.peek().handleText(e)}catch(n){f(n,t)}}var b=o.getPackages().reduce(function(e,t){return e[t.uri]=t.prefix,e},{"http://www.w3.org/XML/1998/namespace":"xml"});return u.ns(b).on("openTag",function(e,t,n,r){var i=e.attrs||{},a=Object.keys(i).reduce(function(e,n){var r=t(i[n]);return e[n]=r,e},{});!function(e,t){var n=c.peek();try{c.push(n.handleNode(e))}catch(r){l(r,t,s)&&c.push(new g)}}({name:e.name,originalName:e.originalName,attributes:a,ns:e.ns},r)}).on("question",function(e){if(y.test(e)){var t=N.exec(e),n=t&&t[1];n&&!v.test(n)&&p.addWarning({message:"unsupported document encoding <"+n+">, falling back to UTF-8"})}}).on("closeTag",function(){c.pop().handleEnd()}).on("cdata",x).on("text",function(e,t,n){!function(e,t){e.trim()&&x(e,t)}(t(e),n)}).on("error",l).on("warn",f),new Promise(function(e,t){var r;try{u.parse(n),function(){var e,t,n=p.elementsById,r=p.references;for(e=0;t=r[e];e++){var i=t.element,a=n[t.id],o=d(i).propertiesByName[t.property];if(a||p.addWarning({message:"unresolved reference <"+t.id+">",element:t.element,property:t.property,value:t.id}),o.isMany){var s=i.get(o.name),u=s.indexOf(t);-1===u&&(u=s.length),a?s[u]=a:s.splice(u,1)}else i.set(o.name,a)}}()}catch(l){r=l}var i=a.element;r||i||(r=h("failed to parse document as <"+a.type.$descriptor.name+">"));var o=p.warnings,s=p.references,c=p.elementsById;return r?(r.warnings=o,t(r)):e({rootElement:i,elementsById:c,references:s,warnings:o})})},A.prototype.handler=function(e){return new T(this.model,e)};var U='<?xml version="1.0" encoding="UTF-8"?>\n',$=/<|>|'|"|&|\n\r|\n/g,S=/<|>|&/g;function O(e){var t={},n={},r={},i=[],a=[];this.byUri=function(t){return n[t]||e&&e.byUri(t)},this.add=function(e,t){n[e.uri]=e,t?i.push(e):a.push(e),this.mapPrefix(e.prefix,e.uri)},this.uriByPrefix=function(e){return t[e||"xmlns"]},this.mapPrefix=function(e,n){t[e||"xmlns"]=n},this.getNSKey=function(e){return void 0!==e.prefix?e.uri+"|"+e.prefix:e.uri},this.logUsed=function(t){var n=t.uri,i=this.getNSKey(t);r[i]=this.byUri(n),e&&e.logUsed(t)},this.getUsed=function(e){var t=this;return[].concat(i,a).filter(function(e){var n=t.getNSKey(e);return r[n]})}}function R(e){return e.charAt(0).toLowerCase()+e.slice(1)}function k(e,t){return r(t)?R(e):e}function j(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function z(t){return(0,e.isString)(t)?t:(t.prefix?t.prefix+":":"")+t.localName}function L(e){return e.getUsed().filter(function(e){return"xml"!==e.prefix}).map(function(e){return{name:"xmlns"+(e.prefix?":"+e.prefix:""),value:e.uri}})}function M(t,n){return n.isGeneric?(0,e.assign)({localName:n.ns.localName},t):(0,e.assign)({localName:k(n.ns.localName,n.$pkg)},t)}function I(t,n){return(0,e.assign)({localName:n.ns.localName},t)}function B(t){var n=t.$descriptor;return(0,e.filter)(n.properties,function(n){var r=n.name;if(n.isVirtual)return!1;if(!(0,e.has)(t,r))return!1;var i=t[r];return i!==n.default&&(null!==i&&(!n.isMany||i.length))})}var C={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},D={"<":"lt",">":"gt","&":"amp"};function G(t,n,r){return(t=(0,e.isString)(t)?t:""+t).replace(n,function(e){return"&"+r[e]+";"})}function H(e){return G(e,$,C)}function W(e){return G(e,S,D)}function X(t){return(0,e.filter)(t,function(e){return e.isAttr})}function _(t){return(0,e.filter)(t,function(e){return!e.isAttr})}function q(e){this.tagName=e}function F(){}function V(e){this.tagName=e}function K(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}function J(e,t){K.call(this,e,t)}function Q(){this.value="",this.write=function(e){this.value+=e}}function Y(e,t){var n=[""];this.append=function(t){return e.write(t),this},this.appendNewLine=function(){return t&&e.write("\n"),this},this.appendIndent=function(){return t&&e.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function Z(t){return t=(0,e.assign)({format:!1,preamble:!0},t||{}),{toXML:function(e,n){var r=n||new Q,i=new Y(r,t.format);if(t.preamble&&i.append(U),(new K).build(e).serializeTo(i),!n)return r.value}}}q.prototype.build=function(e){return this.element=e,this},q.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()},F.prototype.serializeValue=F.prototype.serializeTo=function(e){e.append(this.escape?W(this.value):this.value)},F.prototype.build=function(e,t){return this.value=t,"String"===e.type&&-1!==t.search(S)&&(this.escape=!0),this},j(V,F),V.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()},K.prototype.build=function(e){this.element=e;var t,n,r=e.$descriptor,i=this.propertyDescriptor,a=r.isGeneric;return t=a?this.parseGeneric(e):this.parseNsAttributes(e),this.ns=i?this.nsPropertyTagName(i):this.nsTagName(r),this.tagName=this.addTagName(this.ns),a||(n=B(e),this.parseAttributes(X(n)),this.parseContainments(_(n))),this.parseGenericAttributes(e,t),this},K.prototype.nsTagName=function(e){return M(this.logNamespaceUsed(e.ns),e)},K.prototype.nsPropertyTagName=function(e){return I(this.logNamespaceUsed(e.ns),e)},K.prototype.isLocalNs=function(e){return e.uri===this.ns.uri},K.prototype.nsAttributeName=function(t){var r;if(r=(0,e.isString)(t)?(0,n.parseNameNS)(t):t.ns,t.inherited)return{localName:r.localName};var i=this.logNamespaceUsed(r);return this.getNamespaces().logUsed(i),this.isLocalNs(i)?{localName:r.localName}:(0,e.assign)({localName:r.localName},i)},K.prototype.parseGeneric=function(t){var n=this,r=this.body,i=[];return(0,e.forEach)(t,function(a,o){"$body"===o?r.push((new F).build({type:"String"},a)):"$children"===o?(0,e.forEach)(a,function(e){r.push(new K(n).build(e))}):0!==o.indexOf("$")&&n.parseNsAttribute(t,o,a)&&i.push({name:o,value:a})}),i},K.prototype.parseNsAttribute=function(e,t,r){var i,a=e.$model,o=(0,n.parseNameNS)(t);if("xmlns"===o.prefix&&(i={prefix:o.localName,uri:r}),o.prefix||"xmlns"!==o.localName||(i={uri:r}),!i)return{name:t,value:r};if(a&&a.getPackage(r))this.logNamespace(i,!0,!0);else{var s=this.logNamespaceUsed(i,!0);this.getNamespaces().logUsed(s)}},K.prototype.parseNsAttributes=function(t,n){var r=this,i=t.$attrs,a=[];return(0,e.forEach)(i,function(e,n){var i=r.parseNsAttribute(t,n,e);i&&a.push(i)}),a},K.prototype.parseGenericAttributes=function(t,n){var r=this;(0,e.forEach)(n,function(e){if(e.name!==a)try{r.addAttribute(r.nsAttributeName(e.name),e.value)}catch(n){console.warn("missing namespace information for ",e.name,"=",e.value,"on",t,n)}})},K.prototype.parseContainments=function(t){var r=this,i=this.body,a=this.element;(0,e.forEach)(t,function(t){var o=a.get(t.name),u=t.isReference;if(t.isMany||(o=[o]),t.isBody)i.push((new F).build(t,o[0]));else if((0,n.isSimpleType)(t.type))(0,e.forEach)(o,function(e){i.push(new V(r.addTagName(r.nsPropertyTagName(t))).build(t,e))});else if(u)(0,e.forEach)(o,function(e){i.push(new q(r.addTagName(r.nsPropertyTagName(t))).build(e))});else{var c=s(t),l=p(t);(0,e.forEach)(o,function(e){var n;n=c?new J(r,t):l?new K(r,t):new K(r),i.push(n.build(e))})}})},K.prototype.getNamespaces=function(e){var t,n=this.namespaces,r=this.parent;return n||(t=r&&r.getNamespaces(),e||!t?this.namespaces=n=new O(t):n=t),n},K.prototype.logNamespace=function(e,t,n){var r=this.getNamespaces(n),i=e.uri,a=e.prefix;return r.byUri(i)&&!n||r.add(e,t),r.mapPrefix(a,i),e},K.prototype.logNamespaceUsed=function(e,t){var n,r,a,o=this.element.$model,s=this.getNamespaces(t),p=e.prefix,u=e.uri;if(!p&&!u)return{localName:e.localName};if(a=i[p]||o&&(o.getPackage(p)||{}).uri,!(u=u||a||s.uriByPrefix(p)))throw new Error("no namespace uri given for prefix <"+p+">");if(!(e=s.byUri(u))){for(n=p,r=1;s.uriByPrefix(n);)n=p+"_"+r++;e=this.logNamespace({prefix:n,uri:u},a===u)}return p&&s.mapPrefix(p,u),e},K.prototype.parseAttributes=function(t){var n=this,r=this.element;(0,e.forEach)(t,function(t){var i=r.get(t.name);if(t.isReference)if(t.isMany){var a=[];(0,e.forEach)(i,function(e){a.push(e.id)}),i=a.join(" ")}else i=i.id;n.addAttribute(n.nsAttributeName(t),i)})},K.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),z(e)},K.prototype.addAttribute=function(t,n){var r=this.attrs;(0,e.isString)(n)&&(n=H(n));var i=(0,e.findIndex)(r,function(e){return e.name.localName===t.localName&&e.name.uri===t.uri&&e.name.prefix===t.prefix}),a={name:t,value:n};-1!==i?r.splice(i,1,a):r.push(a)},K.prototype.serializeAttributes=function(t){var n=this.attrs,r=this.namespaces;r&&(n=L(r).concat(n)),(0,e.forEach)(n,function(e){t.append(" ").append(z(e.name)).append('="').append(e.value).append('"')})},K.prototype.serializeTo=function(t){var n=this.body[0],r=n&&n.constructor!==F;t.appendIndent().append("<"+this.tagName),this.serializeAttributes(t),t.append(n?">":" />"),n&&(r&&t.appendNewLine().indent(),(0,e.forEach)(this.body,function(e){e.serializeTo(t)}),r&&t.unindent().appendIndent(),t.append("</"+this.tagName+">")),t.appendNewLine()},j(J,K),J.prototype.parseNsAttributes=function(e){var t=K.prototype.parseNsAttributes.call(this,e),n=e.$descriptor;if(n.name===this.propertyDescriptor.type)return t;var r=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var i=e.$model.getPackage(r.uri),o=i.xml&&i.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(a),(r.prefix?r.prefix+":":"")+o+n.ns.localName),t},J.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri};
},{"min-dash":"AmEv","saxen":"SIOl","moddle":"AwVM"}],"wL8W":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=H;var e=require("min-dash"),t=require("moddle"),n=require("moddle-xml");function a(e,n){t.Moddle.call(this,e,n)}a.prototype=Object.create(t.Moddle.prototype),a.prototype.fromXML=function(t,a,i){(0,e.isString)(a)||(i=a,a="bpmn:Definitions");var s=new n.Reader((0,e.assign)({model:this,lax:!0},i)),r=s.handler(a);return s.fromXML(t,r)},a.prototype.toXML=function(e,t){var a=new n.Writer(t);return new Promise(function(t,n){try{return t({xml:a.toXML(e)})}catch(i){return n(i)}})};var i="BPMN20",s="http://www.omg.org/spec/BPMN/20100524/MODEL",r="bpmn",p=[],o=[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],m=[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],l={tagAlias:"lowerCase",typePrefix:"t"},y={name:i,uri:s,prefix:r,associations:p,types:o,enumerations:m,xml:l},u="BPMNDI",c="http://www.omg.org/spec/BPMN/20100524/DI",f="bpmndi",A=[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],d=[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],g=[],R={name:u,uri:c,prefix:f,types:A,enumerations:d,associations:g},E="DC",C="http://www.omg.org/spec/DD/20100524/DC",S="dc",M=[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],D=[],B={name:E,uri:C,prefix:S,types:M,associations:D},x="DI",b="http://www.omg.org/spec/DD/20100524/DI",v="di",w=[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],h=[],P={tagAlias:"lowerCase"},I={name:x,uri:b,prefix:v,types:w,associations:h,xml:P},N="bpmn.io colors for BPMN",O="http://bpmn.io/schema/bpmn/biocolor/1.0",F="bioc",L=[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],T=[],V=[],k={name:N,uri:O,prefix:F,types:L,enumerations:T,associations:V},G="BPMN in Color",z="http://www.omg.org/spec/BPMN/non-normative/color/1.0",K="color",q=[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],_=[],U=[],j={name:G,uri:z,prefix:K,types:q,enumerations:_,associations:U},W={bpmn:y,bpmndi:R,dc:B,di:I,bioc:k,color:j};function H(t,n){return new a((0,e.assign)({},W,t),n)}
},{"min-dash":"AmEv","moddle":"AwVM","moddle-xml":"ML73"}],"H2TG":[function(require,module,exports) {
"use strict";function e(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}Object.defineProperty(exports,"__esModule",{value:!0}),exports.elementToString=e;
},{}],"QE22":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ensureCompatDiRef=i,exports.wrapForCompatibility=r;var e=require("min-dash");function r(r){return function(){if(!window.Promise)throw new Error("Promises is not supported in this environment. Please polyfill Promise.");var t=arguments.length;if(!(t>=1&&(0,e.isFunction)(arguments[t-1])))return r.apply(this,arguments);var i=arguments[t-1];console.warn(new Error("Passing callbacks to "+r.name+" is deprecated and will be removed in a future major release. Please switch to promises: https://bpmn.io/l/moving-to-promises.html"));var n=Array.prototype.slice.call(arguments,0,-1);r.apply(this,n).then(function(e){var r=Object.keys(e)[0];return i(null,e[r])},function(e){return i(e,e.warnings)})}}var t="Tried to access di from the businessObject. The di is available through the diagram element only. For more information, see https://github.com/bpmn-io/bpmn-js/issues/1472";function i(r){(0,e.has)(r,"di")||Object.defineProperty(r,"di",{enumerable:!1,get:function(){throw new Error(t)}})}
},{"min-dash":"AmEv"}],"g5IB":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"hWyo":[function(require,module,exports) {
var process = require("process");
var n=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=c;var e=require("min-dash"),t=require("./Util"),o=require("../util/CompatibilityUtil");function r(n,e){return n.$instanceOf(e)}function i(n){return(0,e.find)(n.rootElements,function(n){return r(n,"bpmn:Process")||r(n,"bpmn:Collaboration")})}function c(n,c){var f={},a=[],l={};function u(n,e){return function(t){n(t,e)}}function m(n){f[n.id]=n}function s(e,o){try{var r=l[e.id]&&function(e,o){if(e.gfx)throw new Error(c("already rendered {element}",{element:(0,t.elementToString)(e)}));return n.element(e,l[e.id],o)}(e,o);return m(e),r}catch(i){p(i.message,{element:e,error:i}),console.error(c("failed to import {element}",{element:(0,t.elementToString)(e)})),console.error(i)}}function p(e,t){n.error(e,t)}function d(n){var e=n.bpmnElement;e?l[e.id]?p(c("multiple DI elements defined for {element}",{element:(0,t.elementToString)(e)}),{element:e}):(l[e.id]=n,(0,o.ensureCompatDiRef)(e)):p(c("no bpmnElement referenced in {element}",{element:(0,t.elementToString)(n)}),{element:n})}function h(n){var t;d(t=n.plane),(0,e.forEach)(t.planeElement,E)}function E(n){d(n)}function b(){for(;a.length;)a.shift()()}function g(n,e){A(n,e),y(n.ioSpecification,e),x(n.artifacts,e),m(n)}function S(n,e){s(n,e)}function w(n,e){s(n,e)}function v(n,e){s(n,e)}function T(n,e){s(n,e)}function D(n,e){s(n,e)}function x(n,t){(0,e.forEach)(n,function(n){r(n,"bpmn:Association")?a.push(function(){D(n,t)}):D(n,t)})}function y(n,t){n&&((0,e.forEach)(n.dataInputs,u(v,t)),(0,e.forEach)(n.dataOutputs,u(T,t)))}function O(n,e){A(n,e),x(n.artifacts,e)}function P(n,t){var o=s(n,t);r(n,"bpmn:SubProcess")&&O(n,o||t),r(n,"bpmn:Activity")&&y(n.ioSpecification,t),a.push(function(){(0,e.forEach)(n.dataInputAssociations,u(w,t)),(0,e.forEach)(n.dataOutputAssociations,u(w,t))})}function q(n,e){s(n,e)}function R(n,t){a.push(function(){var o=s(n,t);n.childLaneSet&&j(n.childLaneSet,o||t),function(n){(0,e.forEach)(n.flowNodeRef,function(e){var t=e.get("lanes");t&&t.push(n)})}(n)})}function j(n,t){(0,e.forEach)(n.lanes,u(R,t))}function A(n,o){!function(n,o){(0,e.forEach)(n,function(n){r(n,"bpmn:SequenceFlow")?a.push(function(){!function(n,e){s(n,e)}(n,o)}):r(n,"bpmn:BoundaryEvent")?a.unshift(function(){P(n,o)}):r(n,"bpmn:FlowNode")?P(n,o):r(n,"bpmn:DataObject")||(r(n,"bpmn:DataStoreReference")?q(n,o):r(n,"bpmn:DataObjectReference")?q(n,o):p(c("unrecognized flowElement {element} in context {context}",{element:(0,t.elementToString)(n),context:o?(0,t.elementToString)(o.businessObject):"null"}),{element:n,context:o}))})}(n.flowElements,o),n.laneSets&&function(n,t){(0,e.forEach)(n,u(j,t))}(n.laneSets,o)}function C(n,e){var t=s(n,e),o=n.processRef;o&&g(o,t||e)}return{handleDeferred:b,handleDefinitions:function(o,m){var s=o.diagrams;if(m&&-1===s.indexOf(m))throw new Error(c("diagram not part of bpmn:Definitions"));if(!m&&s&&s.length&&(m=s[0]),!m)throw new Error(c("no diagram to display"));l={},h(m);var E=m.plane;if(!E)throw new Error(c("no plane for {element}",{element:(0,t.elementToString)(m)}));var w=E.bpmnElement;if(!w){if(!(w=i(o)))throw new Error(c("no process or collaboration to display"));p(c("correcting missing bpmnElement on {plane} to {rootElement}",{plane:(0,t.elementToString)(E),rootElement:(0,t.elementToString)(w)})),E.bpmnElement=w,d(E)}var v,T,D=function(e,t){return n.root(e,l[e.id],t)}(w,E);if(r(w,"bpmn:Process")||r(w,"bpmn:SubProcess"))g(w,D);else{if(!r(w,"bpmn:Collaboration"))throw new Error(c("unsupported bpmnElement for {plane}: {rootElement}",{plane:(0,t.elementToString)(E),rootElement:(0,t.elementToString)(w)}));v=w,T=D,(0,e.forEach)(v.participants,u(C,T)),x(v.artifacts,T),a.push(function(){!function(n,t){(0,e.forEach)(n,u(S,t))}(v.messageFlows,T)}),function(n,t){(0,e.filter)(n,function(n){return!f[n.id]&&r(n,"bpmn:Process")&&n.laneSets}).forEach(u(g,t))}(o.rootElements,D)}b()},handleSubProcess:O,registerDi:d}}
},{"min-dash":"AmEv","./Util":"H2TG","../util/CompatibilityUtil":"QE22","process":"g5IB"}],"HvoA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getBusinessObject=r,exports.getDi=s,exports.is=t,exports.isAny=n;var e=require("min-dash");function t(e,t){var n=r(e);return n&&"function"==typeof n.$instanceOf&&n.$instanceOf(t)}function n(n,r){return(0,e.some)(r,function(e){return t(n,e)})}function r(e){return e&&e.businessObject||e}function s(e){return e&&e.di}
},{"min-dash":"AmEv"}],"q2xA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.importBpmnDiagram=i;var n=require("min-dash"),r=t(require("./BpmnTreeWalker")),e=require("../util/ModelUtil");function t(n){return n&&n.__esModule?n:{default:n}}function i(e,t,i){var a,s,u,f,p=[];return new Promise(function(c,m){try{return a=e.get("bpmnImporter"),s=e.get("eventBus"),u=e.get("translate"),f=e.get("canvas"),s.fire("import.render.start",{definitions:t}),function(e,t){var i={root:function(n,r){return a.add(n,r)},element:function(n,r,e){return a.add(n,r,e)},error:function(n,r){p.push({message:n,context:r})}},s=new r.default(i,u);t=t||e.diagrams&&e.diagrams[0];var c=o(e,t);if(!c)throw new Error(u("no diagram to display"));(0,n.forEach)(c,function(n){s.handleDefinitions(e,n)});var m=t.plane.bpmnElement.id;f.setRootElement(f.findRoot(m+"_plane")||f.findRoot(m))}(t,i),s.fire("import.render.complete",{error:void 0,warnings:p}),c({warnings:p})}catch(l){return l.warnings=p,m(l)}})}function o(r,t){if(t){var i,o=t.plane.bpmnElement,u=o;(0,e.is)(o,"bpmn:Process")||(0,e.is)(o,"bpmn:Collaboration")||(u=s(o)),i=(0,e.is)(u,"bpmn:Collaboration")?u:(0,n.find)(r.rootElements,function(r){if((0,e.is)(r,"bpmn:Collaboration"))return(0,n.find)(r.participants,function(n){return n.processRef===u})});var f=[u];i&&(f=(0,n.map)(i.participants,function(n){return n.processRef})).push(i);var p=a(f),c=[t],m=[o];return(0,n.forEach)(r.diagrams,function(n){var r=n.plane.bpmnElement;-1!==p.indexOf(r)&&-1===m.indexOf(r)&&(c.push(n),m.push(r))}),c}}function a(r){var e=[];return(0,n.forEach)(r,function(n){n&&(e.push(n),e=e.concat(a(n.flowElements)))}),e}function s(n){for(var r=n;r;){if((0,e.is)(r,"bpmn:Process"))return r;r=r.$parent}}
},{"min-dash":"AmEv","./BpmnTreeWalker":"hWyo","../util/ModelUtil":"HvoA"}],"UBaT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LOGO_STYLES=exports.LINK_STYLES=exports.BPMNIO_IMG=void 0,exports.open=h;var e,t=require("min-dom"),o='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>',i=exports.BPMNIO_IMG=o,r=exports.LOGO_STYLES={verticalAlign:"middle"},n=exports.LINK_STYLES={color:"#404040"},s={zIndex:"1001",position:"fixed",top:"0",left:"0",right:"0",bottom:"0"},a={width:"100%",height:"100%",background:"rgba(40,40,40,0.2)"},l={position:"absolute",left:"50%",top:"40%",transform:"translate(-50%)",width:"260px",padding:"10px",background:"white",boxShadow:"0 1px 4px rgba(0,0,0,0.3)",fontFamily:"Helvetica, Arial, sans-serif",fontSize:"14px",display:"flex",lineHeight:"1.3"},p='<div class="bjs-powered-by-lightbox"><div class="backdrop"></div><div class="notice"><a href="https://bpmn.io" target="_blank" rel="noopener" class="link">'+i+'</a><span>Web-based tooling for BPMN, DMN and CMMN diagrams powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>';function d(){e=(0,t.domify)(p),(0,t.assignStyle)(e,s),(0,t.assignStyle)((0,t.query)("svg",e),r),(0,t.assignStyle)((0,t.query)(".backdrop",e),a),(0,t.assignStyle)((0,t.query)(".notice",e),l),(0,t.assignStyle)((0,t.query)(".link",e),n,{margin:"15px 20px 15px 10px",alignSelf:"center"})}function h(){e||(d(),t.delegate.bind(e,".backdrop","click",function(t){document.body.removeChild(e)})),document.body.appendChild(e)}
},{"min-dom":"fWg5"}],"gSaJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=p;var t=require("min-dash"),e=require("min-dom"),i=require("tiny-svg"),n=d(require("diagram-js")),o=d(require("bpmn-moddle")),r=d(require("inherits-browser")),s=require("./import/Importer"),a=require("./util/CompatibilityUtil"),c=require("./util/PoweredByUtil");function d(t){return t&&t.__esModule?t:{default:t}}function p(e){e=(0,t.assign)({},h,e),this._moddle=this._createModdle(e),this._container=this._createContainer(e),g(this._container),this._init(this._container,this._moddle,e)}function l(t,e){return t.warnings=e,t}function u(t){const e=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(t.message);return e&&(t.message="unparsable content <"+e[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+e[2]),t}(0,r.default)(p,n.default),p.prototype.importXML=(0,a.wrapForCompatibility)(async function(t,e){const i=this;let n=[];try{let s;t=this._emit("import.parse.start",{xml:t})||t;try{s=await this._moddle.fromXML(t,"bpmn:Definitions")}catch(o){throw this._emit("import.parse.complete",{error:o}),o}let a=s.rootElement;const c=s.references,d=s.warnings,p=s.elementsById;n=n.concat(d),a=this._emit("import.parse.complete",function(t){const e=i.get("eventBus").createEvent(t);return Object.defineProperty(e,"context",{enumerable:!0,get:function(){return console.warn(new Error("import.parse.complete <context> is deprecated and will be removed in future library versions")),{warnings:t.warnings,references:t.references,elementsById:t.elementsById}}}),e}({error:null,definitions:a,elementsById:p,references:c,warnings:n}))||a;const h=await this.importDefinitions(a,e);return n=n.concat(h.warnings),this._emit("import.done",{error:null,warnings:n}),{warnings:n}}catch(r){let t=r;throw l(t,n=n.concat(t.warnings||[])),t=u(t),this._emit("import.done",{error:t,warnings:t.warnings}),t}}),p.prototype.importDefinitions=(0,a.wrapForCompatibility)(async function(t,e){return this._setDefinitions(t),{warnings:(await this.open(e)).warnings}}),p.prototype.open=(0,a.wrapForCompatibility)(async function(t){const e=this._definitions;let i=t;if(!e){const t=new Error("no XML imported");throw l(t,[]),t}if("string"==typeof t&&!(i=f(e,t))){const e=new Error("BPMNDiagram <"+t+"> not found");throw l(e,[]),e}try{this.clear()}catch(o){throw l(o,[]),o}const{warnings:n}=await(0,s.importBpmnDiagram)(this,e,i);return{warnings:n}}),p.prototype.saveXML=(0,a.wrapForCompatibility)(async function(t){t=t||{};let e,i,n=this._definitions;try{if(!n)throw new Error("no definitions loaded");n=this._emit("saveXML.start",{definitions:n})||n,i=(await this._moddle.toXML(n,t)).xml,i=this._emit("saveXML.serialized",{xml:i})||i}catch(r){e=r}const o=e?{error:e}:{xml:i};if(this._emit("saveXML.done",o),e)throw e;return o}),p.prototype.saveSVG=(0,a.wrapForCompatibility)(async function(t={}){let n,o;this._emit("saveSVG.start");try{const t=this.get("canvas"),s=t.getActiveLayer(),a=(0,e.query)("defs",t._svg),c=(0,i.innerSVG)(s),d=a?"<defs>"+(0,i.innerSVG)(a)+"</defs>":"",p=s.getBBox();n='<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- created with bpmn-js / http://bpmn.io --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+p.width+'" height="'+p.height+'" viewBox="'+p.x+" "+p.y+" "+p.width+" "+p.height+'" version="1.1">'+d+c+"</svg>"}catch(r){o=r}if(this._emit("saveSVG.done",{error:o,svg:n}),o)throw o;return{svg:n}}),p.prototype._setDefinitions=function(t){this._definitions=t},p.prototype.getModules=function(t){return this._modules},p.prototype.clear=function(){this.getDefinitions()&&n.default.prototype.clear.call(this)},p.prototype.destroy=function(){n.default.prototype.destroy.call(this),(0,e.remove)(this._container)},p.prototype.on=function(t,e,i,n){return this.get("eventBus").on(t,e,i,n)},p.prototype.off=function(t,e){this.get("eventBus").off(t,e)},p.prototype.attachTo=function(t){if(!t)throw new Error("parentNode required");this.detach(),t.get&&t.constructor.prototype.jquery&&(t=t.get(0)),"string"==typeof t&&(t=(0,e.query)(t)),t.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()},p.prototype.getDefinitions=function(){return this._definitions},p.prototype.detach=function(){const t=this._container,e=t.parentNode;e&&(this._emit("detach",{}),e.removeChild(t))},p.prototype._init=function(e,i,o){const r=o.modules||this.getModules(o),s=o.additionalModules||[],a=[].concat([{bpmnjs:["value",this],moddle:["value",i]}],r,s),c=(0,t.assign)((0,t.omit)(o,["additionalModules"]),{canvas:(0,t.assign)({},o.canvas,{container:e}),modules:a});n.default.call(this,c),o&&o.container&&this.attachTo(o.container)},p.prototype._emit=function(t,e){return this.get("eventBus").fire(t,e)},p.prototype._createContainer=function(t){const i=(0,e.domify)('<div class="bjs-container"></div>');return(0,e.assignStyle)(i,{width:m(t.width),height:m(t.height),position:t.position}),i},p.prototype._createModdle=function(e){const i=(0,t.assign)({},this._moddleExtensions,e.moddleExtensions);return new o.default(i)},p.prototype._modules=[];const h={width:"100%",height:"100%",position:"relative"};function m(e){return e+((0,t.isNumber)(e)?"px":"")}function f(e,i){return i&&(0,t.find)(e.diagrams,function(t){return t.id===i})||null}function g(t){const i='<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" >'+c.BPMNIO_IMG+"</a>",n=(0,e.domify)(i);(0,e.assignStyle)((0,e.query)("svg",n),c.LOGO_STYLES),(0,e.assignStyle)(n,c.LINK_STYLES,{position:"absolute",bottom:"15px",right:"15px",zIndex:"100"}),t.appendChild(n),e.event.bind(n,"click",function(t){(0,c.open)(),t.preventDefault()})}
},{"min-dash":"AmEv","min-dom":"fWg5","tiny-svg":"WdCh","diagram-js":"zTA6","bpmn-moddle":"wL8W","inherits-browser":"hUM3","./import/Importer":"q2xA","./util/CompatibilityUtil":"QE22","./util/PoweredByUtil":"UBaT"}],"QfFV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=i(require("inherits-browser")),t=i(require("ids")),r=i(require("./BaseViewer"));function i(e){return e&&e.__esModule?e:{default:e}}function o(e){r.default.call(this,e),this.on("import.parse.complete",function(e){e.error||this._collectIds(e.definitions,e.elementsById)},this),this.on("diagram.destroy",function(){this.get("moddle").ids.clear()},this)}(0,e.default)(o,r.default),o.prototype._createModdle=function(e){var i=r.default.prototype._createModdle.call(this,e);return i.ids=new t.default([32,36,1]),i},o.prototype._collectIds=function(e,t){var r,i=e.$model.ids;for(r in i.clear(),t)i.claim(r,t[r])};
},{"inherits-browser":"hUM3","ids":"Ia3Z","./BaseViewer":"gSaJ"}],"lWoN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hasCompensateEventDefinition=p,exports.hasErrorEventDefinition=o,exports.hasEscalationEventDefinition=u,exports.hasEventDefinition=r,exports.isEventSubProcess=s,exports.isExpanded=t,exports.isInterrupting=i;var e=require("./ModelUtil"),n=require("min-dash");function t(n,t){return!(0,e.is)(n,"bpmn:CallActivity")&&((0,e.is)(n,"bpmn:SubProcess")?!(!(t=t||(0,e.getDi)(n))||!(0,e.is)(t,"bpmndi:BPMNPlane"))||t&&!!t.isExpanded:!(0,e.is)(n,"bpmn:Participant")||!!(0,e.getBusinessObject)(n).processRef)}function i(n){return n&&!1!==(0,e.getBusinessObject)(n).isInterrupting}function s(n){return n&&!!(0,e.getBusinessObject)(n).triggeredByEvent}function r(t,i){var s=(0,e.getBusinessObject)(t),r=!1;return s.eventDefinitions&&(0,n.forEach)(s.eventDefinitions,function(n){(0,e.is)(n,i)&&(r=!0)}),r}function o(e){return r(e,"bpmn:ErrorEventDefinition")}function u(e){return r(e,"bpmn:EscalationEventDefinition")}function p(e){return r(e,"bpmn:CompensateEventDefinition")}
},{"./ModelUtil":"HvoA","min-dash":"AmEv"}],"v5cn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLabel=a,exports.setLabel=r;var e=require("../../util/ModelUtil");function t(t){return(0,e.is)(t,"bpmn:FlowElement")||(0,e.is)(t,"bpmn:Participant")||(0,e.is)(t,"bpmn:Lane")||(0,e.is)(t,"bpmn:SequenceFlow")||(0,e.is)(t,"bpmn:MessageFlow")||(0,e.is)(t,"bpmn:DataInput")||(0,e.is)(t,"bpmn:DataOutput")?"name":(0,e.is)(t,"bpmn:TextAnnotation")?"text":(0,e.is)(t,"bpmn:Group")?"categoryValueRef":void 0}function n(e){var t=e.categoryValueRef;return t&&t.value||""}function a(e){var a=e.businessObject,r=t(a);if(r)return"categoryValueRef"===r?n(a):a[r]||""}function r(e,n,a){var r=e.businessObject,u=t(r);return u&&("categoryValueRef"===u?r.categoryValueRef.value=n:r[u]=n),e}
},{"../../util/ModelUtil":"HvoA"}],"twga":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.black=void 0,exports.getCirclePath=p,Object.defineProperty(exports,"getDi",{enumerable:!0,get:function(){return e.getDi}}),exports.getDiamondPath=h,exports.getFillColor=u,exports.getLabelColor=s,exports.getRectPath=d,exports.getRoundRectPath=g,exports.getSemantic=c,exports.getStrokeColor=a,exports.isCollection=l,exports.isThrowEvent=i,exports.isTypedEvent=n;var t=require("min-dash"),e=require("../util/ModelUtil"),r=require("diagram-js/lib/util/RenderUtil"),o=exports.black="hsl(225, 10%, 15%)";function n(e,r,o){return(0,t.some)(e.eventDefinitions,function(n){return n.$type===r&&function(e,r){return(0,t.every)(r,function(t,r){return e[r]==t})}(e,o)})}function i(t){return"bpmn:IntermediateThrowEvent"===t.$type||"bpmn:EndEvent"===t.$type}function l(t){var e=t.dataObjectRef;return t.isCollection||e&&e.isCollection}function c(t){return t.businessObject}function u(t,r){var o=(0,e.getDi)(t);return o.get("color:background-color")||o.get("bioc:fill")||r||"white"}function a(t,r){var n=(0,e.getDi)(t);return n.get("color:border-color")||n.get("bioc:stroke")||r||o}function s(t,r,o){var n=(0,e.getDi)(t).get("label");return n&&n.get("color:color")||r||a(t,o)}function p(t){var e=t.x+t.width/2,o=t.y+t.height/2,n=t.width/2,i=[["M",e,o],["m",0,-n],["a",n,n,0,1,1,0,2*n],["a",n,n,0,1,1,0,-2*n],["z"]];return(0,r.componentsToPath)(i)}function g(t,e){var o=t.x,n=t.y,i=t.width,l=t.height,c=[["M",o+e,n],["l",i-2*e,0],["a",e,e,0,0,1,e,e],["l",0,l-2*e],["a",e,e,0,0,1,-e,e],["l",2*e-i,0],["a",e,e,0,0,1,-e,-e],["l",0,2*e-l],["a",e,e,0,0,1,e,-e],["z"]];return(0,r.componentsToPath)(c)}function h(t){var e=t.width/2,o=t.height/2,n=[["M",t.x+e,t.y],["l",e,o],["l",-e,o],["l",-e,-o],["z"]];return(0,r.componentsToPath)(n)}function d(t){var e=t.x,o=t.y,n=t.width,i=[["M",e,o],["l",n,0],["l",0,t.height],["l",-n,0],["z"]];return(0,r.componentsToPath)(i)}
},{"min-dash":"AmEv","../util/ModelUtil":"HvoA","diagram-js/lib/util/RenderUtil":"D85W"}],"GsDG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=E;var t=d(require("inherits-browser")),e=require("min-dash"),o=d(require("diagram-js/lib/draw/BaseRenderer")),i=require("../util/DiUtil"),r=require("../features/label-editing/LabelUtil"),n=require("../util/ModelUtil"),a=require("diagram-js/lib/util/RenderUtil"),l=require("./BpmnRenderUtil"),c=require("min-dom"),s=require("tiny-svg"),h=require("diagram-js/lib/util/SvgTransformUtil"),g=d(require("ids"));function d(t){return t&&t.__esModule?t:{default:t}}var p=new g.default,k=10,S=3,f=.95,m=.35,u=10;function E(t,n,g,d,E,y,b){o.default.call(this,n,b);var C=t&&t.defaultFillColor,v=t&&t.defaultStrokeColor,x=t&&t.defaultLabelColor,T=p.next(),w={};function F(t){return g.computeStyle(t,{strokeLinecap:"round",strokeLinejoin:"round",stroke:l.black,strokeWidth:2,fill:"white"})}function W(t){return g.computeStyle(t,["no-fill"],{strokeLinecap:"round",strokeLinejoin:"round",stroke:l.black,strokeWidth:2})}function P(t,e){var{ref:o={x:0,y:0},scale:i=1,element:r}=e,n=(0,s.create)("marker",{id:t,viewBox:"0 0 20 20",refX:o.x,refY:o.y,markerWidth:20*i,markerHeight:20*i,orient:"auto"});(0,s.append)(n,r);var a=(0,c.query)("defs",E._svg);a||(a=(0,s.create)("defs"),(0,s.append)(E._svg,a)),(0,s.append)(a,n),w[t]=n}function A(t){return t.replace(/[^0-9a-zA-z]+/g,"_")}function _(t,e,o){var i=t+"-"+A(e)+"-"+A(o)+"-"+T;return w[i]||function(t,e,o,i){if("sequenceflow-end"===e){var r=(0,s.create)("path",{d:"M 1 5 L 11 10 L 1 15 Z",...F({fill:i,stroke:i,strokeWidth:1})});P(t,{element:r,ref:{x:11,y:10},scale:.5})}if("messageflow-start"===e){var n=(0,s.create)("circle",{cx:6,cy:6,r:3.5,...F({fill:o,stroke:i,strokeWidth:1,strokeDasharray:[1e4,1]})});P(t,{element:n,ref:{x:6,y:6}})}if("messageflow-end"===e){var a=(0,s.create)("path",{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z",...F({fill:o,stroke:i,strokeWidth:1,strokeDasharray:[1e4,1]})});P(t,{element:a,ref:{x:8.5,y:5}})}if("association-start"===e){var l=(0,s.create)("path",{d:"M 11 5 L 1 10 L 11 15",...W({fill:"none",stroke:i,strokeWidth:1.5,strokeDasharray:[1e4,1]})});P(t,{element:l,ref:{x:1,y:10},scale:.5})}if("association-end"===e){var c=(0,s.create)("path",{d:"M 1 5 L 11 10 L 1 15",...W({fill:"none",stroke:i,strokeWidth:1.5,strokeDasharray:[1e4,1]})});P(t,{element:c,ref:{x:11,y:10},scale:.5})}if("conditional-flow-marker"===e){var h=(0,s.create)("path",{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z",...F({fill:o,stroke:i})});P(t,{element:h,ref:{x:-1,y:10},scale:.5})}if("conditional-default-flow-marker"===e){var g=(0,s.create)("path",{d:"M 6 4 L 10 16",...F({stroke:i})});P(t,{element:g,ref:{x:0,y:10},scale:.5})}}(i,t,e,o),"url(#"+i+")"}function D(t,o,i,r,n){(0,e.isObject)(r)&&(n=r,r=0),r=r||0,"none"===(n=F(n)).fill&&delete n.fillOpacity;var a=o/2,l=i/2,c=(0,s.create)("circle",{cx:a,cy:l,r:Math.round((o+i)/4-r),...n});return(0,s.append)(t,c),c}function L(t,o,i,r,n,a){(0,e.isObject)(n)&&(a=n,n=0),n=n||0,a=F(a);var l=(0,s.create)("rect",{x:n,y:n,width:o-2*n,height:i-2*n,rx:r,ry:r,...a});return(0,s.append)(t,l),l}function M(t,e,o,i){o=W(o);var r=(0,a.createLine)(e,o,i);return(0,s.append)(t,r),r}function R(t,e,o){return M(t,e,o,5)}function O(t,e,o){o=W(o);var i=(0,s.create)("path",{...o,d:e});return(0,s.append)(t,i),i}function N(t,o,i,r){return O(o,i,(0,e.assign)({"data-marker":t},r))}function H(t){return U[t]}function I(t){return function(e,o){return H(t)(e,o)}}function G(t,e){var o=(0,l.getSemantic)(t),i=(0,l.isThrowEvent)(o);return o.eventDefinitions&&o.eventDefinitions.length>1?o.parallelMultiple?H("bpmn:ParallelMultipleEventDefinition")(e,t,i):H("bpmn:MultipleEventDefinition")(e,t,i):(0,l.isTypedEvent)(o,"bpmn:MessageEventDefinition")?H("bpmn:MessageEventDefinition")(e,t,i):(0,l.isTypedEvent)(o,"bpmn:TimerEventDefinition")?H("bpmn:TimerEventDefinition")(e,t,i):(0,l.isTypedEvent)(o,"bpmn:ConditionalEventDefinition")?H("bpmn:ConditionalEventDefinition")(e,t):(0,l.isTypedEvent)(o,"bpmn:SignalEventDefinition")?H("bpmn:SignalEventDefinition")(e,t,i):(0,l.isTypedEvent)(o,"bpmn:EscalationEventDefinition")?H("bpmn:EscalationEventDefinition")(e,t,i):(0,l.isTypedEvent)(o,"bpmn:LinkEventDefinition")?H("bpmn:LinkEventDefinition")(e,t,i):(0,l.isTypedEvent)(o,"bpmn:ErrorEventDefinition")?H("bpmn:ErrorEventDefinition")(e,t,i):(0,l.isTypedEvent)(o,"bpmn:CancelEventDefinition")?H("bpmn:CancelEventDefinition")(e,t,i):(0,l.isTypedEvent)(o,"bpmn:CompensateEventDefinition")?H("bpmn:CompensateEventDefinition")(e,t,i):(0,l.isTypedEvent)(o,"bpmn:TerminateEventDefinition")?H("bpmn:TerminateEventDefinition")(e,t,i):null}function q(t,o,i){i=(0,e.assign)({size:{width:100}},i);var r=y.createText(o||"",i);return(0,s.classes)(r).add("djs-label"),(0,s.append)(t,r),r}function K(t,e,o){return q(t,(0,l.getSemantic)(e).name,{box:e,align:o,padding:7,style:{fill:(0,l.getLabelColor)(e,x,v)}})}function B(t,e,o){var i=q(t,e,{box:{height:30,width:o.height},align:"center-middle",style:{fill:(0,l.getLabelColor)(o,x,v)}}),r=-1*o.height;(0,h.transform)(i,0,-r,270)}var U=this.handlers={"bpmn:Event":function(t,e,o){return"fillOpacity"in o||(o.fillOpacity=f),D(t,e.width,e.height,o)},"bpmn:StartEvent":function(t,e){var o={fill:(0,l.getFillColor)(e,C),stroke:(0,l.getStrokeColor)(e,v)};(0,l.getSemantic)(e).isInterrupting||(o={strokeDasharray:"6",fill:(0,l.getFillColor)(e,C),stroke:(0,l.getStrokeColor)(e,v)});var i=H("bpmn:Event")(t,e,o);return G(e,t),i},"bpmn:MessageEventDefinition":function(t,e,o){return O(t,d.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:e.width,containerHeight:e.height,position:{mx:.235,my:.315}}),{strokeWidth:1,fill:o?(0,l.getStrokeColor)(e,v):(0,l.getFillColor)(e,C),stroke:o?(0,l.getFillColor)(e,C):(0,l.getStrokeColor)(e,v)})},"bpmn:TimerEventDefinition":function(t,e){var o=D(t,e.width,e.height,.2*e.height,{strokeWidth:2,fill:(0,l.getFillColor)(e,C),stroke:(0,l.getStrokeColor)(e,v)});O(t,d.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:e.width,containerHeight:e.height,position:{mx:.5,my:.5}}),{strokeWidth:2,stroke:(0,l.getStrokeColor)(e,v)});for(var i=0;i<12;i++){var r=d.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:e.width,containerHeight:e.height,position:{mx:.5,my:.5}}),n=e.width/2;O(t,r,{strokeWidth:1,transform:"rotate("+30*i+","+e.height/2+","+n+")",stroke:(0,l.getStrokeColor)(e,v)})}return o},"bpmn:EscalationEventDefinition":function(t,e,o){return O(t,d.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:e.width,containerHeight:e.height,position:{mx:.5,my:.2}}),{strokeWidth:1,fill:o?(0,l.getStrokeColor)(e,v):"none",stroke:(0,l.getStrokeColor)(e,v)})},"bpmn:ConditionalEventDefinition":function(t,e){return O(t,d.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:e.width,containerHeight:e.height,position:{mx:.5,my:.222}}),{strokeWidth:1,stroke:(0,l.getStrokeColor)(e,v)})},"bpmn:LinkEventDefinition":function(t,e,o){return O(t,d.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:e.width,containerHeight:e.height,position:{mx:.57,my:.263}}),{strokeWidth:1,fill:o?(0,l.getStrokeColor)(e,v):"none",stroke:(0,l.getStrokeColor)(e,v)})},"bpmn:ErrorEventDefinition":function(t,e,o){return O(t,d.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:e.width,containerHeight:e.height,position:{mx:.2,my:.722}}),{strokeWidth:1,fill:o?(0,l.getStrokeColor)(e,v):"none",stroke:(0,l.getStrokeColor)(e,v)})},"bpmn:CancelEventDefinition":function(t,e,o){var i=O(t,d.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:e.width,containerHeight:e.height,position:{mx:.638,my:-.055}}),{strokeWidth:1,fill:o?(0,l.getStrokeColor)(e,v):"none",stroke:(0,l.getStrokeColor)(e,v)});return(0,h.rotate)(i,45),i},"bpmn:CompensateEventDefinition":function(t,e,o){return O(t,d.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:e.width,containerHeight:e.height,position:{mx:.22,my:.5}}),{strokeWidth:1,fill:o?(0,l.getStrokeColor)(e,v):"none",stroke:(0,l.getStrokeColor)(e,v)})},"bpmn:SignalEventDefinition":function(t,e,o){return O(t,d.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:e.width,containerHeight:e.height,position:{mx:.5,my:.2}}),{strokeWidth:1,fill:o?(0,l.getStrokeColor)(e,v):"none",stroke:(0,l.getStrokeColor)(e,v)})},"bpmn:MultipleEventDefinition":function(t,e,o){return O(t,d.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:e.width,containerHeight:e.height,position:{mx:.222,my:.36}}),{strokeWidth:1,fill:o?(0,l.getStrokeColor)(e,v):"none"})},"bpmn:ParallelMultipleEventDefinition":function(t,e){return O(t,d.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:e.width,containerHeight:e.height,position:{mx:.458,my:.194}}),{strokeWidth:1,fill:(0,l.getStrokeColor)(e,v),stroke:(0,l.getStrokeColor)(e,v)})},"bpmn:EndEvent":function(t,e){var o=H("bpmn:Event")(t,e,{strokeWidth:4,fill:(0,l.getFillColor)(e,C),stroke:(0,l.getStrokeColor)(e,v)});return G(e,t),o},"bpmn:TerminateEventDefinition":function(t,e){return D(t,e.width,e.height,8,{strokeWidth:4,fill:(0,l.getStrokeColor)(e,v),stroke:(0,l.getStrokeColor)(e,v)})},"bpmn:IntermediateEvent":function(t,e){var o=H("bpmn:Event")(t,e,{strokeWidth:1.5,fill:(0,l.getFillColor)(e,C),stroke:(0,l.getStrokeColor)(e,v)});return D(t,e.width,e.height,S,{strokeWidth:1.5,fill:(0,l.getFillColor)(e,"none"),stroke:(0,l.getStrokeColor)(e,v)}),G(e,t),o},"bpmn:IntermediateCatchEvent":I("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":I("bpmn:IntermediateEvent"),"bpmn:Activity":function(t,e,o){return"fillOpacity"in(o=o||{})||(o.fillOpacity=f),L(t,e.width,e.height,k,o)},"bpmn:Task":function(t,e){var o={fill:(0,l.getFillColor)(e,C),stroke:(0,l.getStrokeColor)(e,v)},i=H("bpmn:Activity")(t,e,o);return K(t,e,"center-middle"),V(t,e),i},"bpmn:ServiceTask":function(t,e){var o=H("bpmn:Task")(t,e);return O(t,d.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}}),{strokeWidth:1,fill:(0,l.getFillColor)(e,C),stroke:(0,l.getStrokeColor)(e,v)}),O(t,d.getScaledPath("TASK_TYPE_SERVICE_FILL",{abspos:{x:17.2,y:18}}),{strokeWidth:0,fill:(0,l.getFillColor)(e,C)}),O(t,d.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}}),{strokeWidth:1,fill:(0,l.getFillColor)(e,C),stroke:(0,l.getStrokeColor)(e,v)}),o},"bpmn:UserTask":function(t,e){var o=H("bpmn:Task")(t,e);return O(t,d.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:(0,l.getFillColor)(e,C),stroke:(0,l.getStrokeColor)(e,v)}),O(t,d.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:(0,l.getFillColor)(e,C),stroke:(0,l.getStrokeColor)(e,v)}),O(t,d.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:(0,l.getStrokeColor)(e,v),stroke:(0,l.getStrokeColor)(e,v)}),o},"bpmn:ManualTask":function(t,e){var o=H("bpmn:Task")(t,e);return O(t,d.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}}),{strokeWidth:.5,fill:(0,l.getFillColor)(e,C),stroke:(0,l.getStrokeColor)(e,v)}),o},"bpmn:SendTask":function(t,e){var o=H("bpmn:Task")(t,e);return O(t,d.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}}),{strokeWidth:1,fill:(0,l.getStrokeColor)(e,v),stroke:(0,l.getFillColor)(e,C)}),o},"bpmn:ReceiveTask":function(t,e){var o,i=(0,l.getSemantic)(e),r=H("bpmn:Task")(t,e);return i.instantiate?(D(t,28,28,4.4,{strokeWidth:1}),o=d.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):o=d.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),O(t,o,{strokeWidth:1,fill:(0,l.getFillColor)(e,C),stroke:(0,l.getStrokeColor)(e,v)}),r},"bpmn:ScriptTask":function(t,e){var o=H("bpmn:Task")(t,e);return O(t,d.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}}),{strokeWidth:1,stroke:(0,l.getStrokeColor)(e,v)}),o},"bpmn:BusinessRuleTask":function(t,e){var o=H("bpmn:Task")(t,e),i=O(t,d.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}}));(0,s.attr)(i,{strokeWidth:1,fill:(0,l.getFillColor)(e,"#aaaaaa"),stroke:(0,l.getStrokeColor)(e,v)});var r=O(t,d.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}}));return(0,s.attr)(r,{strokeWidth:1,stroke:(0,l.getStrokeColor)(e,v)}),o},"bpmn:SubProcess":function(t,e,o){o={fill:(0,l.getFillColor)(e,C),stroke:(0,l.getStrokeColor)(e,v),...o};var r=H("bpmn:Activity")(t,e,o),n=(0,i.isExpanded)(e);return(0,i.isEventSubProcess)(e)&&(0,s.attr)(r,{strokeDasharray:"0, 5.5",strokeWidth:2.5}),K(t,e,n?"center-top":"center-middle"),n?V(t,e):V(t,e,["SubProcessMarker"]),r},"bpmn:AdHocSubProcess":function(t,e){return H("bpmn:SubProcess")(t,e)},"bpmn:Transaction":function(t,e){var o=H("bpmn:SubProcess")(t,e,{strokeWidth:1.5}),i=g.style(["no-fill","no-events"],{stroke:(0,l.getStrokeColor)(e,v),strokeWidth:1.5});return L(t,e.width,e.height,k-3,S,i),o},"bpmn:CallActivity":function(t,e){return H("bpmn:SubProcess")(t,e,{strokeWidth:5})},"bpmn:Participant":function(t,e){var o={fillOpacity:f,fill:(0,l.getFillColor)(e,C),stroke:(0,l.getStrokeColor)(e,v),strokeWidth:1.5},r=H("bpmn:Lane")(t,e,o);(0,i.isExpanded)(e)?(M(t,[{x:30,y:0},{x:30,y:e.height}],{stroke:(0,l.getStrokeColor)(e,v),strokeWidth:1.5}),B(t,(0,l.getSemantic)(e).name,e)):q(t,(0,l.getSemantic)(e).name,{box:e,align:"center-middle",style:{fill:(0,l.getLabelColor)(e,x,v)}});return!!(0,l.getSemantic)(e).participantMultiplicity&&H("ParticipantMultiplicityMarker")(t,e),r},"bpmn:Lane":function(t,e,o){var i=L(t,e.width,e.height,0,{fill:(0,l.getFillColor)(e,C),fillOpacity:m,stroke:(0,l.getStrokeColor)(e,v),strokeWidth:1.5,...o}),r=(0,l.getSemantic)(e);"bpmn:Lane"===r.$type&&B(t,r.name,e);return i},"bpmn:InclusiveGateway":function(t,e){var o=H("bpmn:Gateway")(t,e);return D(t,e.width,e.height,.24*e.height,{strokeWidth:2.5,fill:(0,l.getFillColor)(e,C),stroke:(0,l.getStrokeColor)(e,v)}),o},"bpmn:ExclusiveGateway":function(t,e){var o=H("bpmn:Gateway")(t,e),i=d.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:e.width,containerHeight:e.height,position:{mx:.32,my:.3}});return(0,l.getDi)(e).isMarkerVisible&&O(t,i,{strokeWidth:1,fill:(0,l.getStrokeColor)(e,v),stroke:(0,l.getStrokeColor)(e,v)}),o},"bpmn:ComplexGateway":function(t,e){var o=H("bpmn:Gateway")(t,e);return O(t,d.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:e.width,containerHeight:e.height,position:{mx:.46,my:.26}}),{strokeWidth:1,fill:(0,l.getStrokeColor)(e,v),stroke:(0,l.getStrokeColor)(e,v)}),o},"bpmn:ParallelGateway":function(t,e){var o=H("bpmn:Gateway")(t,e);return O(t,d.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:e.width,containerHeight:e.height,position:{mx:.46,my:.2}}),{strokeWidth:1,fill:(0,l.getStrokeColor)(e,v),stroke:(0,l.getStrokeColor)(e,v)}),o},"bpmn:EventBasedGateway":function(t,e){var o=(0,l.getSemantic)(e),i=H("bpmn:Gateway")(t,e);D(t,e.width,e.height,.2*e.height,{strokeWidth:1,fill:"none",stroke:(0,l.getStrokeColor)(e,v)});var r=o.eventGatewayType,n=!!o.instantiate;if("Parallel"===r){var a=d.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:e.width,containerHeight:e.height,position:{mx:.474,my:.296}});O(t,a,{strokeWidth:1,fill:"none"})}else"Exclusive"===r&&(n||D(t,e.width,e.height,.26*e.height,{strokeWidth:1,fill:"none",stroke:(0,l.getStrokeColor)(e,v)}),function(){var o=d.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:e.width,containerHeight:e.height,position:{mx:.36,my:.44}});O(t,o,{strokeWidth:2,fill:(0,l.getFillColor)(e,"none"),stroke:(0,l.getStrokeColor)(e,v)})}());return i},"bpmn:Gateway":function(t,e){return function(t,e,o,i){var r=e/2,n=o/2,a=[{x:r,y:0},{x:e,y:n},{x:r,y:o},{x:0,y:n}].map(function(t){return t.x+","+t.y}).join(" ");i=F(i);var l=(0,s.create)("polygon",{...i,points:a});return(0,s.append)(t,l),l}(t,e.width,e.height,{fill:(0,l.getFillColor)(e,C),fillOpacity:f,stroke:(0,l.getStrokeColor)(e,v)})},"bpmn:SequenceFlow":function(t,e){var o,i=(0,l.getFillColor)(e,C),r=(0,l.getStrokeColor)(e,v),n=R(t,e.waypoints,{markerEnd:_("sequenceflow-end",i,r),stroke:(0,l.getStrokeColor)(e,v)}),a=(0,l.getSemantic)(e);return e.source&&(o=e.source.businessObject,a.conditionExpression&&o.$instanceOf("bpmn:Activity")&&(0,s.attr)(n,{markerStart:_("conditional-flow-marker",i,r)}),o.default&&(o.$instanceOf("bpmn:Gateway")||o.$instanceOf("bpmn:Activity"))&&o.default===a&&(0,s.attr)(n,{markerStart:_("conditional-default-flow-marker",i,r)})),n},"bpmn:Association":function(t,e,o){var i=(0,l.getSemantic)(e),r=(0,l.getFillColor)(e,C),n=(0,l.getStrokeColor)(e,v);return o={strokeDasharray:"0, 5",stroke:(0,l.getStrokeColor)(e,v),...o},"One"!==i.associationDirection&&"Both"!==i.associationDirection||(o.markerEnd=_("association-end",r,n)),"Both"===i.associationDirection&&(o.markerStart=_("association-start",r,n)),R(t,e.waypoints,o)},"bpmn:DataInputAssociation":function(t,e){var o=(0,l.getFillColor)(e,C),i=(0,l.getStrokeColor)(e,v);return H("bpmn:Association")(t,e,{markerEnd:_("association-end",o,i)})},"bpmn:DataOutputAssociation":function(t,e){var o=(0,l.getFillColor)(e,C),i=(0,l.getStrokeColor)(e,v);return H("bpmn:Association")(t,e,{markerEnd:_("association-end",o,i)})},"bpmn:MessageFlow":function(t,e){var o=(0,l.getSemantic)(e),i=(0,l.getDi)(e),r=(0,l.getFillColor)(e,C),n=(0,l.getStrokeColor)(e,v),a=R(t,e.waypoints,{markerEnd:_("messageflow-end",r,n),markerStart:_("messageflow-start",r,n),strokeDasharray:"10, 11",strokeWidth:1.5,stroke:(0,l.getStrokeColor)(e,v)});if(o.messageRef){var c=a.getPointAtLength(a.getTotalLength()/2),s=d.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:c.x,y:c.y}}),g={strokeWidth:1};"initiating"===i.messageVisibleKind?(g.fill="white",g.stroke=l.black):(g.fill="#888",g.stroke="white");var p=O(t,s,g),k=q(t,o.messageRef.name,{align:"center-top",fitBox:!0,style:{fill:(0,l.getStrokeColor)(e,x,v)}}),S=p.getBBox(),f=k.getBBox(),m=c.x-f.width/2,E=c.y+S.height/2+u;(0,h.transform)(k,m,E,0)}return a},"bpmn:DataObject":function(t,e){var o=O(t,d.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:e.width,containerHeight:e.height,position:{mx:.474,my:.296}}),{fill:(0,l.getFillColor)(e,C),fillOpacity:f,stroke:(0,l.getStrokeColor)(e,v)}),i=(0,l.getSemantic)(e);return(0,l.isCollection)(i)&&function(t,e){var o=(e.height-18)/e.height,i=d.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:e.width,containerHeight:e.height,position:{mx:.33,my:o}});O(t,i,{strokeWidth:2})}(t,e),o},"bpmn:DataObjectReference":I("bpmn:DataObject"),"bpmn:DataInput":function(t,e){var o=d.getRawPath("DATA_ARROW"),i=H("bpmn:DataObject")(t,e);return O(t,o,{strokeWidth:1}),i},"bpmn:DataOutput":function(t,e){var o=d.getRawPath("DATA_ARROW"),i=H("bpmn:DataObject")(t,e);return O(t,o,{strokeWidth:1,fill:l.black}),i},"bpmn:DataStoreReference":function(t,e){return O(t,d.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:e.width,containerHeight:e.height,position:{mx:0,my:.133}}),{strokeWidth:2,fill:(0,l.getFillColor)(e,C),fillOpacity:f,stroke:(0,l.getStrokeColor)(e,v)})},"bpmn:BoundaryEvent":function(t,e){var o=(0,l.getSemantic)(e).cancelActivity,i={strokeWidth:1.5,fill:(0,l.getFillColor)(e,C),stroke:(0,l.getStrokeColor)(e,v)};o||(i.strokeDasharray="6");var r={...i,fillOpacity:1},n={...i,fill:"none"},a=H("bpmn:Event")(t,e,r);return D(t,e.width,e.height,S,n),G(e,t),a},"bpmn:Group":function(t,e){return L(t,e.width,e.height,k,{stroke:(0,l.getStrokeColor)(e,v),strokeWidth:1.5,strokeDasharray:"10,6,0,6",fill:"none",pointerEvents:"none"})},label:function(t,o){return function(t,o){var i={width:90,height:30,x:o.width/2+o.x,y:o.height/2+o.y};return q(t,(0,r.getLabel)(o),{box:i,fitBox:!0,style:(0,e.assign)({},y.getExternalStyle(),{fill:(0,l.getLabelColor)(o,x,v)})})}(t,o)},"bpmn:TextAnnotation":function(t,e){var o=L(t,e.width,e.height,0,0,{fill:"none",stroke:"none"});return O(t,d.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:e.width,containerHeight:e.height,position:{mx:0,my:0}}),{stroke:(0,l.getStrokeColor)(e,v)}),q(t,(0,l.getSemantic)(e).text||"",{box:e,align:"left-top",padding:7,style:{fill:(0,l.getLabelColor)(e,x,v)}}),o},ParticipantMultiplicityMarker:function(t,e){N("participant-multiplicity",t,d.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:e.width,containerHeight:e.height,position:{mx:e.width/2/e.width,my:(e.height-15)/e.height}}),{strokeWidth:2,fill:(0,l.getFillColor)(e,C),stroke:(0,l.getStrokeColor)(e,v)})},SubProcessMarker:function(t,e){var o=L(t,14,14,0,{strokeWidth:1,fill:(0,l.getFillColor)(e,C),stroke:(0,l.getStrokeColor)(e,v)});(0,h.translate)(o,e.width/2-7.5,e.height-20),N("sub-process",t,d.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:e.width,containerHeight:e.height,position:{mx:(e.width/2-7.5)/e.width,my:(e.height-20)/e.height}}),{fill:(0,l.getFillColor)(e,C),stroke:(0,l.getStrokeColor)(e,v)})},ParallelMarker:function(t,e,o){N("parallel",t,d.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:e.width,containerHeight:e.height,position:{mx:(e.width/2+o.parallel)/e.width,my:(e.height-20)/e.height}}),{fill:(0,l.getFillColor)(e,C),stroke:(0,l.getStrokeColor)(e,v)})},SequentialMarker:function(t,e,o){N("sequential",t,d.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:e.width,containerHeight:e.height,position:{mx:(e.width/2+o.seq)/e.width,my:(e.height-19)/e.height}}),{fill:(0,l.getFillColor)(e,C),stroke:(0,l.getStrokeColor)(e,v)})},CompensationMarker:function(t,e,o){N("compensation",t,d.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:e.width,containerHeight:e.height,position:{mx:(e.width/2+o.compensation)/e.width,my:(e.height-13)/e.height}}),{strokeWidth:1,fill:(0,l.getFillColor)(e,C),stroke:(0,l.getStrokeColor)(e,v)})},LoopMarker:function(t,e,o){N("loop",t,d.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:e.width,containerHeight:e.height,position:{mx:(e.width/2+o.loop)/e.width,my:(e.height-7)/e.height}}),{strokeWidth:1.5,fill:(0,l.getFillColor)(e,C),stroke:(0,l.getStrokeColor)(e,v),strokeMiterlimit:.5})},AdhocMarker:function(t,e,o){N("adhoc",t,d.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:e.width,containerHeight:e.height,position:{mx:(e.width/2+o.adhoc)/e.width,my:(e.height-15)/e.height}}),{strokeWidth:1,fill:(0,l.getStrokeColor)(e,v),stroke:(0,l.getStrokeColor)(e,v)})}};function V(t,o,i){var r,n=(0,l.getSemantic)(o),a=i&&-1!==i.indexOf("SubProcessMarker");r=a?{seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:{seq:-3,parallel:-6,compensation:-27,loop:0,adhoc:10},(0,e.forEach)(i,function(e){H(e)(t,o,r)}),n.isForCompensation&&H("CompensationMarker")(t,o,r),"bpmn:AdHocSubProcess"===n.$type&&H("AdhocMarker")(t,o,r);var c=n.loopCharacteristics,s=c&&c.isSequential;c&&(void 0===s&&H("LoopMarker")(t,o,r),!1===s&&H("ParallelMarker")(t,o,r),!0===s&&H("SequentialMarker")(t,o,r))}this._drawPath=O,this._renderer=H}(0,t.default)(E,o.default),E.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"],E.prototype.canRender=function(t){return(0,n.is)(t,"bpmn:BaseElement")},E.prototype.drawShape=function(t,e){var o=e.type;return this._renderer(o)(t,e)},E.prototype.drawConnection=function(t,e){var o=e.type;return this._renderer(o)(t,e)},E.prototype.getShapePath=function(t){return(0,n.is)(t,"bpmn:Event")?(0,l.getCirclePath)(t):(0,n.is)(t,"bpmn:Activity")?(0,l.getRoundRectPath)(t,k):(0,n.is)(t,"bpmn:Gateway")?(0,l.getDiamondPath)(t):(0,l.getRectPath)(t)};
},{"inherits-browser":"hUM3","min-dash":"AmEv","diagram-js/lib/draw/BaseRenderer":"ebx3","../util/DiUtil":"lWoN","../features/label-editing/LabelUtil":"v5cn","../util/ModelUtil":"HvoA","diagram-js/lib/util/RenderUtil":"D85W","./BpmnRenderUtil":"twga","min-dom":"fWg5","tiny-svg":"WdCh","diagram-js/lib/util/SvgTransformUtil":"EK9i","ids":"Ia3Z"}],"uM5z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=f;var t=require("min-dash"),e=require("tiny-svg"),i=require("min-dom"),n=0,r={width:150,height:50};function h(t){var e=t.split("-");return{horizontal:e[0]||"center",vertical:e[1]||"top"}}function o(e){return(0,t.isObject)(e)?(0,t.assign)({top:0,left:0,right:0,bottom:0},e):{top:e,left:e,right:e,bottom:e}}function a(t,e){var i;e.textContent=t;try{var n,r=""===t;return e.textContent=r?"dummy":t,n={width:(i=e.getBBox()).width+2*i.x,height:i.height},r&&(n.width=0),n}catch(h){return{width:0,height:0}}}function s(t,e,i){for(var n,r=t.shift(),h=r;;){if((n=a(h,i)).width=h?n.width:0," "===h||""===h||n.width<Math.round(e)||h.length<2)return d(t,h,r,n);h=l(h,n.width,e)}}function d(t,e,i,n){if(e.length<i.length){var r=i.slice(e.length).trim();t.unshift(r)}return{width:n.width,height:n.height,text:e}}var g="­";function u(t,e){var i,n=t.split(/(\s|-|\u00AD)/g),r=[],h=0;if(n.length>1)for(;i=n.shift();){if(!(i.length+h<e)){"-"!==i&&i!==g||r.pop();break}r.push(i),h+=i.length}var o=r[r.length-1];return o&&o===g&&(r[r.length-1]="-"),r.join("")}function l(t,e,i){var n=Math.max(t.length*(i/e),1),r=u(t,n);return r||(r=t.slice(0,Math.max(Math.round(n-1),1))),r}function c(){var t=document.getElementById("helper-svg");return t||(t=(0,e.create)("svg"),(0,e.attr)(t,{id:"helper-svg"}),(0,i.assignStyle)(t,{visibility:"hidden",position:"fixed",width:0,height:0}),document.body.appendChild(t)),t}function f(e){this._config=(0,t.assign)({},{size:r,padding:n,style:{},align:"center-top"},e||{})}function p(t){if("fontSize"in t&&"lineHeight"in t)return t.lineHeight*parseInt(t.fontSize,10)}f.prototype.createText=function(t,e){return this.layoutText(t,e).element},f.prototype.getDimensions=function(t,e){return this.layoutText(t,e).dimensions},f.prototype.layoutText=function(i,n){var r=(0,t.assign)({},this._config.size,n.box),a=(0,t.assign)({},this._config.style,n.style),d=h(n.align||this._config.align),g=o(void 0!==n.padding?n.padding:this._config.padding),u=n.fitBox||!1,l=p(a),f=i.split(/\u00AD?\r?\n/),v=[],m=r.width-g.left-g.right,x=(0,e.create)("text");(0,e.attr)(x,{x:0,y:0}),(0,e.attr)(x,a);var w=c();for((0,e.append)(w,x);f.length;)v.push(s(f,m,x));"middle"===d.vertical&&(g.top=g.bottom=0);var y=(0,t.reduce)(v,function(t,e,i){return t+(l||e.height)},0)+g.top+g.bottom,b=(0,t.reduce)(v,function(t,e,i){return e.width>t?e.width:t},0),_=g.top;"middle"===d.vertical&&(_+=(r.height-y)/2),_-=(l||v[0].height)/4;var z=(0,e.create)("text");return(0,e.attr)(z,a),(0,t.forEach)(v,function(t){var i;switch(_+=l||t.height,d.horizontal){case"left":i=g.left;break;case"right":i=(u?b:m)-g.right-t.width;break;default:i=Math.max(((u?b:m)-t.width)/2+g.left,0)}var n=(0,e.create)("tspan");(0,e.attr)(n,{x:i,y:_}),n.textContent=t.text,(0,e.append)(z,n)}),(0,e.remove)(x),{dimensions:{width:b,height:y},element:z}};
},{"min-dash":"AmEv","tiny-svg":"WdCh","min-dom":"fWg5"}],"vtgr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=h;var t=require("min-dash"),e=i(require("diagram-js/lib/util/Text"));function i(t){return t&&t.__esModule?t:{default:t}}var n=12,r=1.2,a=30;function h(i){var h=(0,t.assign)({fontFamily:"Arial, sans-serif",fontSize:n,fontWeight:"normal",lineHeight:r},i&&i.defaultStyle||{}),o=parseInt(h.fontSize,10)-1,s=(0,t.assign)({},h,{fontSize:o},i&&i.externalStyle||{}),u=new e.default({style:h});this.getExternalLabelBounds=function(t,e){var i=u.getDimensions(e,{box:{width:90,height:30,x:t.width/2+t.x,y:t.height/2+t.y},style:s});return{x:Math.round(t.x+t.width/2-i.width/2),y:Math.round(t.y),width:Math.ceil(i.width),height:Math.ceil(i.height)}},this.getTextAnnotationBounds=function(t,e){var i=u.getDimensions(e,{box:t,style:h,align:"left-top",padding:5});return{x:t.x,y:t.y,width:t.width,height:Math.max(a,Math.round(i.height))}},this.createText=function(t,e){return u.createText(t,e||{})},this.getDefaultStyle=function(){return h},this.getExternalStyle=function(){return s}}h.$inject=["config.textRenderer"];
},{"min-dash":"AmEv","diagram-js/lib/util/Text":"uM5z"}],"Bafc":[function(require,module,exports) {
"use strict";function e(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(e){return this.pathMap[e].d},this.getScaledPath=function(e,t){var m,h,i=this.pathMap[e];t.abspos?(m=t.abspos.x,h=t.abspos.y):(m=t.containerWidth*t.position.mx,h=t.containerHeight*t.position.my);var E={};if(t.position){for(var y=t.containerHeight/i.height*t.yScaleFactor,l=t.containerWidth/i.width*t.xScaleFactor,d=0;d<i.heightElements.length;d++)E["y"+d]=i.heightElements[d]*y;for(var n=0;n<i.widthElements.length;n++)E["x"+n]=i.widthElements[n]*l}return x(i.d,{mx:m,my:h,e:E})}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var t=/\{([^{}]+)\}/g,m=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;function h(e,t,h){var x=h;return t.replace(m,function(e,t,m,h,i){t=t||h,x&&(t in x&&(x=x[t]),"function"==typeof x&&i&&(x=x()))}),x=(null==x||x==h?e:x)+""}function x(e,m){return String(e).replace(t,function(e,t){return h(e,t,m)})}
},{}],"xTSX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=d(require("./BpmnRenderer")),r=d(require("./TextRenderer")),t=d(require("./PathMap"));function d(e){return e&&e.__esModule?e:{default:e}}var u=exports.default={__init__:["bpmnRenderer"],bpmnRenderer:["type",e.default],textRenderer:["type",r.default],pathMap:["type",t.default]};
},{"./BpmnRenderer":"GsDG","./TextRenderer":"vtgr","./PathMap":"Bafc"}],"EsLY":[function(require,module,exports) {
"use strict";function e(e,t){return t=t||{},e.replace(/{([^}]+)}/g,function(e,r){return t[r]||"{"+r+"}"})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"N3z5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./translate"));function t(e){return e&&e.__esModule?e:{default:e}}var r=exports.default={translate:["value",e.default]};
},{"./translate":"EsLY"}],"yKfU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FLOW_LABEL_INDENT=exports.DEFAULT_LABEL_SIZE=void 0,exports.getExternalLabelBounds=x,exports.getExternalLabelMid=h,exports.getFlowLabelPosition=o,exports.getWaypointsMid=s,exports.hasExternalLabel=a,exports.isLabel=p,exports.isLabelExternal=r;var t=require("min-dash"),e=require("./ModelUtil"),n=exports.DEFAULT_LABEL_SIZE={width:90,height:20},i=exports.FLOW_LABEL_INDENT=15;function r(t){return(0,e.is)(t,"bpmn:Event")||(0,e.is)(t,"bpmn:Gateway")||(0,e.is)(t,"bpmn:DataStoreReference")||(0,e.is)(t,"bpmn:DataObjectReference")||(0,e.is)(t,"bpmn:DataInput")||(0,e.is)(t,"bpmn:DataOutput")||(0,e.is)(t,"bpmn:SequenceFlow")||(0,e.is)(t,"bpmn:MessageFlow")||(0,e.is)(t,"bpmn:Group")}function a(t){return p(t.label)}function o(t){var e=t.length/2-1,n=t[Math.floor(e)],r=t[Math.ceil(e+.01)],a=s(t),o=Math.atan((r.y-n.y)/(r.x-n.x)),h=a.x,x=a.y;return Math.abs(o)<Math.PI/2?x-=i:h+=i,{x:h,y:x}}function s(t){var e=t.length/2-1,n=t[Math.floor(e)],i=t[Math.ceil(e+.01)];return{x:n.x+(i.x-n.x)/2,y:n.y+(i.y-n.y)/2}}function h(t){return t.waypoints?o(t.waypoints):(0,e.is)(t,"bpmn:Group")?{x:t.x+t.width/2,y:t.y+n.height/2}:{x:t.x+t.width/2,y:t.y+t.height+n.height/2}}function x(e,i){var r,a,o,s=e.label;return s&&s.bounds?(o=s.bounds,a={width:Math.max(n.width,o.width),height:o.height},r={x:o.x+o.width/2,y:o.y+o.height/2}):(r=h(i),a=n),(0,t.assign)({x:r.x-a.width/2,y:r.y-a.height/2},a)}function p(t){return t&&!!t.labelTarget}
},{"min-dash":"AmEv","./ModelUtil":"HvoA"}],"JOSv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var e=require("min-dash"),t=require("../util/ModelUtil"),n=require("../util/LabelUtil"),i=require("diagram-js/lib/layout/LayoutUtil"),r=require("../util/DiUtil"),a=require("../features/label-editing/LabelUtil"),o=require("./Util");function s(t,n,i){return(0,e.assign)({id:t.id,type:t.$type,businessObject:t,di:n},i)}function d(e,t,n){var r=e.waypoint;return!r||r.length<2?[(0,i.getMid)(t),(0,i.getMid)(n)]:r.map(function(e){return{x:e.x,y:e.y}})}function h(e,t,n,i){return new Error(e("element {element} referenced by {referenced}#{property} not yet drawn",{element:(0,o.elementToString)(n),referenced:(0,o.elementToString)(t),property:i}))}function l(e,t,n,i,r,a){this._eventBus=e,this._canvas=t,this._elementFactory=n,this._elementRegistry=i,this._translate=r,this._textRenderer=a}function u(e,t){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function c(e){return(0,t.is)(e,"bpmn:Group")}l.$inject=["eventBus","canvas","elementFactory","elementRegistry","translate","textRenderer"],l.prototype.add=function(e,h,l){var p,m,g,y=this._translate;if((0,t.is)(h,"bpmndi:BPMNPlane")){var f=(0,t.is)(e,"bpmn:SubProcess")?{id:e.id+"_plane"}:{};p=this._elementFactory.createRoot(s(e,h,f)),this._canvas.addRootElement(p)}else if((0,t.is)(h,"bpmndi:BPMNShape")){var _=!(0,r.isExpanded)(e,h),b=c(e);m=l&&(l.hidden||l.collapsed);var v=h.bounds;p=this._elementFactory.createShape(s(e,h,{collapsed:_,hidden:m,x:Math.round(v.x),y:Math.round(v.y),width:Math.round(v.width),height:Math.round(v.height),isFrame:b})),(0,t.is)(e,"bpmn:BoundaryEvent")&&this._attachBoundary(e,p),(0,t.is)(e,"bpmn:Lane")&&(g=0),(0,t.is)(e,"bpmn:DataStoreReference")&&(u(l,(0,i.getMid)(v))||(l=this._canvas.findRoot(l))),this._canvas.addShape(p,l,g)}else{if(!(0,t.is)(h,"bpmndi:BPMNEdge"))throw new Error(y("unknown di {di} for element {semantic}",{di:(0,o.elementToString)(h),semantic:(0,o.elementToString)(e)}));var x=this._getSource(e),R=this._getTarget(e);m=l&&(l.hidden||l.collapsed),p=this._elementFactory.createConnection(s(e,h,{hidden:m,source:x,target:R,waypoints:d(h,x,R)})),(0,t.is)(e,"bpmn:DataAssociation")&&(l=this._canvas.findRoot(l)),this._canvas.addConnection(p,l,g)}return(0,n.isLabelExternal)(e)&&(0,a.getLabel)(p)&&this.addLabel(e,h,p),this._eventBus.fire("bpmnElement.added",{element:p}),p},l.prototype._attachBoundary=function(e,t){var n=this._translate,i=e.attachedToRef;if(!i)throw new Error(n("missing {semantic}#attachedToRef",{semantic:(0,o.elementToString)(e)}));var r=this._elementRegistry.get(i.id),a=r&&r.attachers;if(!r)throw h(n,e,i,"attachedToRef");t.host=r,a||(r.attachers=a=[]),-1===a.indexOf(t)&&a.push(t)},l.prototype.addLabel=function(e,t,i){var r,o,d;return r=(0,n.getExternalLabelBounds)(t,i),(o=(0,a.getLabel)(i))&&(r=this._textRenderer.getExternalLabelBounds(r,o)),d=this._elementFactory.createLabel(s(e,t,{id:e.id+"_label",labelTarget:i,type:"label",hidden:i.hidden||!(0,a.getLabel)(i),x:Math.round(r.x),y:Math.round(r.y),width:Math.round(r.width),height:Math.round(r.height)})),this._canvas.addShape(d,i.parent)},l.prototype._getEnd=function(e,t){var n,i,r=e.$type,a=this._translate;if(i=e[t+"Ref"],"source"===t&&"bpmn:DataInputAssociation"===r&&(i=i&&i[0]),("source"===t&&"bpmn:DataOutputAssociation"===r||"target"===t&&"bpmn:DataInputAssociation"===r)&&(i=e.$parent),n=i&&this._getElement(i))return n;throw i?h(a,e,i,t+"Ref"):new Error(a("{semantic}#{side} Ref not specified",{semantic:(0,o.elementToString)(e),side:t}))},l.prototype._getSource=function(e){return this._getEnd(e,"source")},l.prototype._getTarget=function(e){return this._getEnd(e,"target")},l.prototype._getElement=function(e){return this._elementRegistry.get(e.id)};
},{"min-dash":"AmEv","../util/ModelUtil":"HvoA","../util/LabelUtil":"yKfU","diagram-js/lib/layout/LayoutUtil":"aRzT","../util/DiUtil":"lWoN","../features/label-editing/LabelUtil":"v5cn","./Util":"H2TG"}],"onb5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("diagram-js/lib/i18n/translate")),r=t(require("./BpmnImporter"));function t(e){return e&&e.__esModule?e:{default:e}}var u=exports.default={__depends__:[e.default],bpmnImporter:["type",r.default]};
},{"diagram-js/lib/i18n/translate":"N3z5","./BpmnImporter":"JOSv"}],"QJwo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("../draw")),r=t(require("../import"));function t(e){return e&&e.__esModule?e:{default:e}}var u=exports.default={__depends__:[e.default,r.default]};
},{"../draw":"xTSX","../import":"onb5"}],"NRQd":[function(require,module,exports) {
"use strict";function t(t){t&&"function"==typeof t.stopPropagation&&t.stopPropagation()}function o(t){return t.originalEvent||t.srcEvent}function n(n,e){t(n,e),t(o(n),e)}function e(t){return t.pointers&&t.pointers.length&&(t=t.pointers[0]),t.touches&&t.touches.length&&(t=t.touches[0]),t?{x:t.clientX,y:t.clientY}:null}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getOriginal=o,exports.stopPropagation=n,exports.toPoint=e;
},{}],"wDUZ":[function(require,module,exports) {
"use strict";function e(){return/mac/i.test(navigator.platform)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isMac=e;
},{}],"sz9Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hasPrimaryModifier=u,exports.hasSecondaryModifier=s,exports.isAuxiliaryButton=i,exports.isButton=t,Object.defineProperty(exports,"isMac",{enumerable:!0,get:function(){return e.isMac}}),exports.isPrimaryButton=n,exports.isSecondaryButton=o;var r=require("./Event"),e=require("./Platform");function t(e,t){return((0,r.getOriginal)(e)||e).button===t}function n(r){return t(r,0)}function i(r){return t(r,1)}function o(r){return t(r,2)}function u(t){var i=(0,r.getOriginal)(t)||t;return!!n(t)&&((0,e.isMac)()?i.metaKey:i.ctrlKey)}function s(e){var t=(0,r.getOriginal)(e)||e;return n(e)&&t.shiftKey}
},{"./Event":"NRQd","./Platform":"wDUZ"}],"MvZR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var e=require("min-dash"),t=require("min-dom"),n=require("../../util/Mouse"),i=require("tiny-svg"),r=require("../../util/RenderUtil");function o(e){return!0}function a(e){return(0,n.isPrimaryButton)(e)||(0,n.isAuxiliaryButton)(e)}var u=500;function s(s,c,l){var d=this;function f(e,t,i){var r,o;(function(e,t){return!(g[e]||n.isPrimaryButton)(t)})(e,t)||(i?o=c.getGraphics(i):(r=t.delegateTarget||t.target)&&(o=r,i=c.get(o)),o&&i&&!1===s.fire(e,{element:i,gfx:o,originalEvent:t})&&(t.stopPropagation(),t.preventDefault()))}var h={};function m(e){return h[e]}var v={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},g={"element.contextmenu":o,"element.mousedown":a,"element.mouseup":a,"element.click":a,"element.dblclick":a};var p="svg, .djs-element";function y(e,n,i,r){var o=h[i]=function(e){f(i,e)};r&&(g[i]=r),o.$delegate=t.delegate.bind(e,p,n,o)}function k(e,n,i){var r=m(i);r&&t.delegate.unbind(e,n,r.$delegate)}s.on("canvas.destroy",function(t){var n;n=t.svg,(0,e.forEach)(v,function(e,t){k(n,t,e)})}),s.on("canvas.init",function(t){var n;n=t.svg,(0,e.forEach)(v,function(e,t){y(n,t,e)})}),s.on(["shape.added","connection.added"],function(e){var t=e.element,n=e.gfx;s.fire("interactionEvents.createHit",{element:t,gfx:n})}),s.on(["shape.changed","connection.changed"],u,function(e){var t=e.element,n=e.gfx;s.fire("interactionEvents.updateHit",{element:t,gfx:n})}),s.on("interactionEvents.createHit",u,function(e){var t=e.element,n=e.gfx;d.createDefaultHit(t,n)}),s.on("interactionEvents.updateHit",function(e){var t=e.element,n=e.gfx;d.updateDefaultHit(t,n)});var x=j("djs-hit djs-hit-stroke"),w=j("djs-hit djs-hit-click-stroke"),H={all:j("djs-hit djs-hit-all"),"click-stroke":w,stroke:x,"no-move":j("djs-hit djs-hit-no-move")};function j(t,n){return n=(0,e.assign)({stroke:"white",strokeWidth:15},n||{}),l.cls(t,["no-fill","no-border"],n)}function E(e,t){var n=H[t];if(!n)throw new Error("invalid hit type <"+t+">");return(0,i.attr)(e,n),e}function b(e,t){(0,i.append)(e,t)}this.removeHits=function(n){var r=(0,t.queryAll)(".djs-hit",n);(0,e.forEach)(r,i.remove)},this.createDefaultHit=function(e,t){var n,i=e.waypoints,r=e.isFrame;return i?this.createWaypointsHit(t,i):(n=r?"stroke":"all",this.createBoxHit(t,n,{width:e.width,height:e.height}))},this.createWaypointsHit=function(e,t){var n=(0,r.createLine)(t);return E(n,"stroke"),b(e,n),n},this.createBoxHit=function(t,n,r){r=(0,e.assign)({x:0,y:0},r);var o=(0,i.create)("rect");return E(o,n),(0,i.attr)(o,r),b(t,o),o},this.updateDefaultHit=function(e,n){var o=(0,t.query)(".djs-hit",n);if(o)return e.waypoints?(0,r.updateLine)(o,e.waypoints):(0,i.attr)(o,{width:e.width,height:e.height}),o},this.fire=f,this.triggerMouseEvent=function(e,t,n){var i=v[e];if(!i)throw new Error("unmapped DOM event name <"+e+">");return f(i,t,n)},this.mouseHandler=m,this.registerEvent=y,this.unregisterEvent=k}s.$inject=["eventBus","elementRegistry","styles"];
},{"min-dash":"AmEv","min-dom":"fWg5","../../util/Mouse":"sz9Y","tiny-svg":"WdCh","../../util/RenderUtil":"D85W"}],"JX1S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./InteractionEvents"));function t(e){return e&&e.__esModule?e:{default:e}}var r=exports.default={__init__:["interactionEvents"],interactionEvents:["type",e.default]};
},{"./InteractionEvents":"MvZR"}],"nvP6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var e=require("../../util/Elements"),t=require("tiny-svg"),i=require("min-dom"),n=require("min-dash"),o=500;function s(e,s){this.offset=6;var h=s.cls("djs-outline",["no-fill"]),r=this;function u(e,i){var o=(0,t.create)("rect");return(0,t.attr)(o,(0,n.assign)({x:10,y:10,rx:4,width:100,height:100},h)),(0,t.append)(e,o),o}e.on(["shape.added","shape.changed"],o,function(e){var t=e.element,n=e.gfx,o=(0,i.query)(".djs-outline",n);o||(o=u(n)),r.updateShapeOutline(o,t)}),e.on(["connection.added","connection.changed"],function(e){var t=e.element,n=e.gfx,o=(0,i.query)(".djs-outline",n);o||(o=u(n)),r.updateConnectionOutline(o,t)})}s.prototype.updateShapeOutline=function(e,i){(0,t.attr)(e,{x:-this.offset,y:-this.offset,width:i.width+2*this.offset,height:i.height+2*this.offset})},s.prototype.updateConnectionOutline=function(i,n){var o=(0,e.getBBox)(n);(0,t.attr)(i,{x:o.x-this.offset,y:o.y-this.offset,width:o.width+2*this.offset,height:o.height+2*this.offset})},s.$inject=["eventBus","styles","elementRegistry"];
},{"../../util/Elements":"KTcn","tiny-svg":"WdCh","min-dom":"fWg5","min-dash":"AmEv"}],"mPg3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./Outline"));function t(e){return e&&e.__esModule?e:{default:e}}var u=exports.default={__init__:["outline"],outline:["type",e.default]};
},{"./Outline":"nvP6"}],"s534":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("min-dash");function t(e,t){this._eventBus=e,this._canvas=t,this._selectedElements=[];var n=this;e.on(["shape.remove","connection.remove"],function(e){var t=e.element;n.deselect(t)}),e.on(["diagram.clear","root.set"],function(e){n.select(null)})}t.$inject=["eventBus","canvas"],t.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(-1!==n){var s=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:s,newSelection:t})}},t.prototype.get=function(){return this._selectedElements},t.prototype.isSelected=function(e){return-1!==this._selectedElements.indexOf(e)},t.prototype.select=function(t,n){var s=this._selectedElements,i=s.slice();(0,e.isArray)(t)||(t=t?[t]:[]);var c=this._canvas,o=c.getRootElement();t=t.filter(function(e){var t=c.findRoot(e);return o===t}),n?(0,e.forEach)(t,function(e){-1===s.indexOf(e)&&s.push(e)}):this._selectedElements=s=t.slice(),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:s})};
},{"min-dash":"AmEv"}],"v9np":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=require("min-dash"),t=require("tiny-svg"),n=require("../../util/Elements"),i="hover",o="selected",c=6;function a(t,n,c){this._canvas=t;var a=this;function l(e,n){t.addMarker(e,n)}function r(e,n){t.removeMarker(e,n)}this._multiSelectionBox=null,n.on("element.hover",function(e){l(e.element,i)}),n.on("element.out",function(e){r(e.element,i)}),n.on("selection.changed",function(t){var n=t.oldSelection,i=t.newSelection;(0,e.forEach)(n,function(e){-1===i.indexOf(e)&&r(e,o)}),(0,e.forEach)(i,function(e){-1===n.indexOf(e)&&l(e,o)}),a._updateSelectionOutline(i)}),n.on("element.changed",function(e){c.isSelected(e.element)&&a._updateSelectionOutline(c.get())})}function l(e){return{x:e.x-c,y:e.y-c,width:e.width+2*c,height:e.height+2*c}}a.$inject=["canvas","eventBus","selection"],a.prototype._updateSelectionOutline=function(i){var o=this._canvas.getLayer("selectionOutline");(0,t.clear)(o);var c=i.length>1,a=this._canvas.getContainer();if((0,t.classes)(a)[c?"add":"remove"]("djs-multi-select"),c){var r=l((0,n.getBBox)(i)),s=(0,t.create)("rect");(0,t.attr)(s,(0,e.assign)({rx:3},r)),(0,t.classes)(s).add("djs-selection-outline"),(0,t.append)(o,s)}};
},{"min-dash":"AmEv","tiny-svg":"WdCh","../../util/Elements":"KTcn"}],"ZFHe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=require("../../util/Mouse"),t=require("min-dash");function n(n,c,r,o){n.on("create.end",500,function(e){var n=e.context,r=n.canExecute,o=n.elements,s=(n.hints||{}).autoSelect;if(r){if(!1===s)return;(0,t.isArray)(s)?c.select(s):c.select(o.filter(i))}}),n.on("connect.end",500,function(e){var t=e.context.connection;t&&c.select(t)}),n.on("shape.move.end",500,function(e){var n=e.previousSelection||[],i=o.get(e.context.shape.id);(0,t.find)(n,function(e){return i.id===e.id})||c.select(i)}),n.on("element.click",function(t){if((0,e.isPrimaryButton)(t)){var n=t.element;n===r.getRootElement()&&(n=null);var i=c.isSelected(n),o=c.get().length>1,s=(0,e.hasPrimaryModifier)(t)||(0,e.hasSecondaryModifier)(t);if(i&&o)return s?c.deselect(n):c.select(n);i?c.deselect(n):c.select(n,s)}})}function i(e){return!e.hidden}n.$inject=["eventBus","selection","canvas","elementRegistry"];
},{"../../util/Mouse":"sz9Y","min-dash":"AmEv"}],"NUwH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("../interaction-events")),t=u(require("../outline")),i=u(require("./Selection")),r=u(require("./SelectionVisuals")),l=u(require("./SelectionBehavior"));function u(e){return e&&e.__esModule?e:{default:e}}var o=exports.default={__init__:["selectionVisuals","selectionBehavior"],__depends__:[e.default,t.default],selection:["type",i.default],selectionVisuals:["type",r.default],selectionBehavior:["type",l.default]};
},{"../interaction-events":"JX1S","../outline":"mPg3","./Selection":"s534","./SelectionVisuals":"v9np","./SelectionBehavior":"ZFHe"}],"ga56":[function(require,module,exports) {
"use strict";function t(t){this._counter=0,this._prefix=(t?t+"-":"")+Math.floor(1e9*Math.random())+"-"}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t,t.prototype.next=function(){return this._prefix+ ++this._counter};
},{}],"pe6C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var e=require("min-dash"),t=require("min-dom"),i=require("../../util/Elements"),o=n(require("../../util/IdGenerator"));function n(e){return e&&e.__esModule?e:{default:e}}var a=new o.default("ov"),r=500;function s(t,i,o,n){this._eventBus=i,this._canvas=o,this._elementRegistry=n,this._ids=a,this._overlayDefaults=(0,e.assign)({show:null,scale:!0},t&&t.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=l(o.getContainer()),this._init()}function l(e){var i=(0,t.domify)('<div class="djs-overlay-container" />');return(0,t.assignStyle)(i,{position:"absolute",width:0,height:0}),e.insertBefore(i,e.firstChild),i}function v(e,i,o){(0,t.assignStyle)(e,{left:i+"px",top:o+"px"})}function y(e,t){e.style.display=!1===t?"none":""}function h(e,t){e.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(i){e.style[i+"transform"]=t})}s.$inject=["config.overlays","eventBus","canvas","elementRegistry"],s.prototype.get=function(t){if((0,e.isString)(t)&&(t={id:t}),(0,e.isString)(t.element)&&(t.element=this._elementRegistry.get(t.element)),t.element){var i=this._getOverlayContainer(t.element,!0);return i?t.type?(0,e.filter)(i.overlays,(0,e.matchPattern)({type:t.type})):i.overlays.slice():[]}return t.type?(0,e.filter)(this._overlays,(0,e.matchPattern)({type:t.type})):t.id?this._overlays[t.id]:null},s.prototype.add=function(t,i,o){if((0,e.isObject)(i)&&(o=i,i=null),t.id||(t=this._elementRegistry.get(t)),!o.position)throw new Error("must specifiy overlay position");if(!o.html)throw new Error("must specifiy overlay html");if(!t)throw new Error("invalid element specified");var n=this._ids.next();return o=(0,e.assign)({},this._overlayDefaults,o,{id:n,type:i,element:t,html:o.html}),this._addOverlay(o),n},s.prototype.remove=function(i){var o=this.get(i)||[];(0,e.isArray)(o)||(o=[o]);var n=this;(0,e.forEach)(o,function(e){var i=n._getOverlayContainer(e.element,!0);if(e&&((0,t.remove)(e.html),(0,t.remove)(e.htmlContainer),delete e.htmlContainer,delete e.element,delete n._overlays[e.id]),i){var o=i.overlays.indexOf(e);-1!==o&&i.overlays.splice(o,1)}})},s.prototype.isShown=function(){return"none"!==this._overlayRoot.style.display},s.prototype.show=function(){y(this._overlayRoot)},s.prototype.hide=function(){y(this._overlayRoot,!1)},s.prototype.clear=function(){this._overlays={},this._overlayContainers=[],(0,t.clear)(this._overlayRoot)},s.prototype._updateOverlayContainer=function(e){var o=e.element,n=e.html,a=o.x,r=o.y;if(o.waypoints){var s=(0,i.getBBox)(o);a=s.x,r=s.y}v(n,a,r),(0,t.attr)(e.html,"data-container-id",o.id)},s.prototype._updateOverlay=function(e){var t,o,n=e.position,a=e.htmlContainer,r=e.element,s=n.left,l=n.top;void 0!==n.right&&(t=r.waypoints?(0,i.getBBox)(r).width:r.width,s=-1*n.right+t);void 0!==n.bottom&&(o=r.waypoints?(0,i.getBBox)(r).height:r.height,l=-1*n.bottom+o);v(a,s||0,l||0),this._updateOverlayVisibilty(e,this._canvas.viewbox())},s.prototype._createOverlayContainer=function(e){var i=(0,t.domify)('<div class="djs-overlays" />');(0,t.assignStyle)(i,{position:"absolute"}),this._overlayRoot.appendChild(i);var o={html:i,element:e,overlays:[]};return this._updateOverlayContainer(o),this._overlayContainers.push(o),o},s.prototype._updateRoot=function(e){var t=e.scale||1,i="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";h(this._overlayRoot,i)},s.prototype._getOverlayContainer=function(t,i){var o=(0,e.find)(this._overlayContainers,function(e){return e.element===t});return o||i?o:this._createOverlayContainer(t)},s.prototype._addOverlay=function(i){var o,n,a=i.id,r=i.element,s=i.html;s.get&&s.constructor.prototype.jquery&&(s=s.get(0)),(0,e.isString)(s)&&(s=(0,t.domify)(s)),n=this._getOverlayContainer(r),o=(0,t.domify)('<div class="djs-overlay" data-overlay-id="'+a+'">'),(0,t.assignStyle)(o,{position:"absolute"}),o.appendChild(s),i.type&&(0,t.classes)(o).add("djs-overlay-"+i.type),y(o,this._canvas.findRoot(r)===this._canvas.getRootElement()),i.htmlContainer=o,n.overlays.push(i),n.html.appendChild(o),this._overlays[a]=i,this._updateOverlay(i),this._updateOverlayVisibilty(i,this._canvas.viewbox())},s.prototype._updateOverlayVisibilty=function(t,i){var o=t.show,n=this._canvas.findRoot(t.element),a=o&&o.minZoom,r=o&&o.maxZoom,s=t.htmlContainer,l=!0;n!==this._canvas.getRootElement()?l=!1:o&&((0,e.isDefined)(a)&&a>i.scale||(0,e.isDefined)(r)&&r<i.scale)&&(l=!1),y(s,l),this._updateOverlayScale(t,i)},s.prototype._updateOverlayScale=function(t,i){var o,n,a,r=t.scale,s=t.htmlContainer,l="";!0!==r&&(!1===r?(o=1,n=1):(o=r.min,n=r.max),(0,e.isDefined)(o)&&i.scale<o&&(a=(1/i.scale||1)*o),(0,e.isDefined)(n)&&i.scale>n&&(a=(1/i.scale||1)*n)),(0,e.isDefined)(a)&&(l="scale("+a+","+a+")"),h(s,l)},s.prototype._updateOverlaysVisibilty=function(t){var i=this;(0,e.forEach)(this._overlays,function(e){i._updateOverlayVisibilty(e,t)})},s.prototype._init=function(){var i=this._eventBus,o=this;i.on("canvas.viewbox.changing",function(e){o.hide()}),i.on("canvas.viewbox.changed",function(e){var t;t=e.viewbox,o._updateRoot(t),o._updateOverlaysVisibilty(t),o.show()}),i.on(["shape.remove","connection.remove"],function(i){var n=i.element,a=o.get({element:n});(0,e.forEach)(a,function(e){o.remove(e.id)});var r=o._getOverlayContainer(n);if(r){(0,t.remove)(r.html);var s=o._overlayContainers.indexOf(r);-1!==s&&o._overlayContainers.splice(s,1)}}),i.on("element.changed",r,function(t){var i=t.element,n=o._getOverlayContainer(i,!0);n&&((0,e.forEach)(n.overlays,function(e){o._updateOverlay(e)}),o._updateOverlayContainer(n))}),i.on("element.marker.update",function(e){var i=o._getOverlayContainer(e.element,!0);i&&(0,t.classes)(i.html)[e.add?"add":"remove"](e.marker)}),i.on("root.set",function(){o._updateOverlaysVisibilty(o._canvas.viewbox())}),i.on("diagram.clear",this.clear,this)};
},{"min-dash":"AmEv","min-dom":"fWg5","../../util/Elements":"KTcn","../../util/IdGenerator":"ga56"}],"awXg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./Overlays"));function r(e){return e&&e.__esModule?e:{default:e}}var t=exports.default={__init__:["overlays"],overlays:["type",e.default]};
},{"./Overlays":"pe6C"}],"k6UQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=require("../../util/Elements");function n(n,t,a,c){n.on("element.changed",function(c){var o=c.element;(o.parent||o===t.getRootElement())&&(c.gfx=a.getGraphics(o)),c.gfx&&n.fire((0,e.getType)(o)+".changed",c)}),n.on("elements.changed",function(e){var t=e.elements;t.forEach(function(e){n.fire("element.changed",{element:e})}),c.updateContainments(t)}),n.on("shape.changed",function(e){c.update("shape",e.element,e.gfx)}),n.on("connection.changed",function(e){c.update("connection",e.element,e.gfx)})}n.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];
},{"../../util/Elements":"KTcn"}],"PhDZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./ChangeSupport"));function t(e){return e&&e.__esModule?e:{default:e}}var r=exports.default={__init__:["changeSupport"],changeSupport:["type",e.default]};
},{"./ChangeSupport":"k6UQ"}],"FIh1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=require("min-dash"),t=1e3;function n(e){this._eventBus=e}function r(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}n.$inject=["eventBus"],n.prototype.on=function(n,u,o,c,i,s){if(((0,e.isFunction)(u)||(0,e.isNumber)(u))&&(s=i,i=c,c=o,o=u,u=null),(0,e.isFunction)(o)&&(s=i,i=c,c=o,o=t),(0,e.isObject)(i)&&(s=i,i=!1),!(0,e.isFunction)(c))throw new Error("handlerFn must be a function");(0,e.isArray)(n)||(n=[n]);var a=this._eventBus;(0,e.forEach)(n,function(e){var t=["commandStack",e,u].filter(function(e){return e}).join(".");a.on(t,o,i?r(c,s):c,s)})};var u=["canExecute","preExecute","preExecuted","execute","executed","postExecute","postExecuted","revert","reverted"];(0,e.forEach)(u,function(t){n.prototype[t]=function(n,r,u,o,c){((0,e.isFunction)(n)||(0,e.isNumber)(n))&&(c=o,o=u,u=r,r=n,n=null),this.on(n,t,r,u,o,c)}});
},{"min-dash":"AmEv"}],"xKzQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=o(require("inherits-browser")),t=o(require("../../command/CommandInterceptor"));function o(e){return e&&e.__esModule?e:{default:e}}function n(e,o){o.invoke(t.default,this),this.executed(function(t){var o=t.context;o.rootElement?e.setRootElement(o.rootElement):o.rootElement=e.getRootElement()}),this.revert(function(t){var o=t.context;o.rootElement&&e.setRootElement(o.rootElement)})}(0,e.default)(n,t.default),n.$inject=["canvas","injector"];
},{"inherits-browser":"hUM3","../../command/CommandInterceptor":"FIh1"}],"YbVT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./RootElementsBehavior"));function t(e){return e&&e.__esModule?e:{default:e}}var o=exports.default={__init__:["rootElementsBehavior"],rootElementsBehavior:["type",e.default]};
},{"./RootElementsBehavior":"xKzQ"}],"eIZy":[function(require,module,exports) {
"use strict";function e(e){return CSS.escape(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.escapeCSS=e,exports.escapeHTML=r;var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function r(e){return(e=""+e)&&e.replace(/[&<>"']/g,function(e){return t[e]})}
},{}],"KVfl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPlaneIdFromShape=t,exports.getShapeIdFromPlane=n,exports.isPlane=i,exports.planeSuffix=void 0,exports.toPlaneId=o;var e=require("./ModelUtil"),r=exports.planeSuffix="_plane";function n(e){return p(e.id)}function t(r){var n=r.id;return(0,e.is)(r,"bpmn:SubProcess")?u(n):n}function o(e){return u(e)}function i(r){var n=(0,e.getDi)(r);return(0,e.is)(n,"bpmndi:BPMNPlane")}function u(e){return e+r}function p(e){return e.replace(new RegExp(r+"$"),"")}
},{"./ModelUtil":"HvoA"}],"X0bt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=require("min-dom"),n=require("min-dash"),t=require("diagram-js/lib/util/EscapeUtil"),r=require("../../util/ModelUtil"),i=require("../../util/DrilldownUtil"),s="bjs-breadcrumbs-shown";function o(o,u,c,l){var d=(0,e.domify)('<ul class="bjs-breadcrumbs"></ul>'),f=l.getContainer(),m=(0,e.classes)(f);f.appendChild(d);var p=[];function b(n){n&&(p=a(n));var o=p.map(function(n){var s=(0,t.escapeHTML)(n.name||n.id),o=(0,e.domify)('<li><span class="bjs-crumb"><a title="'+s+'">'+s+"</a></span></li>"),a=l.findRoot((0,i.getPlaneIdFromShape)(n))||l.findRoot(n.id);if(!a&&(0,r.is)(n,"bpmn:Process")){var c=u.find(function(e){var t=(0,r.getBusinessObject)(e);return t&&t.processRef&&t.processRef===n});a=l.findRoot(c.id)}return o.addEventListener("click",function(){l.setRootElement(a)}),o});d.innerHTML="";var c=o.length>1;m.toggle(s,c),o.forEach(function(e){d.appendChild(e)})}o.on("element.changed",function(e){var t=e.element,i=(0,r.getBusinessObject)(t);(0,n.find)(p,function(e){return e===i})&&b()}),o.on("root.set",function(e){b(e.element)})}function a(e){for(var n=[],t=(0,r.getBusinessObject)(e);t;t=t.$parent)((0,r.is)(t,"bpmn:SubProcess")||(0,r.is)(t,"bpmn:Process"))&&n.push(t);return n.reverse()}o.$inject=["eventBus","elementRegistry","overlays","canvas"];
},{"min-dom":"fWg5","min-dash":"AmEv","diagram-js/lib/util/EscapeUtil":"eIZy","../../util/ModelUtil":"HvoA","../../util/DrilldownUtil":"KVfl"}],"qlDM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("../../util/ModelUtil");function t(t,n){var s=null,r=new i;t.on("root.set",function(t){var i=t.element,o=n.viewbox(),a=r.get(i);if(r.set(s,{x:o.x,y:o.y,zoom:o.scale}),s=i,!(0,e.is)(i,"bpmn:Collaboration")||a){a=a||{x:0,y:0,zoom:1};var l=(o.x-a.x)*o.scale,c=(o.y-a.y)*o.scale;0===l&&0===c||n.scroll({dx:l,dy:c}),a.zoom!==o.scale&&n.zoom(a.zoom,{x:0,y:0})}}),t.on("diagram.clear",function(){r.clear(),s=null})}function i(){this._entries=[],this.set=function(e,t){var i=!1;for(var n in this._entries)if(this._entries[n][0]===e){this._entries[n][1]=t,i=!0;break}i||this._entries.push([e,t])},this.get=function(e){for(var t in this._entries)if(this._entries[t][0]===e)return this._entries[t][1];return null},this.clear=function(){this._entries.length=0},this.remove=function(e){var t=-1;for(var i in this._entries)if(this._entries[i][0]===e){t=i;break}-1!==t&&this._entries.splice(t,1)}}t.$inject=["eventBus","canvas"];
},{"../../util/ModelUtil":"HvoA"}],"jo9X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=require("diagram-js/lib/layout/LayoutUtil"),n=require("../../util/ModelUtil"),t={x:180,y:160};function a(e,n){this._eventBus=e,this._moddle=n;var t=this;e.on("import.render.start",1500,function(e,n){t.handleImport(n.definitions)})}function i(e){return(0,n.is)(e,"bpmndi:BPMNDiagram")?e:i(e.$parent)}function r(n){var t={top:1/0,right:-1/0,bottom:-1/0,left:1/0};return n.planeElement.forEach(function(n){if(n.bounds){var a=(0,e.asTRBL)(n.bounds);t.top=Math.min(a.top,t.top),t.left=Math.min(a.left,t.left)}}),(0,e.asBounds)(t)}function o(e,t){var a=e.$parent;return!(!(0,n.is)(a,"bpmn:SubProcess")||a===t.bpmnElement)&&!(0,n.isAny)(e,["bpmn:DataInputAssociation","bpmn:DataOutputAssociation"])}a.prototype.handleImport=function(e){if(e.diagrams){var n=this;this._definitions=e,this._processToDiagramMap={},e.diagrams.forEach(function(e){e.plane&&e.plane.bpmnElement&&(n._processToDiagramMap[e.plane.bpmnElement.id]=e)});var t=[];e.diagrams.forEach(function(e){var a=n.createNewDiagrams(e.plane);Array.prototype.push.apply(t,a)}),t.forEach(function(e){n.movePlaneElementsToOrigin(e.plane)})}},a.prototype.createNewDiagrams=function(e){var t=this,a=[],i=[];e.get("planeElement").forEach(function(t){var r=t.bpmnElement;if(r){var p=r.$parent;(0,n.is)(r,"bpmn:SubProcess")&&!t.isExpanded&&a.push(r),o(r,e)&&i.push({diElement:t,parent:p})}});var r=[];return a.forEach(function(e){if(!t._processToDiagramMap[e.id]){var n=t.createDiagram(e);t._processToDiagramMap[e.id]=n,r.push(n)}}),i.forEach(function(e){for(var n=e.diElement,i=e.parent;i&&-1===a.indexOf(i);)i=i.$parent;if(i){var r=t._processToDiagramMap[i.id];t.moveToDiPlane(n,r.plane)}}),r},a.prototype.movePlaneElementsToOrigin=function(e){var n=e.get("planeElement"),a=r(e),i=a.x-t.x,o=a.y-t.y;n.forEach(function(e){e.waypoint?e.waypoint.forEach(function(e){e.x=e.x-i,e.y=e.y-o}):e.bounds&&(e.bounds.x=e.bounds.x-i,e.bounds.y=e.bounds.y-o)})},a.prototype.moveToDiPlane=function(e,n){var t=i(e).plane.get("planeElement");t.splice(t.indexOf(e),1),n.get("planeElement").push(e)},a.prototype.createDiagram=function(e){var n=this._moddle.create("bpmndi:BPMNPlane",{bpmnElement:e}),t=this._moddle.create("bpmndi:BPMNDiagram",{plane:n});return n.$parent=t,n.bpmnElement=e,t.$parent=this._definitions,this._definitions.diagrams.push(t),t},a.$inject=["eventBus","moddle"];
},{"diagram-js/lib/layout/LayoutUtil":"aRzT","../../util/ModelUtil":"HvoA"}],"fjem":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=d;var e=n(require("inherits-browser")),t=n(require("diagram-js/lib/command/CommandInterceptor")),r=require("../../util/ModelUtil"),l=require("min-dom"),a=require("../../util/DrilldownUtil");function n(e){return e&&e.__esModule?e:{default:e}}var i=250,o='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.81801948,3.50735931 L10.4996894,9.1896894 L10.5,4 L12,4 L12,12 L4,12 L4,10.5 L9.6896894,10.4996894 L3.75735931,4.56801948 C3.46446609,4.27512627 3.46446609,3.80025253 3.75735931,3.50735931 C4.05025253,3.21446609 4.52512627,3.21446609 4.81801948,3.50735931 Z"/></svg>',s="bjs-drilldown-empty";function d(e,r,l,a){t.default.call(this,r),this._canvas=e,this._eventBus=r,this._elementRegistry=l,this._overlays=a;var n=this;this.executed("shape.toggleCollapse",i,function(e){var t=e.shape;n.canDrillDown(t)?n.addOverlay(t):n.removeOverlay(t)},!0),this.reverted("shape.toggleCollapse",i,function(e){var t=e.shape;n.canDrillDown(t)?n.addOverlay(t):n.removeOverlay(t)},!0),this.executed(["shape.create","shape.move","shape.delete"],i,function(e){var t=e.oldParent,r=e.newParent||e.parent,l=e.shape;n.canDrillDown(l)&&n.addOverlay(l),n.updateDrilldownOverlay(t),n.updateDrilldownOverlay(r),n.updateDrilldownOverlay(l)},!0),this.reverted(["shape.create","shape.move","shape.delete"],i,function(e){var t=e.oldParent,r=e.newParent||e.parent,l=e.shape;n.canDrillDown(l)&&n.addOverlay(l),n.updateDrilldownOverlay(t),n.updateDrilldownOverlay(r),n.updateDrilldownOverlay(l)},!0),r.on("import.render.complete",function(){l.filter(function(e){return n.canDrillDown(e)}).map(function(e){n.addOverlay(e)})})}(0,e.default)(d,t.default),d.prototype.updateDrilldownOverlay=function(e){var t=this._canvas;if(e){var r=t.findRoot(e);r&&this.updateOverlayVisibility(r)}},d.prototype.canDrillDown=function(e){var t=this._canvas;return(0,r.is)(e,"bpmn:SubProcess")&&t.findRoot((0,a.getPlaneIdFromShape)(e))},d.prototype.updateOverlayVisibility=function(e){var t=this._overlays,r=e.businessObject,a=t.get({element:r.id,type:"drilldown"})[0];if(a){var n=r&&r.flowElements&&r.flowElements.length;(0,l.classes)(a.html).toggle(s,!n)}},d.prototype.addOverlay=function(e){var t=this._canvas,r=this._overlays;r.get({element:e,type:"drilldown"}).length&&this.removeOverlay(e);var n=(0,l.domify)('<button class="bjs-drilldown">'+o+"</button>");n.addEventListener("click",function(){t.setRootElement(t.findRoot((0,a.getPlaneIdFromShape)(e)))}),r.add(e,"drilldown",{position:{bottom:-7,right:-8},html:n}),this.updateOverlayVisibility(e)},d.prototype.removeOverlay=function(e){this._overlays.remove({element:e,type:"drilldown"})},d.$inject=["canvas","eventBus","elementRegistry","overlays"];
},{"inherits-browser":"hUM3","diagram-js/lib/command/CommandInterceptor":"FIh1","../../util/ModelUtil":"HvoA","min-dom":"fWg5","../../util/DrilldownUtil":"KVfl"}],"KYIa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("diagram-js/lib/features/overlays")),r=u(require("diagram-js/lib/features/change-support")),i=u(require("diagram-js/lib/features/root-elements")),l=u(require("./DrilldownBreadcrumbs")),t=u(require("./DrilldownCentering")),d=u(require("./SubprocessCompatibility")),a=u(require("./DrilldownOverlayBehavior"));function u(e){return e&&e.__esModule?e:{default:e}}var o=exports.default={__depends__:[e.default,r.default,i.default],__init__:["drilldownBreadcrumbs","drilldownOverlayBehavior","drilldownCentering","subprocessCompatibility"],drilldownBreadcrumbs:["type",l.default],drilldownCentering:["type",t.default],drilldownOverlayBehavior:["type",a.default],subprocessCompatibility:["type",d.default]};
},{"diagram-js/lib/features/overlays":"awXg","diagram-js/lib/features/change-support":"PhDZ","diagram-js/lib/features/root-elements":"YbVT","./DrilldownBreadcrumbs":"X0bt","./DrilldownCentering":"qlDM","./SubprocessCompatibility":"jo9X","./DrilldownOverlayBehavior":"fjem"}],"dNJf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=d;var e=s(require("inherits-browser")),r=s(require("./core")),t=s(require("diagram-js/lib/i18n/translate")),u=s(require("diagram-js/lib/features/selection")),a=s(require("diagram-js/lib/features/overlays")),i=s(require("./features/drilldown")),l=s(require("./BaseViewer"));function s(e){return e&&e.__esModule?e:{default:e}}function d(e){l.default.call(this,e)}(0,e.default)(d,l.default),d.prototype._modules=[r.default,t.default,u.default,a.default,i.default],d.prototype._moddleExtensions={};
},{"inherits-browser":"hUM3","./core":"QJwo","diagram-js/lib/i18n/translate":"N3z5","diagram-js/lib/features/selection":"NUwH","diagram-js/lib/features/overlays":"awXg","./features/drilldown":"KYIa","./BaseViewer":"gSaJ"}],"gUUR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.KEYS_UNDO=exports.KEYS_REDO=exports.KEYS_PASTE=exports.KEYS_COPY=void 0,exports.hasModifier=n,exports.isCmd=i,exports.isCopy=x,exports.isKey=u,exports.isPaste=K,exports.isRedo=c,exports.isShift=p,exports.isUndo=f;var e=require("min-dash"),t=exports.KEYS_COPY=["c","C"],r=exports.KEYS_PASTE=["v","V"],o=exports.KEYS_REDO=["y","Y"],s=exports.KEYS_UNDO=["z","Z"];function n(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function i(e){return!e.altKey&&(e.ctrlKey||e.metaKey)}function u(t,r){return-1!==(t=(0,e.isArray)(t)?t:[t]).indexOf(r.key)||-1!==t.indexOf(r.code)}function p(e){return e.shiftKey}function x(e){return i(e)&&u(t,e)}function K(e){return i(e)&&u(r,e)}function f(e){return i(e)&&!p(e)&&u(s,e)}function c(e){return i(e)&&(u(o,e)||u(s,e)&&p(e))}
},{"min-dash":"AmEv"}],"Ynke":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var e=require("min-dash"),t=require("min-dom"),n=require("./KeyboardUtil"),i="keyboard.keydown",o="keyboard.keyup",r="input-handle-modified-keys",d=1e3;function s(e,t){var n=this;this._config=e||{},this._eventBus=t,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),t.on("diagram.destroy",function(){n._fire("destroy"),n.unbind()}),t.on("diagram.init",function(){n._fire("init")}),t.on("attach",function(){e&&e.bindTo&&n.bind(e.bindTo)}),t.on("detach",function(){n.unbind()})}function u(e){return e&&((0,t.matches)(e,"input, textarea")||"true"===e.contentEditable)}s.$inject=["config.keyboard","eventBus"],s.prototype._keydownHandler=function(e){this._keyHandler(e,i)},s.prototype._keyupHandler=function(e){this._keyHandler(e,o)},s.prototype._keyHandler=function(e,t){if(!this._isEventIgnored(e)){var n={keyEvent:e};this._eventBus.fire(t||i,n)&&e.preventDefault()}},s.prototype._isEventIgnored=function(e){return!!e.defaultPrevented||u(e.target)&&this._isModifiedKeyIgnored(e)},s.prototype._isModifiedKeyIgnored=function(e){return!(0,n.isCmd)(e)||-1===this._getAllowedModifiers(e.target).indexOf(e.key)},s.prototype._getAllowedModifiers=function(e){var n=(0,t.closest)(e,"["+r+"]",!0);return!n||this._node&&!this._node.contains(n)?[]:n.getAttribute(r).split(",")},s.prototype.bind=function(e){this.unbind(),this._node=e,t.event.bind(e,"keydown",this._keydownHandler),t.event.bind(e,"keyup",this._keyupHandler),this._fire("bind")},s.prototype.getBinding=function(){return this._node},s.prototype.unbind=function(){var e=this._node;e&&(this._fire("unbind"),t.event.unbind(e,"keydown",this._keydownHandler),t.event.unbind(e,"keyup",this._keyupHandler)),this._node=null},s.prototype._fire=function(e){this._eventBus.fire("keyboard."+e,{node:this._node})},s.prototype.addListener=function(t,n,o){(0,e.isFunction)(t)&&(o=n,n=t,t=d),this._eventBus.on(o||i,t,n)},s.prototype.removeListener=function(e,t){this._eventBus.off(t||i,e)},s.prototype.hasModifier=n.hasModifier,s.prototype.isCmd=n.isCmd,s.prototype.isShift=n.isShift,s.prototype.isKey=n.isKey;
},{"min-dash":"AmEv","min-dom":"fWg5","./KeyboardUtil":"gUUR"}],"QiDp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"KEYS_COPY",{enumerable:!0,get:function(){return e.KEYS_COPY}}),Object.defineProperty(exports,"KEYS_PASTE",{enumerable:!0,get:function(){return e.KEYS_PASTE}}),Object.defineProperty(exports,"KEYS_REDO",{enumerable:!0,get:function(){return e.KEYS_REDO}}),Object.defineProperty(exports,"KEYS_UNDO",{enumerable:!0,get:function(){return e.KEYS_UNDO}}),exports.default=r;var e=require("./KeyboardUtil"),t=500;function r(e,r){var n=this;e.on("editorActions.init",t,function(e){var t=e.editorActions;n.registerBindings(r,t)})}r.$inject=["eventBus","keyboard"],r.prototype.registerBindings=function(t,r){function n(e,n){r.isRegistered(e)&&t.addListener(n)}n("undo",function(t){var n=t.keyEvent;if((0,e.isUndo)(n))return r.trigger("undo"),!0}),n("redo",function(t){var n=t.keyEvent;if((0,e.isRedo)(n))return r.trigger("redo"),!0}),n("copy",function(t){var n=t.keyEvent;if((0,e.isCopy)(n))return r.trigger("copy"),!0}),n("paste",function(t){var n=t.keyEvent;if((0,e.isPaste)(n))return r.trigger("paste"),!0}),n("stepZoom",function(t){var n=t.keyEvent;if((0,e.isKey)(["+","Add","="],n)&&(0,e.isCmd)(n))return r.trigger("stepZoom",{value:1}),!0}),n("stepZoom",function(t){var n=t.keyEvent;if((0,e.isKey)(["-","Subtract"],n)&&(0,e.isCmd)(n))return r.trigger("stepZoom",{value:-1}),!0}),n("zoom",function(t){var n=t.keyEvent;if((0,e.isKey)("0",n)&&(0,e.isCmd)(n))return r.trigger("zoom",{value:1}),!0}),n("removeSelection",function(t){var n=t.keyEvent;if((0,e.isKey)(["Backspace","Delete","Del"],n))return r.trigger("removeSelection"),!0})};
},{"./KeyboardUtil":"gUUR"}],"KmVM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=d(require("./Keyboard")),r=d(require("./KeyboardBindings"));function d(e){return e&&e.__esModule?e:{default:e}}var t=exports.default={__init__:["keyboard","keyboardBindings"],keyboard:["type",e.default],keyboardBindings:["type",r.default]};
},{"./Keyboard":"Ynke","./KeyboardBindings":"QiDp"}],"bvOO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=require("min-dash"),r={moveSpeed:50,moveSpeedAccelerated:200};function a(a,t,o){var s=this;this._config=(0,e.assign)({},r,a||{}),t.addListener(function(e){var r=e.keyEvent,a=s._config;if(!t.isCmd(r))return;if(t.isKey(["ArrowLeft","Left","ArrowUp","Up","ArrowDown","Down","ArrowRight","Right"],r)){var o,i=t.isShift(r)?a.moveSpeedAccelerated:a.moveSpeed;switch(r.key){case"ArrowLeft":case"Left":o="left";break;case"ArrowUp":case"Up":o="up";break;case"ArrowRight":case"Right":o="right";break;case"ArrowDown":case"Down":o="down"}return s.moveCanvas({speed:i,direction:o}),!0}}),this.moveCanvas=function(e){var r=0,a=0,t=e.speed/Math.min(Math.sqrt(o.viewbox().scale),1);switch(e.direction){case"left":r=t;break;case"up":a=t;break;case"right":r=-t;break;case"down":a=-t}o.scroll({dx:r,dy:a})}}a.$inject=["config.keyboardMove","keyboard","canvas"];
},{"min-dash":"AmEv"}],"qQDY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("../../features/keyboard")),r=t(require("./KeyboardMove"));function t(e){return e&&e.__esModule?e:{default:e}}var d=exports.default={__depends__:[e.default],__init__:["keyboardMove"],keyboardMove:["type",r.default]};
},{"../../features/keyboard":"KmVM","./KeyboardMove":"bvOO"}],"d9XG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.has=t,exports.set=r,exports.unset=o;var e=require("min-dom"),s=/^djs-cursor-.*$/;function r(r){var o=(0,e.classes)(document.body);o.removeMatching(s),r&&o.add("djs-cursor-"+r)}function o(){r(null)}function t(s){return(0,e.classes)(document.body).has("djs-cursor-"+s)}
},{"min-dom":"fWg5"}],"z58J":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.install=t;var e=5e3;function t(t,n){function r(){return!1}return n=n||"element.click",t.once(n,e,r),function(){t.off(n,r)}}
},{}],"XPIE":[function(require,module,exports) {
"use strict";function e(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function t(e,t){return{x:e.x-t.x,y:e.y-t.y}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.center=e,exports.delta=t;
},{}],"zj4B":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var t=require("../../util/Cursor"),e=require("../../util/ClickTrap"),n=require("../../util/PositionUtil"),r=require("min-dom"),u=require("../../util/Event"),i=15;function o(o,s){var l;function d(r){var d=l.start,c=l.button,v=(0,u.toPoint)(r),f=(0,n.delta)(v,d);if(!l.dragging&&a(f)>i&&(l.dragging=!0,0===c&&(0,e.install)(o),(0,t.set)("grab")),l.dragging){var g=l.last||l.start;f=(0,n.delta)(v,g),s.scroll({dx:f.x,dy:f.y}),l.last=v}r.preventDefault()}function c(e){r.event.unbind(document,"mousemove",d),r.event.unbind(document,"mouseup",c),l=null,(0,t.unset)()}o.on("element.mousedown",500,function(t){return function(t){if((0,r.closest)(t.target,".djs-draggable"))return;var e=t.button;if(e>=2||t.ctrlKey||t.shiftKey||t.altKey)return;return l={button:e,start:(0,u.toPoint)(t)},r.event.bind(document,"mousemove",d),r.event.bind(document,"mouseup",c),!0}(t.originalEvent)}),this.isActive=function(){return!!l}}function a(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}o.$inject=["eventBus","canvas"];
},{"../../util/Cursor":"d9XG","../../util/ClickTrap":"z58J","../../util/PositionUtil":"XPIE","min-dom":"fWg5","../../util/Event":"NRQd"}],"FQgA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./MoveCanvas"));function t(e){return e&&e.__esModule?e:{default:e}}var a=exports.default={__init__:["moveCanvas"],moveCanvas:["type",e.default]};
},{"./MoveCanvas":"zj4B"}],"GvSn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.log10=t,Object.defineProperty(exports,"substract",{enumerable:!0,get:function(){return e.delta}});var e=require("./PositionUtil");function t(e){return Math.log(e)/Math.log(10)}
},{"./PositionUtil":"XPIE"}],"yNOw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cap=a,exports.getStepSize=e;var t=require("../../util/Math");function e(e,a){var r=(0,t.log10)(e.min),i=(0,t.log10)(e.max);return(Math.abs(r)+Math.abs(i))/a}function a(t,e){return Math.max(t.min,Math.min(t.max,e))}
},{"../../util/Math":"GvSn"}],"iKS1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=h;var t=require("min-dom"),e=require("./ZoomUtil"),o=require("../../util/Math"),i=require("min-dash"),a=Math.sign||function(t){return t>=0?1:-1},n={min:.2,max:4},l=10,s=.1,r=.75;function h(t,e,o){t=t||{},this._enabled=!1,this._canvas=o,this._container=o._container,this._handleWheel=(0,i.bind)(this._handleWheel,this),this._totalDelta=0,this._scale=t.scale||r;var a=this;e.on("canvas.init",function(e){a._init(!1!==t.enabled)})}h.$inject=["config.zoomScroll","eventBus","canvas"],h.prototype.scroll=function(t){this._canvas.scroll(t)},h.prototype.reset=function(){this._canvas.zoom("fit-viewport")},h.prototype.zoom=function(t,o){var i=(0,e.getStepSize)(n,2*l);this._totalDelta+=t,Math.abs(this._totalDelta)>s&&(this._zoom(t,o,i),this._totalDelta=0)},h.prototype._handleWheel=function(e){if(!(0,t.closest)(e.target,".djs-scrollable",!0)){var o=this._container;e.preventDefault();var i,n=e.ctrlKey,l=e.shiftKey,s=-1*this._scale;if(s*=n?0===e.deltaMode?.02:.32:0===e.deltaMode?1:16,n){var r=o.getBoundingClientRect(),h={x:e.clientX-r.left,y:e.clientY-r.top};i=Math.sqrt(Math.pow(e.deltaY,2)+Math.pow(e.deltaX,2))*a(e.deltaY)*s,this.zoom(i,h)}else i=l?{dx:s*e.deltaY,dy:0}:{dx:s*e.deltaX,dy:s*e.deltaY},this.scroll(i)}},h.prototype.stepZoom=function(t,o){var i=(0,e.getStepSize)(n,l);this._zoom(t,o,i)},h.prototype._zoom=function(t,i,a){var l=this._canvas,s=t>0?1:-1,r=(0,o.log10)(l.zoom()),h=Math.round(r/a)*a;h+=a*s;var c=Math.pow(10,h);l.zoom((0,e.cap)(n,c),i)},h.prototype.toggle=function(e){var o=this._container,i=this._handleWheel,a=this._enabled;return void 0===e&&(e=!a),a!==e&&t.event[e?"bind":"unbind"](o,"wheel",i,!1),this._enabled=e,e},h.prototype._init=function(t){this.toggle(t)};
},{"min-dom":"fWg5","./ZoomUtil":"yNOw","../../util/Math":"GvSn","min-dash":"AmEv"}],"AqEc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./ZoomScroll"));function o(e){return e&&e.__esModule?e:{default:e}}var r=exports.default={__init__:["zoomScroll"],zoomScroll:["type",e.default]};
},{"./ZoomScroll":"iKS1"}],"I9NY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=i(require("inherits-browser")),t=i(require("./Viewer")),a=i(require("diagram-js/lib/navigation/keyboard-move")),o=i(require("diagram-js/lib/navigation/movecanvas")),r=i(require("diagram-js/lib/navigation/zoomscroll"));function i(e){return e&&e.__esModule?e:{default:e}}function u(e){t.default.call(this,e)}(0,e.default)(u,t.default),u.prototype._navigationModules=[a.default,o.default,r.default],u.prototype._modules=[].concat(t.default.prototype._modules,u.prototype._navigationModules);
},{"inherits-browser":"hUM3","./Viewer":"dNJf","diagram-js/lib/navigation/keyboard-move":"qQDY","diagram-js/lib/navigation/movecanvas":"FQgA","diagram-js/lib/navigation/zoomscroll":"AqEc"}],"K0KY":[function(require,module,exports) {
var define;
var t;!function(e,i,n,r){"use strict";var s,o=["","webkit","Moz","MS","ms","o"],a=i.createElement("div"),h="function",u=Math.round,c=Math.abs,l=Date.now;function p(t,e,i){return setTimeout(y(t,i),e)}function f(t,e,i){return!!Array.isArray(t)&&(v(t,i[e],i),!0)}function v(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==r)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function d(t,i,n){var r="DEPRECATED METHOD: "+i+"\n"+n+" AT \n";return function(){var i=new Error("get-stack-trace"),n=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",s=e.console&&(e.console.warn||e.console.log);return s&&s.call(e.console,r,n),t.apply(this,arguments)}}s="function"!=typeof Object.assign?function(t){if(t===r||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==r&&null!==n)for(var s in n)n.hasOwnProperty(s)&&(e[s]=n[s])}return e}:Object.assign;var m=d(function(t,e,i){for(var n=Object.keys(e),s=0;s<n.length;)(!i||i&&t[n[s]]===r)&&(t[n[s]]=e[n[s]]),s++;return t},"extend","Use `assign`."),g=d(function(t,e){return m(t,e,!0)},"merge","Use `assign`.");function T(t,e,i){var n,r=e.prototype;(n=t.prototype=Object.create(r)).constructor=t,n._super=r,i&&s(n,i)}function y(t,e){return function(){return t.apply(e,arguments)}}function E(t,e){return typeof t==h?t.apply(e&&e[0]||r,e):t}function I(t,e){return t===r?e:t}function A(t,e,i){v(b(e),function(e){t.addEventListener(e,i,!1)})}function _(t,e,i){v(b(e),function(e){t.removeEventListener(e,i,!1)})}function C(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function S(t,e){return t.indexOf(e)>-1}function b(t){return t.trim().split(/\s+/g)}function P(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function D(t){return Array.prototype.slice.call(t,0)}function x(t,e,i){for(var n=[],r=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];P(r,o)<0&&n.push(t[s]),r[s]=o,s++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function w(t,e){for(var i,n,s=e[0].toUpperCase()+e.slice(1),a=0;a<o.length;){if((n=(i=o[a])?i+s:e)in t)return n;a++}return r}var O=1;function R(t){var i=t.ownerDocument||t;return i.defaultView||i.parentWindow||e}var M="ontouchstart"in e,z=w(e,"PointerEvent")!==r,N=M&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),X=25,Y=1,F=2,W=4,q=8,k=1,H=2,L=4,U=8,V=16,j=H|L,G=U|V,Z=j|G,B=["x","y"],$=["clientX","clientY"];function J(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){E(t.options.enable,[t])&&i.handler(e)},this.init()}function K(t,e,i){var n=i.pointers.length,s=i.changedPointers.length,o=e&Y&&n-s==0,a=e&(W|q)&&n-s==0;i.isFirst=!!o,i.isFinal=!!a,o&&(t.session={}),i.eventType=e,function(t,e){var i=t.session,n=e.pointers,s=n.length;i.firstInput||(i.firstInput=Q(e));s>1&&!i.firstMultiple?i.firstMultiple=Q(e):1===s&&(i.firstMultiple=!1);var o=i.firstInput,a=i.firstMultiple,h=a?a.center:o.center,u=e.center=tt(n);e.timeStamp=l(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=rt(h,u),e.distance=nt(h,u),function(t,e){var i=e.center,n=t.offsetDelta||{},r=t.prevDelta||{},s=t.prevInput||{};e.eventType!==Y&&s.eventType!==W||(r=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y});e.deltaX=r.x+(i.x-n.x),e.deltaY=r.y+(i.y-n.y)}(i,e),e.offsetDirection=it(e.deltaX,e.deltaY);var p=et(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=p.x,e.overallVelocityY=p.y,e.overallVelocity=c(p.x)>c(p.y)?p.x:p.y,e.scale=a?(f=a.pointers,v=n,nt(v[0],v[1],$)/nt(f[0],f[1],$)):1,e.rotation=a?function(t,e){return rt(e[1],e[0],$)+rt(t[1],t[0],$)}(a.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function(t,e){var i,n,s,o,a=t.lastInterval||e,h=e.timeStamp-a.timeStamp;if(e.eventType!=q&&(h>X||a.velocity===r)){var u=e.deltaX-a.deltaX,l=e.deltaY-a.deltaY,p=et(h,u,l);n=p.x,s=p.y,i=c(p.x)>c(p.y)?p.x:p.y,o=it(u,l),t.lastInterval=e}else i=a.velocity,n=a.velocityX,s=a.velocityY,o=a.direction;e.velocity=i,e.velocityX=n,e.velocityY=s,e.direction=o}(i,e);var f,v;var d=t.element;C(e.srcEvent.target,d)&&(d=e.srcEvent.target);e.target=d}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function Q(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:u(t.pointers[i].clientX),clientY:u(t.pointers[i].clientY)},i++;return{timeStamp:l(),pointers:e,center:tt(e),deltaX:t.deltaX,deltaY:t.deltaY}}function tt(t){var e=t.length;if(1===e)return{x:u(t[0].clientX),y:u(t[0].clientY)};for(var i=0,n=0,r=0;r<e;)i+=t[r].clientX,n+=t[r].clientY,r++;return{x:u(i/e),y:u(n/e)}}function et(t,e,i){return{x:e/t||0,y:i/t||0}}function it(t,e){return t===e?k:c(t)>=c(e)?t<0?H:L:e<0?U:V}function nt(t,e,i){i||(i=B);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return Math.sqrt(n*n+r*r)}function rt(t,e,i){i||(i=B);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return 180*Math.atan2(r,n)/Math.PI}J.prototype={handler:function(){},init:function(){this.evEl&&A(this.element,this.evEl,this.domHandler),this.evTarget&&A(this.target,this.evTarget,this.domHandler),this.evWin&&A(R(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&_(this.element,this.evEl,this.domHandler),this.evTarget&&_(this.target,this.evTarget,this.domHandler),this.evWin&&_(R(this.element),this.evWin,this.domHandler)}};var st={mousedown:Y,mousemove:F,mouseup:W},ot="mousedown",at="mousemove mouseup";function ht(){this.evEl=ot,this.evWin=at,this.pressed=!1,J.apply(this,arguments)}T(ht,J,{handler:function(t){var e=st[t.type];e&Y&&0===t.button&&(this.pressed=!0),e&F&&1!==t.which&&(e=W),this.pressed&&(e&W&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var ut={pointerdown:Y,pointermove:F,pointerup:W,pointercancel:q,pointerout:q},ct={2:"touch",3:"pen",4:"mouse",5:"kinect"},lt="pointerdown",pt="pointermove pointerup pointercancel";function ft(){this.evEl=lt,this.evWin=pt,J.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}e.MSPointerEvent&&!e.PointerEvent&&(lt="MSPointerDown",pt="MSPointerMove MSPointerUp MSPointerCancel"),T(ft,J,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),r=ut[n],s=ct[t.pointerType]||t.pointerType,o="touch"==s,a=P(e,t.pointerId,"pointerId");r&Y&&(0===t.button||o)?a<0&&(e.push(t),a=e.length-1):r&(W|q)&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:s,srcEvent:t}),i&&e.splice(a,1))}});var vt={touchstart:Y,touchmove:F,touchend:W,touchcancel:q},dt="touchstart",mt="touchstart touchmove touchend touchcancel";function gt(){this.evTarget=dt,this.evWin=mt,this.started=!1,J.apply(this,arguments)}T(gt,J,{handler:function(t){var e=vt[t.type];if(e===Y&&(this.started=!0),this.started){var i=function(t,e){var i=D(t.touches),n=D(t.changedTouches);e&(W|q)&&(i=x(i.concat(n),"identifier",!0));return[i,n]}.call(this,t,e);e&(W|q)&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}}});var Tt={touchstart:Y,touchmove:F,touchend:W,touchcancel:q},yt="touchstart touchmove touchend touchcancel";function Et(){this.evTarget=yt,this.targetIds={},J.apply(this,arguments)}T(Et,J,{handler:function(t){var e=Tt[t.type],i=function(t,e){var i=D(t.touches),n=this.targetIds;if(e&(Y|F)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var r,s,o=D(t.changedTouches),a=[],h=this.target;if(s=i.filter(function(t){return C(t.target,h)}),e===Y)for(r=0;r<s.length;)n[s[r].identifier]=!0,r++;r=0;for(;r<o.length;)n[o[r].identifier]&&a.push(o[r]),e&(W|q)&&delete n[o[r].identifier],r++;if(!a.length)return;return[x(s.concat(a),"identifier",!0),a]}.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}});var It=2500,At=25;function _t(){J.apply(this,arguments);var t=y(this.handler,this);this.touch=new Et(this.manager,t),this.mouse=new ht(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function Ct(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches;setTimeout(function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)},It)}}T(_t,J,{handler:function(t,e,i){var n="touch"==i.pointerType,r="mouse"==i.pointerType;if(!(r&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)(function(t,e){t&Y?(this.primaryTouch=e.changedPointers[0].identifier,Ct.call(this,e)):t&(W|q)&&Ct.call(this,e)}).call(this,e,i);else if(r&&function(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n],s=Math.abs(e-r.x),o=Math.abs(i-r.y);if(s<=At&&o<=At)return!0}return!1}.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var St=w(a.style,"touchAction"),bt=St!==r,Pt="auto",Dt="manipulation",xt="none",wt="pan-x",Ot="pan-y",Rt=function(){if(!bt)return!1;var t={},i=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!i||e.CSS.supports("touch-action",n)}),t}();function Mt(t,e){this.manager=t,this.set(e)}Mt.prototype={set:function(t){"compute"==t&&(t=this.compute()),bt&&this.manager.element.style&&Rt[t]&&(this.manager.element.style[St]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return v(this.manager.recognizers,function(e){E(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(S(t,xt))return xt;var e=S(t,wt),i=S(t,Ot);if(e&&i)return xt;if(e||i)return e?wt:Ot;if(S(t,Dt))return Dt;return Pt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var n=this.actions,r=S(n,xt)&&!Rt[xt],s=S(n,Ot)&&!Rt[Ot],o=S(n,wt)&&!Rt[wt];if(r){var a=1===t.pointers.length,h=t.distance<2,u=t.deltaTime<250;if(a&&h&&u)return}if(!o||!s)return r||s&&i&j||o&&i&G?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var zt=1,Nt=2,Xt=4,Yt=8,Ft=Yt,Wt=16;function qt(t){this.options=s({},this.defaults,t||{}),this.id=O++,this.manager=null,this.options.enable=I(this.options.enable,!0),this.state=zt,this.simultaneous={},this.requireFail=[]}function kt(t){return t&Wt?"cancel":t&Yt?"end":t&Xt?"move":t&Nt?"start":""}function Ht(t){return t==V?"down":t==U?"up":t==H?"left":t==L?"right":""}function Lt(t,e){var i=e.manager;return i?i.get(t):t}function Ut(){qt.apply(this,arguments)}function Vt(){Ut.apply(this,arguments),this.pX=null,this.pY=null}function jt(){Ut.apply(this,arguments)}function Gt(){qt.apply(this,arguments),this._timer=null,this._input=null}function Zt(){Ut.apply(this,arguments)}function Bt(){Ut.apply(this,arguments)}function $t(){qt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Jt(t,e){return(e=e||{}).recognizers=I(e.recognizers,Jt.defaults.preset),new Kt(t,e)}qt.prototype={defaults:{},set:function(t){return s(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(f(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Lt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return f(t,"dropRecognizeWith",this)?this:(t=Lt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(f(t,"requireFailure",this))return this;var e=this.requireFail;return-1===P(e,t=Lt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(f(t,"dropRequireFailure",this))return this;t=Lt(t,this);var e=P(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,i=this.state;function n(i){e.manager.emit(i,t)}i<Yt&&n(e.options.event+kt(i)),n(e.options.event),t.additionalEvent&&n(t.additionalEvent),i>=Yt&&n(e.options.event+kt(i))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|zt)))return!1;t++}return!0},recognize:function(t){var e=s({},t);if(!E(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(Ft|Wt|32)&&(this.state=zt),this.state=this.process(e),this.state&(Nt|Xt|Yt|Wt)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},T(Ut,qt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(Nt|Xt),r=this.attrTest(t);return n&&(i&q||!r)?e|Wt:n||r?i&W?e|Yt:e&Nt?e|Xt:Nt:32}}),T(Vt,Ut,{defaults:{event:"pan",threshold:10,pointers:1,direction:Z},getTouchAction:function(){var t=this.options.direction,e=[];return t&j&&e.push(Ot),t&G&&e.push(wt),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,r=t.direction,s=t.deltaX,o=t.deltaY;return r&e.direction||(e.direction&j?(r=0===s?k:s<0?H:L,i=s!=this.pX,n=Math.abs(t.deltaX)):(r=0===o?k:o<0?U:V,i=o!=this.pY,n=Math.abs(t.deltaY))),t.direction=r,i&&n>e.threshold&&r&e.direction},attrTest:function(t){return Ut.prototype.attrTest.call(this,t)&&(this.state&Nt||!(this.state&Nt)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Ht(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),T(jt,Ut,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[xt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&Nt)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),T(Gt,qt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Pt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(W|q)&&!r)this.reset();else if(t.eventType&Y)this.reset(),this._timer=p(function(){this.state=Ft,this.tryEmit()},e.time,this);else if(t.eventType&W)return Ft;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Ft&&(t&&t.eventType&W?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=l(),this.manager.emit(this.options.event,this._input)))}}),T(Zt,Ut,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[xt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&Nt)}}),T(Bt,Ut,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:j|G,pointers:1},getTouchAction:function(){return Vt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(j|G)?e=t.overallVelocity:i&j?e=t.overallVelocityX:i&G&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&c(e)>this.options.velocity&&t.eventType&W},emit:function(t){var e=Ht(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),T($t,qt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Dt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&Y&&0===this.count)return this.failTimeout();if(n&&r&&i){if(t.eventType!=W)return this.failTimeout();var s=!this.pTime||t.timeStamp-this.pTime<e.interval,o=!this.pCenter||nt(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,o&&s?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=p(function(){this.state=Ft,this.tryEmit()},e.interval,this),Nt):Ft}return 32},failTimeout:function(){return this._timer=p(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ft&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Jt.VERSION="2.0.7",Jt.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Zt,{enable:!1}],[jt,{enable:!1},["rotate"]],[Bt,{direction:j}],[Vt,{direction:j},["swipe"]],[$t],[$t,{event:"doubletap",taps:2},["tap"]],[Gt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Kt(t,e){var i;this.options=s({},Jt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((i=this).options.inputClass||(z?ft:N?Et:M?_t:ht))(i,K),this.touchAction=new Mt(this,this.options.touchAction),Qt(this,!0),v(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function Qt(t,e){var i,n=t.element;n.style&&(v(t.options.cssProps,function(r,s){i=w(n.style,s),e?(t.oldCssProps[i]=n.style[i],n.style[i]=r):n.style[i]=t.oldCssProps[i]||""}),e||(t.oldCssProps={}))}Kt.prototype={set:function(t){return s(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var n=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&Ft)&&(r=e.curRecognizer=null);for(var s=0;s<n.length;)i=n[s],2===e.stopped||r&&i!=r&&!i.canRecognizeWith(r)?i.reset():i.recognize(t),!r&&i.state&(Nt|Xt|Yt)&&(r=e.curRecognizer=i),s++}},get:function(t){if(t instanceof qt)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(f(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(f(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=P(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==r&&e!==r){var i=this.handlers;return v(b(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this}},off:function(t,e){if(t!==r){var i=this.handlers;return v(b(t),function(t){e?i[t]&&i[t].splice(P(i[t],e),1):delete i[t]}),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=i.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&Qt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},s(Jt,{INPUT_START:Y,INPUT_MOVE:F,INPUT_END:W,INPUT_CANCEL:q,STATE_POSSIBLE:zt,STATE_BEGAN:Nt,STATE_CHANGED:Xt,STATE_ENDED:Yt,STATE_RECOGNIZED:Ft,STATE_CANCELLED:Wt,STATE_FAILED:32,DIRECTION_NONE:k,DIRECTION_LEFT:H,DIRECTION_RIGHT:L,DIRECTION_UP:U,DIRECTION_DOWN:V,DIRECTION_HORIZONTAL:j,DIRECTION_VERTICAL:G,DIRECTION_ALL:Z,Manager:Kt,Input:J,TouchAction:Mt,TouchInput:Et,MouseInput:ht,PointerEventInput:ft,TouchMouseInput:_t,SingleTouchInput:gt,Recognizer:qt,AttrRecognizer:Ut,Tap:$t,Pan:Vt,Swipe:Bt,Pinch:jt,Rotate:Zt,Press:Gt,on:A,off:_,each:v,merge:g,extend:m,assign:s,inherit:T,bindFn:y,prefixed:w}),(void 0!==e?e:"undefined"!=typeof self?self:{}).Hammer=Jt,"function"==typeof t&&t.amd?t(function(){return Jt}):"undefined"!=typeof module&&module.exports?module.exports=Jt:e.Hammer=Jt}(window,document);
},{}],"EDjL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=d;var t=require("min-dash"),e=require("min-dom"),n=r(require("hammerjs")),o=require("../../util/Event");function r(t){return t&&t.__esModule?t:{default:t}}var a=.2,i=4,c=["mousedown","mouseup","mouseover","mouseout","click","dblclick"];function u(){}function s(t,e){return e.get(t,!1)}function f(t){t.preventDefault(),"function"==typeof t.stopPropagation?t.stopPropagation():t.srcEvent&&"function"==typeof t.srcEvent.stopPropagation&&t.srcEvent.stopPropagation(),"function"==typeof t.stopImmediatePropagation&&t.stopImmediatePropagation()}function p(o){function r(n){setTimeout(function(){(0,t.forEach)(c,function(t){e.event.unbind(o,t,f,!0)})},500)}e.event.bind(o,"touchstart",function(n){(0,t.forEach)(c,function(t){e.event.bind(o,t,f,!0)})},!0),e.event.bind(o,"touchend",r,!0),e.event.bind(o,"touchcancel",r,!0);var a=new n.default.Manager(o,{inputClass:n.default.TouchInput,recognizers:[],domEvents:!0}),i=new n.default.Tap,s=new n.default.Pan({threshold:10}),p=new n.default.Press,d=new n.default.Pinch,l=new n.default.Tap({event:"doubletap",taps:2});return d.requireFailure(s),d.requireFailure(p),a.add([s,p,d,l,i]),a.reset=function(t){var e=this.recognizers,n=this.session;n.stopped||(u("recognizer","stop"),a.stop(t),setTimeout(function(){var t,o;for(u("recognizer","reset"),t=0;o=e[t];t++)o.reset(),o.state=8;n.curRecognizer=null},0))},a.on("hammer.input",function(t){t.srcEvent.defaultPrevented&&a.reset(!0)}),a}function d(t,n,r,c,d){var l,v=s("dragging",t),g=s("move",t),m=s("contextPad",t),h=s("palette",t);function P(t,e){return function(n){u("element",t,n);var o=b(n.target),r=o&&c.get(o);return e&&(n.srcEvent.button=e),d.fire(t,n,r)}}function b(t){return(0,e.closest)(t,"svg, .djs-element",!0)}function x(t){function e(t){var e=b(t.target),o=e&&c.get(e);if(g&&n.getRootElement()!==o)return u("element","move start",o,t,!0),g.start(t,o,!0);!function(t){u("canvas","grab start");var e=0,o=0;function r(t){var r=t.deltaX-e,a=t.deltaY-o;n.scroll({dx:r,dy:a}),e=t.deltaX,o=t.deltaY}function a(t){l.off("panmove",r),l.off("panend",a),l.off("pancancel",a),u("canvas","grab end")}l.on("panmove",r),l.on("panend",a),l.on("pancancel",a)}()}(l=p(t)).on("tap",P("element.click")),l.on("doubletap",P("element.dblclick",1)),l.on("panstart",e),l.on("press",e),l.on("pinchstart",function(t){u("canvas","zoom start");var e=n.zoom(),o=t.center;function r(t){var r=1-(1-t.scale)/1.5,c=Math.max(a,Math.min(i,r*e));n.zoom(c,o),f(t)}function c(t){l.off("pinchmove",r),l.off("pinchend",c),l.off("pinchcancel",c),l.reset(!0),u("canvas","zoom end")}l.on("pinchmove",r),l.on("pinchend",c),l.on("pinchcancel",c)})}v&&r.on("drag.move",function(t){var e=t.originalEvent;if(e&&!(e instanceof MouseEvent)){var n=(0,o.toPoint)(e),r=b(document.elementFromPoint(n.x,n.y)),a=r&&c.get(r);a!==t.hover&&(t.hover&&v.out(t),a&&(v.hover({element:a,gfx:r}),t.hover=a,t.hoverGfx=r))}}),m&&r.on("contextPad.create",function(t){var e=p(t.pad.html);e.on("panstart",function(t){u("context-pad","panstart",t),m.trigger("dragstart",t,!0)}),e.on("press",function(t){u("context-pad","press",t),m.trigger("dragstart",t,!0)}),e.on("tap",function(t){u("context-pad","tap",t),m.trigger("click",t)})}),h&&r.on("palette.create",function(t){var e=p(t.container);e.on("panstart",function(t){u("palette","panstart",t),h.trigger("dragstart",t,!0)}),e.on("press",function(t){u("palette","press",t),h.trigger("dragstart",t,!0)}),e.on("tap",function(t){u("palette","tap",t),h.trigger("click",t)})}),r.on("canvas.init",function(t){x(t.svg)})}d.$inject=["injector","canvas","eventBus","elementRegistry","interactionEvents","touchFix"];
},{"min-dash":"AmEv","min-dom":"fWg5","hammerjs":"K0KY","../../util/Event":"NRQd"}],"rwk9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("tiny-svg");function t(e){var t=this;e.on("canvas.init",function(e){t.addBBoxMarker(e.svg)})}t.$inject=["eventBus"],t.prototype.addBBoxMarker=function(t){var r={fill:"none",class:"outer-bound-marker"},a=(0,e.create)("rect");(0,e.attr)(a,{x:-1e4,y:1e4,width:10,height:10}),(0,e.attr)(a,r),(0,e.append)(t,a);var n=(0,e.create)("rect");(0,e.attr)(n,{x:1e4,y:1e4,width:10,height:10}),(0,e.attr)(n,r),(0,e.append)(t,n)};
},{"tiny-svg":"WdCh"}],"F6j0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("../interaction-events")),t=u(require("./TouchInteractionEvents")),r=u(require("./TouchFix"));function u(e){return e&&e.__esModule?e:{default:e}}var n=exports.default={__depends__:[e.default],__init__:["touchInteractionEvents"],touchInteractionEvents:["type",t.default],touchFix:["type",r.default]};
},{"../interaction-events":"JX1S","./TouchInteractionEvents":"EDjL","./TouchFix":"rwk9"}],"mZoZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("../../features/touch"));function t(e){return e&&e.__esModule?e:{default:e}}var r=exports.default={__depends__:[e.default]};
},{"../../features/touch":"F6j0"}],"iUgB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var t=require("min-dash");function e(t){return t&&t[t.length-1]}function n(t){return t.y}function i(t){return t.x}var r={left:i,center:i,right:function(t){return t.x+t.width},top:n,middle:n,bottom:function(t){return t.y+t.height}};function o(t,e){this._modeling=t,this._rules=e}o.$inject=["modeling","rules"],o.prototype._getOrientationDetails=function(t){var e="x",n="width";return-1!==["top","bottom","middle"].indexOf(t)&&(e="y",n="height"),{axis:e,dimension:n}},o.prototype._isType=function(t,e){return-1!==e.indexOf(t)},o.prototype._alignmentPosition=function(n,i){var r,o,s,u=this._getOrientationDetails(n),l=u.axis,a=u.dimension,f={},h={},c=!1;if(this._isType(n,["left","top"]))f[n]=i[0][l];else if(this._isType(n,["right","bottom"]))s=e(i),f[n]=s[l]+s[a];else if(this._isType(n,["center","middle"])){if((0,t.forEach)(i,function(t){var e=t[l]+Math.round(t[a]/2);h[e]?h[e].elements.push(t):h[e]={elements:[t],center:e}}),r=(0,t.sortBy)(h,function(t){return t.elements.length>1&&(c=!0),t.elements.length}),c)return f[n]=e(r).center,f;o=i[0],s=e(i=(0,t.sortBy)(i,function(t){return t[l]+t[a]})),f[n]=function(t,e){return Math.round((t[l]+e[l]+e[a])/2)}(o,s)}return f},o.prototype.trigger=function(e,n){var i,o=this._modeling,s=(0,t.filter)(e,function(t){return!(t.waypoints||t.host||t.labelTarget)});if(i=this._rules.allowed("elements.align",{elements:s}),(0,t.isArray)(i)&&(s=i),!(s.length<2)&&i){var u=r[n],l=(0,t.sortBy)(s,u),a=this._alignmentPosition(n,l);o.alignElements(l,a)}};
},{"min-dash":"AmEv"}],"Y7wF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./AlignElements"));function t(e){return e&&e.__esModule?e:{default:e}}var l=exports.default={__init__:["alignElements"],alignElements:["type",e.default]};
},{"./AlignElements":"iUgB"}],"OG7G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var t=require("min-dash"),e=require("min-dom"),r=require("../../util/Elements"),i=require("../../util/EscapeUtil"),n=".entry",s=1e3,o=12;function a(e,r,i,n){this._canvas=e,this._eventBus=i,this._overlays=n;var s=(0,t.isDefined)(r&&r.scale)?r.scale:{min:1,max:1.5};this._overlaysConfig={scale:s},this._current=null,this._init()}function u(r,i){var n=(0,e.classes)(r);(i=(0,t.isArray)(i)?i:i.split(/\s+/g)).forEach(function(t){n.add(t)})}function c(t,e){return-1!==t.indexOf(e)}a.$inject=["canvas","config.contextPad","eventBus","overlays"],a.prototype._init=function(){var e=this;this._eventBus.on("selection.changed",function(t){var r=t.newSelection,i=r.length?1===r.length?r[0]:r:null;i?e.open(i,!0):e.close()}),this._eventBus.on("elements.changed",function(r){var i=r.elements,n=e._current;if(n){var s=n.target;(0,t.some)((0,t.isArray)(s)?s:[s],function(t){return c(i,t)})&&e.open(s,!0)}})},a.prototype.registerProvider=function(t,e){e||(e=t,t=s),this._eventBus.on("contextPad.getProviders",t,function(t){t.providers.push(e)})},a.prototype.getEntries=function(e){var r=this._getProviders(),i=(0,t.isArray)(e)?"getMultiElementContextPadEntries":"getContextPadEntries",n={};return(0,t.forEach)(r,function(r){if((0,t.isFunction)(r[i])){var s=r[i](e);(0,t.isFunction)(s)?n=s(n):(0,t.forEach)(s,function(t,e){n[e]=t})}}),n},a.prototype.trigger=function(t,r,i){var n,s,o=r.delegateTarget||r.target;return o?(n=(0,e.attr)(o,"data-action"),s=r.originalEvent||r,this.triggerEntry(n,t,s,i)):r.preventDefault()},a.prototype.triggerEntry=function(e,r,i,n){if(this.isShown()){var s=this._current.target,o=this._current.entries[e];if(o){var a=o.action;if(!1!==this._eventBus.fire("contextPad.trigger",{entry:o,event:i})){if((0,t.isFunction)(a)){if("click"===r)return a(i,s,n)}else if(a[r])return a[r](i,s,n);i.preventDefault()}}}},a.prototype.open=function(t,e){!e&&this.isOpen(t)||(this.close(),this._updateAndOpen(t))},a.prototype._getProviders=function(){var t=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(t),t.providers},a.prototype._updateAndOpen=function(r){var n,s=this.getEntries(r),o=this.getPad(r),a=o.html;(0,t.forEach)(s,function(t,r){var s,o=t.group||"default",c=(0,e.domify)(t.html||'<div class="entry" draggable="true"></div>');(0,e.attr)(c,"data-action",r),(s=(0,e.query)("[data-group="+(0,i.escapeCSS)(o)+"]",a))||(s=(0,e.domify)('<div class="group"></div>'),(0,e.attr)(s,"data-group",o),a.appendChild(s)),s.appendChild(c),t.className&&u(c,t.className),t.title&&(0,e.attr)(c,"title",t.title),t.imageUrl&&(n=(0,e.domify)("<img>"),(0,e.attr)(n,"src",t.imageUrl),n.style.width="100%",n.style.height="100%",c.appendChild(n))}),(0,e.classes)(a).add("open"),this._current={target:r,entries:s,pad:o},this._eventBus.fire("contextPad.open",{current:this._current})},a.prototype.getPad=function(r){if(this.isOpen())return this._current.pad;var i=this,s=this._overlays,o=(0,e.domify)('<div class="djs-context-pad"></div>'),a=this._getPosition(r),u=(0,t.assign)({html:o},this._overlaysConfig,a);e.delegate.bind(o,n,"click",function(t){i.trigger("click",t)}),e.delegate.bind(o,n,"dragstart",function(t){i.trigger("dragstart",t)}),e.event.bind(o,"mousedown",function(t){t.stopPropagation()});var c=this._canvas.getRootElement();this._overlayId=s.add(c,"context-pad",u);var d=s.get(this._overlayId);return this._eventBus.fire("contextPad.create",{target:r,pad:d}),d},a.prototype.close=function(){this.isOpen()&&(this._overlays.remove(this._overlayId),this._overlayId=null,this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)},a.prototype.isOpen=function(e){var r=this._current;if(!r)return!1;if(!e)return!0;var i=r.target;return(0,t.isArray)(e)===(0,t.isArray)(i)&&((0,t.isArray)(e)?e.length===i.length&&(0,t.every)(e,function(t){return c(i,t)}):i===e)},a.prototype.isShown=function(){return this.isOpen()&&this._overlays.isShown()},a.prototype._getPosition=function(e){var i=(0,t.isArray)(e)?e:[e],n=(0,r.getBBox)(i);return{position:{left:n.x+n.width+o,top:n.y-o/2}}};
},{"min-dash":"AmEv","min-dom":"fWg5","../../util/Elements":"KTcn","../../util/EscapeUtil":"eIZy"}],"kGBC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("../interaction-events")),t=u(require("../overlays")),r=u(require("./ContextPad"));function u(e){return e&&e.__esModule?e:{default:e}}var d=exports.default={__depends__:[e.default,t.default],contextPad:["type",r.default]};
},{"../interaction-events":"JX1S","../overlays":"awXg","./ContextPad":"OG7G"}],"u8ui":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Component=w,exports.Fragment=x,exports.cloneElement=j,exports.createContext=z,exports.h=exports.createElement=g,exports.createRef=k,exports.hydrate=V,exports.options=exports.isValidElement=void 0,exports.render=B,exports.toChildArray=D;var e,t,n,_,o,r,l,u,i,s,c,f,p,a={},h=[],d=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,v=Array.isArray;function y(e,t){for(var n in t)e[n]=t[n];return e}function m(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function g(t,n,_){var o,r,l,u={};for(l in n)"key"==l?o=n[l]:"ref"==l?r=n[l]:u[l]=n[l];if(arguments.length>2&&(u.children=arguments.length>3?e.call(arguments,2):_),"function"==typeof t&&null!=t.defaultProps)for(l in t.defaultProps)void 0===u[l]&&(u[l]=t.defaultProps[l]);return b(t,u,o,r,null)}function b(e,_,o,r,l){var u={type:e,props:_,key:o,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==l?++n:l,__i:-1,__u:0};return null==l&&null!=t.vnode&&t.vnode(u),u}function k(){return{current:null}}function x(e){return e.children}function w(e,t){this.props=e,this.context=t}function C(e,t){if(null==t)return e.__?C(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?C(e):null}function P(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return P(e)}}function S(e){(!e.__d&&(e.__d=!0)&&o.push(e)&&!U.__r++||r!==t.debounceRendering)&&((r=t.debounceRendering)||l)(U)}function U(){var e,n,_,r,l,i,s,c;for(o.sort(u);e=o.shift();)e.__d&&(n=o.length,r=void 0,i=(l=(_=e).__v).__e,s=[],c=[],_.__P&&((r=y({},l)).__v=l.__v+1,t.vnode&&t.vnode(r),N(_.__P,r,l,_.__n,_.__P.namespaceURI,32&l.__u?[i]:null,s,null==i?C(l):i,!!(32&l.__u),c),r.__v=l.__v,r.__.__k[r.__i]=r,R(s,r,c),r.__e!=i&&P(r)),o.length>n&&o.sort(u));U.__r=0}function E(e,t,n,_,o,r,l,u,i,s,c){var f,p,d,v,y,m,g=_&&_.__k||h,b=t.length;for(i=T(n,t,g,i,b),f=0;f<b;f++)null!=(d=n.__k[f])&&(p=-1===d.__i?a:g[d.__i]||a,d.__i=f,m=N(e,d,p,o,r,l,u,i,s,c),v=d.__e,d.ref&&p.ref!=d.ref&&(p.ref&&I(p.ref,null,d),c.push(d.ref,d.__c||v,d)),null==y&&null!=v&&(y=v),4&d.__u||p.__k===d.__k?i=M(d,i,e):"function"==typeof d.type&&void 0!==m?i=m:v&&(i=v.nextSibling),d.__u&=-7);return n.__e=y,i}function T(e,t,n,_,o){var r,l,u,i,s,c=n.length,f=c,p=0;for(e.__k=new Array(o),r=0;r<o;r++)null!=(l=t[r])&&"boolean"!=typeof l&&"function"!=typeof l?(i=r+p,(l=e.__k[r]="string"==typeof l||"number"==typeof l||"bigint"==typeof l||l.constructor==String?b(null,l,null,null,null):v(l)?b(x,{children:l},null,null,null):void 0===l.constructor&&l.__b>0?b(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):l).__=e,l.__b=e.__b+1,u=null,-1!==(s=l.__i=W(l,n,i,f))&&(f--,(u=n[s])&&(u.__u|=2)),null==u||null===u.__v?(-1==s&&p--,"function"!=typeof l.type&&(l.__u|=4)):s!=i&&(s==i-1?p--:s==i+1?p++:(s>i?p--:p++,l.__u|=4))):e.__k[r]=null;if(f)for(r=0;r<c;r++)null!=(u=n[r])&&0==(2&u.__u)&&(u.__e==_&&(_=C(u)),$(u,u));return _}function M(e,t,n){var _,o;if("function"==typeof e.type){for(_=e.__k,o=0;_&&o<_.length;o++)_[o]&&(_[o].__=e,t=M(_[o],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=C(e)),n.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8==t.nodeType);return t}function D(e,t){return t=t||[],null==e||"boolean"==typeof e||(v(e)?e.some(function(e){D(e,t)}):t.push(e)),t}function W(e,t,n,_){var o,r,l=e.key,u=e.type,i=t[n];if(null===i||i&&l==i.key&&u===i.type&&0==(2&i.__u))return n;if(_>(null!=i&&0==(2&i.__u)?1:0))for(o=n-1,r=n+1;o>=0||r<t.length;){if(o>=0){if((i=t[o])&&0==(2&i.__u)&&l==i.key&&u===i.type)return o;o--}if(r<t.length){if((i=t[r])&&0==(2&i.__u)&&l==i.key&&u===i.type)return r;r++}}return-1}function L(e,t,n){"-"==t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||d.test(t)?n:n+"px"}function F(e,t,n,_,o){var r;e:if("style"==t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof _&&(e.style.cssText=_=""),_)for(t in _)n&&t in n||L(e.style,t,"");if(n)for(t in n)_&&n[t]===_[t]||L(e.style,t,n[t])}else if("o"==t[0]&&"n"==t[1])r=t!=(t=t.replace(i,"$1")),t=t.toLowerCase()in e||"onFocusOut"==t||"onFocusIn"==t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+r]=n,n?_?n.u=_.u:(n.u=s,e.addEventListener(t,r?f:c,r)):e.removeEventListener(t,r?f:c,r);else{if("http://www.w3.org/2000/svg"==o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!=t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function A(e){return function(n){if(this.l){var _=this.l[n.type+e];if(null==n.t)n.t=s++;else if(n.t<_.u)return;return _(t.event?t.event(n):n)}}}function N(e,n,_,o,r,l,u,i,s,c){var f,p,a,h,d,g,b,k,C,P,S,U,T,M,D,W,L,F=n.type;if(void 0!==n.constructor)return null;128&_.__u&&(s=!!(32&_.__u),l=[i=n.__e=_.__e]),(f=t.__b)&&f(n);e:if("function"==typeof F)try{if(k=n.props,C="prototype"in F&&F.prototype.render,P=(f=F.contextType)&&o[f.__c],S=f?P?P.props.value:f.__:o,_.__c?b=(p=n.__c=_.__c).__=p.__E:(C?n.__c=p=new F(k,S):(n.__c=p=new w(k,S),p.constructor=F,p.render=O),P&&P.sub(p),p.props=k,p.state||(p.state={}),p.context=S,p.__n=o,a=p.__d=!0,p.__h=[],p._sb=[]),C&&null==p.__s&&(p.__s=p.state),C&&null!=F.getDerivedStateFromProps&&(p.__s==p.state&&(p.__s=y({},p.__s)),y(p.__s,F.getDerivedStateFromProps(k,p.__s))),h=p.props,d=p.state,p.__v=n,a)C&&null==F.getDerivedStateFromProps&&null!=p.componentWillMount&&p.componentWillMount(),C&&null!=p.componentDidMount&&p.__h.push(p.componentDidMount);else{if(C&&null==F.getDerivedStateFromProps&&k!==h&&null!=p.componentWillReceiveProps&&p.componentWillReceiveProps(k,S),!p.__e&&(null!=p.shouldComponentUpdate&&!1===p.shouldComponentUpdate(k,p.__s,S)||n.__v==_.__v)){for(n.__v!=_.__v&&(p.props=k,p.state=p.__s,p.__d=!1),n.__e=_.__e,n.__k=_.__k,n.__k.some(function(e){e&&(e.__=n)}),U=0;U<p._sb.length;U++)p.__h.push(p._sb[U]);p._sb=[],p.__h.length&&u.push(p);break e}null!=p.componentWillUpdate&&p.componentWillUpdate(k,p.__s,S),C&&null!=p.componentDidUpdate&&p.__h.push(function(){p.componentDidUpdate(h,d,g)})}if(p.context=S,p.props=k,p.__P=e,p.__e=!1,T=t.__r,M=0,C){for(p.state=p.__s,p.__d=!1,T&&T(n),f=p.render(p.props,p.state,p.context),D=0;D<p._sb.length;D++)p.__h.push(p._sb[D]);p._sb=[]}else do{p.__d=!1,T&&T(n),f=p.render(p.props,p.state,p.context),p.state=p.__s}while(p.__d&&++M<25);p.state=p.__s,null!=p.getChildContext&&(o=y(y({},o),p.getChildContext())),C&&!a&&null!=p.getSnapshotBeforeUpdate&&(g=p.getSnapshotBeforeUpdate(h,d)),i=E(e,v(W=null!=f&&f.type===x&&null==f.key?f.props.children:f)?W:[W],n,_,o,r,l,u,i,s,c),p.base=n.__e,n.__u&=-161,p.__h.length&&u.push(p),b&&(p.__E=p.__=null)}catch(e){if(n.__v=null,s||null!=l)if(e.then){for(n.__u|=s?160:128;i&&8==i.nodeType&&i.nextSibling;)i=i.nextSibling;l[l.indexOf(i)]=null,n.__e=i}else for(L=l.length;L--;)m(l[L]);else n.__e=_.__e,n.__k=_.__k;t.__e(e,n,_)}else null==l&&n.__v==_.__v?(n.__k=_.__k,n.__e=_.__e):i=n.__e=H(_.__e,n,_,o,r,l,u,s,c);return(f=t.diffed)&&f(n),128&n.__u?void 0:i}function R(e,n,_){for(var o=0;o<_.length;o++)I(_[o],_[++o],_[++o]);t.__c&&t.__c(n,e),e.some(function(n){try{e=n.__h,n.__h=[],e.some(function(e){e.call(n)})}catch(e){t.__e(e,n.__v)}})}function H(n,_,o,r,l,u,i,s,c){var f,p,h,d,y,g,b,k=o.props,x=_.props,w=_.type;if("svg"==w?l="http://www.w3.org/2000/svg":"math"==w?l="http://www.w3.org/1998/Math/MathML":l||(l="http://www.w3.org/1999/xhtml"),null!=u)for(f=0;f<u.length;f++)if((y=u[f])&&"setAttribute"in y==!!w&&(w?y.localName==w:3==y.nodeType)){n=y,u[f]=null;break}if(null==n){if(null==w)return document.createTextNode(x);n=document.createElementNS(l,w,x.is&&x),s&&(t.__m&&t.__m(_,u),s=!1),u=null}if(null===w)k===x||s&&n.data===x||(n.data=x);else{if(u=u&&e.call(n.childNodes),k=o.props||a,!s&&null!=u)for(k={},f=0;f<n.attributes.length;f++)k[(y=n.attributes[f]).name]=y.value;for(f in k)if(y=k[f],"children"==f);else if("dangerouslySetInnerHTML"==f)h=y;else if(!(f in x)){if("value"==f&&"defaultValue"in x||"checked"==f&&"defaultChecked"in x)continue;F(n,f,null,y,l)}for(f in x)y=x[f],"children"==f?d=y:"dangerouslySetInnerHTML"==f?p=y:"value"==f?g=y:"checked"==f?b=y:s&&"function"!=typeof y||k[f]===y||F(n,f,y,k[f],l);if(p)s||h&&(p.__html===h.__html||p.__html===n.innerHTML)||(n.innerHTML=p.__html),_.__k=[];else if(h&&(n.innerHTML=""),E(n,v(d)?d:[d],_,o,r,"foreignObject"==w?"http://www.w3.org/1999/xhtml":l,u,i,u?u[0]:o.__k&&C(o,0),s,c),null!=u)for(f=u.length;f--;)m(u[f]);s||(f="value","progress"==w&&null==g?n.removeAttribute("value"):void 0!==g&&(g!==n[f]||"progress"==w&&!g||"option"==w&&g!==k[f])&&F(n,f,g,k[f],l),f="checked",void 0!==b&&b!==n[f]&&F(n,f,b,k[f],l))}return n}function I(e,n,_){try{if("function"==typeof e){var o="function"==typeof e.__u;o&&e.__u(),o&&null==n||(e.__u=e(n))}else e.current=n}catch(e){t.__e(e,_)}}function $(e,n,_){var o,r;if(t.unmount&&t.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||I(o,null,n)),null!=(o=e.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(e){t.__e(e,n)}o.base=o.__P=null}if(o=e.__k)for(r=0;r<o.length;r++)o[r]&&$(o[r],n,_||"function"!=typeof e.type);_||m(e.__e),e.__c=e.__=e.__e=void 0}function O(e,t,n){return this.constructor(e,n)}function B(n,_,o){var r,l,u,i;_==document&&(_=document.documentElement),t.__&&t.__(n,_),l=(r="function"==typeof o)?null:o&&o.__k||_.__k,u=[],i=[],N(_,n=(!r&&o||_).__k=g(x,null,[n]),l||a,a,_.namespaceURI,!r&&o?[o]:l?null:_.firstChild?e.call(_.childNodes):null,u,!r&&o?o:l?l.__e:_.firstChild,r,i),R(u,n,i)}function V(e,t){B(e,t,V)}function j(t,n,_){var o,r,l,u,i=y({},t.props);for(l in t.type&&t.type.defaultProps&&(u=t.type.defaultProps),n)"key"==l?o=n[l]:"ref"==l?r=n[l]:i[l]=void 0===n[l]&&void 0!==u?u[l]:n[l];return arguments.length>2&&(i.children=arguments.length>3?e.call(arguments,2):_),b(t.type,i,o||t.key,r||t.ref,null)}function z(e,t){var n={__c:t="__cC"+p++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,_;return this.getChildContext||(n=new Set,(_={})[t]=this,this.getChildContext=function(){return _},this.componentWillUnmount=function(){n=null},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.forEach(function(e){e.__e=!0,S(e)})},this.sub=function(e){n.add(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n&&n.delete(e),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}e=h.slice,exports.options=t={__e:function(e,t,n,_){for(var o,r,l;t=t.__;)if((o=t.__c)&&!o.__)try{if((r=o.constructor)&&null!=r.getDerivedStateFromError&&(o.setState(r.getDerivedStateFromError(e)),l=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(e,_||{}),l=o.__d),l)return o.__E=o}catch(t){e=t}throw e}},n=0,exports.isValidElement=_=function(e){return null!=e&&null==e.constructor},w.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=y({},this.state),"function"==typeof e&&(e=e(y({},n),this.props)),e&&y(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),S(this))},w.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),S(this))},w.prototype.render=x,o=[],l="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,u=function(e,t){return e.__v.__b-t.__v.__b},U.__r=0,i=/(PointerCapture)$|Capture$/i,s=0,c=A(!1),f=A(!0),p=0;
},{}],"IZkD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var e=function(t,s,n,r){var u;s[0]=0;for(var p=1;p<s.length;p++){var h=s[p++],a=s[p]?(s[0]|=h?1:2,n[s[p++]]):s[++p];3===h?r[0]=a:4===h?r[1]=Object.assign(r[1]||{},a):5===h?(r[1]=r[1]||{})[s[++p]]=a:6===h?r[1][s[++p]]+=a+"":h?(u=t.apply(a,e(t,a,n,["",null])),r.push(u),a[0]?s[0]|=2:(s[p-2]=0,s[p]=u)):r.push(a)}return r},t=new Map;function s(s){var n=t.get(this);return n||(n=new Map,t.set(this,n)),(n=e(this,n.get(s)||(n.set(s,n=function(e){for(var t,s,n=1,r="",u="",p=[0],h=function(e){1===n&&(e||(r=r.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?p.push(0,e,r):3===n&&(e||r)?(p.push(3,e,r),n=2):2===n&&"..."===r&&e?p.push(4,e,0):2===n&&r&&!e?p.push(5,0,!0,r):n>=5&&((r||!e&&5===n)&&(p.push(n,0,r,s),n=6),e&&(p.push(n,e,0,s),n=6)),r=""},a=0;a<e.length;a++){a&&(1===n&&h(),h(a));for(var l=0;l<e[a].length;l++)t=e[a][l],1===n?"<"===t?(h(),p=[p],n=3):r+=t:4===n?"--"===r&&">"===t?(n=1,r=""):r=t+r[0]:u?t===u?u="":r+=t:'"'===t||"'"===t?u=t:">"===t?(h(),n=1):n&&("="===t?(n=5,s=r,r=""):"/"===t&&(n<5||">"===e[a][l+1])?(h(),3===n&&(p=p[0]),n=p,(p=p[0]).push(2,0,n),n=0):" "===t||"\t"===t||"\n"===t||"\r"===t?(h(),n=2):r+=t),3===n&&"!--"===r&&(n=4,p=p[0])}return h(),p}(s)),n),arguments,[])).length>1?n:n[0]}
},{}],"gExM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Component",{enumerable:!0,get:function(){return e.Component}}),Object.defineProperty(exports,"h",{enumerable:!0,get:function(){return e.h}}),exports.html=void 0,Object.defineProperty(exports,"render",{enumerable:!0,get:function(){return e.render}});var e=require("preact"),r=t(require("htm"));function t(e){return e&&e.__esModule?e:{default:e}}var n=exports.html=r.default.bind(e.h);
},{"preact":"u8ui","htm":"IZkD"}],"qsmZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useCallback=N,exports.useContext=b,exports.useDebugValue=g,exports.useEffect=d,exports.useErrorBoundary=C,exports.useId=q,exports.useImperativeHandle=E,exports.useLayoutEffect=H,exports.useMemo=y,exports.useReducer=m,exports.useRef=x,exports.useState=p;var _,n,t,e,r=require("preact"),u=0,o=[],c=r.options,i=c.__b,f=c.__r,a=c.diffed,s=c.__c,h=c.unmount,l=c.__;function v(_,t){c.__h&&c.__h(n,_,u||t),u=0;var e=n.__H||(n.__H={__:[],__h:[]});return _>=e.__.length&&e.__.push({}),e.__[_]}function p(_){return u=1,m(T,_)}function m(t,e,r){var u=v(_++,2);if(u.t=t,!u.__c&&(u.__=[r?r(e):T(void 0,e),function(_){var n=u.__N?u.__N[0]:u.__[0],t=u.t(n,_);n!==t&&(u.__N=[t,u.__[1]],u.__c.setState({}))}],u.__c=n,!n.u)){var o=function(_,n,t){if(!u.__c.__H)return!0;var e=u.__c.__H.__.filter(function(_){return!!_.__c});if(e.every(function(_){return!_.__N}))return!c||c.call(this,_,n,t);var r=u.__c.props!==_;return e.forEach(function(_){if(_.__N){var n=_.__[0];_.__=_.__N,_.__N=void 0,n!==_.__[0]&&(r=!0)}}),c&&c.call(this,_,n,t)||r};n.u=!0;var c=n.shouldComponentUpdate,i=n.componentWillUpdate;n.componentWillUpdate=function(_,n,t){if(this.__e){var e=c;c=void 0,o(_,n,t),c=e}i&&i.call(this,_,n,t)},n.shouldComponentUpdate=o}return u.__N||u.__}function d(t,e){var r=v(_++,3);!c.__s&&P(r.__H,e)&&(r.__=t,r.i=e,n.__H.__h.push(r))}function H(t,e){var r=v(_++,4);!c.__s&&P(r.__H,e)&&(r.__=t,r.i=e,n.__h.push(r))}function x(_){return u=5,y(function(){return{current:_}},[])}function E(_,n,t){u=6,H(function(){return"function"==typeof _?(_(n()),function(){return _(null)}):_?(_.current=n(),function(){return _.current=null}):void 0},null==t?t:t.concat(_))}function y(n,t){var e=v(_++,7);return P(e.__H,t)&&(e.__=n(),e.__H=t,e.__h=n),e.__}function N(_,n){return u=8,y(function(){return _},n)}function b(t){var e=n.context[t.__c],r=v(_++,9);return r.c=t,e?(null==r.__&&(r.__=!0,e.sub(n)),e.props.value):t.__}function g(_,n){c.useDebugValue&&c.useDebugValue(n?n(_):_)}function C(t){var e=v(_++,10),r=p();return e.__=t,n.componentDidCatch||(n.componentDidCatch=function(_,n){e.__&&e.__(_,n),r[1](_)}),[r[0],function(){r[1](void 0)}]}function q(){var t=v(_++,11);if(!t.__){for(var e=n.__v;null!==e&&!e.__m&&null!==e.__;)e=e.__;var r=e.__m||(e.__m=[0,0]);t.__="P"+r[0]+"-"+r[1]++}return t.__}function A(){for(var n;n=o.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(k),n.__H.__h.forEach(U),n.__H.__h=[]}catch(_){n.__H.__h=[],c.__e(_,n.__v)}}c.__b=function(_){n=null,i&&i(_)},c.__=function(_,n){_&&n.__k&&n.__k.__m&&(_.__m=n.__k.__m),l&&l(_,n)},c.__r=function(e){f&&f(e),_=0;var r=(n=e.__c).__H;r&&(t===n?(r.__h=[],n.__h=[],r.__.forEach(function(_){_.__N&&(_.__=_.__N),_.i=_.__N=void 0})):(r.__h.forEach(k),r.__h.forEach(U),r.__h=[],_=0)),t=n},c.diffed=function(_){a&&a(_);var r=_.__c;r&&r.__H&&(r.__H.__h.length&&(1!==o.push(r)&&e===c.requestAnimationFrame||((e=c.requestAnimationFrame)||F)(A)),r.__H.__.forEach(function(_){_.i&&(_.__H=_.i),_.i=void 0})),t=n=null},c.__c=function(_,t){t.some(function(_){try{_.__h.forEach(k),_.__h=_.__h.filter(function(_){return!_.__||U(_)})}catch(n){t.some(function(_){_.__h&&(_.__h=[])}),t=[],c.__e(n,_.__v)}}),s&&s(_,t)},c.unmount=function(_){h&&h(_);var n,t=_.__c;t&&t.__H&&(t.__H.__.forEach(function(_){try{k(_)}catch(_){n=_}}),t.__H=void 0,n&&c.__e(n,t.__v))};var D="function"==typeof requestAnimationFrame;function F(_){var n,t=function(){clearTimeout(e),D&&cancelAnimationFrame(n),setTimeout(_)},e=setTimeout(t,100);D&&(n=requestAnimationFrame(t))}function k(_){var t=n,e=_.__c;"function"==typeof e&&(_.__c=void 0,e()),n=t}function U(_){var t=n;_.__c=_.__(),n=t}function P(_,n){return!_||_.length!==n.length||n.some(function(n,t){return n!==_[t]})}function T(_,n){return"function"==typeof n?n(_):n}
},{"preact":"u8ui"}],"fFw8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={html:!0,useState:!0,useRef:!0,useCallback:!0,useContext:!0,useEffect:!0,useDebugValue:!0,useErrorBoundary:!0,useLayoutEffect:!0,useId:!0,useMemo:!0,useReducer:!0,useImperativeHandle:!0};Object.defineProperty(exports,"html",{enumerable:!0,get:function(){return t.html}}),Object.defineProperty(exports,"useCallback",{enumerable:!0,get:function(){return u.useCallback}}),Object.defineProperty(exports,"useContext",{enumerable:!0,get:function(){return u.useContext}}),Object.defineProperty(exports,"useDebugValue",{enumerable:!0,get:function(){return u.useDebugValue}}),Object.defineProperty(exports,"useEffect",{enumerable:!0,get:function(){return u.useEffect}}),Object.defineProperty(exports,"useErrorBoundary",{enumerable:!0,get:function(){return u.useErrorBoundary}}),Object.defineProperty(exports,"useId",{enumerable:!0,get:function(){return u.useId}}),Object.defineProperty(exports,"useImperativeHandle",{enumerable:!0,get:function(){return u.useImperativeHandle}}),Object.defineProperty(exports,"useLayoutEffect",{enumerable:!0,get:function(){return u.useLayoutEffect}}),Object.defineProperty(exports,"useMemo",{enumerable:!0,get:function(){return u.useMemo}}),Object.defineProperty(exports,"useReducer",{enumerable:!0,get:function(){return u.useReducer}}),Object.defineProperty(exports,"useRef",{enumerable:!0,get:function(){return u.useRef}}),Object.defineProperty(exports,"useState",{enumerable:!0,get:function(){return u.useState}});var t=require("htm/preact"),r=require("preact");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===r[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return r[t]}}))});var u=require("preact/hooks");
},{"htm/preact":"gExM","preact":"u8ui","preact/hooks":"qsmZ"}],"f2Q0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@bpmn-io/diagram-js-ui");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});
},{"@bpmn-io/diagram-js-ui":"fFw8"}],"pd9B":[function(require,module,exports) {
"use strict";function t(o){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(o)}function o(e){var r,n,f="";if("string"==typeof e||"number"==typeof e)f+=e;else if("object"==t(e))if(Array.isArray(e))for(r=0;r<e.length;r++)e[r]&&(n=o(e[r]))&&(f&&(f+=" "),f+=n);else for(r in e)e[r]&&(f&&(f+=" "),f+=r);return f}function e(){for(var t,e,r=0,n="";r<arguments.length;)(t=arguments[r++])&&(e=o(t))&&(n&&(n+=" "),n+=e);return n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.clsx=e,exports.default=void 0;var r=exports.default=e;
},{}],"q74w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=l(require("clsx")),t=require("../../ui");function l(e){return e&&e.__esModule?e:{default:e}}function n(l){const{entry:n,selected:s,onMouseEnter:o,onMouseLeave:a,onAction:i}=l;return t.html`
    <li
      class=${(0,e.default)("entry",{selected:s})}
      data-id=${n.id}
      title=${n.title||n.label}
      onClick=${i}
      onMouseEnter=${o}
      onMouseLeave=${a}
      onDragStart=${e=>i(e,n,"dragstart")}
      draggable=${!0}
    >
      <div class="djs-popup-entry-content">
        <span
          class=${(0,e.default)("djs-popup-entry-name",n.className)}
        >
          ${n.imageUrl?t.html`
            <img class="djs-popup-entry-icon" src=${n.imageUrl} alt="" />
          `:null}

          ${n.label?t.html`
            <span class="djs-popup-label">
              ${n.label}
            </span>
          `:null}
        </span>
        ${n.description&&t.html`
          <span
            class="djs-popup-entry-description"
            title=${n.description}
          >
            ${n.description}
          </span>
        `}
      </div>
      ${n.documentationRef&&t.html`
        <div class="djs-popup-entry-docs">
          <a
            href="${n.documentationRef}"
            onClick=${e=>e.stopPropagation()}
            title="Open element documentation"
            target="_blank"
            rel="noopener"
          >
            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M10.6368 10.6375V5.91761H11.9995V10.6382C11.9995 10.9973 11.8623 11.3141 11.5878 11.5885C11.3134 11.863 10.9966 12.0002 10.6375 12.0002H1.36266C0.982345 12.0002 0.660159 11.8681 0.396102 11.6041C0.132044 11.34 1.52588e-05 11.0178 1.52588e-05 10.6375V1.36267C1.52588e-05 0.98236 0.132044 0.660173 0.396102 0.396116C0.660159 0.132058 0.982345 2.95639e-05 1.36266 2.95639e-05H5.91624V1.36267H1.36266V10.6375H10.6368ZM12 0H7.2794L7.27873 1.36197H9.68701L3.06507 7.98391L4.01541 8.93425L10.6373 2.31231V4.72059H12V0Z" fill="#818798"/>
            </svg>
          </a>
        </div>
      `}
    </li>
  `}
},{"clsx":"pd9B","../../ui":"f2Q0"}],"R1ZD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=require("../../ui"),t=r(require("./PopupMenuItem"));function r(e){return e&&e.__esModule?e:{default:e}}function n(r){const{selectedEntry:n,setSelectedEntry:o,entries:d,...l}=r,i=(0,e.useRef)(),c=(0,e.useMemo)(()=>s(d),[d]);return(0,e.useLayoutEffect)(()=>{const e=i.current;if(!e)return;const t=e.querySelector(".selected");t&&u(t)},[n]),e.html`
    <div class="djs-popup-results" ref=${i}>
      ${c.map(r=>e.html`
        ${r.name&&e.html`
          <div key=${r.id} class="entry-header" title=${r.name}>
            ${r.name}
          </div>
        `}
        <ul class="djs-popup-group" data-group=${r.id}>
          ${r.entries.map(r=>e.html`
            <${t.default}
              key=${r.id}
              entry=${r}
              selected=${r===n}
              onMouseEnter=${()=>o(r)}
              onMouseLeave=${()=>o(null)}
              ...${l}
            />
          `)}
        </ul>
      `)}
    </div>
  `}function s(e){const t=[],r=e=>t.find(t=>e.id===t.id);return e.forEach(e=>{const n=e.group?(e=>"string"==typeof e?{id:e}:e)(e.group):{id:"default"};(e=>!!r(e))(n)?r(n).entries.push(e):t.push({...n,entries:[e]})}),t}function u(e){"function"==typeof e.scrollIntoViewIfNeeded?e.scrollIntoViewIfNeeded():e.scrollIntoView({scrollMode:"if-needed",block:"nearest"})}
},{"../../ui":"f2Q0","./PopupMenuItem":"q74w"}],"FuBD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("../../ui"),t=require("min-dom"),s=o(require("./PopupMenuList")),n=o(require("clsx")),l=require("min-dash");function o(e){return e&&e.__esModule?e:{default:e}}function r(n){const{onClose:o,onSelect:r,className:a,headerEntries:c,position:d,title:p,width:f,scale:$,search:h,entries:m,onOpened:v,onClosed:y}=n,C=(0,e.useMemo)(()=>!!(0,l.isDefined)(h)&&m.length>5,[h,m]),w=(0,e.useRef)(),[b,g]=(0,e.useState)(""),k=(0,e.useCallback)((e,t)=>{if(!C)return e;return e.filter(e=>{if(!t)return(e.rank||0)>=0;const s=[e.description||"",e.label||"",e.search||""].join("---").toLowerCase();return t.toLowerCase().split(/\s/g).every(e=>s.includes(e))})},[C]),[E,L]=(0,e.useState)(k(m,b)),[j,x]=(0,e.useState)(E[0]),M=(0,e.useCallback)(e=>{j&&e.includes(j)||x(e[0]),L(e)},[j,L,x]);(0,e.useEffect)(()=>{M(k(m,b))},[b,m]),(0,e.useEffect)(()=>{const e=e=>{if("Escape"===e.key)return e.preventDefault(),o()};return document.documentElement.addEventListener("keydown",e),()=>{document.documentElement.removeEventListener("keydown",e)}},[]),(0,e.useLayoutEffect)(()=>{w.current&&w.current.focus()},[]);const K=(0,e.useCallback)(e=>{let t=E.indexOf(j)+e;t<0&&(t=E.length-1),t>=E.length&&(t=0),x(E[t])},[E,j,x]),q=(0,e.useCallback)(e=>"Enter"===e.key&&j?r(e,j):"ArrowUp"===e.key||"Tab"===e.key&&e.shiftKey?(K(-1),e.preventDefault()):"ArrowDown"===e.key||"Tab"===e.key?(K(1),e.preventDefault()):void 0,[r,o,j,K]),D=(0,e.useCallback)(e=>{(0,t.matches)(e.target,"input")&&g(()=>e.target.value)},[g]);(0,e.useEffect)(()=>(v(),()=>{y()}),[]);const N=(0,e.useMemo)(()=>p||c.length>0,[p,c]);return e.html`
    <${u}
      onClose=${o}
      onKeyup=${D}
      onKeydown=${q}
      className=${a}
      position=${d}
      width=${f}
      scale=${$}
    >
      ${N&&e.html`
        <div class="djs-popup-header">
          <h3 class="djs-popup-title" title=${p}>${p}</h3>
          ${c.map(t=>e.html`
            <span
              class=${i(t,t===j)}
              onClick=${e=>r(e,t)}
              title=${t.title||t.label}
              data-id=${t.id}
              onMouseEnter=${()=>x(t)}
              onMouseLeave=${()=>x(null)}
            >
              ${t.imageUrl?e.html`
                <img class="djs-popup-entry-icon" src=${t.imageUrl} alt="" />
              `:null}

              ${t.label?e.html`
                <span class="djs-popup-label">${t.label}</span>
              `:null}
            </span>
          `)}
        </div>
      `}
      ${m.length>0&&e.html`
        <div class="djs-popup-body">

          ${C&&e.html`
          <div class="djs-popup-search">
            <svg class="djs-popup-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
            </svg>
            <input
                ref=${w}
                type="text"
              />
          </div>
          `}

          <${s.default}
            entries=${E}
            selectedEntry=${j}
            setSelectedEntry=${x}
            onAction=${r}
          />
        </div>
        ${0===E.length&&e.html`
          <div class="djs-popup-no-results">No matching entries found.</div>
        `}
      `}
    </${u}>
  `}function u(s){const{onClose:l,onKeydown:o,onKeyup:r,className:u,children:i,position:c}=s,d=(0,e.useRef)(),p=(0,e.useCallback)(e=>{(0,t.closest)(e.target,".djs-popup",!0)||l()},[l]);return(0,e.useLayoutEffect)(()=>{if("function"!=typeof c)return;const e=d.current,t=c(e);e.style.left=`${t.x}px`,e.style.top=`${t.y}px`},[d.current,c]),(0,e.useLayoutEffect)(()=>{d.current&&d.current.focus()},[]),e.html`
    <div
      class="djs-popup-backdrop"
      onClick=${p}
    >
      <div
        class=${(0,n.default)("djs-popup",u)}
        style=${a(s)}
        onKeydown=${o}
        onKeyup=${r}
        ref=${d}
        tabIndex="-1"
      >
        ${i}
      </div>
    </div>
  `}function a(e){return{transform:`scale(${e.scale})`,width:`${e.width}px`}}function i(e,t){return(0,n.default)("entry",e.className,e.active?"active":"",e.disabled?"disabled":"",t?"selected":"")}
},{"../../ui":"f2Q0","min-dom":"fWg5","./PopupMenuList":"R1ZD","clsx":"pd9B","min-dash":"AmEv"}],"VVqP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=require("../../ui"),t=require("min-dom"),n=require("min-dash"),r=i(require("./PopupMenuComponent"));function i(e){return e&&e.__esModule?e:{default:e}}var o="data-id",s=["contextPad.close","canvas.viewbox.changing","commandStack.changed"],c=1e3;function u(e,t,r){this._eventBus=t,this._canvas=r,this._current=null;var i=(0,n.isDefined)(e&&e.scale)?e.scale:{min:1,max:1.5};this._config={scale:i},t.on("diagram.destroy",()=>{this.close()}),t.on("element.changed",e=>{const t=this.isOpen()&&this._current.element;e.element===t&&this._render()})}u.$inject=["config.popupMenu","eventBus","canvas"],u.prototype._render=function(){const{position:t,className:n,entries:i,headerEntries:o,options:s}=this._current,c=Object.entries(i).map(([e,t])=>({id:e,...t})),u=Object.entries(o).map(([e,t])=>({id:e,...t})),p=t&&(e=>this._ensureVisible(e,t)),h=this._updateScale(this._current.container);(0,e.render)(e.html`
      <${r.default}
        onClose=${e=>this.close(e)}
        onSelect=${(e,t,n)=>this.trigger(e,t,n)}
        position=${p}
        className=${n}
        entries=${c}
        headerEntries=${u}
        scale=${h}
        onOpened=${this._onOpened.bind(this)}
        onClosed=${this._onClosed.bind(this)}
        ...${{...s}}
      />
    `,this._current.container)},u.prototype.open=function(e,t,n,r){if(!e)throw new Error("Element is missing");if(!t)throw new Error("No registered providers for: "+t);if(!n)throw new Error("the position argument is missing");this.isOpen()&&this.close();const{entries:i,headerEntries:o}=this._getContext(e,t);this._current={position:n,className:t,element:e,entries:i,headerEntries:o,container:this._createContainer({provider:t}),options:r},this._emit("open"),this._bindAutoClose(),this._render()},u.prototype._getContext=function(e,t){const n=this._getProviders(t);if(!n||!n.length)throw new Error("No registered providers for: "+t);const r=this._getEntries(e,n),i=this._getHeaderEntries(e,n);return{entries:r,headerEntries:i,empty:!(Object.keys(r).length||Object.keys(i).length)}},u.prototype.close=function(){this.isOpen()&&(this._emit("close"),this.reset(),this._current=null)},u.prototype.reset=function(){const n=this._current.container;(0,e.render)(null,n),(0,t.remove)(n)},u.prototype._emit=function(e,t){this._eventBus.fire(`popupMenu.${e}`,t)},u.prototype._onOpened=function(){this._emit("opened")},u.prototype._onClosed=function(){this._emit("closed")},u.prototype._createContainer=function(e){var n=this._canvas.getContainer();const r=(0,t.domify)(`<div class="djs-popup-parent djs-scrollable" data-popup=${e.provider}></div>`);return n.appendChild(r),r},u.prototype._bindAutoClose=function(){this._eventBus.once(s,this.close,this)},u.prototype._unbindAutoClose=function(){this._eventBus.off(s,this.close,this)},u.prototype._updateScale=function(e){var t,r,i=this._canvas.zoom(),o=this._config.scale,s=i;return!0!==o&&(!1===o?(t=1,r=1):(t=o.min,r=o.max),(0,n.isDefined)(t)&&i<t&&(s=t),(0,n.isDefined)(r)&&i>r&&(s=r)),s},u.prototype._ensureVisible=function(e,t){var n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect(),i={},o=t.x,s=t.y;return t.x+r.width>n.width&&(i.x=!0),t.y+r.height>n.height&&(i.y=!0),i.x&&i.y?(o=t.x-r.width,s=t.y-r.height):i.x?(o=t.x-r.width,s=t.y):i.y&&t.y<r.height?(o=t.x,s=10):i.y&&(o=t.x,s=t.y-r.height),{x:o,y:s}},u.prototype.isEmpty=function(e,t){if(!e)throw new Error("element parameter is missing");if(!t)throw new Error("providerId parameter is missing");const n=this._getProviders(t);return!n||!n.length||this._getContext(e,t).empty},u.prototype.registerProvider=function(e,t,n){n||(n=t,t=c),this._eventBus.on("popupMenu.getProviders."+e,t,function(e){e.providers.push(n)})},u.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"popupMenu.getProviders."+e,providers:[]});return this._eventBus.fire(t),t.providers},u.prototype._getEntries=function(e,t){var r={};return(0,n.forEach)(t,function(t){if(t.getPopupMenuEntries){var i=t.getPopupMenuEntries(e);(0,n.isFunction)(i)?r=i(r):(0,n.forEach)(i,function(e,t){r[t]=e})}else(0,n.forEach)(t.getEntries(e),function(e){var t=e.id;if(!t)throw new Error("every entry must have the id property set");r[t]=(0,n.omit)(e,["id"])})}),r},u.prototype._getHeaderEntries=function(e,t){var r={};return(0,n.forEach)(t,function(t){if(t.getPopupMenuHeaderEntries){var i=t.getPopupMenuHeaderEntries(e);(0,n.isFunction)(i)?r=i(r):(0,n.forEach)(i,function(e,t){r[t]=e})}else{if(!t.getHeaderEntries)return;(0,n.forEach)(t.getHeaderEntries(e),function(e){var t=e.id;if(!t)throw new Error("every entry must have the id property set");r[t]=(0,n.omit)(e,["id"])})}}),r},u.prototype.isOpen=function(){return!!this._current},u.prototype.trigger=function(e,r,i="click"){if(e.preventDefault(),!r){let n=(0,t.closest)(e.delegateTarget||e.target,".entry",!0),i=(0,t.attr)(n,o);r=this._getEntry(i)}const s=r.action;if(!1!==this._emit("trigger",{entry:r,event:e}))if((0,n.isFunction)(s)){if("click"===i)return s(e,r)}else if(s[i])return s[i](e,r)},u.prototype._getEntry=function(e){var t=this._current.entries[e]||this._current.headerEntries[e];if(!t)throw new Error("entry not found");return t};
},{"../../ui":"f2Q0","min-dom":"fWg5","min-dash":"AmEv","./PopupMenuComponent":"FuBD"}],"dOa0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./PopupMenu"));function u(e){return e&&e.__esModule?e:{default:e}}var t=exports.default={__init__:["popupMenu"],popupMenu:["type",e.default]};
},{"./PopupMenu":"VVqP"}],"WzXy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t={align:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%202000%202000%22%3E%3Cpath%20style%3D%22stroke%3AcurrentColor%3Bstroke-width%3A100%3Bstroke-linecap%3Around%22%20d%3D%22M200%20150v1700%22%2F%3E%3Crect%20x%3D%22500%22%20y%3D%22150%22%20width%3D%221300%22%20height%3D%22700%22%20rx%3D%221%22%20style%3D%22fill%3Anone%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%22%2F%3E%3Crect%20x%3D%22500%22%20y%3D%221150%22%20width%3D%22700%22%20height%3D%22700%22%20rx%3D%221%22%20style%3D%22fill%3AcurrentColor%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%3Bopacity%3A.5%22%2F%3E%3C%2Fsvg%3E",bottom:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%201800%201800%22%3E%3Cpath%20style%3D%22stroke%3AcurrentColor%3Bstroke-width%3A100%3Bstroke-linecap%3Around%22%20d%3D%22M150%201650h1500%22%2F%3E%3Crect%20x%3D%22150%22%20y%3D%22350%22%20width%3D%22600%22%20height%3D%221300%22%20rx%3D%221%22%20style%3D%22fill%3Anone%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%22%2F%3E%3Crect%20x%3D%221050%22%20y%3D%22850%22%20width%3D%22600%22%20height%3D%22800%22%20rx%3D%221%22%20style%3D%22fill%3AcurrentColor%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%3Bopacity%3A.5%22%2F%3E%3C%2Fsvg%3E",center:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%201800%201800%22%3E%3Cpath%20style%3D%22stroke%3AcurrentColor%3Bstroke-width%3A100%3Bstroke-linecap%3Around%22%20d%3D%22M900%20150v1500%22%2F%3E%3Crect%20x%3D%22250%22%20y%3D%22150%22%20width%3D%221300%22%20height%3D%22600%22%20rx%3D%221%22%20style%3D%22fill%3Anone%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%22%2F%3E%3Crect%20x%3D%22500%22%20y%3D%221050%22%20width%3D%22800%22%20height%3D%22600%22%20rx%3D%221%22%20style%3D%22fill%3AcurrentColor%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%3Bopacity%3A.5%22%2F%3E%3C%2Fsvg%3E",left:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%201800%201800%22%3E%3Cpath%20style%3D%22stroke%3AcurrentColor%3Bstroke-width%3A100%3Bstroke-linecap%3Around%22%20d%3D%22M100%20150v1500%22%2F%3E%3Crect%20x%3D%22100%22%20y%3D%22150%22%20width%3D%221300%22%20height%3D%22600%22%20rx%3D%221%22%20style%3D%22fill%3Anone%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%22%2F%3E%3Crect%20x%3D%22100%22%20y%3D%221050%22%20width%3D%22800%22%20height%3D%22600%22%20rx%3D%221%22%20style%3D%22fill%3AcurrentColor%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%3Bopacity%3A.5%22%2F%3E%3C%2Fsvg%3E",right:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%201800%201800%22%3E%3Cpath%20style%3D%22stroke%3AcurrentColor%3Bstroke-width%3A100%3Bstroke-linecap%3Around%22%20d%3D%22M1650%20150v1500%22%2F%3E%3Crect%20x%3D%22350%22%20y%3D%22150%22%20width%3D%221300%22%20height%3D%22600%22%20rx%3D%221%22%20style%3D%22fill%3Anone%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%22%2F%3E%3Crect%20x%3D%22850%22%20y%3D%221050%22%20width%3D%22800%22%20height%3D%22600%22%20rx%3D%221%22%20style%3D%22fill%3AcurrentColor%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%3Bopacity%3A.5%22%2F%3E%3C%2Fsvg%3E",top:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%201800%201800%22%3E%3Cpath%20style%3D%22stroke%3AcurrentColor%3Bstroke-width%3A100%3Bstroke-linecap%3Around%22%20d%3D%22M150%20150h1500%22%2F%3E%3Crect%20x%3D%22150%22%20y%3D%22150%22%20width%3D%22600%22%20height%3D%221300%22%20rx%3D%221%22%20style%3D%22fill%3Anone%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%22%2F%3E%3Crect%20x%3D%221050%22%20y%3D%22150%22%20width%3D%22600%22%20height%3D%22800%22%20rx%3D%221%22%20style%3D%22fill%3AcurrentColor%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%3Bopacity%3A.5%22%2F%3E%3C%2Fsvg%3E",middle:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%201800%201800%22%3E%3Cpath%20style%3D%22stroke%3AcurrentColor%3Bstroke-width%3A100%3Bstroke-linecap%3Around%22%20d%3D%22M150%20900h1500%22%2F%3E%3Crect%20x%3D%22150%22%20y%3D%22250%22%20width%3D%22600%22%20height%3D%221300%22%20rx%3D%221%22%20style%3D%22fill%3Anone%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%22%2F%3E%3Crect%20x%3D%221050%22%20y%3D%22500%22%20width%3D%22600%22%20height%3D%22800%22%20rx%3D%221%22%20style%3D%22fill%3AcurrentColor%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%3Bopacity%3A.5%22%2F%3E%3C%2Fsvg%3E"},r=exports.default=t;
},{}],"rv3X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var t=require("min-dash"),e=n(require("./AlignElementsIcons"));function n(t){return t&&t.__esModule?t:{default:t}}var i=900;function o(t,e,n,o){t.registerProvider(i,this),this._contextPad=t,this._popupMenu=e,this._translate=n,this._canvas=o}o.$inject=["contextPad","popupMenu","translate","canvas"],o.prototype.getMultiElementContextPadEntries=function(e){var n={};return this._isAllowed(e)&&(0,t.assign)(n,this._getEntries(e)),n},o.prototype._isAllowed=function(t){return!this._popupMenu.isEmpty(t,"align-elements")},o.prototype._getEntries=function(n){var i=this;return{"align-elements":{group:"align-elements",title:i._translate("Align elements"),imageUrl:e.default.align,action:{click:function(e,n){var o=i._getMenuPosition(n);(0,t.assign)(o,{cursor:{x:e.x,y:e.y}}),i._popupMenu.open(n,"align-elements",o)}}}}},o.prototype._getMenuPosition=function(t){var e=this._contextPad.getPad(t).html.getBoundingClientRect();return{x:e.left,y:e.bottom+5}};
},{"min-dash":"AmEv","./AlignElementsIcons":"WzXy"}],"Syn6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var e=n(require("./AlignElementsIcons")),t=require("min-dash");function n(e){return e&&e.__esModule?e:{default:e}}var i=["left","center","right","top","middle","bottom"];function s(e,t,n,i){this._alignElements=t,this._translate=n,this._popupMenu=e,this._rules=i,e.registerProvider("align-elements",this)}s.$inject=["popupMenu","alignElements","translate","rules"],s.prototype.getPopupMenuEntries=function(e){var n={};return this._isAllowed(e)&&(0,t.assign)(n,this._getEntries(e)),n},s.prototype._isAllowed=function(e){return this._rules.allowed("elements.align",{elements:e})},s.prototype._getEntries=function(n){var s=this._alignElements,r=this._translate,l=this._popupMenu,o={};return(0,t.forEach)(i,function(t){o["align-elements-"+t]={group:"align",title:r("Align elements "+t),className:"bjs-align-elements-menu-entry",imageUrl:e.default[t],action:function(e,i){s.trigger(n,t),l.close()}}}),o};
},{"./AlignElementsIcons":"WzXy","min-dash":"AmEv"}],"EJm6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=n(require("inherits-browser")),t=n(require("../../command/CommandInterceptor"));function n(e){return e&&e.__esModule?e:{default:e}}function r(e){t.default.call(this,e),this.init()}r.$inject=["eventBus"],(0,e.default)(r,t.default),r.prototype.addRule=function(e,t,n){var r=this;"string"==typeof e&&(e=[e]),e.forEach(function(e){r.canExecute(e,t,function(e,t,r){return n(e)},!0)})},r.prototype.init=function(){};
},{"inherits-browser":"hUM3","../../command/CommandInterceptor":"FIh1"}],"A8Dw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=u(require("inherits-browser")),t=u(require("diagram-js/lib/features/rules/RuleProvider")),r=require("diagram-js/lib/util/Elements"),i=require("min-dash");function u(e){return e&&e.__esModule?e:{default:e}}function n(e){t.default.call(this,e)}n.$inject=["eventBus"],(0,e.default)(n,t.default),n.prototype.init=function(){this.addRule("elements.align",function(e){var t=e.elements,u=(0,i.filter)(t,function(e){return!(e.waypoints||e.host||e.labelTarget)});return!((u=(0,r.getParents)(u)).length<2)&&u})};
},{"inherits-browser":"hUM3","diagram-js/lib/features/rules/RuleProvider":"EJm6","diagram-js/lib/util/Elements":"KTcn","min-dash":"AmEv"}],"MCWE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("diagram-js/lib/features/align-elements")),t=a(require("diagram-js/lib/features/context-pad")),r=a(require("diagram-js/lib/features/popup-menu")),n=a(require("./AlignElementsContextPadProvider")),l=a(require("./AlignElementsMenuProvider")),i=a(require("./BpmnAlignElements"));function a(e){return e&&e.__esModule?e:{default:e}}var u=exports.default={__depends__:[e.default,t.default,r.default],__init__:["alignElementsContextPadProvider","alignElementsMenuProvider","bpmnAlignElements"],alignElementsContextPadProvider:["type",n.default],alignElementsMenuProvider:["type",l.default],bpmnAlignElements:["type",i.default]};
},{"diagram-js/lib/features/align-elements":"Y7wF","diagram-js/lib/features/context-pad":"kGBC","diagram-js/lib/features/popup-menu":"dOa0","./AlignElementsContextPadProvider":"rv3X","./AlignElementsMenuProvider":"Syn6","./BpmnAlignElements":"A8Dw"}],"WLle":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_DISTANCE=void 0,exports.findFreePosition=a,exports.generateGetNextPosition=o,exports.getConnectedAtPosition=c,exports.getConnectedDistance=s;var t=require("../../layout/LayoutUtil"),e=require("min-dash"),n=10,r=exports.DEFAULT_DISTANCE=50,i=250;function a(t,e,n,r){for(var i;i=c(t,n,e);)n=r(e,n,i);return n}function o(t){return function(e,n,r){var i={x:n.x,y:n.y};return["x","y"].forEach(function(a){var o=t[a];if(o){var c="x"===a?"width":"height",s=o.margin,u=o.minDistance;i[a]=s<0?Math.min(r[a]+s-e[c]/2,n[a]-u+s):Math.max(r[a]+r[c]+s+e[c]/2,n[a]+u+s)}}),i}}function c(r,i,a){var o={x:i.x-a.width/2,y:i.y-a.height/2,width:a.width,height:a.height},c=u(r,a);return(0,e.find)(c,function(e){return e!==a&&"intersect"===(0,t.getOrientation)(e,o,n)})}function s(n,a){a||(a={});var o=a.defaultDistance||r,c=a.direction||"e",s=a.filter,u=a.getWeight||function(t){return t.source===n?1:-1},g=a.maxDistance||i,f=a.reference||"start";function d(e,n){return"n"===c?"start"===f?(0,t.asTRBL)(e).top-(0,t.asTRBL)(n).bottom:"center"===f?(0,t.asTRBL)(e).top-(0,t.getMid)(n).y:(0,t.asTRBL)(e).top-(0,t.asTRBL)(n).top:"w"===c?"start"===f?(0,t.asTRBL)(e).left-(0,t.asTRBL)(n).right:"center"===f?(0,t.asTRBL)(e).left-(0,t.getMid)(n).x:(0,t.asTRBL)(e).left-(0,t.asTRBL)(n).left:"s"===c?"start"===f?(0,t.asTRBL)(n).top-(0,t.asTRBL)(e).bottom:"center"===f?(0,t.getMid)(n).y-(0,t.asTRBL)(e).bottom:(0,t.asTRBL)(n).bottom-(0,t.asTRBL)(e).bottom:"start"===f?(0,t.asTRBL)(n).left-(0,t.asTRBL)(e).right:"center"===f?(0,t.getMid)(n).x-(0,t.asTRBL)(e).right:(0,t.asTRBL)(n).right-(0,t.asTRBL)(e).right}s||(s=h);var T=n.incoming.filter(s).map(function(t){var e=u(t),r=e<0?d(t.source,n):d(n,t.source);return{id:t.source.id,distance:r,weight:e}}),L=n.outgoing.filter(s).map(function(t){var e=u(t),r=e>0?d(n,t.target):d(t.target,n);return{id:t.target.id,distance:r,weight:e}}),B=T.concat(L).reduce(function(t,e){return t[e.id+"__weight_"+e.weight]=e,t},{});return(0,e.reduce)(B,function(t,e){var n=e.distance,r=e.weight;return n<0||n>g?t:(t[String(n)]||(t[String(n)]=0),t[String(n)]+=1*r,(!t.distance||t[t.distance]<t[String(n)])&&(t.distance=n),t)},{}).distance||o}function u(t){var e=g(t);return t.host&&(e=e.concat(g(t.host))),t.attachers&&(e=e.concat(t.attachers.reduce(function(t,e){return t.concat(g(e))},[]))),e}function g(t){return d(t).concat(f(t))}function f(t){return t.incoming.map(function(t){return t.source})}function d(t){return t.outgoing.map(function(t){return t.target})}function h(){return!0}
},{"../../layout/LayoutUtil":"aRzT","min-dash":"AmEv"}],"FnmK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("../../layout/LayoutUtil"),t=require("./AutoPlaceUtil"),a=100;function r(e,t,r){e.on("autoPlace",a,function(e){var t=e.shape;return u(e.source,t)}),e.on("autoPlace.end",function(e){r.scrollToElement(e.shape)}),this.append=function(a,r,u){e.fire("autoPlace.start",{source:a,shape:r});var n=e.fire("autoPlace",{source:a,shape:r}),o=t.appendShape(a,r,n,a.parent,u);return e.fire("autoPlace.end",{source:a,shape:o}),o}}function u(a,r,u){u||(u={});var n=u.defaultDistance||t.DEFAULT_DISTANCE,o=(0,e.getMid)(a);return{x:(0,e.asTRBL)(a).right+n+r.width/2,y:o.y}}r.$inject=["eventBus","modeling","canvas"];
},{"../../layout/LayoutUtil":"aRzT","./AutoPlaceUtil":"WLle"}],"hGeb":[function(require,module,exports) {
"use strict";function e(e,t){e.on("autoPlace.end",500,function(e){t.select(e.shape)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e,e.$inject=["eventBus","selection"];
},{}],"cD1M":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("./AutoPlace")),t=a(require("./AutoPlaceSelectionBehavior"));function a(e){return e&&e.__esModule?e:{default:e}}var o=exports.default={__init__:["autoPlaceSelectionBehavior"],autoPlace:["type",e.default],autoPlaceSelectionBehavior:["type",t.default]};
},{"./AutoPlace":"FnmK","./AutoPlaceSelectionBehavior":"hGeb"}],"YK7B":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getParent=r,Object.defineProperty(exports,"is",{enumerable:!0,get:function(){return e.is}}),Object.defineProperty(exports,"isAny",{enumerable:!0,get:function(){return e.isAny}});var e=require("../../../util/ModelUtil");function r(r,t){for("string"==typeof t&&(t=[t]);r=r.parent;)if((0,e.isAny)(r,t))return r;return null}
},{"../../../util/ModelUtil":"HvoA"}],"iibK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDataElementPosition=u,exports.getFlowNodePosition=r,exports.getNewShapePosition=o,exports.getTextAnnotationPosition=s;var t=require("../../util/ModelUtil"),e=require("../modeling/util/ModelingUtil"),i=require("diagram-js/lib/layout/LayoutUtil"),n=require("diagram-js/lib/features/auto-place/AutoPlaceUtil");function o(i,n){return(0,t.is)(n,"bpmn:TextAnnotation")?s(i,n):(0,e.isAny)(n,["bpmn:DataObjectReference","bpmn:DataStoreReference"])?u(i,n):(0,t.is)(n,"bpmn:FlowNode")?r(i,n):void 0}function r(e,o){var r=(0,i.asTRBL)(e),s=(0,i.getMid)(e),u=(0,n.getConnectedDistance)(e,{filter:function(e){return(0,t.is)(e,"bpmn:SequenceFlow")}}),d=30,g="left";(0,t.is)(e,"bpmn:BoundaryEvent")&&-1!==(g=(0,i.getOrientation)(e,e.host,-25)).indexOf("top")&&(d*=-1);var l={x:r.right+u+o.width/2,y:s.y+a(g,80)},c={y:{margin:d,minDistance:80}};return(0,n.findFreePosition)(e,o,l,(0,n.generateGetNextPosition)(c))}function a(t,e){return-1!=t.indexOf("top")?-1*e:-1!=t.indexOf("bottom")?e:0}function s(t,e){var o=(0,i.asTRBL)(t),r={x:o.right+e.width/2,y:o.top-50-e.height/2};d(t)&&((r=(0,i.getMid)(t)).x+=100,r.y-=50);return(0,n.findFreePosition)(t,e,r,(0,n.generateGetNextPosition)({y:{margin:-30,minDistance:20}}))}function u(t,e){var o=(0,i.asTRBL)(t),r={x:o.right-10+e.width/2,y:o.bottom+40+e.width/2};return(0,n.findFreePosition)(t,e,r,(0,n.generateGetNextPosition)({x:{margin:30,minDistance:30}}))}function d(t){return!!t.waypoints}
},{"../../util/ModelUtil":"HvoA","../modeling/util/ModelingUtil":"YK7B","diagram-js/lib/layout/LayoutUtil":"aRzT","diagram-js/lib/features/auto-place/AutoPlaceUtil":"WLle"}],"zQ7h":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("./BpmnAutoPlaceUtil");function t(t){t.on("autoPlace",function(t){var o=t.shape,r=t.source;return(0,e.getNewShapePosition)(r,o)})}t.$inject=["eventBus"];
},{"./BpmnAutoPlaceUtil":"iibK"}],"HcBr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("diagram-js/lib/features/auto-place")),t=u(require("./BpmnAutoPlace"));function u(e){return e&&e.__esModule?e:{default:e}}var a=exports.default={__depends__:[e.default],__init__:["bpmnAutoPlace"],bpmnAutoPlace:["type",t.default]};
},{"diagram-js/lib/features/auto-place":"cD1M","./BpmnAutoPlace":"zQ7h"}],"gOxh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var t=r(require("inherits-browser")),e=require("../../util/Elements"),o=require("../../layout/LayoutUtil"),i=require("min-dash"),n=r(require("../../command/CommandInterceptor"));function r(t){return t&&t.__esModule?t:{default:t}}function s(t,e,o,r){n.default.call(this,t),this._elementRegistry=e,this._modeling=o,this._rules=r;var s=this;this.postExecuted(["shape.create"],function(t){var e=t.context,o=e.hints||{},i=e.shape,n=e.parent||e.newParent;!1!==o.autoResize&&s._expand([i],n)}),this.postExecuted(["elements.move"],function(t){var e=t.context,o=(0,i.flatten)((0,i.values)(e.closure.topLevel)),n=e.hints,r=!n||n.autoResize;if(!1!==r){var a=(0,i.groupBy)(o,function(t){return t.parent.id});(0,i.forEach)(a,function(t,e){(0,i.isArray)(r)&&(t=t.filter(function(t){return(0,i.find)(r,(0,i.matchPattern)({id:t.id}))})),s._expand(t,e)})}}),this.postExecuted(["shape.toggleCollapse"],function(t){var e=t.context,o=e.hints,i=e.shape;o&&!1===o.autoResize||i.collapsed||s._expand(i.children||[],i)}),this.postExecuted(["shape.resize"],function(t){var e=t.context,o=e.hints,i=e.shape,n=i.parent;o&&!1===o.autoResize||n&&s._expand([i],n)})}function a(t,e){return t.x!==e.x||t.y!==e.y||t.width!==e.width||t.height!==e.height}function u(t,e){var i="";return t=(0,o.asTRBL)(t),e=(0,o.asTRBL)(e),t.top>e.top&&(i=i.concat("n")),t.right<e.right&&(i=i.concat("w")),t.bottom<e.bottom&&(i=i.concat("s")),t.left>e.left&&(i=i.concat("e")),i}s.$inject=["eventBus","elementRegistry","modeling","rules"],(0,t.default)(s,n.default),s.prototype._getOptimalBounds=function(t,n){var r=this.getOffset(n),s=this.getPadding(n),a=(0,o.asTRBL)((0,e.getBBox)(t)),u=(0,o.asTRBL)(n),l={};return a.top-u.top<s.top&&(l.top=a.top-r.top),a.left-u.left<s.left&&(l.left=a.left-r.left),u.right-a.right<s.right&&(l.right=a.right+r.right),u.bottom-a.bottom<s.bottom&&(l.bottom=a.bottom+r.bottom),(0,o.asBounds)((0,i.assign)({},u,l))},s.prototype._expand=function(t,e){if("string"==typeof e&&(e=this._elementRegistry.get(e)),this._rules.allowed("element.autoResize",{elements:t,target:e})){var o=this._getOptimalBounds(t,e);if(a(o,e)){var n=u((0,i.pick)(e,["x","y","width","height"]),o);this.resize(e,o,{autoResize:n});var r=e.parent;r&&this._expand([e],r)}}},s.prototype.getOffset=function(t){return{top:60,bottom:60,left:100,right:100}},s.prototype.getPadding=function(t){return{top:2,bottom:2,left:15,right:15}},s.prototype.resize=function(t,e,o){this._modeling.resizeShape(t,e,null,o)};
},{"inherits-browser":"hUM3","../../util/Elements":"KTcn","../../layout/LayoutUtil":"aRzT","min-dash":"AmEv","../../command/CommandInterceptor":"FIh1"}],"BYjA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=r(require("diagram-js/lib/features/auto-resize/AutoResize")),i=r(require("inherits-browser")),t=require("../../util/ModelUtil");function r(e){return e&&e.__esModule?e:{default:e}}function u(i){i.invoke(e.default,this)}u.$inject=["injector"],(0,i.default)(u,e.default),u.prototype.resize=function(e,i,r){(0,t.is)(e,"bpmn:Participant")?this._modeling.resizeLane(e,i,null,r):this._modeling.resizeShape(e,i,null,r)};
},{"diagram-js/lib/features/auto-resize/AutoResize":"gOxh","inherits-browser":"hUM3","../../util/ModelUtil":"HvoA"}],"hn9H":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=r(require("../rules/RuleProvider")),t=r(require("inherits-browser"));function r(e){return e&&e.__esModule?e:{default:e}}function u(t){e.default.call(this,t);var r=this;this.addRule("element.autoResize",function(e){return r.canResize(e.elements,e.target)})}u.$inject=["eventBus"],(0,t.default)(u,e.default),u.prototype.canResize=function(e,t){return!1};
},{"../rules/RuleProvider":"EJm6","inherits-browser":"hUM3"}],"LKor":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=require("../../util/ModelUtil"),i=n(require("inherits-browser")),r=require("min-dash"),t=n(require("diagram-js/lib/features/auto-resize/AutoResizeProvider"));function n(e){return e&&e.__esModule?e:{default:e}}function u(e,i){t.default.call(this,e),this._modeling=i}(0,i.default)(u,t.default),u.$inject=["eventBus","modeling"],u.prototype.canResize=function(i,t){if((0,e.is)(t.di,"bpmndi:BPMNPlane"))return!1;if(!(0,e.is)(t,"bpmn:Participant")&&!(0,e.is)(t,"bpmn:Lane")&&!(0,e.is)(t,"bpmn:SubProcess"))return!1;var n=!0;return(0,r.forEach)(i,function(i){((0,e.is)(i,"bpmn:Lane")||i.labelTarget)&&(n=!1)}),n};
},{"../../util/ModelUtil":"HvoA","inherits-browser":"hUM3","min-dash":"AmEv","diagram-js/lib/features/auto-resize/AutoResizeProvider":"hn9H"}],"E9uH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./BpmnAutoResize")),t=r(require("./BpmnAutoResizeProvider"));function r(e){return e&&e.__esModule?e:{default:e}}var u=exports.default={__init__:["bpmnAutoResize","bpmnAutoResizeProvider"],bpmnAutoResize:["type",e.default],bpmnAutoResizeProvider:["type",t.default]};
},{"./BpmnAutoResize":"BYjA","./BpmnAutoResizeProvider":"LKor"}],"pVlV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=require("min-dom"),n=require("../../util/Event"),t=1500;function o(e,o,i){var u,f,l=this,c=i.get("dragging",!1);c&&o.on("drag.start",function(n){o.once("drag.move",t,function(n){!function(n){if(!n.hover){var t=n.originalEvent,o=l._findTargetGfx(t),r=o&&e.get(o);o&&r&&(n.stopPropagation(),c.hover({element:r,gfx:o}),c.move(t))}}(n)})}),o.on("element.hover",function(e){u=e.gfx,f=e.element}),o.on("element.hover",t,function(e){f&&o.fire("element.out",{element:f,gfx:u})}),o.on("element.out",function(){u=null,f=null}),this._findTargetGfx=function(e){var t;if(e instanceof MouseEvent)return t=(0,n.toPoint)(e),r(document.elementFromPoint(t.x,t.y))}}function r(n){return(0,e.closest)(n,"svg, .djs-element",!0)}o.$inject=["elementRegistry","eventBus","injector"];
},{"min-dom":"fWg5","../../util/Event":"NRQd"}],"grrn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./HoverFix"));function r(e){return e&&e.__esModule?e:{default:e}}var t=exports.default={__init__:["hoverFix"],hoverFix:["type",e.default]};
},{"./HoverFix":"pVlV"}],"xO24":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=v;var e=require("min-dash"),t=require("min-dom"),n=require("../../util/Event"),o=require("../../util/Cursor"),i=require("../../util/ClickTrap"),a=require("../../util/PositionUtil"),u=require("../keyboard/KeyboardUtil"),r=Math.round,c="djs-drag-active";function d(e){e.preventDefault()}function l(e){return"undefined"!=typeof TouchEvent&&e instanceof TouchEvent}function s(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function v(v,m,f,p){var h,g={threshold:5,trapClick:!0};function y(e){var t=m.viewbox(),n=m._container.getBoundingClientRect();return{x:t.x+(e.x-n.left)/t.scale,y:t.y+(e.y-n.top)/t.scale}}function b(t,n){n=n||h;var o=v.createEvent((0,e.assign)({},n.payload,n.data,{isTouch:n.isTouch}));return!1!==v.fire("drag."+t,o)&&v.fire(n.prefix+"."+t,o)}function x(t,i){var u=h.payload,d=h.displacement,l=h.globalStart,v=(0,n.toPoint)(t),p=(0,a.delta)(v,l),g=h.localStart,x=y(v),k=(0,a.delta)(x,g);if(!h.active&&(i||s(p)>h.threshold)){if((0,e.assign)(u,{x:r(g.x+d.x),y:r(g.y+d.y),dx:0,dy:0},{originalEvent:t}),!1===b("start"))return T();h.active=!0,h.keepSelection||(u.previousSelection=f.get(),f.select(null)),h.cursor&&(0,o.set)(h.cursor),m.addMarker(m.getRootElement(),c)}(0,n.stopPropagation)(t),h.active&&((0,e.assign)(u,{x:r(x.x+d.x),y:r(x.y+d.y),dx:r(k.x),dy:r(k.y)},{originalEvent:t}),b("move"))}function k(e){var t=!0;h.active&&(e&&(h.payload.originalEvent=e,(0,n.stopPropagation)(e)),t=b("end")),!1===t&&b("rejected"),b("ended",C(!0!==t))}function E(e){(0,u.isKey)("Escape",e)&&(d(e),T())}function q(e){var t;h.active&&(t=(0,i.install)(v),setTimeout(t,400),d(e)),k(e)}function M(e){x(e)}function P(e){var t=h.payload;t.hoverGfx=e.gfx,t.hover=e.element,b("hover")}function S(e){b("out");var t=h.payload;t.hoverGfx=null,t.hover=null}function T(e){var t;if(h){var n=h.active;n&&b("cancel"),t=C(e),n&&b("canceled",t)}}function C(e){var n,i;b("cleanup"),(0,o.unset)(),i=h.trapClick?q:k,t.event.unbind(document,"mousemove",x),t.event.unbind(document,"dragstart",d),t.event.unbind(document,"selectstart",d),t.event.unbind(document,"mousedown",i,!0),t.event.unbind(document,"mouseup",i,!0),t.event.unbind(document,"keyup",E),t.event.unbind(document,"touchstart",M,!0),t.event.unbind(document,"touchcancel",T,!0),t.event.unbind(document,"touchmove",x,!0),t.event.unbind(document,"touchend",k,!0),v.off("element.hover",P),v.off("element.out",S),m.removeMarker(m.getRootElement(),c);var a=h.payload.previousSelection;return!1!==e&&a&&!f.get().length&&function(e){var t=e.filter(function(e){return p.get(e.id)});t.length&&f.select(t)}(a),n=h,h=null,n}v.on("diagram.destroy",T),this.init=function(o,i,u,r){h&&T(!1),"string"==typeof i&&(r=u,u=i,i=null);var c,s,m,f,p,C=(r=(0,e.assign)({},g,r||{})).data||{};f=r.trapClick?q:k,o?(c=(0,n.getOriginal)(o)||o,s=(0,n.toPoint)(o),(0,n.stopPropagation)(o),"dragstart"===c.type&&d(c)):(c=null,s={x:0,y:0}),m=y(s),i||(i=m),p=l(c),h=(0,e.assign)({prefix:u,data:C,payload:{},globalStart:s,displacement:(0,a.delta)(i,m),localStart:m,isTouch:p},r),r.manual||(p?(t.event.bind(document,"touchstart",M,!0),t.event.bind(document,"touchcancel",T,!0),t.event.bind(document,"touchmove",x,!0),t.event.bind(document,"touchend",k,!0)):(t.event.bind(document,"mousemove",x),t.event.bind(document,"dragstart",d),t.event.bind(document,"selectstart",d),t.event.bind(document,"mousedown",f,!0),t.event.bind(document,"mouseup",f,!0)),t.event.bind(document,"keyup",E),v.on("element.hover",P),v.on("element.out",S)),b("init"),r.autoActivate&&x(o,!0)},this.move=x,this.hover=P,this.out=S,this.end=k,this.cancel=T,this.context=function(){return h},this.setOptions=function(t){(0,e.assign)(g,t)}}v.$inject=["eventBus","canvas","selection","elementRegistry"];
},{"min-dash":"AmEv","min-dom":"fWg5","../../util/Event":"NRQd","../../util/Cursor":"d9XG","../../util/ClickTrap":"z58J","../../util/PositionUtil":"XPIE","../keyboard/KeyboardUtil":"gUUR"}],"gdZp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("../hover-fix")),r=u(require("../selection")),t=u(require("./Dragging"));function u(e){return e&&e.__esModule?e:{default:e}}var d=exports.default={__depends__:[e.default,r.default],dragging:["type",t.default]};
},{"../hover-fix":"grrn","../selection":"NUwH","./Dragging":"xO24"}],"XfKY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var t=require("min-dash"),o=require("../../util/Event");function r(o,r,e){this._canvas=e,this._opts=(0,t.assign)({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},o);var s=this;r.on("drag.move",function(t){var o=s._toBorderPoint(t);s.startScroll(o)}),r.on(["drag.cleanup"],function(){s.stopScroll()})}function e(t,o,r){return o<t&&t<r}r.$inject=["config.autoScroll","eventBus","canvas"],r.prototype.startScroll=function(t){var o=this._canvas,r=this._opts,s=this,l=o.getContainer().getBoundingClientRect(),n=[t.x,t.y,l.width-t.x,l.height-t.y];this.stopScroll();for(var i=0,c=0,a=0;a<4;a++)e(n[a],r.scrollThresholdOut[a],r.scrollThresholdIn[a])&&(0===a?i=r.scrollStep:1==a?c=r.scrollStep:2==a?i=-r.scrollStep:3==a&&(c=-r.scrollStep));0===i&&0===c||(o.scroll({dx:i,dy:c}),this._scrolling=setTimeout(function(){s.startScroll(t)},r.scrollRepeatTimeout))},r.prototype.stopScroll=function(){clearTimeout(this._scrolling)},r.prototype.setOptions=function(o){this._opts=(0,t.assign)({},this._opts,o)},r.prototype._toBorderPoint=function(t){var r=this._canvas._container.getBoundingClientRect(),e=(0,o.toPoint)(t.originalEvent);return{x:e.x-r.left,y:e.y-r.top}};
},{"min-dash":"AmEv","../../util/Event":"NRQd"}],"Zptz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("../dragging")),t=r(require("./AutoScroll"));function r(e){return e&&e.__esModule?e:{default:e}}var u=exports.default={__depends__:[e.default],__init__:["autoScroll"],autoScroll:["type",t.default]};
},{"../dragging":"gdZp","./AutoScroll":"XfKY"}],"OA8l":[function(require,module,exports) {
"use strict";function t(t){this._commandStack=t.get("commandStack",!1)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t,t.$inject=["injector"],t.prototype.allowed=function(t,e){var c=!0,o=this._commandStack;return o&&(c=o.canExecute(t,e)),void 0===c||c};
},{}],"GwI0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./Rules"));function t(e){return e&&e.__esModule?e:{default:e}}var r=exports.default={__init__:["rules"],rules:["type",e.default]};
},{"./Rules":"OA8l"}],"BNw3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getApproxIntersection=p;var e=require("./Geometry"),n=t(require("path-intersection"));function t(e){return e&&e.__esModule?e:{default:e}}var r=Math.round,i=Math.max;function o(e,n){return[["M",e.x,e.y],["m",0,-n],["a",n,n,0,1,1,0,2*n],["a",n,n,0,1,1,0,-2*n],["z"]]}function u(e){var n=[];return e.forEach(function(e,t){n.push([0===t?"M":"L",e.x,e.y])}),n}var a=10;function s(n,t){var r,i;for(r=0;i=n[r];r++)if((0,e.pointDistance)(i,t)<=a)return{point:n[r],bendpoint:!0,index:r};return null}function x(e,t){var s,x=(0,n.default)(o(t,a),u(e)),p=x[0],c=x[x.length-1];return p?p!==c?p.segment2!==c.segment2?{point:e[s=i(p.segment2,c.segment2)-1],bendpoint:!0,index:s}:{point:{x:r(p.x+c.x)/2,y:r(p.y+c.y)/2},index:p.segment2}:{point:{x:r(p.x),y:r(p.y)},index:p.segment2}:null}function p(e,n){return s(e,n)||x(e,n)}
},{"./Geometry":"aD2B","path-intersection":"DKLd"}],"oQci":[function(require,module,exports) {
"use strict";function t(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}function n(t){return Math.atan((t[1].y-t[0].y)/(t[1].x-t[0].x))}function e(t,n){return n?{x:Math.cos(n)*t.x-Math.sin(n)*t.y,y:Math.sin(n)*t.x+Math.cos(n)*t.y}:t}function r(t,n,e){var r=[{n:t[0]-e[0],lambda:n[0]},{n:t[1]-e[1],lambda:n[1]}];return-(r[0].n*n[0]+r[1].n*n[1])/(r[0].lambda*n[0]+r[1].lambda*n[1])}function o(t,n){var e=n[0],o=n[1],x={x:o.x-e.x,y:o.y-e.y},a=r([e.x,e.y],[x.x,x.y],[t.x,t.y]);return{x:e.x+a*x.x,y:e.y+a*x.y}}function x(n,e){var r=o(n,e);return t({x:r.x-n.x,y:r.y-n.y})}function a(n,e){return t({x:n.x-e.x,y:n.y-e.y})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getAngle=n,exports.getDistancePointLine=x,exports.getDistancePointPoint=a,exports.perpendicularFoot=o,exports.rotateVector=e,exports.vectorLength=t;
},{}],"qzRG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SEGMENT_DRAGGER_CLS=exports.BENDPOINT_CLS=void 0,exports.addBendpoint=u,exports.addSegmentDragger=l,exports.calculateSegmentMoveRegion=v,exports.getClosestPointOnConnection=x,exports.getConnectionIntersection=d,exports.toCanvasCoordinates=c;var e=require("../../util/Event"),t=require("../../util/Geometry"),r=require("tiny-svg"),n=require("../../util/SvgTransformUtil"),a=require("../../util/LineIntersection"),i=require("./GeometricUtil"),s=exports.BENDPOINT_CLS="djs-bendpoint",o=exports.SEGMENT_DRAGGER_CLS="djs-segment-dragger";function c(t,r){var n,a=(0,e.toPoint)(r),i=t._container.getBoundingClientRect();n={x:i.left,y:i.top};var s=t.viewbox();return{x:s.x+(a.x-n.x)/s.scale,y:s.y+(a.y-n.y)/s.scale}}function d(e,t,r){var n=c(e,r);return(0,a.getApproxIntersection)(t,n)}function u(e,t){var n=(0,r.create)("g");(0,r.classes)(n).add(s),(0,r.append)(e,n);var a=(0,r.create)("circle");(0,r.attr)(a,{cx:0,cy:0,r:4}),(0,r.classes)(a).add("djs-visual"),(0,r.append)(n,a);var i=(0,r.create)("circle");return(0,r.attr)(i,{cx:0,cy:0,r:10}),(0,r.classes)(i).add("djs-hit"),(0,r.append)(n,i),t&&(0,r.classes)(n).add(t),n}function p(e,t,a,i){var s=(0,r.create)("g");(0,r.append)(e,s);var o=g(t,a,i),c=(0,r.create)("rect");(0,r.attr)(c,{x:-9,y:-3,width:18,height:6}),(0,r.classes)(c).add("djs-visual"),(0,r.append)(s,c);var d=(0,r.create)("rect");return(0,r.attr)(d,{x:-o/2,y:-8.5,width:o,height:17}),(0,r.classes)(d).add("djs-hit"),(0,r.append)(s,d),(0,n.rotate)(s,"v"===i?90:0,0,0),s}function l(e,a,i){var s=(0,r.create)("g"),c=(0,t.getMidPoint)(a,i),d=(0,t.pointsAligned)(a,i);return(0,r.append)(e,s),p(s,a,i,d),(0,r.classes)(s).add(o),(0,r.classes)(s).add("h"===d?"horizontal":"vertical"),(0,n.translate)(s,c.x,c.y),s}function v(e){return Math.abs(Math.round(2*e/3))}function x(e,t){var r=y(e,t);return(0,i.perpendicularFoot)(e,r)}function g(e,t,r){var n=t.x-e.x,a=t.y-e.y;return v("h"===r?n:a)}function y(e,t){for(var r,n=t.waypoints,a=1/0,s=0;s<n.length-1;s++){var o=n[s],c=n[s+1],d=(0,i.getDistancePointLine)(e,[o,c]);d<a&&(a=d,r=s)}return[n[r],n[r+1]]}
},{"../../util/Event":"NRQd","../../util/Geometry":"aD2B","tiny-svg":"WdCh","../../util/SvgTransformUtil":"EK9i","../../util/LineIntersection":"BNw3","./GeometricUtil":"oQci"}],"WhtQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=d;var e=require("min-dash"),n=require("min-dom"),t=require("./BendpointUtil"),i=require("../../util/EscapeUtil"),o=require("../../util/Geometry"),r=require("../../util/Mouse"),a=require("tiny-svg"),s=require("../../util/SvgTransformUtil");function d(d,c,l,m,v){function f(e,n){var i=n.waypoints,r=(0,t.getConnectionIntersection)(c,i,e);if(r)return!function(e,n,t){var i,r,a,s,d,u,c=e.index,l=e.point;return!(c<=0||e.bendpoint)&&(i=n[c-1],r=n[c],a=(0,o.getMidPoint)(i,r),s=(0,o.pointsAligned)(i,r),d=Math.abs(l.x-a.x),u=Math.abs(l.y-a.y),s&&d<=t&&u<=t)}(r,i,function(e,n){var i,r,a,s=e.waypoints;return n.index<=0||n.bendpoint?null:(i={start:s[n.index-1],end:s[n.index]},(r=(0,o.pointsAligned)(i.start,i.end))?(a="h"===r?i.end.x-i.start.x:i.end.y-i.start.y,(0,t.calculateSegmentMoveRegion)(a)/2):null)}(n,r))?m.start(e,n,r.index,!r.bendpoint):v.start(e,n,r.index),!0}function g(e,t,i){n.event.bind(e,t,function(e){l.triggerMouseEvent(t,e,i),e.stopPropagation()})}function p(e,t){var o=c.getLayer("overlays"),r=(0,n.query)('.djs-bendpoints[data-element-id="'+(0,i.escapeCSS)(e.id)+'"]',o);return!r&&t&&(r=(0,a.create)("g"),(0,a.attr)(r,{"data-element-id":e.id}),(0,a.classes)(r).add("djs-bendpoints"),(0,a.append)(o,r),g(r,"mousedown",e),g(r,"click",e),g(r,"dblclick",e)),r}function y(e,t){return(0,n.query)('.djs-segment-dragger[data-segment-idx="'+e+'"]',t)}function x(e,n){n.waypoints.forEach(function(n,i){var o=(0,t.addBendpoint)(e);(0,a.append)(e,o),(0,s.translate)(o,n.x,n.y)}),(0,t.addBendpoint)(e,"floating")}function h(e,n){for(var i,r,s,d=n.waypoints,u=1;u<d.length;u++)i=d[u-1],r=d[u],(0,o.pointsAligned)(i,r)&&(s=(0,t.addSegmentDragger)(e,i,r),(0,a.attr)(s,{"data-segment-idx":u}),g(s,"mousemove",n))}function q(e){var n=p(e);return n||(x(n=p(e,!0),e),h(n,e)),n}function w(i){var o=p(i);o&&(!function(i){(0,e.forEach)((0,n.queryAll)("."+t.SEGMENT_DRAGGER_CLS,i),function(e){(0,a.remove)(e)})}(o),function(i){(0,e.forEach)((0,n.queryAll)("."+t.BENDPOINT_CLS,i),function(e){(0,a.remove)(e)})}(o),h(o,i),x(o,i))}d.on("connection.changed",function(e){w(e.element)}),d.on("connection.remove",function(e){var n=p(e.element);n&&(0,a.remove)(n)}),d.on("element.marker.update",function(e){var n,t=e.element;t.waypoints&&(n=q(t),e.add?(0,a.classes)(n).add(e.marker):(0,a.classes)(n).remove(e.marker))}),d.on("element.mousemove",function(e){var i,r,a=e.element,d=a.waypoints;if(d){if(i=p(a,!0),!(r=(0,t.getConnectionIntersection)(c,d,e.originalEvent)))return;!function(e,t){var i=(0,n.query)(".floating",e),o=t.point;i&&(0,s.translate)(i,o.x,o.y)}(i,r),r.bendpoint||function(e,n,t){var i,r,a=y(n.index,e),d=t[n.index-1],c=t[n.index],l=n.point,m=(0,o.getMidPoint)(d,c),v=(0,o.pointsAligned)(d,c);a&&(i=u(a),r={x:l.x-m.x,y:l.y-m.y},"v"===v&&(r={x:r.y,y:r.x}),(0,s.translate)(i,r.x,r.y))}(i,r,d)}}),d.on("element.mousedown",function(e){if((0,r.isPrimaryButton)(e)){var n=e.originalEvent,t=e.element;if(t.waypoints)return f(n,t)}}),d.on("selection.changed",function(e){var n=e.newSelection[0];n&&n.waypoints&&q(n)}),d.on("element.hover",function(e){var n=e.element;n.waypoints&&(q(n),l.registerEvent(e.gfx,"mousemove","element.mousemove"))}),d.on("element.out",function(e){l.unregisterEvent(e.gfx,"mousemove","element.mousemove")}),d.on("element.updateId",function(e){var n=e.element,t=e.newId;if(n.waypoints){var i=p(n);i&&(0,a.attr)(i,{"data-element-id":t})}}),this.addHandles=q,this.updateHandles=w,this.getBendpointsContainer=p,this.getSegmentDragger=y}function u(e){return(0,n.query)(".djs-visual",e)}d.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];
},{"min-dash":"AmEv","min-dom":"fWg5","./BendpointUtil":"qzRG","../../util/EscapeUtil":"eIZy","../../util/Geometry":"aD2B","../../util/Mouse":"sz9Y","tiny-svg":"WdCh","../../util/SvgTransformUtil":"EK9i"}],"vJEp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i,exports.isReverse=c;var e=require("../../layout/LayoutUtil"),n=Math.round,t="reconnectStart",o="reconnectEnd",r="updateWaypoints";function i(i,a,s,p,u,d){this._injector=i,this.start=function(e,n,i,c){var a,d=s.getGraphics(n),l=n.source,v=n.target,y=n.waypoints,g=(a=c||0!==i?c||i!==y.length-1?r:o:t)===r?"connection.updateWaypoints":"connection.reconnect",w=u.allowed(g,{connection:n,source:l,target:v});!1===w&&(w=u.allowed(g,{connection:n,source:v,target:l})),!1!==w&&p.init(e,"bendpoint.move",{data:{connection:n,connectionGfx:d,context:{allowed:w,bendpointIndex:i,connection:n,source:l,target:v,insert:c,type:a}}})},a.on("bendpoint.move.hover",function(e){var n,i=e.context,c=i.connection,a=c.source,s=c.target,p=e.hover,d=i.type;if(i.hover=p,p){var l=d===r?"connection.updateWaypoints":"connection.reconnect";if(n=i.allowed=u.allowed(l,{connection:c,source:d===t?p:a,target:d===o?p:s}))return i.source=d===t?p:a,void(i.target=d===o?p:s);!1===n&&(n=i.allowed=u.allowed(l,{connection:c,source:d===o?p:s,target:d===t?p:a})),n&&(i.source=d===o?p:s,i.target=d===t?p:a)}}),a.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(e){var n=e.context,t=n.type;n.hover=null,n.source=null,n.target=null,t!==r&&(n.allowed=!1)}),a.on("bendpoint.move.end",function(i){var a=i.context,s=a.allowed,p=a.bendpointIndex,u=a.connection,l=a.insert,v=u.waypoints.slice(),y=a.source,g=a.target,w=a.type,f=a.hints||{},h={x:n(i.x),y:n(i.y)};if(!s)return!1;w===r?(l?v.splice(p,0,h):v[p]=h,f.bendpointMove={insert:l,bendpointIndex:p},v=this.cropWaypoints(u,v),d.updateWaypoints(u,(0,e.filterRedundantWaypoints)(v),f)):(w===t?(f.docking="source",c(a)&&(f.docking="target",f.newWaypoints=v.reverse())):w===o&&(f.docking="target",c(a)&&(f.docking="source",f.newWaypoints=v.reverse())),d.reconnect(u,y,g,h,f))},this)}function c(e){var n=e.hover,r=e.source,i=e.target,c=e.type;return c===t?n&&i&&n===i&&r!==i:c===o?n&&r&&n===r&&r!==i:void 0}i.$inject=["injector","eventBus","canvas","dragging","rules","modeling"],i.prototype.cropWaypoints=function(e,n){var t=this._injector.get("connectionDocking",!1);if(!t)return n;var o=e.waypoints;return e.waypoints=n,e.waypoints=t.getCroppedWaypoints(e),n=e.waypoints,e.waypoints=o,n};
},{"../../layout/LayoutUtil":"aRzT"}],"sN2v":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=g;var e=require("tiny-svg"),n=require("./BendpointUtil"),o=require("../../util/SvgTransformUtil"),t=require("./BendpointMove"),r="reconnectStart",c="reconnectEnd",a="updateWaypoints",i="connect-ok",d="connect-not-ok",s="connect-hover",v="djs-updating",p="djs-element-hidden",u=1100;function g(g,y,l,m){this._injector=y;var x=y.get("connectionPreview",!1);l.on("bendpoint.move.start",function(o){var t=o.context,r=t.bendpointIndex,c=t.connection,a=t.insert,i=c.waypoints,d=i.slice();t.waypoints=i,a&&d.splice(r,0,{x:o.x,y:o.y}),c.waypoints=d;var s=t.draggerGfx=(0,n.addBendpoint)(m.getLayer("overlays"));(0,e.classes)(s).add("djs-dragging"),m.addMarker(c,p),m.addMarker(c,v)}),l.on("bendpoint.move.hover",function(e){var n=e.context,o=n.allowed,t=n.hover,r=n.type;if(t){if(m.addMarker(t,s),r===a)return;o?(m.removeMarker(t,d),m.addMarker(t,i)):!1===o&&(m.removeMarker(t,i),m.addMarker(t,d))}}),l.on(["bendpoint.move.out","bendpoint.move.cleanup"],u,function(e){var n=e.context,o=n.hover,t=n.target;o&&(m.removeMarker(o,s),m.removeMarker(o,t?i:d))}),l.on("bendpoint.move.move",function(e){var n=e.context,i=n.allowed,d=n.bendpointIndex,s=n.draggerGfx,v=n.hover,p=n.type,u=n.connection,y=u.source,l=u.target,m=u.waypoints.slice(),M={x:e.x,y:e.y},k=n.hints||{},f={};x&&(k.connectionStart&&(f.connectionStart=k.connectionStart),k.connectionEnd&&(f.connectionEnd=k.connectionEnd),p===r?(0,t.isReverse)(n)?(f.connectionEnd=f.connectionEnd||M,f.source=l,f.target=v||y,m=m.reverse()):(f.connectionStart=f.connectionStart||M,f.source=v||y,f.target=l):p===c?(0,t.isReverse)(n)?(f.connectionStart=f.connectionStart||M,f.source=v||l,f.target=y,m=m.reverse()):(f.connectionEnd=f.connectionEnd||M,f.source=y,f.target=v||l):(f.noCropping=!0,f.noLayout=!0,m[d]=M),p===a&&(m=g.cropWaypoints(u,m)),f.waypoints=m,x.drawPreview(n,i,f)),(0,o.translate)(s,e.x,e.y)},this),l.on(["bendpoint.move.end","bendpoint.move.cancel"],u,function(n){var o=n.context,t=o.connection,r=o.draggerGfx,c=o.hover,a=o.target,s=o.waypoints;t.waypoints=s,(0,e.remove)(r),m.removeMarker(t,v),m.removeMarker(t,p),c&&(m.removeMarker(c,i),m.removeMarker(c,a?i:d)),x&&x.cleanUp(o)})}g.$inject=["bendpointMove","injector","eventBus","canvas"];
},{"tiny-svg":"WdCh","./BendpointUtil":"qzRG","../../util/SvgTransformUtil":"EK9i","./BendpointMove":"vJEp"}],"CNBa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=m;var n=require("../../util/Geometry"),e=require("./BendpointUtil"),t=require("../../layout/LayoutUtil"),o=require("tiny-svg"),i=require("../../util/SvgTransformUtil"),r="connect-hover",a="djs-updating";function c(n,e,t){return s(n,e,n[e]+t)}function s(n,e,t){return{x:"x"===e?t:n.x,y:"y"===e?t:n.y}}function g(n,e,t,o){var i=Math.max(e[o],t[o]),r=Math.min(e[o],t[o]);return s(e,o,Math.min(Math.max(r+20,n[o]),i-20))}function u(n){return"x"===n?"y":"x"}function d(n,e,o){var i,r;return n.original?n.original:(i=(0,t.getMid)(e),s(n,r=u(o),i[r]))}function m(s,m,x,v,f,p){var y=s.get("connectionDocking",!1);function l(n,e){if(!y)return e;var t,o=n.waypoints;return n.waypoints=e,t=y.getCroppedWaypoints(n),n.waypoints=o,t}function S(n){f.update("connection",n.connection,n.connectionGfx)}this.start=function(t,o,i){var r,a,c,s,g=x.getGraphics(o),u=i-1,m=i,f=o.waypoints,p=f[u],y=f[m],l=(0,e.getConnectionIntersection)(x,f,t);(a=(0,n.pointsAligned)(p,y))&&(c="v"===a?"x":"y",0===u&&(p=d(p,o.source,c)),m===f.length-1&&(y=d(y,o.target,c)),r={connection:o,segmentStartIndex:u,segmentEndIndex:m,segmentStart:p,segmentEnd:y,axis:c,dragPosition:s=l?l.point:{x:(p.x+y.x)/2,y:(p.y+y.y)/2}},v.init(t,s,"connectionSegment.move",{cursor:"x"===c?"resize-ew":"resize-ns",data:{connection:o,connectionGfx:g,context:r}}))},m.on("connectionSegment.move.start",function(n){var t=n.context,i=n.connection,r=x.getLayer("overlays");t.originalWaypoints=i.waypoints.slice(),t.draggerGfx=(0,e.addSegmentDragger)(r,t.segmentStart,t.segmentEnd),(0,o.classes)(t.draggerGfx).add("djs-dragging"),x.addMarker(i,a)}),m.on("connectionSegment.move.move",function(n){var e,o,r=n.context,a=r.connection,s=r.segmentStartIndex,d=r.segmentEndIndex,m=r.segmentStart,x=r.segmentEnd,v=r.axis,f=r.originalWaypoints.slice(),p=c(m,v,n["d"+v]),y=c(x,v,n["d"+v]),h=f.length,w=0;f[s]=p,f[d]=y,s<2&&(e=(0,t.getOrientation)(a.source,p),1===s?"intersect"===e&&(f.shift(),f[0]=p,w--):"intersect"!==e&&(f.unshift(m),w++)),d>h-3&&(o=(0,t.getOrientation)(a.target,y),d===h-2?"intersect"===o&&(f.pop(),f[f.length-1]=y):"intersect"!==o&&f.push(x)),r.newWaypoints=a.waypoints=l(a,f),function(n,e,t){var o=n.newWaypoints,r=g(t,o[n.segmentStartIndex+e],o[n.segmentEndIndex+e],u(n.axis));(0,i.translate)(n.draggerGfx,r.x,r.y)}(r,w,n),r.newSegmentStartIndex=s+w,S(n)}),m.on("connectionSegment.move.hover",function(n){n.context.hover=n.hover,x.addMarker(n.hover,r)}),m.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(n){var e=n.context.hover;e&&x.removeMarker(e,r)}),m.on("connectionSegment.move.cleanup",function(n){var e=n.context,t=e.connection;e.draggerGfx&&(0,o.remove)(e.draggerGfx),x.removeMarker(t,a)}),m.on(["connectionSegment.move.cancel","connectionSegment.move.end"],function(n){var e=n.context;e.connection.waypoints=e.originalWaypoints,S(n)}),m.on("connectionSegment.move.end",function(e){var t=e.context,o=t.connection,i=t.newWaypoints,r=t.newSegmentStartIndex,a=function(e,t){var o=0;return{waypoints:e.filter(function(i,r){return!(0,n.pointsOnLine)(e[r-1],e[r+1],i)||(o=r<=t?o-1:o,!1)}),segmentOffset:o}}(i=i.map(function(n){return{original:n.original,x:Math.round(n.x),y:Math.round(n.y)}}),r),c=l(o,a.waypoints),s=a.segmentOffset,g={segmentMove:{segmentStartIndex:t.segmentStartIndex,newSegmentStartIndex:r+s}};p.updateWaypoints(o,c,g)})}m.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","modeling"];
},{"../../util/Geometry":"aD2B","./BendpointUtil":"qzRG","../../layout/LayoutUtil":"aRzT","tiny-svg":"WdCh","../../util/SvgTransformUtil":"EK9i"}],"SLMo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bottomLeft=i,exports.bottomRight=s,exports.getChildren=f,exports.isSnapped=u,exports.mid=p,exports.setSnapped=x,exports.snapTo=r,exports.topLeft=n,exports.topRight=o;var t=Math.abs,e=Math.round;function r(e,r,n){var o,i;for(n=void 0===n?10:n,o=0;o<r.length;o++)if(i=r[o],t(i-e)<=n)return i}function n(t){return{x:t.x,y:t.y}}function o(t){return{x:t.x+t.width,y:t.y}}function i(t){return{x:t.x,y:t.y+t.height}}function s(t){return{x:t.x+t.width,y:t.y+t.height}}function p(t,r){return!t||isNaN(t.x)||isNaN(t.y)?r:{x:e(t.x+t.width/2),y:e(t.y+t.height/2)}}function u(t,e){var r=t.snapped;return!!r&&("string"==typeof e?r[e]:r.x&&r.y)}function x(t,e,r){if("string"!=typeof e)throw new Error("axis must be in [x, y]");if("number"!=typeof r&&!1!==r)throw new Error("value must be Number or false");var n,o=t[e],i=t.snapped=t.snapped||{};return!1===r?i[e]=!1:(i[e]=!0,n=r-o,t[e]+=n,t["d"+e]+=n),o}function f(t){return t.children||[]}
},{}],"o3gR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var n=require("min-dash"),t=require("../snapping/SnapUtil"),e=require("./BendpointUtil"),o=Math.abs,i=Math.round,r=10;function a(a){function c(t,e){if((0,n.isArray)(t)){for(var i=t.length;i--;)if(o(t[i]-e)<=r)return t[i]}else{var a=e%(t=+t);if(a<r)return e-a;if(a>t-r)return e-a+t}return e}function d(n,t){return n.waypoints?(0,e.getClosestPointOnConnection)(t,n):n.width?{x:i(n.width/2+n.x),y:i(n.height/2+n.y)}:void 0}a.on("connectionSegment.move.move",1500,function(e){var o,i,r=function(t){var e=t.context,o=e.snapPoints,i=e.connection,r=i.waypoints,a=e.segmentStart,s=e.segmentStartIndex,c=e.segmentEnd,u=e.segmentEndIndex,p=e.axis;if(o)return o;var v=[r[s-1],a,c,r[u+1]];return s<2&&v.unshift(d(i.source,t)),u>r.length-3&&v.unshift(d(i.target,t)),e.snapPoints=o={horizontal:[],vertical:[]},(0,n.forEach)(v,function(n){n&&(n=n.original||n,"y"===p&&o.horizontal.push(n.y),"x"===p&&o.vertical.push(n.x))}),o}(e),a=e.x,s=e.y;if(r){var u=a-(o=c(r.vertical,a)),p=s-(i=c(r.horizontal,s));(0,n.assign)(e,{dx:e.dx-u,dy:e.dy-p,x:o,y:i}),(u||-1!==r.vertical.indexOf(a))&&(0,t.setSnapped)(e,"x",o),(p||-1!==r.horizontal.indexOf(s))&&(0,t.setSnapped)(e,"y",i)}}),a.on(["connect.hover","connect.move","connect.end"],1500,function(n){var e=n.context.hover,o=e&&d(e,n);s(e)&&o&&o.x&&o.y&&((0,t.setSnapped)(n,"x",o.x),(0,t.setSnapped)(n,"y",o.y))}),a.on(["bendpoint.move.move","bendpoint.move.end"],1500,function(e){var o,i,r=e.context,a=function(t){var e=t.snapPoints,o=t.connection.waypoints,i=t.bendpointIndex;if(e)return e;var r=[o[i-1],o[i+1]];return t.snapPoints=e={horizontal:[],vertical:[]},(0,n.forEach)(r,function(n){n&&(n=n.original||n,e.horizontal.push(n.y),e.vertical.push(n.x))}),e}(r),s=r.hover,u=s&&d(s,e),p=e.x,v=e.y;if(a){var x=p-(o=c(u?a.vertical.concat([u.x]):a.vertical,p)),f=v-(i=c(u?a.horizontal.concat([u.y]):a.horizontal,v));(0,n.assign)(e,{dx:e.dx-x,dy:e.dy-f,x:e.x-x,y:e.y-f}),(x||-1!==a.vertical.indexOf(p))&&(0,t.setSnapped)(e,"x",o),(f||-1!==a.horizontal.indexOf(v))&&(0,t.setSnapped)(e,"y",i)}})}function s(n){return n&&!!n.waypoints}a.$inject=["eventBus"];
},{"min-dash":"AmEv","../snapping/SnapUtil":"SLMo","./BendpointUtil":"qzRG"}],"MMuP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=p(require("../dragging")),n=p(require("../rules")),t=p(require("./Bendpoints")),i=p(require("./BendpointMove")),o=p(require("./BendpointMovePreview")),r=p(require("./ConnectionSegmentMove")),d=p(require("./BendpointSnapping"));function p(e){return e&&e.__esModule?e:{default:e}}var u=exports.default={__depends__:[e.default,n.default],__init__:["bendpoints","bendpointSnapping","bendpointMovePreview"],bendpoints:["type",t.default],bendpointMove:["type",i.default],bendpointMovePreview:["type",o.default],connectionSegmentMove:["type",r.default],bendpointSnapping:["type",d.default]};
},{"../dragging":"gdZp","../rules":"GwI0","./Bendpoints":"WhtQ","./BendpointMove":"vJEp","./BendpointMovePreview":"sN2v","./ConnectionSegmentMove":"CNBa","./BendpointSnapping":"o3gR"}],"g4vJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n,exports.isReverse=c;var t=require("../../layout/LayoutUtil"),e=require("min-dash");function n(n,o,r,i){function u(t,e){return i.allowed("connection.create",{source:t,target:e})}n.on("connect.hover",function(t){var n,c=t.context,o=c.start,r=t.hover;if(c.hover=r,n=c.canExecute=u(o,r),!(0,e.isNil)(n)){if(!1!==n)return c.source=o,void(c.target=r);n=c.canExecute=u(r,o),(0,e.isNil)(n)||!1!==n&&(c.source=r,c.target=o)}}),n.on(["connect.out","connect.cleanup"],function(t){var e=t.context;e.hover=null,e.source=null,e.target=null,e.canExecute=!1}),n.on("connect.end",function(t){var n=t.context,o=n.canExecute,i=n.connectionStart,u={x:t.x,y:t.y},a=n.source,s=n.target;if(!o)return!1;var l=null,v={connectionStart:c(n)?u:i,connectionEnd:c(n)?i:u};(0,e.isObject)(o)&&(l=o),n.connection=r.connect(a,s,l,v)}),this.start=function(n,c,r,i){(0,e.isObject)(r)||(i=r,r=(0,t.getMid)(c)),o.init(n,"connect",{autoActivate:i,data:{shape:c,context:{start:c,connectionStart:r}}})}}function c(t){var e=t.hover,n=t.source,c=t.target;return e&&n&&e===n&&n!==c}n.$inject=["eventBus","dragging","modeling","rules"];
},{"../../layout/LayoutUtil":"aRzT","min-dash":"AmEv"}],"DLVi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("./Connect"),n=1100,t=900,o="connect-ok",c="connect-not-ok";function r(r,a,i){var u=r.get("connectionPreview",!1);u&&a.on("connect.move",function(n){var t=n.context,o=t.canExecute,c=t.hover,r=t.source,a=t.start,i=t.startPosition,v=t.target,s=t.connectionStart||i,x=t.connectionEnd||{x:n.x,y:n.y},d=s,l=x;(0,e.isReverse)(t)&&(d=x,l=s),u.drawPreview(t,o,{source:r||a,target:v||c,connectionStart:d,connectionEnd:l})}),a.on("connect.hover",t,function(e){var n=e.context,t=e.hover,r=n.canExecute;null!==r&&i.addMarker(t,r?o:c)}),a.on(["connect.out","connect.cleanup"],n,function(e){var n=e.hover;n&&(i.removeMarker(n,o),i.removeMarker(n,c))}),u&&a.on("connect.cleanup",function(e){u.cleanUp(e.context)})}r.$inject=["injector","eventBus","canvas"];
},{"./Connect":"g4vJ"}],"qvKB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("../selection")),t=i(require("../rules")),r=i(require("../dragging")),u=i(require("./Connect")),n=i(require("./ConnectPreview"));function i(e){return e&&e.__esModule?e:{default:e}}var d=exports.default={__depends__:[e.default,t.default,r.default],__init__:["connectPreview"],connect:["type",u.default],connectPreview:["type",n.default]};
},{"../selection":"NUwH","../rules":"GwI0","../dragging":"gdZp","./Connect":"g4vJ","./ConnectPreview":"DLVi"}],"q53z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var t=require("tiny-svg"),n=require("min-dash"),e=require("../../layout/LayoutUtil"),o=require("../../util/RenderUtil"),i="djs-connection-preview";function r(t,n,e,o){this._canvas=n,this._graphicsFactory=e,this._elementFactory=o,this._connectionDocking=t.get("connectionDocking",!1),this._layouter=t.get("layouter",!1)}function c(t){var n={};return function(e){var o=JSON.stringify(e),i=n[o];return i||(i=n[o]=t.apply(null,arguments)),i}}function a(t){return(0,n.isObject)(t)?t:{}}r.$inject=["injector","canvas","graphicsFactory","elementFactory"],r.prototype.drawPreview=function(n,o,i){i=i||{};var r,a=n.connectionPreviewGfx,s=n.getConnection,p=i.source,y=i.target,u=i.waypoints,g=i.connectionStart,h=i.connectionEnd,v=i.noLayout,w=i.noCropping,l=i.noNoop,d=this;a||(a=n.connectionPreviewGfx=this.createConnectionPreviewGfx()),(0,t.clear)(a),s||(s=n.getConnection=c(function(t,n,e){return d.getConnection(t,n,e)})),o&&(r=s(o,p,y)),r?(r.waypoints=u||[],this._layouter&&!v&&(r.waypoints=this._layouter.layoutConnection(r,{source:p,target:y,connectionStart:g,connectionEnd:h,waypoints:i.waypoints||r.waypoints})),r.waypoints&&r.waypoints.length||(r.waypoints=[p?(0,e.getMid)(p):g,y?(0,e.getMid)(y):h]),this._connectionDocking&&(p||y)&&!w&&(r.waypoints=this._connectionDocking.getCroppedWaypoints(r,p,y)),this._graphicsFactory.drawConnection(a,r)):!l&&this.drawNoopPreview(a,i)},r.prototype.drawNoopPreview=function(n,o){var i=o.source,r=o.target,c=o.connectionStart||(0,e.getMid)(i),a=o.connectionEnd||(0,e.getMid)(r),s=this.cropWaypoints(c,a,i,r),p=this.createNoopConnection(s[0],s[1]);(0,t.append)(n,p)},r.prototype.cropWaypoints=function(t,n,o,i){var r=this._graphicsFactory,c=o&&r.getShapePath(o),a=i&&r.getShapePath(i),s=r.getConnectionPath({waypoints:[t,n]});return[t=o&&(0,e.getElementLineIntersection)(c,s,!0)||t,n=i&&(0,e.getElementLineIntersection)(a,s,!1)||n]},r.prototype.cleanUp=function(n){n&&n.connectionPreviewGfx&&(0,t.remove)(n.connectionPreviewGfx)},r.prototype.getConnection=function(t){var n=a(t);return this._elementFactory.createConnection(n)},r.prototype.createConnectionPreviewGfx=function(){var n=(0,t.create)("g");return(0,t.attr)(n,{pointerEvents:"none"}),(0,t.classes)(n).add(i),(0,t.append)(this._canvas.getActiveLayer(),n),n},r.prototype.createNoopConnection=function(t,n){return(0,o.createLine)([t,n],{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"})};
},{"tiny-svg":"WdCh","min-dash":"AmEv","../../layout/LayoutUtil":"aRzT","../../util/RenderUtil":"D85W"}],"KC0J":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./ConnectionPreview"));function t(e){return e&&e.__esModule?e:{default:e}}var r=exports.default={__init__:["connectionPreview"],connectionPreview:["type",e.default]};
},{"./ConnectionPreview":"q53z"}],"HYpb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=d;var t=require("min-dash"),e=require("min-dom"),n=Math.min,i=Math.max;function o(t){t.preventDefault()}function s(t){t.stopPropagation()}function r(t){return t.nodeType===Node.TEXT_NODE}function a(t){return[].slice.call(t)}function d(n){this.container=n.container,this.parent=(0,e.domify)('<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>'),this.content=(0,e.query)("[contenteditable]",this.parent),this.keyHandler=n.keyHandler||function(){},this.resizeHandler=n.resizeHandler||function(){},this.autoResize=(0,t.bind)(this.autoResize,this),this.handlePaste=(0,t.bind)(this.handlePaste,this)}function h(t){return t.replace(/\r\n|\r|\n/g,"\n")}d.prototype.create=function(n,i,o,r){var a=this.parent,d=this.content,h=this.container;r=this.options=r||{},i=this.style=i||{};var l=(0,t.pick)(i,["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);(0,t.assign)(a.style,{width:n.width+"px",height:n.height+"px",maxWidth:n.maxWidth+"px",maxHeight:n.maxHeight+"px",minWidth:n.minWidth+"px",minHeight:n.minHeight+"px",left:n.x+"px",top:n.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",boxSizing:"border-box",wordWrap:"normal",textAlign:"center",outline:"none"},l);var c=(0,t.pick)(i,["fontFamily","fontSize","fontWeight","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return(0,t.assign)(d.style,{boxSizing:"border-box",width:"100%",outline:"none",wordWrap:"break-word"},c),r.centerVertically&&(0,t.assign)(d.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},c),d.innerText=o,e.event.bind(d,"keydown",this.keyHandler),e.event.bind(d,"mousedown",s),e.event.bind(d,"paste",this.handlePaste),r.autoResize&&e.event.bind(d,"input",this.autoResize),r.resizable&&this.resizable(i),h.appendChild(a),this.setSelection(d.lastChild,d.lastChild&&d.lastChild.length),a},d.prototype.handlePaste=function(t){var e,n=this.options,i=this.style;if(t.preventDefault(),e=t.clipboardData?t.clipboardData.getData("text/plain"):window.clipboardData.getData("Text"),this.insertText(e),n.autoResize){var o=this.autoResize(i);o&&this.resizeHandler(o)}},d.prototype.insertText=function(t){t=h(t),document.execCommand("insertText",!1,t)||this._insertTextIE(t)},d.prototype._insertTextIE=function(t){var n,i,o=this.getSelection(),s=o.startContainer,d=o.endContainer,h=o.startOffset,l=o.endOffset,c=o.commonAncestorContainer,p=a(c.childNodes);if(r(c)){var u=s.textContent;s.textContent=u.substring(0,h)+t+u.substring(l),n=s,i=h+t.length}else if(s===this.content&&d===this.content){var g=document.createTextNode(t);this.content.insertBefore(g,p[h]),n=g,i=g.textContent.length}else{var f=p.indexOf(s),m=p.indexOf(d);p.forEach(function(n,i){i===f?n.textContent=s.textContent.substring(0,h)+t+d.textContent.substring(l):i>f&&i<=m&&(0,e.remove)(n)}),n=s,i=h+t.length}n&&void 0!==i&&setTimeout(function(){self.setSelection(n,i)})},d.prototype.autoResize=function(){var t=this.parent,e=this.content,n=parseInt(this.style.fontSize)||12;if(e.scrollHeight>t.offsetHeight||e.scrollHeight<t.offsetHeight-n){var i=t.getBoundingClientRect(),o=e.scrollHeight;t.style.height=o+"px",this.resizeHandler({width:i.width,height:i.height,dx:0,dy:o-i.height})}},d.prototype.resizable=function(){var r=this,a=this.parent,d=this.resizeHandle,h=parseInt(this.style.minWidth)||0,l=parseInt(this.style.minHeight)||0,c=parseInt(this.style.maxWidth)||1/0,p=parseInt(this.style.maxHeight)||1/0;if(!d){var u,g,f,m;d=this.resizeHandle=(0,e.domify)('<div class="djs-direct-editing-resize-handle"></div>');var x=function(t){o(t),s(t);var e=n(i(f+t.clientX-u,h),c),d=n(i(m+t.clientY-g,l),p);a.style.width=e+"px",a.style.height=d+"px",r.resizeHandler({width:f,height:m,dx:t.clientX-u,dy:t.clientY-g})},v=function(t){o(t),s(t),e.event.unbind(document,"mousemove",x,!1),e.event.unbind(document,"mouseup",v,!1)};e.event.bind(d,"mousedown",function(t){o(t),s(t),u=t.clientX,g=t.clientY;var n=a.getBoundingClientRect();f=n.width,m=n.height,e.event.bind(document,"mousemove",x),e.event.bind(document,"mouseup",v)})}(0,t.assign)(d.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),a.appendChild(d)},d.prototype.destroy=function(){var t=this.parent,n=this.content,i=this.resizeHandle;n.innerText="",t.removeAttribute("style"),n.removeAttribute("style"),e.event.unbind(n,"keydown",this.keyHandler),e.event.unbind(n,"mousedown",s),e.event.unbind(n,"input",this.autoResize),e.event.unbind(n,"paste",this.handlePaste),i&&(i.removeAttribute("style"),(0,e.remove)(i)),(0,e.remove)(t)},d.prototype.getValue=function(){return this.content.innerText.trim()},d.prototype.getSelection=function(){return window.getSelection().getRangeAt(0)},d.prototype.setSelection=function(t,e){var n=document.createRange();null===t?n.selectNodeContents(this.content):(n.setStart(t,e),n.setEnd(t,e));var i=window.getSelection();i.removeAllRanges(),i.addRange(n)};
},{"min-dash":"AmEv","min-dom":"fWg5"}],"y8jQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var t=require("min-dash"),e=i(require("./TextBox.js"));function i(t){return t&&t.__esModule?t:{default:t}}function o(i,o){this._eventBus=i,this._providers=[],this._textbox=new e.default({container:o.getContainer(),keyHandler:(0,t.bind)(this._handleKey,this),resizeHandler:(0,t.bind)(this._handleResize,this)})}o.$inject=["eventBus","canvas"],o.prototype.registerProvider=function(t){this._providers.push(t)},o.prototype.isActive=function(t){return!(!this._active||t&&this._active.element!==t)},o.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())},o.prototype._fire=function(t,e){this._eventBus.fire("directEditing."+t,e||{active:this._active})},o.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0},o.prototype.complete=function(){var t=this._active;if(t){var e,i=t.context.bounds,o=this.$textbox.getBoundingClientRect(),n=this.getValue();n===t.context.text&&o.height===i.height&&o.width===i.width||(e=this._textbox.container.getBoundingClientRect(),t.provider.update(t.element,n,t.context.text,{x:o.left-e.left,y:o.top-e.top,width:o.width,height:o.height})),this._fire("complete"),this.close()}},o.prototype.getValue=function(){return this._textbox.getValue()},o.prototype._handleKey=function(t){t.stopPropagation();var e=t.keyCode||t.charCode;return 27===e?(t.preventDefault(),this.cancel()):13!==e||t.shiftKey?void 0:(t.preventDefault(),this.complete())},o.prototype._handleResize=function(t){this._fire("resize",t)},o.prototype.activate=function(e){var i;this.isActive()&&this.cancel();var o=(0,t.find)(this._providers,function(t){return(i=t.activate(e))?t:null});return i&&(this.$textbox=this._textbox.create(i.bounds,i.style,i.text,i.options),this._active={element:e,context:i,provider:o},i.options&&i.options.resizable&&(this.resizable=!0),this._fire("activate")),!!i};
},{"min-dash":"AmEv","./TextBox.js":"HYpb"}],"ZHLi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("diagram-js/lib/features/interaction-events")),t=i(require("./DirectEditing.js"));function i(e){return e&&e.__esModule?e:{default:e}}var r=exports.default={__depends__:[e.default],__init__:["directEditing"],directEditing:["type",t.default]};
},{"diagram-js/lib/features/interaction-events":"JX1S","./DirectEditing.js":"y8jQ"}],"MKwm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var e=require("min-dash"),r=require("tiny-svg"),t=require("min-dom"),n=require("../../util/GraphicsUtil"),a=["marker-start","marker-mid","marker-end"],i=["circle","ellipse","line","path","polygon","polyline","path","rect"];function s(t,n,a,i){this._elementRegistry=t,this._canvas=a,this._styles=i,this._clonedMarkers={};var s=this;n.on("drag.cleanup",function(){(0,e.forEach)(s._clonedMarkers,function(e){(0,r.remove)(e)}),s._clonedMarkers={}})}function o(e,n,a){var i=c((0,r.attr)(e,n));return(0,t.query)("marker#"+i,a||document)}function c(e){return e.match(/url\(['"]?#([^'"]*)['"]?\)/)[1]}function d(e){return"url(#"+e+")"}function l(e){return-1!==i.indexOf(e.nodeName)}s.$inject=["elementRegistry","eventBus","canvas","styles"],s.prototype.getGfx=function(e){return this._elementRegistry.getGraphics(e)},s.prototype.addDragger=function(e,t,a){a=a||this.getGfx(e);var i=(0,r.clone)(a),s=a.getBoundingClientRect();return this._cloneMarkers((0,n.getVisual)(i)),(0,r.attr)(i,this._styles.cls("djs-dragger",[],{x:s.top,y:s.left})),(0,r.append)(t,i),i},s.prototype.addFrame=function(e,t){var n=(0,r.create)("rect",{class:"djs-resize-overlay",width:e.width,height:e.height,x:e.x,y:e.y});return(0,r.append)(t,n),n},s.prototype._cloneMarkers=function(e){var t=this;if(e.childNodes)for(var n=0;n<e.childNodes.length;n++)t._cloneMarkers(e.childNodes[n]);l(e)&&a.forEach(function(n){if((0,r.attr)(e,n)){var a=o(e,n,t._canvas.getContainer());t._cloneMarker(e,a,n)}})},s.prototype._cloneMarker=function(e,n,a){var i=n.id,s=this._clonedMarkers[i];if(!s){var o=i+"-clone";(s=(0,r.clone)(n)).id=o,(0,r.classes)(s).add("djs-dragger").add("djs-dragger-marker"),this._clonedMarkers[i]=s;var c=(0,t.query)("defs",this._canvas._svg);c||(c=(0,r.create)("defs"),(0,r.append)(this._canvas._svg,c)),(0,r.append)(c,s)}var l=d(this._clonedMarkers[i].id);(0,r.attr)(e,a,l)};
},{"min-dash":"AmEv","tiny-svg":"WdCh","min-dom":"fWg5","../../util/GraphicsUtil":"CFFf"}],"ENK2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./PreviewSupport"));function r(e){return e&&e.__esModule?e:{default:e}}var t=exports.default={__init__:["previewSupport"],previewSupport:["type",e.default]};
},{"./PreviewSupport":"MKwm"}],"eGDQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=require("min-dash"),t=require("../../util/Elements"),n="drop-ok",a="drop-not-ok",r="attach-ok",o="new-parent",c="create",i=2e3;function u(u,g,x,d,p){function m(e,t){[r,n,a,o].forEach(function(n){n===t?u.addMarker(e,n):u.removeMarker(e,n)})}function v(){var e=g.context();e&&e.prefix===c&&g.cancel()}x.on(["create.move","create.hover"],function(t){var n=t.context,c=n.elements,i=t.hover,u=n.source,g=n.hints||{};if(!i)return n.canExecute=!1,void(n.target=null);s(t);var x={x:t.x,y:t.y},d=n.canExecute=i&&function(t,n,a,r,o){if(!n)return!1;t=(0,e.filter)(t,function(e){var n=e.labelTarget;return!(e.parent||f(e)&&-1!==t.indexOf(n))});var c=(0,e.find)(t,function(e){return!l(e)}),i=!1,u=!1,s=!1;h(t)&&(i=p.allowed("shape.attach",{position:a,shape:c,target:n})),i||(s=h(t)?p.allowed("shape.create",{position:a,shape:c,source:r,target:n}):p.allowed("elements.create",{elements:t,position:a,target:n}));var g=o.connectionTarget;return s||i?(c&&r&&(u=p.allowed("connection.create",{source:g===r?c:r,target:g===r?r:c,hints:{targetParent:n,targetAttach:i}})),{attach:i,connect:u}):(null===s||null===i)&&null}(c,i,x,u,g);i&&null!==d&&(n.target=i,d&&d.attach?m(i,r):m(i,d?o:a))}),x.on(["create.end","create.out","create.cleanup"],function(e){var t=e.hover;t&&m(t,null)}),x.on("create.end",function(t){var n=t.context,a=n.source,r=n.shape,o=n.elements,c=n.target,i=n.canExecute,u=i&&i.attach,h=i&&i.connect,f=n.hints||{};if(!1===i||!c)return!1;s(t);var g={x:t.x,y:t.y};h?r=d.appendShape(a,r,g,c,{attach:u,connection:!0===h?{}:h,connectionTarget:f.connectionTarget}):(o=d.createElements(o,g,c,(0,e.assign)({},f,{attach:u})),r=(0,e.find)(o,function(e){return!l(e)})),(0,e.assign)(n,{elements:o,shape:r}),(0,e.assign)(t,{elements:o,shape:r})}),x.on("create.init",function(){x.on("elements.changed",v),x.once(["create.cancel","create.end"],i,function(){x.off("elements.changed",v)})}),this.start=function(n,a,r){(0,e.isArray)(a)||(a=[a]);var o=(0,e.find)(a,function(e){return!l(e)});if(o){r=(0,e.assign)({elements:a,hints:{},shape:o},r||{}),(0,e.forEach)(a,function(t){(0,e.isNumber)(t.x)||(t.x=0),(0,e.isNumber)(t.y)||(t.y=0)});var i=(0,e.filter)(a,function(e){return!e.hidden}),u=(0,t.getBBox)(i);(0,e.forEach)(a,function(t){l(t)&&(t.waypoints=(0,e.map)(t.waypoints,function(e){return{x:e.x-u.x-u.width/2,y:e.y-u.y-u.height/2}})),(0,e.assign)(t,{x:t.x-u.x-u.width/2,y:t.y-u.y-u.height/2})}),g.init(n,c,{cursor:"grabbing",autoActivate:!0,data:{shape:o,elements:a,context:r}})}}}function s(e){var t=e.context.createConstraints;t&&(t.left&&(e.x=Math.max(e.x,t.left)),t.right&&(e.x=Math.min(e.x,t.right)),t.top&&(e.y=Math.max(e.y,t.top)),t.bottom&&(e.y=Math.min(e.y,t.bottom)))}function l(e){return!!e.waypoints}function h(e){return e&&1===e.length&&!l(e[0])}function f(e){return!!e.labelTarget}u.$inject=["canvas","dragging","eventBus","modeling","rules"];
},{"min-dash":"AmEv","../../util/Elements":"KTcn"}],"nGKD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=require("../../util/SvgTransformUtil"),r=require("../../util/GraphicsUtil"),t=require("tiny-svg"),a=750;function n(n,o,i,c,u){o.on("create.move",a,function(a){var o,s=a.hover,p=a.context,v=p.elements,d=p.dragGroup;d||(d=p.dragGroup=function(a){var n=(0,t.create)("g");(0,t.attr)(n,u.cls("djs-drag-group",["no-events"]));var o=(0,t.create)("g");return a.forEach(function(t){var a;t.hidden||(t.waypoints?(a=i._createContainer("connection",o),i.drawConnection((0,r.getVisual)(a),t)):(a=i._createContainer("shape",o),i.drawShape((0,r.getVisual)(a),t),(0,e.translate)(a,t.x,t.y)),c.addDragger(t,n,a))}),n}(v)),s?(d.parentNode||(o=n.getActiveLayer(),(0,t.append)(o,d)),(0,e.translate)(d,a.x,a.y)):(0,t.remove)(d)}),o.on("create.cleanup",function(e){var r=e.context.dragGroup;r&&(0,t.remove)(r)})}n.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];
},{"../../util/SvgTransformUtil":"EK9i","../../util/GraphicsUtil":"CFFf","tiny-svg":"WdCh"}],"qe87":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=d(require("../dragging")),r=d(require("../preview-support")),t=d(require("../rules")),u=d(require("../selection")),a=d(require("./Create")),i=d(require("./CreatePreview"));function d(e){return e&&e.__esModule?e:{default:e}}var l=exports.default={__depends__:[e.default,r.default,t.default,u.default],__init__:["create","createPreview"],create:["type",a.default],createPreview:["type",i.default]};
},{"../dragging":"gdZp","../preview-support":"ENK2","../rules":"GwI0","../selection":"NUwH","./Create":"eGDQ","./CreatePreview":"nGKD"}],"xJiw":[function(require,module,exports) {
"use strict";function t(){}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t,t.prototype.get=function(){return this._data},t.prototype.set=function(t){this._data=t},t.prototype.clear=function(){var t=this._data;return delete this._data,t},t.prototype.isEmpty=function(){return!this._data};
},{}],"XqZp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./Clipboard"));function r(e){return e&&e.__esModule?e:{default:e}}var t=exports.default={clipboard:["type",e.default]};
},{"./Clipboard":"xJiw"}],"A64y":[function(require,module,exports) {
"use strict";function e(e){var t=this;function n(e){t._lastMoveEvent=e}this._lastMoveEvent=null,e.on("canvas.init",function(e){(t._svg=e.svg).addEventListener("mousemove",n)}),e.on("canvas.destroy",function(){t._lastMouseEvent=null,t._svg.removeEventListener("mousemove",n)})}function t(e,t){var n=document.createEvent("MouseEvent"),o=e,s=t,v=e,u=t;return n.initMouseEvent&&n.initMouseEvent("mousemove",!0,!0,window,0,o,s,v,u,!1,!1,!1,!1,0,null),n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMoveEvent=t,exports.default=e,e.$inject=["eventBus"],e.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||t(0,0)};
},{}],"vh82":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./Mouse"));function t(e){return e&&e.__esModule?e:{default:e}}var u=exports.default={__init__:["mouse"],mouse:["type",e.default]};
},{"./Mouse":"A64y"}],"T9VV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=require("min-dash"),t=require("../../util/Elements");function n(t,n,s,c,u,p,l,h){this._canvas=t,this._create=n,this._clipboard=s,this._elementFactory=c,this._eventBus=u,this._modeling=p,this._mouse=l,this._rules=h,u.on("copyPaste.copyElement",function(t){var n=t.descriptor,s=t.element,c=t.elements;n.priority=1,n.id=s.id,(0,e.find)(c,function(e){return e===s.parent})&&(n.parent=s.parent.id),r(s)&&(n.priority=2,n.host=s.host.id),i(s)&&(n.priority=3,n.source=s.source.id,n.target=s.target.id,n.waypoints=a(s)),o(s)&&(n.priority=4,n.labelTarget=s.labelTarget.id),(0,e.forEach)(["x","y","width","height"],function(t){(0,e.isNumber)(s[t])&&(n[t]=s[t])}),n.hidden=s.hidden,n.collapsed=s.collapsed}),u.on("copyPaste.pasteElements",function(t){var n=t.hints;(0,e.assign)(n,{createElementsBehavior:!1})})}function r(e){return!!e.host}function i(e){return!!e.waypoints}function o(e){return!!e.labelTarget}function a(t){return(0,e.map)(t.waypoints,function(e){return(e=s(e)).original&&(e.original=s(e.original)),e})}function s(t){return(0,e.assign)({},t)}function c(e,t){var n=t.indexOf(e);return-1===n?t:t.splice(n,1)}n.$inject=["canvas","create","clipboard","elementFactory","eventBus","modeling","mouse","rules"],n.prototype.copy=function(t){var n,r;return(0,e.isArray)(t)||(t=t?[t]:[]),r=!1===(n=this._eventBus.fire("copyPaste.canCopyElements",{elements:t}))?{}:this.createTree((0,e.isArray)(n)?n:t),this._clipboard.set(r),this._eventBus.fire("copyPaste.elementsCopied",{elements:t,tree:r}),r},n.prototype.paste=function(e){var t=this._clipboard.get();if(!this._clipboard.isEmpty()){var n=e&&e.hints||{};this._eventBus.fire("copyPaste.pasteElements",{hints:n});var r=this._createElements(t);if(e&&e.element&&e.point)return this._paste(r,e.element,e.point,n);this._create.start(this._mouse.getLastMoveEvent(),r,{hints:n||{}})}},n.prototype._paste=function(n,r,o,a){(0,e.forEach)(n,function(t){(0,e.isNumber)(t.x)||(t.x=0),(0,e.isNumber)(t.y)||(t.y=0)});var s=(0,t.getBBox)(n);return(0,e.forEach)(n,function(t){i(t)&&(t.waypoints=(0,e.map)(t.waypoints,function(e){return{x:e.x-s.x-s.width/2,y:e.y-s.y-s.height/2}})),(0,e.assign)(t,{x:t.x-s.x-s.width/2,y:t.y-s.y-s.height/2})}),this._modeling.createElements(n,o,r,(0,e.assign)({},a))},n.prototype._createElements=function(t){var n=this,r=this._eventBus,a={},s=[];return(0,e.forEach)(t,function(t,c){c=parseInt(c,10),t=(0,e.sortBy)(t,"priority"),(0,e.forEach)(t,function(t){var c,u=(0,e.assign)({},(0,e.omit)(t,["priority"]));return a[t.parent]?u.parent=a[t.parent]:delete u.parent,r.fire("copyPaste.pasteElement",{cache:a,descriptor:u}),i(u)?(u.source=a[t.source],u.target=a[t.target],c=a[t.id]=n.createConnection(u),void s.push(c)):o(u)?(u.labelTarget=a[u.labelTarget],c=a[t.id]=n.createLabel(u),void s.push(c)):(u.host&&(u.host=a[u.host]),c=a[t.id]=n.createShape(u),void s.push(c))})}),s},n.prototype.createConnection=function(t){return this._elementFactory.createConnection((0,e.omit)(t,["id"]))},n.prototype.createLabel=function(t){return this._elementFactory.createLabel((0,e.omit)(t,["id"]))},n.prototype.createShape=function(t){return this._elementFactory.createShape((0,e.omit)(t,["id"]))},n.prototype.hasRelations=function(t,n){var r,a;return!(i(t)&&(r=(0,e.find)(n,(0,e.matchPattern)({id:t.source.id})),a=(0,e.find)(n,(0,e.matchPattern)({id:t.target.id})),!r||!a))&&!(o(t)&&!(0,e.find)(n,(0,e.matchPattern)({id:t.labelTarget.id})))},n.prototype.createTree=function(n){var r=this._rules,i=this,a={},s=[],u=(0,t.getParents)(n);function p(t,n){var r=(0,e.find)(s,function(e){return t===e.element});r?r.depth<n&&(s=function(e,t){var n=t.indexOf(e);-1!==n&&t.splice(n,1);return t}(r,s)).push({element:r.element,depth:n}):s.push({element:t,depth:n})}return(0,t.eachElement)(u,function(t,n,r){if(!o(t)){(0,e.forEach)(t.labels,function(e){p(e,r)}),(0,e.forEach)([t.attachers,t.incoming,t.outgoing],function(t){t&&t.length&&(0,e.forEach)(t,function(t){(0,e.forEach)(t.labels,function(e){p(e,r)}),p(t,r)})}),p(t,r);var a=[];return t.children&&(a=t.children.slice()),i._eventBus.fire("copyPaste.createTree",{element:t,children:a}),a}}),n=(0,e.map)(s,function(e){return e.element}),s=(0,e.map)(s,function(e){return e.descriptor={},i._eventBus.fire("copyPaste.copyElement",{descriptor:e.descriptor,element:e.element,elements:n}),e}),s=(0,e.sortBy)(s,function(e){return e.descriptor.priority}),n=(0,e.map)(s,function(e){return e.element}),(0,e.forEach)(s,function(e){var t=e.depth;i.hasRelations(e.element,n)?!function(e,t){return r.allowed("element.copy",{element:e,elements:t})}(e.element,n)?c(e.element,n):(a[t]||(a[t]=[]),a[t].push(e.descriptor)):c(e.element,n)}),a};
},{"min-dash":"AmEv","../../util/Elements":"KTcn"}],"cBNx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=d(require("../clipboard")),r=d(require("../create")),t=d(require("../mouse")),u=d(require("../rules")),a=d(require("./CopyPaste"));function d(e){return e&&e.__esModule?e:{default:e}}var l=exports.default={__depends__:[e.default,r.default,t.default,u.default],__init__:["copyPaste"],copyPaste:["type",a.default]};
},{"../clipboard":"XqZp","../create":"qe87","../mouse":"vh82","../rules":"GwI0","./CopyPaste":"T9VV"}],"jjIX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("../../util/ModelUtil"),t=require("min-dash");function n(e,n,s){(0,t.isArray)(s)||(s=[s]),(0,t.forEach)(s,function(s){(0,t.isUndefined)(e[s])||(n[s]=e[s])})}var s=750;function r(r,c,o){function a(e,t){var n=r.create(e.$type);return o.copyElement(e,n,null,t)}c.on("copyPaste.copyElement",s,function(t){var s=t.descriptor,r=t.element,c=(0,e.getBusinessObject)(r);if(i(r))return s;var o=s.businessObject=a(c,!0),u=s.di=a((0,e.getDi)(r),!0);u.bpmnElement=o,n(o,s,"name"),n(u,s,"isExpanded"),c.default&&(s.default=c.default.id)});var u="-bpmn-js-refs";c.on("copyPaste.pasteElement",function(t){var s=t.cache,r=t.descriptor,c=r.businessObject,o=r.di;if(i(r))return r.businessObject=(0,e.getBusinessObject)(s[r.labelTarget]),void(r.di=(0,e.getDi)(s[r.labelTarget]));c=r.businessObject=a(c),(o=r.di=a(o)).bpmnElement=c,n(r,c,["isExpanded","name"]),r.type=c.$type}),c.on("copyPaste.copyElement",s,function(t){var n=t.descriptor,s=t.element;if((0,e.is)(s,"bpmn:Participant")){var r=(0,e.getBusinessObject)(s);r.processRef&&(n.processRef=a(r.processRef,!0))}}),c.on("copyPaste.pasteElement",function(e){var t=e.descriptor,n=t.processRef;n&&(t.processRef=a(n))}),c.on("copyPaste.pasteElement",s,function(n){var s=n.cache;!function(e,t){e[u]=t}(s,function(n,s,r){var i=(0,e.getBusinessObject)(n);return n.default&&(r[n.default]={element:i,property:"default"}),n.host&&((0,e.getBusinessObject)(n).attachedToRef=(0,e.getBusinessObject)(s[n.host])),(0,t.omit)(r,(0,t.reduce)(r,function(e,t,s){var r=t.element,c=t.property;return s===n.id&&(r[c]=i,e.push(n.id)),e},[]))}(n.descriptor,s,function(e){return e[u]=e[u]||{}}(s)))})}function i(e){return!!e.labelTarget}r.$inject=["bpmnFactory","eventBus","moddleCopy"];
},{"../../util/ModelUtil":"HvoA","min-dash":"AmEv"}],"Hp9K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r,exports.getPropertyNames=n;var e=require("min-dash"),t=["artifacts","dataInputAssociations","dataOutputAssociations","default","flowElements","lanes","incoming","outgoing","categoryValue"];function r(r,n,i){this._bpmnFactory=n,this._eventBus=r,this._moddle=i,r.on("moddleCopy.canCopyProperties",function(t){var r=t.propertyNames;if(r&&r.length)return(0,e.sortBy)(r,function(e){return"extensionElements"===e})}),r.on("moddleCopy.canCopyProperty",function(r){var n=r.parent,o=(0,e.isObject)(n)&&n.$descriptor,i=r.propertyName;return(!i||-1===t.indexOf(i))&&(!(i&&o&&!(0,e.find)(o.properties,(0,e.matchPattern)({name:i})))&&void 0)}),r.on("moddleCopy.canSetCopiedProperty",function(e){var t=e.property;if(o(t,"bpmn:ExtensionElements")&&(!t.values||!t.values.length))return!1})}function n(t,r){return(0,e.reduce)(t.properties,function(e,t){return r&&t.default?e:e.concat(t.name)},[])}function o(e,t){return e&&"function"==typeof e.$instanceOf&&e.$instanceOf(t)}r.$inject=["eventBus","bpmnFactory","moddle"],r.prototype.copyElement=function(t,r,o,i){var p=this;o&&!(0,e.isArray)(o)&&(o=[o]),o=o||n(t.$descriptor);var s=this._eventBus.fire("moddleCopy.canCopyProperties",{propertyNames:o,sourceElement:t,targetElement:r,clone:i});return!1===s?r:((0,e.isArray)(s)&&(o=s),(0,e.forEach)(o,function(n){var o;(0,e.has)(t,n)&&(o=t.get(n));var s=p.copyProperty(o,r,n,i);(0,e.isDefined)(s)&&(!1!==p._eventBus.fire("moddleCopy.canSetCopiedProperty",{parent:r,property:s,propertyName:n})&&r.set(n,s))}),r)},r.prototype.copyProperty=function(t,r,n,o){var i=this,p=this._eventBus.fire("moddleCopy.canCopyProperty",{parent:r,property:t,propertyName:n,clone:o});if(!1!==p){if(p)return(0,e.isObject)(p)&&p.$type&&!p.$parent&&(p.$parent=r),p;var s=this._moddle.getPropertyDescriptor(r,n);if(!s.isReference){if(s.isId)return t&&this._copyId(t,r,o);if((0,e.isArray)(t))return(0,e.reduce)(t,function(e,t){return(p=i.copyProperty(t,r,n,o))?e.concat(p):e},[]);if((0,e.isObject)(t)&&t.$type){if(this._moddle.getElementDescriptor(t).isGeneric)return;return(p=i._bpmnFactory.create(t.$type)).$parent=r,p=i.copyElement(t,p,null,o)}return t}}},r.prototype._copyId=function(e,t,r){return r?e:this._moddle.ids.assigned(e)?void 0:(this._moddle.ids.claim(e,t),e)};
},{"min-dash":"AmEv"}],"iTbg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("diagram-js/lib/features/copy-paste")),t=o(require("./BpmnCopyPaste")),d=o(require("./ModdleCopy"));function o(e){return e&&e.__esModule?e:{default:e}}var p=exports.default={__depends__:[e.default],__init__:["bpmnCopyPaste","moddleCopy"],bpmnCopyPaste:["type",t.default],moddleCopy:["type",d.default]};
},{"diagram-js/lib/features/copy-paste":"cBNx","./BpmnCopyPaste":"jjIX","./ModdleCopy":"Hp9K"}],"HSx3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=require("min-dash"),t=Math.round;function i(e,t){this._modeling=e,this._eventBus=t}i.$inject=["modeling","eventBus"],i.prototype.replaceElement=function(i,n,r){if(i.waypoints)return null;var s=this._modeling,h=this._eventBus;h.fire("replace.start",{element:i,attrs:n,hints:r});var a=n.width||i.width,l=n.height||i.height,u=n.x||i.x,o=n.y||i.y,d=t(u+a/2),p=t(o+l/2),c=s.replaceShape(i,(0,e.assign)({},n,{x:d,y:p,width:a,height:l}),r);return h.fire("replace.end",{element:i,newElement:c,hints:r}),c};
},{"min-dash":"AmEv"}],"mnd4":[function(require,module,exports) {
"use strict";function e(e,t){t.on("replace.end",500,function(t){const{newElement:n,hints:s={}}=t;!1!==s.select&&e.select(n)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e,e.$inject=["selection","eventBus"];
},{}],"xXpr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./Replace")),r=t(require("./ReplaceSelectionBehavior"));function t(e){return e&&e.__esModule?e:{default:e}}var a=exports.default={__init__:["replace","replaceSelectionBehavior"],replaceSelectionBehavior:["type",r.default],replace:["type",e.default]};
},{"./Replace":"HSx3","./ReplaceSelectionBehavior":"mnd4"}],"u6yE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=require("min-dash"),t=require("../../util/ModelUtil"),i=require("../modeling/util/ModelingUtil"),n=require("../../util/DiUtil"),s=require("../copy-paste/ModdleCopy");function r(t,i,n){(0,e.isArray)(n)||(n=[n]),(0,e.forEach)(n,function(n){(0,e.isUndefined)(t[n])||(i[n]=t[n])})}var a=["cancelActivity","instantiate","eventGatewayType","triggeredByEvent","isInterrupting"];function d(t,i){var s=t&&(0,e.has)(t,"collapsed")?t.collapsed:!(0,n.isExpanded)(t);return s!==(i&&((0,e.has)(i,"collapsed")||(0,e.has)(i,"isExpanded"))?(0,e.has)(i,"collapsed")?i.collapsed:!i.isExpanded:s)}function o(o,u,h,f,y,v,m){this.replaceElement=function(g,b,E){E=E||{};var x=b.type,w=g.businessObject;if(p(w)&&"bpmn:SubProcess"===x&&d(g,b))return f.toggleCollapse(g),g;var D=o.create(x),A={type:x,businessObject:D,di:{}};r(g.di,A.di,["fill","stroke","background-color","border-color","color"]);var P=l((0,s.getPropertyNames)(w.$descriptor),(0,s.getPropertyNames)(D.$descriptor,!0));(0,e.assign)(D,(0,e.pick)(b,a));var S=(0,e.filter)(P,function(t){return"eventDefinitions"===t?c(g,b.eventDefinitionType):"loopCharacteristics"===t?!(0,n.isEventSubProcess)(D):!(0,e.has)(D,t)&&("processRef"!==t||!1!==b.isExpanded)&&"triggeredByEvent"!==t});if(D=h.copyElement(w,D,S),b.eventDefinitionType&&(c(D,b.eventDefinitionType)||(A.eventDefinitionType=b.eventDefinitionType,A.eventDefinitionAttrs=b.eventDefinitionAttrs)),(0,t.is)(w,"bpmn:Activity")){if(p(w))A.isExpanded=(0,n.isExpanded)(g);else if(b&&(0,e.has)(b,"isExpanded")){A.isExpanded=b.isExpanded;var T=u.getDefaultSize(D,{isExpanded:A.isExpanded});A.width=T.width,A.height=T.height,A.x=g.x-(A.width-g.width)/2,A.y=g.y-(A.height-g.height)/2}(0,n.isExpanded)(g)&&!(0,t.is)(w,"bpmn:Task")&&A.isExpanded&&(A.width=g.width,A.height=g.height)}return p(w)&&!p(D)&&(E.moveChildren=!1),(0,t.is)(w,"bpmn:Participant")&&(!0===b.isExpanded?D.processRef=o.create("bpmn:Process"):E.moveChildren=!1,A.width=g.width,A.height=u.getDefaultSize(A).height),v.allowed("shape.resize",{shape:D})||(A.height=u.getDefaultSize(A).height,A.width=u.getDefaultSize(A).width),D.name=w.name,(0,i.isAny)(w,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&(0,i.isAny)(D,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&(D.default=w.default),b.host&&!(0,t.is)(w,"bpmn:BoundaryEvent")&&(0,t.is)(D,"bpmn:BoundaryEvent")&&(A.host=b.host),"bpmn:DataStoreReference"!==A.type&&"bpmn:DataObjectReference"!==A.type||(A.x=g.x+(g.width-A.width)/2),A=y.replaceElement(g,A,E),!1!==E.select&&m.select(A),A}}function p(e){return(0,t.is)(e,"bpmn:SubProcess")}function c(e,i){var n=(0,t.getBusinessObject)(e);return i&&n.get("eventDefinitions").some(function(e){return(0,t.is)(e,i)})}function l(e,t){return e.filter(function(e){return-1!==t.indexOf(e)})}o.$inject=["bpmnFactory","elementFactory","moddleCopy","modeling","replace","rules","selection"];
},{"min-dash":"AmEv","../../util/ModelUtil":"HvoA","../modeling/util/ModelingUtil":"YK7B","../../util/DiUtil":"lWoN","../copy-paste/ModdleCopy":"Hp9K"}],"dy6N":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("../copy-paste")),r=u(require("diagram-js/lib/features/replace")),t=u(require("diagram-js/lib/features/selection")),a=u(require("./BpmnReplace"));function u(e){return e&&e.__esModule?e:{default:e}}var l=exports.default={__depends__:[e.default,r.default,t.default],bpmnReplace:["type",a.default]};
},{"../copy-paste":"iTbg","diagram-js/lib/features/replace":"xXpr","diagram-js/lib/features/selection":"NUwH","./BpmnReplace":"u6yE"}],"cE3U":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isDifferentType=i;var e=require("../../../util/ModelUtil"),t=require("../../../util/DiUtil");function i(i){return function(n){var r=n.target,s=(0,e.getBusinessObject)(i),d=s.eventDefinitions&&s.eventDefinitions[0],u=s.$type===r.type,o=(d&&d.$type)===r.eventDefinitionType,p=!!r.triggeredByEvent==!!s.triggeredByEvent,v=void 0===r.isExpanded||r.isExpanded===(0,t.isExpanded)(i);return!(u&&o&&p&&v)}}
},{"../../../util/ModelUtil":"HvoA","../../../util/DiUtil":"lWoN"}],"phXK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TRANSACTION=exports.TASK=exports.SUBPROCESS_EXPANDED=exports.START_EVENT_SUB_PROCESS=exports.START_EVENT=exports.SEQUENCE_FLOW=exports.PARTICIPANT=exports.INTERMEDIATE_EVENT=exports.GATEWAY=exports.EVENT_SUB_PROCESS_START_EVENT=exports.EVENT_SUB_PROCESS=exports.END_EVENT=exports.DATA_STORE_REFERENCE=exports.DATA_OBJECT_REFERENCE=exports.BOUNDARY_EVENT=void 0;var e=exports.START_EVENT=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message Start Event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Start Event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional Start Event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal Start Event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],t=exports.START_EVENT_SUB_PROCESS=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}}],n=exports.INTERMEDIATE_EVENT=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message Intermediate Catch Event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message Intermediate Throw Event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Intermediate Catch Event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation Intermediate Throw Event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional Intermediate Catch Event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link Intermediate Catch Event",actionName:"replace-with-link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Link Intermediate Throw Event",actionName:"replace-with-link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Compensation Intermediate Throw Event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal Intermediate Catch Event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal Intermediate Throw Event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],a=exports.END_EVENT=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message End Event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation End Event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error End Event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel End Event",actionName:"replace-with-cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation End Event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal End Event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate End Event",actionName:"replace-with-terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}],i=exports.GATEWAY=[{label:"Exclusive Gateway",actionName:"replace-with-exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel Gateway",actionName:"replace-with-parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive Gateway",actionName:"replace-with-inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"}},{label:"Complex Gateway",actionName:"replace-with-complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"}},{label:"Event based Gateway",actionName:"replace-with-event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}],r=exports.SUBPROCESS_EXPANDED=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event Sub Process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Sub Process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}}],o=exports.TRANSACTION=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Sub Process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Event Sub Process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}}],p=exports.EVENT_SUB_PROCESS=o,c=exports.TASK=[{label:"Task",actionName:"replace-with-task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"User Task",actionName:"replace-with-user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Service Task",actionName:"replace-with-service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Send Task",actionName:"replace-with-send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"}},{label:"Receive Task",actionName:"replace-with-receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"}},{label:"Manual Task",actionName:"replace-with-manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"}},{label:"Business Rule Task",actionName:"replace-with-rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Script Task",actionName:"replace-with-script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}},{label:"Call Activity",actionName:"replace-with-call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}},{label:"Sub Process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}},{label:"Sub Process (expanded)",actionName:"replace-with-expanded-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}}],m=exports.DATA_OBJECT_REFERENCE=[{label:"Data Store Reference",actionName:"replace-with-data-store-reference",className:"bpmn-icon-data-store",target:{type:"bpmn:DataStoreReference"}}],s=exports.DATA_STORE_REFERENCE=[{label:"Data Object Reference",actionName:"replace-with-data-object-reference",className:"bpmn-icon-data-object",target:{type:"bpmn:DataObjectReference"}}],l=exports.BOUNDARY_EVENT=[{label:"Message Boundary Event",actionName:"replace-with-message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Boundary Event",actionName:"replace-with-timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation Boundary Event",actionName:"replace-with-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional Boundary Event",actionName:"replace-with-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Error Boundary Event",actionName:"replace-with-error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel Boundary Event",actionName:"replace-with-cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Signal Boundary Event",actionName:"replace-with-signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Compensation Boundary Event",actionName:"replace-with-compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Message Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}}],b=exports.EVENT_SUB_PROCESS_START_EVENT=[{label:"Message Start Event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Start Event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional Start Event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal Start Event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Error Start Event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Escalation Start Event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Compensation Start Event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Message Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-message-start",className:"bpmn-icon-start-event-non-interrupting-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!1}},{label:"Timer Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-start",className:"bpmn-icon-start-event-non-interrupting-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!1}},{label:"Conditional Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-start",className:"bpmn-icon-start-event-non-interrupting-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!1}},{label:"Signal Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-start",className:"bpmn-icon-start-event-non-interrupting-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!1}},{label:"Escalation Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-start",className:"bpmn-icon-start-event-non-interrupting-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!1}}],v=exports.SEQUENCE_FLOW=[{label:"Sequence Flow",actionName:"replace-with-sequence-flow",className:"bpmn-icon-connection"},{label:"Default Flow",actionName:"replace-with-default-flow",className:"bpmn-icon-default-flow"},{label:"Conditional Flow",actionName:"replace-with-conditional-flow",className:"bpmn-icon-conditional-flow"}],E=exports.PARTICIPANT=[{label:"Expanded Pool",actionName:"replace-with-expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}},{label:function(e){var t="Empty Pool";return e.children&&e.children.length&&(t+=" (removes content)"),t},actionName:"replace-with-collapsed-pool",className:"bpmn-icon-lane",target:{type:"bpmn:Participant",isExpanded:!1}}];
},{}],"FUf3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=require("../../util/ModelUtil"),t=require("../../util/DiUtil"),i=require("./util/TypeUtil"),n=require("min-dash"),r=a(require("../replace/ReplaceOptions"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(s=function(e){return e?i:t})(e)}function a(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=s(t);if(i&&i.has(e))return i.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,i&&i.set(e,n),n}function o(e,t,i,n,r,s,a){this._bpmnFactory=e,this._popupMenu=t,this._modeling=i,this._moddle=n,this._bpmnReplace=r,this._rules=s,this._translate=a,this.register()}o.$inject=["bpmnFactory","popupMenu","modeling","moddle","bpmnReplace","rules","translate"],o.prototype.register=function(){this._popupMenu.registerProvider("bpmn-replace",this)},o.prototype.getEntries=function(s){var a,o=s.businessObject;if(!this._rules.allowed("shape.replace",{element:s}))return[];var c=(0,i.isDifferentType)(s);return(0,e.is)(o,"bpmn:DataObjectReference")?this._createEntries(s,r.DATA_OBJECT_REFERENCE):(0,e.is)(o,"bpmn:DataStoreReference")&&!(0,e.is)(s.parent,"bpmn:Collaboration")?this._createEntries(s,r.DATA_STORE_REFERENCE):(0,e.is)(o,"bpmn:StartEvent")&&!(0,e.is)(o.$parent,"bpmn:SubProcess")?(a=(0,n.filter)(r.START_EVENT,c),this._createEntries(s,a)):(0,e.is)(o,"bpmn:Participant")?(a=(0,n.filter)(r.PARTICIPANT,function(e){return(0,t.isExpanded)(s)!==e.target.isExpanded}),this._createEntries(s,a)):(0,e.is)(o,"bpmn:StartEvent")&&(0,t.isEventSubProcess)(o.$parent)?(a=(0,n.filter)(r.EVENT_SUB_PROCESS_START_EVENT,function(t){var i=!1!==t.target.isInterrupting,n=(0,e.getBusinessObject)(s).isInterrupting===i;return c(t)||!c(t)&&!n}),this._createEntries(s,a)):(0,e.is)(o,"bpmn:StartEvent")&&!(0,t.isEventSubProcess)(o.$parent)&&(0,e.is)(o.$parent,"bpmn:SubProcess")?(a=(0,n.filter)(r.START_EVENT_SUB_PROCESS,c),this._createEntries(s,a)):(0,e.is)(o,"bpmn:EndEvent")?(a=(0,n.filter)(r.END_EVENT,function(t){return!("bpmn:CancelEventDefinition"==t.target.eventDefinitionType&&!(0,e.is)(o.$parent,"bpmn:Transaction"))&&c(t)}),this._createEntries(s,a)):(0,e.is)(o,"bpmn:BoundaryEvent")?(a=(0,n.filter)(r.BOUNDARY_EVENT,function(t){var i=t.target;if("bpmn:CancelEventDefinition"==i.eventDefinitionType&&!(0,e.is)(o.attachedToRef,"bpmn:Transaction"))return!1;var n=!1!==i.cancelActivity,r=o.cancelActivity==n;return c(t)||!c(t)&&!r}),this._createEntries(s,a)):(0,e.is)(o,"bpmn:IntermediateCatchEvent")||(0,e.is)(o,"bpmn:IntermediateThrowEvent")?(a=(0,n.filter)(r.INTERMEDIATE_EVENT,c),this._createEntries(s,a)):(0,e.is)(o,"bpmn:Gateway")?(a=(0,n.filter)(r.GATEWAY,c),this._createEntries(s,a)):(0,e.is)(o,"bpmn:Transaction")?(a=(0,n.filter)(r.TRANSACTION,c),this._createEntries(s,a)):(0,t.isEventSubProcess)(o)&&(0,t.isExpanded)(s)?(a=(0,n.filter)(r.EVENT_SUB_PROCESS,c),this._createEntries(s,a)):(0,e.is)(o,"bpmn:SubProcess")&&(0,t.isExpanded)(s)?(a=(0,n.filter)(r.SUBPROCESS_EXPANDED,c),this._createEntries(s,a)):(0,e.is)(o,"bpmn:AdHocSubProcess")&&!(0,t.isExpanded)(s)?(a=(0,n.filter)(r.TASK,function(e){var t=e.target,n="bpmn:SubProcess"===t.type,r=!0===t.isExpanded;return(0,i.isDifferentType)(s,t)&&(!n||r)}),this._createEntries(s,a)):(0,e.is)(o,"bpmn:SequenceFlow")?this._createSequenceFlowEntries(s,r.SEQUENCE_FLOW):(0,e.is)(o,"bpmn:FlowNode")?(a=(0,n.filter)(r.TASK,c),(0,e.is)(o,"bpmn:SubProcess")&&!(0,t.isExpanded)(s)&&(a=(0,n.filter)(a,function(e){return"Sub Process (collapsed)"!==e.label})),this._createEntries(s,a)):[]},o.prototype.getHeaderEntries=function(i){var n=[];return(0,e.is)(i,"bpmn:Activity")&&!(0,t.isEventSubProcess)(i)&&(n=n.concat(this._getLoopEntries(i))),(0,e.is)(i,"bpmn:DataObjectReference")&&(n=n.concat(this._getDataObjectIsCollection(i))),(0,e.is)(i,"bpmn:Participant")&&(n=n.concat(this._getParticipantMultiplicity(i))),!(0,e.is)(i,"bpmn:SubProcess")||(0,e.is)(i,"bpmn:Transaction")||(0,t.isEventSubProcess)(i)||n.push(this._getAdHocEntry(i)),n},o.prototype._createEntries=function(e,t){var i=[],r=this;return(0,n.forEach)(t,function(t){var n=r._createMenuEntry(t,e);i.push(n)}),i},o.prototype._createSequenceFlowEntries=function(t,i){var r=(0,e.getBusinessObject)(t),s=[],a=this._modeling,o=this._moddle,c=this;return(0,n.forEach)(i,function(i){switch(i.actionName){case"replace-with-default-flow":r.sourceRef.default!==r&&((0,e.is)(r.sourceRef,"bpmn:ExclusiveGateway")||(0,e.is)(r.sourceRef,"bpmn:InclusiveGateway")||(0,e.is)(r.sourceRef,"bpmn:ComplexGateway")||(0,e.is)(r.sourceRef,"bpmn:Activity"))&&s.push(c._createMenuEntry(i,t,function(){a.updateProperties(t.source,{default:r})}));break;case"replace-with-conditional-flow":!r.conditionExpression&&(0,e.is)(r.sourceRef,"bpmn:Activity")&&s.push(c._createMenuEntry(i,t,function(){var e=o.create("bpmn:FormalExpression",{body:""});a.updateProperties(t,{conditionExpression:e})}));break;default:if((0,e.is)(r.sourceRef,"bpmn:Activity")&&r.conditionExpression)return s.push(c._createMenuEntry(i,t,function(){a.updateProperties(t,{conditionExpression:void 0})}));if(((0,e.is)(r.sourceRef,"bpmn:ExclusiveGateway")||(0,e.is)(r.sourceRef,"bpmn:InclusiveGateway")||(0,e.is)(r.sourceRef,"bpmn:ComplexGateway")||(0,e.is)(r.sourceRef,"bpmn:Activity"))&&r.sourceRef.default===r)return s.push(c._createMenuEntry(i,t,function(){a.updateProperties(t.source,{default:void 0})}))}}),s},o.prototype._createMenuEntry=function(e,t,i){var n=this._translate,r=this._bpmnReplace.replaceElement,s=e.label;return s&&"function"==typeof s&&(s=s(t)),i=i||function(){return r(t,e.target)},{label:n(s),className:e.className,id:e.actionName,action:i}},o.prototype._getLoopEntries=function(t){var i=this,r=this._translate;function s(r,s){var a=(0,e.getBusinessObject)(t).loopCharacteristics;s.active?a=void 0:(!(0,n.isUndefined)(s.options.isSequential)&&a&&(0,e.is)(a,s.options.loopCharacteristics)||(a=i._moddle.create(s.options.loopCharacteristics)),a.isSequential=s.options.isSequential),i._modeling.updateProperties(t,{loopCharacteristics:a})}var a,o,c,p=(0,e.getBusinessObject)(t).loopCharacteristics;return p&&(a=p.isSequential,o=void 0===p.isSequential,c=void 0!==p.isSequential&&!p.isSequential),[{id:"toggle-parallel-mi",className:"bpmn-icon-parallel-mi-marker",title:r("Parallel Multi Instance"),active:c,action:s,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!1}},{id:"toggle-sequential-mi",className:"bpmn-icon-sequential-mi-marker",title:r("Sequential Multi Instance"),active:a,action:s,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!0}},{id:"toggle-loop",className:"bpmn-icon-loop-marker",title:r("Loop"),active:o,action:s,options:{loopCharacteristics:"bpmn:StandardLoopCharacteristics"}}]},o.prototype._getDataObjectIsCollection=function(e){var t=this,i=this._translate,n=e.businessObject.dataObjectRef;if(!n)return[];var r=n.isCollection;return[{id:"toggle-is-collection",className:"bpmn-icon-parallel-mi-marker",title:i("Collection"),active:r,action:function(i,r){t._modeling.updateModdleProperties(e,n,{isCollection:!r.active})}}]},o.prototype._getParticipantMultiplicity=function(e){var t=this,i=this._bpmnFactory,n=this._translate;var r=e.businessObject.participantMultiplicity;return[{id:"toggle-participant-multiplicity",className:"bpmn-icon-parallel-mi-marker",title:n("Participant Multiplicity"),active:!!r,action:function(n,r){var s;r.active||(s=i.create("bpmn:ParticipantMultiplicity")),t._modeling.updateProperties(e,{participantMultiplicity:s})}}]},o.prototype._getAdHocEntry=function(t){var i=this._translate,n=(0,e.getBusinessObject)(t),r=(0,e.is)(n,"bpmn:AdHocSubProcess"),s=this._bpmnReplace.replaceElement;return{id:"toggle-adhoc",className:"bpmn-icon-ad-hoc-marker",title:i("Ad-hoc"),active:r,action:function(e,i){return s(t,r?{type:"bpmn:SubProcess"}:{type:"bpmn:AdHocSubProcess"},{autoResize:!1,layoutConnection:!1})}}};
},{"../../util/ModelUtil":"HvoA","../../util/DiUtil":"lWoN","./util/TypeUtil":"cE3U","min-dash":"AmEv","../replace/ReplaceOptions":"phXK"}],"UvVt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("diagram-js/lib/features/popup-menu")),r=a(require("../replace")),u=a(require("./ReplaceMenuProvider")),t=a(require("../auto-place"));function a(e){return e&&e.__esModule?e:{default:e}}var d=exports.default={__depends__:[e.default,r.default,t.default],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",u.default]};
},{"diagram-js/lib/features/popup-menu":"dOa0","../replace":"dy6N","./ReplaceMenuProvider":"FUf3","../auto-place":"HcBr"}],"yRPe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addPadding=x,exports.computeChildrenBBox=m,exports.ensureConstraints=a,exports.getMinResizeBounds=g,exports.reattachPoint=f,exports.resizeBounds=u,exports.resizeTRBL=s,exports.substractTRBL=n;var t=require("min-dash"),e=require("../../util/Elements"),i=require("../../layout/LayoutUtil"),o=Math.max,r=Math.min,h=20;function n(t,e){return{top:t.top-e.top,right:t.right-e.right,bottom:t.bottom-e.bottom,left:t.left-e.left}}function u(t,e,i){var o=i.x,r=i.y,h={x:t.x,y:t.y,width:t.width,height:t.height};return-1!==e.indexOf("n")?(h.y=t.y+r,h.height=t.height-r):-1!==e.indexOf("s")&&(h.height=t.height+r),-1!==e.indexOf("e")?h.width=t.width+o:-1!==e.indexOf("w")&&(h.x=t.x+o,h.width=t.width-o),h}function s(t,e){return{x:t.x+(e.left||0),y:t.y+(e.top||0),width:t.width-(e.left||0)+(e.right||0),height:t.height-(e.top||0)+(e.bottom||0)}}function f(t,e,i){var o=t.width/e.width,r=t.height/e.height;return{x:Math.round(e.x+e.width/2)-Math.floor((t.x+t.width/2-i.x)/o),y:Math.round(e.y+e.height/2)-Math.floor((t.y+t.height/2-i.y)/r)}}function d(e,i,h){var n=i[e],u=h.min&&h.min[e],s=h.max&&h.max[e];return(0,t.isNumber)(u)&&(n=(/top|left/.test(e)?r:o)(n,u)),(0,t.isNumber)(s)&&(n=(/top|left/.test(e)?o:r)(n,s)),n}function a(t,e){if(!e)return t;var o=(0,i.asTRBL)(t);return(0,i.asBounds)({top:d("top",o,e),right:d("right",o,e),bottom:d("bottom",o,e),left:d("left",o,e)})}function g(t,e,h,n){var u=(0,i.asTRBL)(e),s={top:/n/.test(t)?u.bottom-h.height:u.top,left:/w/.test(t)?u.right-h.width:u.left,bottom:/s/.test(t)?u.top+h.height:u.bottom,right:/e/.test(t)?u.left+h.width:u.right},f=n?(0,i.asTRBL)(n):s,d={top:r(s.top,f.top),left:r(s.left,f.left),bottom:o(s.bottom,f.bottom),right:o(s.right,f.right)};return(0,i.asBounds)(d)}function l(t,e){return void 0!==t?t:h}function x(t,e){var i,o,r,h;return"object"==typeof e?(i=l(e.left),o=l(e.right),r=l(e.top),h=l(e.bottom)):i=o=r=h=l(e),{x:t.x-i,y:t.y-r,width:t.width+i+o,height:t.height+r+h}}function p(t){return!t.waypoints&&"label"!==t.type}function m(i,o){var r;if((r=void 0===i.length?(0,t.filter)(i.children,p):i).length)return x((0,e.getBBox)(r),o)}
},{"min-dash":"AmEv","../../util/Elements":"KTcn","../../layout/LayoutUtil":"aRzT"}],"yOBs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LANE_INDENTATION=void 0,exports.collectLanes=u,exports.computeLanesResize=c,exports.getChildLanes=p,exports.getLanesRoot=b;var t=require("../../../util/ModelUtil"),e=require("./ModelingUtil"),o=require("diagram-js/lib/layout/LayoutUtil"),r=require("diagram-js/lib/features/resize/ResizeUtil"),i=Math.abs;function n(t,e){return(0,r.substractTRBL)((0,o.asTRBL)(e),(0,o.asTRBL)(t))}var s=["bpmn:Participant","bpmn:Process","bpmn:SubProcess"],a=exports.LANE_INDENTATION=30;function u(e,o){return o=o||[],e.children.filter(function(e){(0,t.is)(e,"bpmn:Lane")&&(u(e,o),o.push(e))}),o}function p(e){return e.children.filter(function(e){return(0,t.is)(e,"bpmn:Lane")})}function b(t){return(0,e.getParent)(t,s)||t}function c(e,s){var a=b(e),p=u(a,(0,t.is)(a,"bpmn:Process")?[]:[a]),c=(0,o.asTRBL)(e),l=(0,o.asTRBL)(s),m=n(e,s),f=[];return p.forEach(function(t){if(t!==e){var n=0,s=m.right,a=0,u=m.left,p=(0,o.asTRBL)(t);m.top&&(i(p.bottom-c.top)<10&&(a=l.top-p.bottom),i(p.top-c.top)<5&&(n=l.top-p.top)),m.bottom&&(i(p.top-c.bottom)<10&&(n=l.bottom-p.top),i(p.bottom-c.bottom)<5&&(a=l.bottom-p.bottom)),(n||s||a||u)&&f.push({shape:t,newBounds:(0,r.resizeTRBL)(t,{top:n,right:s,bottom:a,left:u})})}}),f}
},{"../../../util/ModelUtil":"HvoA","./ModelingUtil":"YK7B","diagram-js/lib/layout/LayoutUtil":"aRzT","diagram-js/lib/features/resize/ResizeUtil":"yRPe"}],"usqG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var e=require("min-dash"),n=require("../../util/ModelUtil"),t=require("../../util/DiUtil"),i=require("../modeling/util/ModelingUtil"),a=require("../modeling/util/LaneUtil"),o=require("diagram-js/lib/util/Mouse");function s(e,n,t,i,a,s,c,r,p,l,m,d){e=e||{},i.registerProvider(this),this._contextPad=i,this._modeling=a,this._elementFactory=s,this._connect=c,this._create=r,this._popupMenu=p,this._canvas=l,this._rules=m,this._translate=d,!1!==e.autoPlace&&(this._autoPlace=n.get("autoPlace",!1)),t.on("create.end",250,function(e){var n=e.context.shape;if((0,o.hasPrimaryModifier)(e)&&i.isOpen(n)){var t=i.getEntries(n);t.replace&&t.replace.action.click(e,n)}})}function c(n,t,i){var a=n.$instanceOf(t),o=!1,s=n.eventDefinitions||[];return(0,e.forEach)(s,function(e){e.$type===i&&(o=!0)}),a&&o}function r(e,n){return-1!==e.indexOf(n)}s.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate"],s.prototype.getMultiElementContextPadEntries=function(n){var t=this._modeling,i={};return this._isDeleteAllowed(n)&&(0,e.assign)(i,{delete:{group:"edit",className:"bpmn-icon-trash",title:this._translate("Remove"),action:{click:function(e,n){t.removeElements(n.slice())}}}}),i},s.prototype._isDeleteAllowed=function(n){var t=this._rules.allowed("elements.delete",{elements:n});return(0,e.isArray)(t)?(0,e.every)(t,function(e){return r(t,e)}):t},s.prototype.getContextPadEntries=function(o){var s=this._contextPad,r=this._modeling,p=this._elementFactory,l=this._connect,m=this._create,d=this._popupMenu,u=this._rules,v=this._autoPlace,b=this._translate,g={};if("label"===o.type)return g;var h=o.businessObject;function f(e,n){l.start(e,n)}function y(n,t,i,a){function o(t,i){var o=p.createShape((0,e.assign)({type:n},a));m.start(t,o,{source:i})}return"string"!=typeof i&&(a=i,i=b("Append {type}",{type:n.replace(/^bpmn:/,"")})),{group:"model",className:t,title:i,action:{dragstart:o,click:v?function(t,i){var o=p.createShape((0,e.assign)({type:n},a));v.append(i,o)}:o}}}function E(e){return function(n,t){r.splitLane(t,e),s.open(t,!0)}}if((0,i.isAny)(h,["bpmn:Lane","bpmn:Participant"])&&(0,t.isExpanded)(o)){var A=(0,a.getChildLanes)(o);(0,e.assign)(g,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:b("Add Lane above"),action:{click:function(e,n){r.addLane(n,"top")}}}}),A.length<2&&(o.height>=120&&(0,e.assign)(g,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:b("Divide into two Lanes"),action:{click:E(2)}}}),o.height>=180&&(0,e.assign)(g,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:b("Divide into three Lanes"),action:{click:E(3)}}})),(0,e.assign)(g,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:b("Add Lane below"),action:{click:function(e,n){r.addLane(n,"bottom")}}}})}(0,n.is)(h,"bpmn:FlowNode")&&((0,n.is)(h,"bpmn:EventBasedGateway")?(0,e.assign)(g,{"append.receive-task":y("bpmn:ReceiveTask","bpmn-icon-receive-task",b("Append ReceiveTask")),"append.message-intermediate-event":y("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-message",b("Append MessageIntermediateCatchEvent"),{eventDefinitionType:"bpmn:MessageEventDefinition"}),"append.timer-intermediate-event":y("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-timer",b("Append TimerIntermediateCatchEvent"),{eventDefinitionType:"bpmn:TimerEventDefinition"}),"append.condition-intermediate-event":y("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-condition",b("Append ConditionIntermediateCatchEvent"),{eventDefinitionType:"bpmn:ConditionalEventDefinition"}),"append.signal-intermediate-event":y("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-signal",b("Append SignalIntermediateCatchEvent"),{eventDefinitionType:"bpmn:SignalEventDefinition"})}):c(h,"bpmn:BoundaryEvent","bpmn:CompensateEventDefinition")?(0,e.assign)(g,{"append.compensation-activity":y("bpmn:Task","bpmn-icon-task",b("Append compensation activity"),{isForCompensation:!0})}):(0,n.is)(h,"bpmn:EndEvent")||h.isForCompensation||c(h,"bpmn:IntermediateThrowEvent","bpmn:LinkEventDefinition")||(0,t.isEventSubProcess)(h)||(0,e.assign)(g,{"append.end-event":y("bpmn:EndEvent","bpmn-icon-end-event-none",b("Append EndEvent")),"append.gateway":y("bpmn:ExclusiveGateway","bpmn-icon-gateway-none",b("Append Gateway")),"append.append-task":y("bpmn:Task","bpmn-icon-task",b("Append Task")),"append.intermediate-event":y("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none",b("Append Intermediate/Boundary Event"))})),d.isEmpty(o,"bpmn-replace")||(0,e.assign)(g,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:b("Change type"),action:{click:function(n,t){var i=(0,e.assign)(function(e){var n=s.getPad(e).html.getBoundingClientRect();return{x:n.left,y:n.bottom+5}}(t),{cursor:{x:n.x,y:n.y}});d.open(t,"bpmn-replace",i,{title:b("Change element"),width:300,search:!0})}}}}),(0,n.is)(h,"bpmn:SequenceFlow")&&(0,e.assign)(g,{"append.text-annotation":y("bpmn:TextAnnotation","bpmn-icon-text-annotation")}),(0,i.isAny)(h,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])&&(0,e.assign)(g,{"append.text-annotation":y("bpmn:TextAnnotation","bpmn-icon-text-annotation"),connect:{group:"connect",className:"bpmn-icon-connection-multi",title:b("Connect using "+(h.isForCompensation?"":"Sequence/MessageFlow or ")+"Association"),action:{click:f,dragstart:f}}}),(0,n.is)(h,"bpmn:TextAnnotation")&&(0,e.assign)(g,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:b("Connect using Association"),action:{click:f,dragstart:f}}}),(0,i.isAny)(h,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&(0,e.assign)(g,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:b("Connect using DataInputAssociation"),action:{click:f,dragstart:f}}}),(0,n.is)(h,"bpmn:Group")&&(0,e.assign)(g,{"append.text-annotation":y("bpmn:TextAnnotation","bpmn-icon-text-annotation")});var _=u.allowed("elements.delete",{elements:[o]});return(0,e.isArray)(_)&&(_=_[0]===o),_&&(0,e.assign)(g,{delete:{group:"edit",className:"bpmn-icon-trash",title:b("Remove"),action:{click:function(e,n){r.removeElements([n])}}}}),g};
},{"min-dash":"AmEv","../../util/ModelUtil":"HvoA","../../util/DiUtil":"lWoN","../modeling/util/ModelingUtil":"YK7B","../modeling/util/LaneUtil":"yOBs","diagram-js/lib/util/Mouse":"sz9Y"}],"P4QC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("diagram-js-direct-editing")),r=l(require("diagram-js/lib/features/context-pad")),t=l(require("diagram-js/lib/features/selection")),a=l(require("diagram-js/lib/features/connect")),d=l(require("diagram-js/lib/features/create")),i=l(require("../popup-menu")),u=l(require("./ContextPadProvider"));function l(e){return e&&e.__esModule?e:{default:e}}var o=exports.default={__depends__:[e.default,r.default,t.default,a.default,d.default,i.default],__init__:["contextPadProvider"],contextPadProvider:["type",u.default]};
},{"diagram-js-direct-editing":"ZHLi","diagram-js/lib/features/context-pad":"kGBC","diagram-js/lib/features/selection":"NUwH","diagram-js/lib/features/connect":"qvKB","diagram-js/lib/features/create":"qe87","../popup-menu":"UvVt","./ContextPadProvider":"usqG"}],"Oi5X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var t=require("min-dash"),e=require("min-dom"),i=require("../../util/EscapeUtil"),n=".djs-palette-toggle",r=".entry",o=n+", "+r,a="djs-palette-",s="shown",l="open",p="two-column",c=1e3;function u(t,e){this._eventBus=t,this._canvas=e;var i=this;t.on("tool-manager.update",function(t){var e=t.tool;i.updateToolHighlight(e)}),t.on("i18n.changed",function(){i._update()}),t.on("diagram.init",function(){i._diagramInitialized=!0,i._rebuild()})}function d(i,n){var r=(0,e.classes)(i);((0,t.isArray)(n)?n:n.split(/\s+/g)).forEach(function(t){r.add(t)})}function g(e,i){var n=i.getPaletteEntries();return(0,t.isFunction)(n)?n(e):((0,t.forEach)(n,function(t,i){e[i]=t}),e)}u.$inject=["eventBus","canvas"],u.prototype.registerProvider=function(t,e){e||(e=t,t=c),this._eventBus.on("palette.getProviders",t,function(t){t.providers.push(e)}),this._rebuild()},u.prototype.getEntries=function(){return this._getProviders().reduce(g,{})},u.prototype._rebuild=function(){this._diagramInitialized&&(this._getProviders().length&&(this._container||this._init(),this._update()))},u.prototype._init=function(){var t=this,i=this._eventBus,l=this._getParentContainer(),p=this._container=(0,e.domify)(u.HTML_MARKUP);l.appendChild(p),(0,e.classes)(l).add(a+s),e.delegate.bind(p,o,"click",function(i){var r=i.delegateTarget;if((0,e.matches)(r,n))return t.toggle();t.trigger("click",i)}),e.event.bind(p,"mousedown",function(t){t.stopPropagation()}),e.delegate.bind(p,r,"dragstart",function(e){t.trigger("dragstart",e)}),i.on("canvas.resized",this._layoutChanged,this),i.fire("palette.create",{container:p})},u.prototype._getProviders=function(t){var e=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(e),e.providers},u.prototype._toggleState=function(t){t=t||{};var i,n=this._getParentContainer(),r=this._container,o=this._eventBus,s=(0,e.classes)(r),c=(0,e.classes)(n);i="twoColumn"in t?t.twoColumn:this._needsCollapse(n.clientHeight,this._entries||{}),s.toggle(p,i),c.toggle(a+p,i),"open"in t&&(s.toggle(l,t.open),c.toggle(a+l,t.open)),o.fire("palette.changed",{twoColumn:i,open:this.isOpen()})},u.prototype._update=function(){var n=(0,e.query)(".djs-palette-entries",this._container),r=this._entries=this.getEntries();(0,e.clear)(n),(0,t.forEach)(r,function(t,r){var o=t.group||"default",a=(0,e.query)("[data-group="+(0,i.escapeCSS)(o)+"]",n);a||(a=(0,e.domify)('<div class="group"></div>'),(0,e.attr)(a,"data-group",o),n.appendChild(a));var s=t.html||(t.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),l=(0,e.domify)(s);if(a.appendChild(l),!t.separator&&((0,e.attr)(l,"data-action",r),t.title&&(0,e.attr)(l,"title",t.title),t.className&&d(l,t.className),t.imageUrl)){var p=(0,e.domify)("<img>");(0,e.attr)(p,"src",t.imageUrl),l.appendChild(p)}}),this.open()},u.prototype.trigger=function(t,i,n){var r,o,a=i.delegateTarget||i.target;return a?(r=(0,e.attr)(a,"data-action"),o=i.originalEvent||i,this.triggerEntry(r,t,o,n)):i.preventDefault()},u.prototype.triggerEntry=function(e,i,n,r){var o,a;if((o=this._entries[e])&&(a=o.action,!1!==this._eventBus.fire("palette.trigger",{entry:o,event:n}))){if((0,t.isFunction)(a)){if("click"===i)return a(n,r)}else if(a[i])return a[i](n,r);n.preventDefault()}},u.prototype._layoutChanged=function(){this._toggleState({})},u.prototype._needsCollapse=function(t,e){return t<46*Object.keys(e).length+50},u.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})},u.prototype.open=function(){this._toggleState({open:!0})},u.prototype.toggle=function(t){this.isOpen()?this.close():this.open()},u.prototype.isActiveTool=function(t){return t&&this._activeTool===t},u.prototype.updateToolHighlight=function(i){var n,r;this._toolsContainer||(n=(0,e.query)(".djs-palette-entries",this._container),this._toolsContainer=(0,e.query)("[data-group=tools]",n)),r=this._toolsContainer,(0,t.forEach)(r.children,function(t){var n=t.getAttribute("data-action");if(n){var r=(0,e.classes)(t);n=n.replace("-tool",""),r.contains("entry")&&n===i?r.add("highlighted-entry"):r.remove("highlighted-entry")}})},u.prototype.isOpen=function(){return(0,e.classes)(this._container).has(l)},u.prototype._getParentContainer=function(){return this._canvas.getContainer()},u.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';
},{"min-dash":"AmEv","min-dom":"fWg5","../../util/EscapeUtil":"eIZy"}],"VBge":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./Palette"));function t(e){return e&&e.__esModule?e:{default:e}}var r=exports.default={__init__:["palette"],palette:["type",e.default]};
},{"./Palette":"Oi5X"}],"zWpr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TYPED_START_EVENTS=exports.TYPED_INTERMEDIATE_EVENT=exports.TYPED_END_EVENT=exports.TYPED_BOUNDARY_EVENT=exports.TASK_GROUP=exports.TASK=exports.SUBPROCESS_GROUP=exports.SUBPROCESS=exports.PARTICIPANT_GROUP=exports.PARTICIPANT=exports.NONE_EVENTS=exports.GATEWAY_GROUP=exports.GATEWAY=exports.EVENT_GROUP=exports.DATA_OBJECTS=exports.DATA_GROUP=exports.CREATE_OPTIONS=void 0;var e=exports.EVENT_GROUP={id:"events",name:"Events"},n=exports.TASK_GROUP={id:"tasks",name:"Tasks"},t=exports.DATA_GROUP={id:"data",name:"Data"},a=exports.PARTICIPANT_GROUP={id:"participants",name:"Participants"},i=exports.SUBPROCESS_GROUP={id:"subprocess",name:"Sub Processes"},o=exports.GATEWAY_GROUP={id:"gateways",name:"Gateways"},r=exports.NONE_EVENTS=[{label:"Start Event",actionName:"none-start-event",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"Boundary Event",actionName:"none-boundary-event",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:BoundaryEvent"}},{label:"End Event",actionName:"none-end-event",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}}].map(n=>({...n,group:e})),m=exports.TYPED_START_EVENTS=[{label:"Message Start Event",actionName:"message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Start Event",actionName:"timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional Start Event",actionName:"conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal Start Event",actionName:"signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}].map(n=>({...n,group:e})),s=exports.TYPED_INTERMEDIATE_EVENT=[{label:"Message Intermediate Catch Event",actionName:"message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message Intermediate Throw Event",actionName:"message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Intermediate Catch Event",actionName:"timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation Intermediate Throw Event",actionName:"escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional Intermediate Catch Event",actionName:"conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link Intermediate Catch Event",actionName:"link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Link Intermediate Throw Event",actionName:"link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Compensation Intermediate Throw Event",actionName:"compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal Intermediate Catch Event",actionName:"signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal Intermediate Throw Event",actionName:"signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}].map(n=>({...n,group:e})),p=exports.TYPED_BOUNDARY_EVENT=[{label:"Message Boundary Event",actionName:"message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Boundary Event",actionName:"timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation Boundary Event",actionName:"escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional Boundary Event",actionName:"conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Error Boundary Event",actionName:"error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel Boundary Event",actionName:"cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Signal Boundary Event",actionName:"signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Compensation Boundary Event",actionName:"compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Message Boundary Event (non-interrupting)",actionName:"non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer Boundary Event (non-interrupting)",actionName:"non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation Boundary Event (non-interrupting)",actionName:"non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional Boundary Event (non-interrupting)",actionName:"non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal Boundary Event (non-interrupting)",actionName:"non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}}].map(n=>({...n,group:e})),c=exports.TYPED_END_EVENT=[{label:"Message End Event",actionName:"message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation End Event",actionName:"escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error End Event",actionName:"error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel End Event",actionName:"cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation End Event",actionName:"compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal End Event",actionName:"signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate End Event",actionName:"terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}].map(n=>({...n,group:e})),l=exports.GATEWAY=[{label:"Exclusive Gateway",actionName:"exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel Gateway",actionName:"parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive Gateway",search:"or",actionName:"inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"},rank:-1},{label:"Complex Gateway",actionName:"complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"},rank:-1},{label:"Event based Gateway",actionName:"event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}].map(e=>({...e,group:o})),b=exports.SUBPROCESS=[{label:"Transaction",actionName:"transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event Sub Process",search:"subprocess",actionName:"event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Sub Process (collapsed)",search:"subprocess",actionName:"collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}},{label:"Sub Process (expanded)",search:"subprocess",actionName:"expanded-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!0}}].map(e=>({...e,group:i})),v=exports.TASK=[{label:"Task",actionName:"task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"User Task",actionName:"user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Service Task",actionName:"service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Send Task",actionName:"send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"},rank:-1},{label:"Receive Task",actionName:"receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"},rank:-1},{label:"Manual Task",actionName:"manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"},rank:-1},{label:"Business Rule Task",actionName:"rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Script Task",actionName:"script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}},{label:"Call Activity",actionName:"call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}}].map(e=>({...e,group:n})),E=exports.DATA_OBJECTS=[{label:"Data Store Reference",actionName:"data-store-reference",className:"bpmn-icon-data-store",target:{type:"bpmn:DataStoreReference"}},{label:"Data Object Reference",actionName:"data-object-reference",className:"bpmn-icon-data-object",target:{type:"bpmn:DataObjectReference"}}].map(e=>({...e,group:t})),d=exports.PARTICIPANT=[{label:"Expanded Pool",search:"Participant",actionName:"expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}},{label:"Empty Pool",search:"Collapsed Participant",actionName:"collapsed-pool",className:"bpmn-icon-lane",target:{type:"bpmn:Participant",isExpanded:!1}}].map(e=>({...e,group:a})),y=exports.CREATE_OPTIONS=[...l,...v,...b,...r,...m,...s,...c,...p,...E,...d];
},{}],"aw8k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var t=require("./util/OptionsUtil");function e(t,e,r,a,s,n){this._elementFactory=t,this._popupMenu=e,this._create=r,this._autoPlace=a,this._mouse=s,this._translate=n,this.register()}e.$inject=["elementFactory","popupMenu","create","autoPlace","mouse","translate"],e.prototype.register=function(){this._popupMenu.registerProvider("bpmn-create",this)},e.prototype.getPopupMenuEntries=function(){const e={};return t.CREATE_OPTIONS.forEach(t=>{const{actionName:r,className:a,label:s,target:n,description:i,group:o,search:c,rank:p}=t,u=this._createEntryAction(n);e[`create-${r}`]={label:s&&this._translate(s),className:a,description:i,group:o&&{...o,name:this._translate(o.name)},search:c,rank:p,action:{click:u,dragstart:u}}}),e},e.prototype._createEntryAction=function(t){const e=this._create,r=this._mouse,a=this._popupMenu,s=this._elementFactory;let n;return i=>(a.close(),n="bpmn:Participant"===t.type?s.createParticipantShape(t):s.create("shape",t),i instanceof KeyboardEvent&&(i=r.getLastMoveEvent()),e.start(i,n))};
},{"./util/OptionsUtil":"zWpr"}],"oiD7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIcon=exports.appendIcon=void 0;const e=exports.appendIcon="data:image/svg+xml,%3Csvg%20width%3D%2222%22%20height%3D%2222%22%20viewBox%3D%220%200%205.82%205.82%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%20%20%3Cpath%20d%3D%22M1.3%203.4c.3%200%20.5-.2.5-.5s-.2-.4-.5-.4c-.2%200-.4.1-.4.4%200%20.3.2.5.4.5zM3%203.4c.2%200%20.4-.2.4-.5s-.2-.4-.4-.4c-.3%200-.5.1-.5.4%200%20.3.2.5.5.5zM4.6%203.4c.2%200%20.4-.2.4-.5s-.2-.4-.4-.4c-.3%200-.5.1-.5.4%200%20.3.2.5.5.5z%22%2F%3E%0A%3C%2Fsvg%3E",s=exports.createIcon="data:image/svg+xml,%3Csvg%20width%3D%2246%22%20height%3D%2246%22%20viewBox%3D%22-2%20-2%209.82%209.82%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cpath%20d%3D%22M1.3%203.4c.3%200%20.5-.2.5-.5s-.2-.4-.5-.4c-.2%200-.4.1-.4.4%200%20.3.2.5.4.5zM3%203.4c.2%200%20.4-.2.4-.5s-.2-.4-.4-.4c-.3%200-.5.1-.5.4%200%20.3.2.5.5.5zM4.6%203.4c.2%200%20.4-.2.4-.5s-.2-.4-.4-.4c-.3%200-.5.1-.5.4%200%20.3.2.5.5.5z%22%2F%3E%0A%3C%2Fsvg%3E";
},{}],"bmdO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=require("../../icons/Icons"),t=require("min-dom");function n(e,t,n,r,a){this._translate=t,this._popupMenu=n,this._canvas=r,this._mouse=a,e.registerProvider(800,this)}n.$inject=["palette","translate","popupMenu","canvas","mouse"],n.prototype.getPaletteEntries=function(n){const r=this._translate,a=this._popupMenu,i=this._canvas,o=this._mouse;return{create:{group:"create",imageUrl:e.createIcon,title:r("Create element"),action:{click:function(e){const n=(e=>{if(e instanceof KeyboardEvent)return{x:(e=o.getLastMoveEvent()).x,y:e.y};const n=e&&e.target||(0,t.query)('.djs-palette [data-action="create"]'),r=n.getBoundingClientRect();return n&&{x:r.left+r.width/2+35,y:r.top+r.height/2+10}})(e),s=i.getRootElement();a.open(s,"bpmn-create",n,{title:r("Create element"),width:300,search:!0})}}}}};
},{"../../icons/Icons":"oiD7","min-dom":"fWg5"}],"bjOY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var t=require("min-dash");function e(t){this._injector=t,this.registerActions()}e.$inject=["injector"],e.prototype.registerActions=function(){var e=this._injector.get("editorActions",!1),i=this._injector.get("selection",!1),n=this._injector.get("contextPad",!1),r=this._injector.get("palette",!1),c=this._injector.get("popupMenu",!1);const s={};i&&n&&r&&c&&r&&(0,t.assign)(s,{appendElement:function(t){const e=i&&i.get();1!=e.length||c.isEmpty(e[0],"bpmn-append")?r.triggerEntry("create","click",t):n.triggerEntry("append","click",t)}}),r&&(0,t.assign)(s,{createElement:function(t){r.triggerEntry("create","click",t)}}),e&&e.register(s)};
},{"min-dash":"AmEv"}],"uRv3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=i(require("inherits-browser")),t=i(require("diagram-js/lib/features/keyboard/KeyboardBindings"));function i(e){return e&&e.__esModule?e:{default:e}}function r(e){this._injector=e,this._keyboard=this._injector.get("keyboard",!1),this._editorActions=this._injector.get("editorActions",!1),this._keyboard&&this._injector.invoke(t.default,this)}(0,e.default)(r,t.default),r.$inject=["injector"],r.prototype.registerBindings=function(){var e=this._keyboard,i=this._editorActions;function r(t,r){i&&i.isRegistered(t)&&e&&e.addListener(r)}t.default.prototype.registerBindings.call(this,e,i),r("appendElement",function(t){var r=t.keyEvent;if(!e||!e.hasModifier(r))return e&&e.isKey(["a","A"],r)?(i&&i.trigger("appendElement",r),!0):void 0}),r("createElement",function(t){var r=t.keyEvent;if(!e||!e.hasModifier(r))return e&&e.isKey(["n","N"],r)?(i&&i.trigger("createElement",r),!0):void 0})};
},{"inherits-browser":"hUM3","diagram-js/lib/features/keyboard/KeyboardBindings":"QiDp"}],"T4Uw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=require("min-dash"),t=require("./util/OptionsUtil");function n(e,t,n,r,i,a,s){this._elementFactory=e,this._popupMenu=t,this._create=n,this._autoPlace=r,this._rules=i,this._create=n,this._mouse=a,this._translate=s,this.register()}n.$inject=["elementFactory","popupMenu","create","autoPlace","rules","mouse","translate"],n.prototype.register=function(){this._popupMenu.registerProvider("bpmn-append",this)},n.prototype.getPopupMenuEntries=function(e){const n=this._rules,r=this._translate,i={};return n.allowed("shape.append",{element:e})?(this._filterEntries(t.CREATE_OPTIONS).forEach(t=>{const{actionName:n,className:a,label:s,target:o,description:p,group:c,search:u,rank:l}=t;i[`append-${n}`]={label:s&&r(s),className:a,description:p,group:c&&{...c,name:r(c.name)},search:u,rank:l,action:this._createEntryAction(e,o)}}),i):[]},n.prototype._filterEntries=function(t){return t.filter(t=>{const n=t.target,{type:r,eventDefinitionType:i}=n;return!["bpmn:StartEvent","bpmn:Participant"].includes(r)&&("bpmn:BoundaryEvent"!==r||!(0,e.isUndefined)(i))})},n.prototype._createEntryAction=function(e,t){const n=this._elementFactory,r=this._autoPlace,i=this._create,a=this._mouse,s=r=>{const s=n.create("shape",t);return r instanceof KeyboardEvent&&(r=a.getLastMoveEvent()),i.start(r,s,{source:e})};return{click:this._canAutoPlaceElement(t)?()=>{const i=n.create("shape",t);r.append(e,i)}:s,dragstart:s}},n.prototype._canAutoPlaceElement=(e=>{const{type:t}=e;return"bpmn:BoundaryEvent"!==t&&(("bpmn:SubProcess"!==t||!e.triggeredByEvent)&&("bpmn:IntermediateCatchEvent"!==t||"bpmn:LinkEventDefinition"!==e.eventDefinitionType))});
},{"min-dash":"AmEv","./util/OptionsUtil":"zWpr"}],"kBT9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var t=require("min-dash"),e=require("../../icons/Icons"),n=900;function i(t,e,i,p){t.registerProvider(n,this),this._contextPad=t,this._popupMenu=e,this._translate=i,this._canvas=p}i.$inject=["contextPad","popupMenu","translate","canvas"],i.prototype.getContextPadEntries=function(n){const i=this._popupMenu,p=this._translate,o=this._getAppendMenuPosition.bind(this);if(!i.isEmpty(n,"bpmn-append"))return{append:{group:"model",imageUrl:e.appendIcon,title:p("Append element"),action:{click:function(e,n){var s=(0,t.assign)(o(n),{cursor:{x:e.x,y:e.y}});i.open(n,"bpmn-append",s,{title:p("Append element"),width:300,search:!0})}}}}},i.prototype._getAppendMenuPosition=function(t){const e=this._contextPad.getPad(t).html.getBoundingClientRect();return{x:e.right+5,y:e.top}};
},{"min-dash":"AmEv","../../icons/Icons":"oiD7"}],"SlWD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var e=require("min-dash"),n=u(require("inherits-browser")),t=require("../../util/ModelUtil"),i=require("../../util/LabelUtil"),r=u(require("diagram-js/lib/features/rules/RuleProvider"));function u(e){return e&&e.__esModule?e:{default:e}}function s(e){r.default.call(this,e)}function a(n,i){var r=(0,t.getBusinessObject)(n);return!!(0,e.find)(r.eventDefinitions||[],function(e){return(0,t.is)(e,i)})}function o(e){return e.waypoints}(0,n.default)(s,r.default),s.$inject=["eventBus"],s.prototype.init=function(){this.addRule("shape.append",function(e){var n=e.element;const r=(0,t.getBusinessObject)(n);return!(0,i.isLabel)(n)&&(!(0,t.isAny)(n,["bpmn:EndEvent","bpmn:Group","bpmn:TextAnnotation","bpmn:Lane","bpmn:Participant","bpmn:DataStoreReference","bpmn:DataObjectReference"])&&(!o(n)&&((!(0,t.is)(n,"bpmn:IntermediateThrowEvent")||!a(n,"bpmn:LinkEventDefinition"))&&((!(0,t.is)(n,"bpmn:SubProcess")||!r.triggeredByEvent)&&void 0))))})};
},{"min-dash":"AmEv","inherits-browser":"hUM3","../../util/ModelUtil":"HvoA","../../util/LabelUtil":"yKfU","diagram-js/lib/features/rules/RuleProvider":"EJm6"}],"ax38":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("diagram-js/lib/features/popup-menu")),r=s(require("diagram-js/lib/features/palette")),t=s(require("diagram-js/lib/features/auto-place")),d=s(require("diagram-js/lib/features/context-pad")),a=s(require("./CreateMenuProvider")),i=s(require("./CreatePaletteProvider")),p=s(require("./CreateAppendEditorActions")),u=s(require("./CreateAppendKeyboardBindings")),n=s(require("./AppendMenuProvider")),o=s(require("./AppendContextPadProvider")),l=s(require("./AppendRules"));function s(e){return e&&e.__esModule?e:{default:e}}var f=exports.default={__depends__:[r.default,e.default,t.default,d.default],__init__:["createMenuProvider","createPaletteProvider","createAppendEditorActions","createAppendKeyboardBindings","appendMenuProvider","appendContextPadProvider","appendRules"],createMenuProvider:["type",a.default],createPaletteProvider:["type",i.default],createAppendEditorActions:["type",p.default],createAppendKeyboardBindings:["type",u.default],appendMenuProvider:["type",n.default],appendContextPadProvider:["type",o.default],appendRules:["type",l.default]};
},{"diagram-js/lib/features/popup-menu":"dOa0","diagram-js/lib/features/palette":"VBge","diagram-js/lib/features/auto-place":"cD1M","diagram-js/lib/features/context-pad":"kGBC","./CreateMenuProvider":"aw8k","./CreatePaletteProvider":"bmdO","./CreateAppendEditorActions":"bjOY","./CreateAppendKeyboardBindings":"uRv3","./AppendMenuProvider":"T4Uw","./AppendContextPadProvider":"kBT9","./AppendRules":"SlWD"}],"VWc7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var t=require("min-dash"),e={horizontal:["x","width"],vertical:["y","height"]},i=5;function n(e,i){this._modeling=e,this._filters=[],this.registerFilter(function(e){var n=i.allowed("elements.distribute",{elements:e});return(0,t.isArray)(n)?n:n?e:[]})}n.$inject=["modeling","rules"],n.prototype.registerFilter=function(t){if("function"!=typeof t)throw new Error("the filter has to be a function");this._filters.push(t)},n.prototype.trigger=function(t,e){var i,n,r=this._modeling;if(!(t.length<3||(this._setOrientation(e),n=this._filterElements(t),(i=this._createGroups(n)).length<=2)))return r.distributeElements(i,this._axis,this._dimension),i},n.prototype._filterElements=function(e){var i=this._filters,n=this._axis,r=this._dimension,s=[].concat(e);return i.length?((0,t.forEach)(i,function(t){s=t(s,n,r)}),s):e},n.prototype._createGroups=function(e){var i=[],n=this,r=this._axis,s=this._dimension;if(!r)throw new Error('must have a defined "axis" and "dimension"');var o=(0,t.sortBy)(e,r);return(0,t.forEach)(o,function(t,e){var o,a=n._findRange(t,r,s),h=i[i.length-1];h&&n._hasIntersection(h.range,a)?i[i.length-1].elements.push(t):(o={range:a,elements:[t]},i.push(o))}),i},n.prototype._setOrientation=function(t){var i=e[t];this._axis=i[0],this._dimension=i[1]},n.prototype._hasIntersection=function(t,e){return Math.max(t.min,t.max)>=Math.min(e.min,e.max)&&Math.min(t.min,t.max)<=Math.max(e.min,e.max)},n.prototype._findRange=function(t){var e=t[this._axis],n=t[this._dimension];return{min:e+i,max:e+n-i}};
},{"min-dash":"AmEv"}],"hTvW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./DistributeElements"));function t(e){return e&&e.__esModule?e:{default:e}}var r=exports.default={__init__:["distributeElements"],distributeElements:["type",e.default]};
},{"./DistributeElements":"VWc7"}],"GbWQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var e=u(require("inherits-browser")),t=u(require("diagram-js/lib/features/rules/RuleProvider")),n=require("diagram-js/lib/util/Elements"),i=require("min-dash"),r=require("../modeling/util/ModelingUtil");function u(e){return e&&e.__esModule?e:{default:e}}function s(e,n,i){t.default.call(this,n)}s.$inject=["distributeElements","eventBus","rules"],(0,e.default)(s,t.default),s.prototype.init=function(){this.addRule("elements.distribute",function(e){var t=e.elements;return t=(0,i.filter)(t,function(e){var t=(0,r.isAny)(e,["bpmn:Association","bpmn:BoundaryEvent","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:Lane","bpmn:MessageFlow","bpmn:SequenceFlow","bpmn:TextAnnotation"]);return!(e.labelTarget||t)}),!((t=(0,n.getParents)(t)).length<3)&&t})};
},{"inherits-browser":"hUM3","diagram-js/lib/features/rules/RuleProvider":"EJm6","diagram-js/lib/util/Elements":"KTcn","min-dash":"AmEv","../modeling/util/ModelingUtil":"YK7B"}],"ByRk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t={horizontal:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%201800%201800%22%3E%3Cpath%20style%3D%22fill%3Anone%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%3Bstroke-linejoin%3Around%22%20d%3D%22M450%20400V150h900v250%22%2F%3E%3Crect%20x%3D%22150%22%20y%3D%22450%22%20width%3D%22600%22%20height%3D%221200%22%20rx%3D%221%22%20style%3D%22fill%3Anone%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%22%2F%3E%3Crect%20x%3D%221050%22%20y%3D%22450%22%20width%3D%22600%22%20height%3D%22800%22%20rx%3D%221%22%20style%3D%22fill%3AcurrentColor%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%3Bopacity%3A.5%22%2F%3E%3C%2Fsvg%3E",vertical:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%201800%201800%22%3E%3Cpath%20style%3D%22fill%3Anone%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%3Bstroke-linejoin%3Around%22%20d%3D%22M400%201350H150V450h250%22%2F%3E%3Crect%20x%3D%22450%22%20y%3D%22150%22%20width%3D%221200%22%20height%3D%22600%22%20rx%3D%221%22%20style%3D%22fill%3Anone%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%22%2F%3E%3Crect%20x%3D%22450%22%20y%3D%221050%22%20width%3D%22800%22%20height%3D%22600%22%20rx%3D%221%22%20style%3D%22fill%3AcurrentColor%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%3Bopacity%3A.5%22%2F%3E%3C%2Fsvg%3E"},e=exports.default=t;
},{}],"hJyb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var e=i(require("./DistributeElementsIcons")),t=require("min-dash");function i(e){return e&&e.__esModule?e:{default:e}}var r=900;function s(e,t,i,s){this._distributeElements=t,this._translate=i,this._popupMenu=e,this._rules=s,e.registerProvider("align-elements",r,this)}s.$inject=["popupMenu","distributeElements","translate","rules"],s.prototype.getPopupMenuEntries=function(e){var i={};return this._isAllowed(e)&&(0,t.assign)(i,this._getEntries(e)),i},s.prototype._isAllowed=function(e){return this._rules.allowed("elements.distribute",{elements:e})},s.prototype._getEntries=function(t){var i=this._distributeElements,r=this._translate,s=this._popupMenu;return{"distribute-elements-horizontal":{group:"distribute",title:r("Distribute elements horizontally"),className:"bjs-align-elements-menu-entry",imageUrl:e.default.horizontal,action:function(e,r){i.trigger(t,"horizontal"),s.close()}},"distribute-elements-vertical":{group:"distribute",title:r("Distribute elements vertically"),imageUrl:e.default.vertical,action:function(e,r){i.trigger(t,"vertical"),s.close()}}}};
},{"./DistributeElementsIcons":"ByRk","min-dash":"AmEv"}],"qSq4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("diagram-js/lib/features/distribute-elements")),t=u(require("diagram-js/lib/features/popup-menu")),r=u(require("./BpmnDistributeElements")),i=u(require("./DistributeElementsMenuProvider"));function u(e){return e&&e.__esModule?e:{default:e}}var s=exports.default={__depends__:[t.default,e.default],__init__:["bpmnDistributeElements","distributeElementsMenuProvider"],bpmnDistributeElements:["type",r.default],distributeElementsMenuProvider:["type",i.default]};
},{"diagram-js/lib/features/distribute-elements":"hTvW","diagram-js/lib/features/popup-menu":"dOa0","./BpmnDistributeElements":"GbWQ","./DistributeElementsMenuProvider":"hJyb"}],"BQWr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var t=require("min-dash"),e="is not a registered action",i="is already registered";function o(t,e){this._actions={};var i=this;t.on("diagram.init",function(){i._registerDefaultActions(e),t.fire("editorActions.init",{editorActions:i})})}function r(t,e){return new Error(t+" "+e)}o.$inject=["eventBus","injector"],o.prototype._registerDefaultActions=function(e){var i=e.get("commandStack",!1),o=e.get("modeling",!1),r=e.get("selection",!1),n=e.get("zoomScroll",!1),s=e.get("copyPaste",!1),c=e.get("canvas",!1),a=e.get("rules",!1),g=e.get("keyboardMove",!1),u=e.get("keyboardMoveSelection",!1);i&&(this.register("undo",function(){i.undo()}),this.register("redo",function(){i.redo()})),s&&r&&this.register("copy",function(){var t=r.get();if(t.length)return s.copy(t)}),s&&this.register("paste",function(){s.paste()}),n&&this.register("stepZoom",function(t){n.stepZoom(t.value)}),c&&this.register("zoom",function(t){c.zoom(t.value)}),o&&r&&a&&this.register("removeSelection",function(){var e=r.get();if(e.length){var i,n=a.allowed("elements.delete",{elements:e});!1!==n&&(i=(0,t.isArray)(n)?n:e).length&&o.removeElements(i.slice())}}),g&&this.register("moveCanvas",function(t){g.moveCanvas(t)}),u&&this.register("moveSelection",function(t){u.moveSelection(t.direction,t.accelerated)})},o.prototype.trigger=function(t,i){if(!this._actions[t])throw r(t,e);return this._actions[t](i)},o.prototype.register=function(e,i){var o=this;if("string"==typeof e)return this._registerAction(e,i);(0,t.forEach)(e,function(t,e){o._registerAction(e,t)})},o.prototype._registerAction=function(t,e){if(this.isRegistered(t))throw r(t,i);this._actions[t]=e},o.prototype.unregister=function(t){if(!this.isRegistered(t))throw r(t,e);this._actions[t]=void 0},o.prototype.getActions=function(){return Object.keys(this._actions)},o.prototype.isRegistered=function(t){return!!this._actions[t]};
},{"min-dash":"AmEv"}],"Yr2u":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./EditorActions"));function t(e){return e&&e.__esModule?e:{default:e}}var r=exports.default={__init__:["editorActions"],editorActions:["type",e.default]};
},{"./EditorActions":"BQWr"}],"gkgR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var t=o(require("inherits-browser")),e=o(require("diagram-js/lib/features/editor-actions/EditorActions")),i=require("min-dash"),n=require("../../util/ModelUtil"),r=require("diagram-js/lib/util/Elements");function o(t){return t&&t.__esModule?t:{default:t}}function s(t){t.invoke(e.default,this)}(0,t.default)(s,e.default),s.$inject=["injector"],s.prototype._registerDefaultActions=function(t){e.default.prototype._registerDefaultActions.call(this,t);var o=t.get("canvas",!1),s=t.get("elementRegistry",!1),l=t.get("selection",!1),g=t.get("spaceTool",!1),c=t.get("lassoTool",!1),a=t.get("handTool",!1),u=t.get("globalConnect",!1),f=t.get("distributeElements",!1),d=t.get("alignElements",!1),h=t.get("directEditing",!1),m=t.get("searchPad",!1),p=t.get("modeling",!1),_=t.get("contextPad",!1);o&&s&&l&&this._registerAction("selectElements",function(){var t=o.getRootElement(),e=s.filter(function(e){return e!==t});return l.select(e),e}),g&&this._registerAction("spaceTool",function(){g.toggle()}),c&&this._registerAction("lassoTool",function(){c.toggle()}),a&&this._registerAction("handTool",function(){a.toggle()}),u&&this._registerAction("globalConnectTool",function(){u.toggle()}),l&&f&&this._registerAction("distributeElements",function(t){var e=l.get(),i=t.type;e.length&&f.trigger(e,i)}),l&&d&&this._registerAction("alignElements",function(t){var e=l.get(),r=[],o=t.type;e.length&&(r=(0,i.filter)(e,function(t){return!(0,n.is)(t,"bpmn:Lane")}),d.trigger(r,o))}),l&&p&&this._registerAction("setColor",function(t){var e=l.get();e.length&&p.setColor(e,t)}),l&&h&&this._registerAction("directEditing",function(){var t=l.get();t.length&&h.activate(t[0])}),m&&this._registerAction("find",function(){m.toggle()}),o&&p&&this._registerAction("moveToOrigin",function(){var t,e,i=o.getRootElement();e=(0,n.is)(i,"bpmn:Collaboration")?s.filter(function(t){return(0,n.is)(t.parent,"bpmn:Collaboration")}):s.filter(function(t){return t!==i&&!(0,n.is)(t.parent,"bpmn:SubProcess")}),t=(0,r.getBBox)(e),p.moveElements(e,{x:-t.x,y:-t.y},i)}),l&&_&&this._registerAction("replaceElement",function(t){_.triggerEntry("replace","click",t)})};
},{"inherits-browser":"hUM3","diagram-js/lib/features/editor-actions/EditorActions":"BQWr","min-dash":"AmEv","../../util/ModelUtil":"HvoA","diagram-js/lib/util/Elements":"KTcn"}],"kHTJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("diagram-js/lib/features/editor-actions")),t=r(require("./BpmnEditorActions"));function r(e){return e&&e.__esModule?e:{default:e}}var d=exports.default={__depends__:[e.default],editorActions:["type",t.default]};
},{"diagram-js/lib/features/editor-actions":"Yr2u","./BpmnEditorActions":"gkgR"}],"UTVJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var n=require("../modeling/util/ModelingUtil");function t(t){t.on(["create.init","shape.move.init"],function(t){var e=t.context,i=t.shape;(0,n.isAny)(i,["bpmn:Participant","bpmn:SubProcess","bpmn:TextAnnotation"])&&(e.gridSnappingContext||(e.gridSnappingContext={}),e.gridSnappingContext.snapLocation="top-left")})}t.$inject=["eventBus"];
},{"../modeling/util/ModelingUtil":"YK7B"}],"j4Er":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SPACING=void 0,exports.quantize=t;var e=exports.SPACING=10;function t(e,t,r){return r||(r="round"),Math[r](e/t)*t}
},{}],"pNlM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var t=require("../snapping/SnapUtil"),e=require("../keyboard/KeyboardUtil"),n=require("min-dash"),i=require("./GridUtil"),o=1200,r=800;function a(i,a,c){var m=!c||!1!==c.active;this._eventBus=a;var u=this;a.on("diagram.init",r,function(){u.setActive(m)}),a.on(["create.move","create.end","bendpoint.move.move","bendpoint.move.end","connect.move","connect.end","connectionSegment.move.move","connectionSegment.move.end","resize.move","resize.end","shape.move.move","shape.move.end"],o,function(o){var r=o.originalEvent;if(!(!u.active||r&&(0,e.isCmd)(r))){var a=o.context,c=a.gridSnappingContext;c||(c=a.gridSnappingContext={}),["x","y"].forEach(function(e){var r={},a=p(o,e,i);a&&(r.offset=a);var c=s(o,e);c&&(0,n.assign)(r,c),(0,t.isSnapped)(o,e)||u.snapEvent(o,e,r)})}})}function s(t,e){var n=t.context,i=n.createConstraints,o=n.resizeConstraints||{},r=n.gridSnappingContext,a=r.snapConstraints;if(a&&a[e])return a[e];a||(a=r.snapConstraints={}),a[e]||(a[e]={});var s=n.direction;i&&(c(e)?(a.x.min=i.left,a.x.max=i.right):(a.y.min=i.top,a.y.max=i.bottom));var p=o.min,v=o.max;return p&&(c(e)?u(s)?a.x.max=p.left:a.x.min=p.right:m(s)?a.y.max=p.top:a.y.min=p.bottom),v&&(c(e)?u(s)?a.x.min=v.left:a.x.max=v.right:m(s)?a.y.min=v.top:a.y.max=v.bottom),a[e]}function p(t,e,i){var o=t.context,r=t.shape,a=o.gridSnappingContext,s=a.snapLocation,p=a.snapOffset;return p&&(0,n.isNumber)(p[e])?p[e]:(p||(p=a.snapOffset={}),(0,n.isNumber)(p[e])||(p[e]=0),r?(i.get(r.id)||(c(e)?p[e]+=r[e]+r.width/2:p[e]+=r[e]+r.height/2),s?("x"===e?/left/.test(s)?p[e]-=r.width/2:/right/.test(s)&&(p[e]+=r.width/2):/top/.test(s)?p[e]-=r.height/2:/bottom/.test(s)&&(p[e]+=r.height/2),p[e]):p[e]):p[e])}function c(t){return"x"===t}function m(t){return-1!==t.indexOf("n")}function u(t){return-1!==t.indexOf("w")}a.prototype.snapEvent=function(e,n,i){var o=this.snapValue(e[n],i);(0,t.setSnapped)(e,n,o)},a.prototype.getGridSpacing=function(){return i.SPACING},a.prototype.snapValue=function(t,e){var o,r,a=0;return e&&e.offset&&(a=e.offset),t+=a,t=(0,i.quantize)(t,i.SPACING),e&&e.min&&(o=e.min,(0,n.isNumber)(o)&&(o=(0,i.quantize)(o+a,i.SPACING,"ceil"),t=Math.max(t,o))),e&&e.max&&(r=e.max,(0,n.isNumber)(r)&&(r=(0,i.quantize)(r+a,i.SPACING,"floor"),t=Math.min(t,r))),t-=a},a.prototype.isActive=function(){return this.active},a.prototype.setActive=function(t){this.active=t,this._eventBus.fire("gridSnapping.toggle",{active:t})},a.prototype.toggleActive=function(){this.setActive(!this.active)},a.$inject=["elementRegistry","eventBus","config.gridSnapping"];
},{"../snapping/SnapUtil":"SLMo","../keyboard/KeyboardUtil":"gUUR","min-dash":"AmEv","./GridUtil":"j4Er"}],"edua":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var t=n(require("inherits-browser")),e=n(require("../../../command/CommandInterceptor")),i=require("min-dash");function n(t){return t&&t.__esModule?t:{default:t}}function a(t,n){e.default.call(this,t),this._gridSnapping=n;var a=this;this.preExecute("shape.resize",function(t){var e=t.context,n=(e.hints||{}).autoResize;if(n){var s=e.shape,r=e.newBounds;(0,i.isString)(n)?e.newBounds=a.snapComplex(r,n):e.newBounds=a.snapSimple(s,r)}})}a.$inject=["eventBus","gridSnapping","modeling"],(0,t.default)(a,e.default),a.prototype.snapSimple=function(t,e){var i=this._gridSnapping;return e.width=i.snapValue(e.width,{min:e.width}),e.height=i.snapValue(e.height,{min:e.height}),e.x=t.x+t.width/2-e.width/2,e.y=t.y+t.height/2-e.height/2,e},a.prototype.snapComplex=function(t,e){return/w|e/.test(e)&&(t=this.snapHorizontally(t,e)),/n|s/.test(e)&&(t=this.snapVertically(t,e)),t},a.prototype.snapHorizontally=function(t,e){var n=this._gridSnapping,a=/w/.test(e),s=/e/.test(e),r={};return r.width=n.snapValue(t.width,{min:t.width}),s&&(a?(r.x=n.snapValue(t.x,{max:t.x}),r.width+=n.snapValue(t.x-r.x,{min:t.x-r.x})):t.x=t.x+t.width-r.width),(0,i.assign)(t,r),t},a.prototype.snapVertically=function(t,e){var n=this._gridSnapping,a=/n/.test(e),s=/s/.test(e),r={};return r.height=n.snapValue(t.height,{min:t.height}),a&&(s?(r.y=n.snapValue(t.y,{max:t.y}),r.height+=n.snapValue(t.y-r.y,{min:t.y-r.y})):t.y=t.y+t.height-r.height),(0,i.assign)(t,r),t};
},{"inherits-browser":"hUM3","../../../command/CommandInterceptor":"FIh1","min-dash":"AmEv"}],"duZn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=2e3;function n(n,t){n.on(["spaceTool.move","spaceTool.end"],e,function(e){var n,a=e.context;a.initialized&&("x"===a.axis?(n=t.snapValue(e.dx),e.x=e.x+n-e.dx,e.dx=n):(n=t.snapValue(e.dy),e.y=e.y+n-e.dy,e.dy=n))})}n.$inject=["eventBus","gridSnapping"];
},{}],"dkNP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./ResizeBehavior")),i=r(require("./SpaceToolBehavior"));function r(e){return e&&e.__esModule?e:{default:e}}var a=exports.default={__init__:["gridSnappingResizeBehavior","gridSnappingSpaceToolBehavior"],gridSnappingResizeBehavior:["type",e.default],gridSnappingSpaceToolBehavior:["type",i.default]};
},{"./ResizeBehavior":"edua","./SpaceToolBehavior":"duZn"}],"lKfY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./GridSnapping")),r=t(require("./behavior"));function t(e){return e&&e.__esModule?e:{default:e}}var i=exports.default={__depends__:[r.default],__init__:["gridSnapping"],gridSnapping:["type",e.default]};
},{"./GridSnapping":"pNlM","./behavior":"dkNP"}],"nSKk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=require("../../auto-place/BpmnAutoPlaceUtil"),t=require("diagram-js/lib/layout/LayoutUtil"),i=require("../../../util/ModelUtil"),n=2e3;function o(o,r){o.on("autoPlace",n,function(n){var o=n.source,u=(0,t.getMid)(o),l=n.shape,s=(0,e.getNewShapePosition)(o,l);return["x","y"].forEach(function(e){var t={};s[e]!==u[e]&&(s[e]>u[e]?t.min=s[e]:t.max=s[e],(0,i.is)(l,"bpmn:TextAnnotation")&&(a(e)?t.offset=-l.width/2:t.offset=-l.height/2),s[e]=r.snapValue(s[e],t))}),s})}function a(e){return"x"===e}o.$inject=["eventBus","gridSnapping"];
},{"../../auto-place/BpmnAutoPlaceUtil":"iibK","diagram-js/lib/layout/LayoutUtil":"aRzT","../../../util/ModelUtil":"HvoA"}],"LJ3B":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=require("../../../util/ModelUtil"),t=1750;function i(i,n,a){n.on(["create.start","shape.move.start"],t,function(t){var n=t.context,s=n.shape,r=i.getRootElement();(0,e.is)(s,"bpmn:Participant")&&(0,e.is)(r,"bpmn:Process")&&r.children.length&&(n.createConstraints&&(s.width=a.snapValue(s.width,{min:s.width}),s.height=a.snapValue(s.height,{min:s.height})))})}i.$inject=["canvas","eventBus","gridSnapping"];
},{"../../../util/ModelUtil":"HvoA"}],"iqOd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var n=r(require("inherits-browser")),e=r(require("diagram-js/lib/command/CommandInterceptor")),t=require("diagram-js/lib/util/Geometry"),i=require("min-dash");function r(n){return n&&n.__esModule?n:{default:n}}var a=3e3;function o(n,t,i){e.default.call(this,n),this._gridSnapping=t;var r=this;this.postExecuted(["connection.create","connection.layout"],a,function(n){var e=n.context,t=e.connection,a=e.hints||{},o=t.waypoints;a.connectionStart||a.connectionEnd||!1===a.createElementsBehavior||s(o)&&i.updateWaypoints(t,r.snapMiddleSegments(o))})}function s(n){return n.length>3}function u(n){return"h"===n}function c(n){return"v"===n}function d(n,e,r){var a=(0,t.pointsAligned)(e,r),o={};return u(a)&&(o.y=n.snapValue(e.y)),c(a)&&(o.x=n.snapValue(e.x)),("x"in o||"y"in o)&&(e=(0,i.assign)({},e,o),r=(0,i.assign)({},r,o)),[e,r]}o.$inject=["eventBus","gridSnapping","modeling"],(0,n.default)(o,e.default),o.prototype.snapMiddleSegments=function(n){var e,t=this._gridSnapping;n=n.slice();for(var i=1;i<n.length-2;i++)e=d(t,n[i],n[i+1]),n[i]=e[0],n[i+1]=e[1];return n};
},{"inherits-browser":"hUM3","diagram-js/lib/command/CommandInterceptor":"FIh1","diagram-js/lib/util/Geometry":"aD2B","min-dash":"AmEv"}],"pw4b":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=r(require("./GridSnappingAutoPlaceBehavior")),e=r(require("./GridSnappingParticipantBehavior")),a=r(require("./GridSnappingLayoutConnectionBehavior"));function r(i){return i&&i.__esModule?i:{default:i}}var n=exports.default={__init__:["gridSnappingAutoPlaceBehavior","gridSnappingParticipantBehavior","gridSnappingLayoutConnectionBehavior"],gridSnappingAutoPlaceBehavior:["type",i.default],gridSnappingParticipantBehavior:["type",e.default],gridSnappingLayoutConnectionBehavior:["type",a.default]};
},{"./GridSnappingAutoPlaceBehavior":"nSKk","./GridSnappingParticipantBehavior":"LJ3B","./GridSnappingLayoutConnectionBehavior":"iqOd"}],"pm0i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./BpmnGridSnapping")),r=t(require("diagram-js/lib/features/grid-snapping")),i=t(require("./behavior"));function t(e){return e&&e.__esModule?e:{default:e}}var a=exports.default={__depends__:[r.default,i.default],__init__:["bpmnGridSnapping"],bpmnGridSnapping:["type",e.default]};
},{"./BpmnGridSnapping":"UTVJ","diagram-js/lib/features/grid-snapping":"lKfY","./behavior":"pw4b"}],"C8Oq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var t=require("../../util/ModelUtil"),e=require("../../util/DiUtil"),i=30,n=30;function r(i,n){this._interactionEvents=n;var r=this;i.on(["interactionEvents.createHit","interactionEvents.updateHit"],function(i){var n=i.element,a=i.gfx;return(0,t.is)(n,"bpmn:Lane")?r.createParticipantHit(n,a):(0,t.is)(n,"bpmn:Participant")?(0,e.isExpanded)(n)?r.createParticipantHit(n,a):r.createDefaultHit(n,a):(0,t.is)(n,"bpmn:SubProcess")?(0,e.isExpanded)(n)?r.createSubProcessHit(n,a):r.createDefaultHit(n,a):void 0})}r.$inject=["eventBus","interactionEvents"],r.prototype.createDefaultHit=function(t,e){return this._interactionEvents.removeHits(e),this._interactionEvents.createDefaultHit(t,e),!0},r.prototype.createParticipantHit=function(t,e){return this._interactionEvents.removeHits(e),this._interactionEvents.createBoxHit(e,"no-move",{width:t.width,height:t.height}),this._interactionEvents.createBoxHit(e,"click-stroke",{width:t.width,height:t.height}),this._interactionEvents.createBoxHit(e,"all",{width:i,height:t.height}),!0},r.prototype.createSubProcessHit=function(t,e){return this._interactionEvents.removeHits(e),this._interactionEvents.createBoxHit(e,"no-move",{width:t.width,height:t.height}),this._interactionEvents.createBoxHit(e,"click-stroke",{width:t.width,height:t.height}),this._interactionEvents.createBoxHit(e,"all",{width:t.width,height:n}),!0};
},{"../../util/ModelUtil":"HvoA","../../util/DiUtil":"lWoN"}],"xeLQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./BpmnInteractionEvents"));function t(e){return e&&e.__esModule?e:{default:e}}var n=exports.default={__init__:["bpmnInteractionEvents"],bpmnInteractionEvents:["type",e.default]};
},{"./BpmnInteractionEvents":"C8Oq"}],"G5CR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=r(require("inherits-browser")),i=r(require("diagram-js/lib/features/keyboard/KeyboardBindings"));function r(e){return e&&e.__esModule?e:{default:e}}function t(e){e.invoke(i.default,this)}(0,e.default)(t,i.default),t.$inject=["injector"],t.prototype.registerBindings=function(e,r){function t(i,t){r.isRegistered(i)&&e.addListener(t)}i.default.prototype.registerBindings.call(this,e,r),t("selectElements",function(i){var t=i.keyEvent;if(e.isKey(["a","A"],t)&&e.isCmd(t))return r.trigger("selectElements"),!0}),t("find",function(i){var t=i.keyEvent;if(e.isKey(["f","F"],t)&&e.isCmd(t))return r.trigger("find"),!0}),t("spaceTool",function(i){var t=i.keyEvent;if(!e.hasModifier(t))return e.isKey(["s","S"],t)?(r.trigger("spaceTool"),!0):void 0}),t("lassoTool",function(i){var t=i.keyEvent;if(!e.hasModifier(t))return e.isKey(["l","L"],t)?(r.trigger("lassoTool"),!0):void 0}),t("handTool",function(i){var t=i.keyEvent;if(!e.hasModifier(t))return e.isKey(["h","H"],t)?(r.trigger("handTool"),!0):void 0}),t("globalConnectTool",function(i){var t=i.keyEvent;if(!e.hasModifier(t))return e.isKey(["c","C"],t)?(r.trigger("globalConnectTool"),!0):void 0}),t("directEditing",function(i){var t=i.keyEvent;if(!e.hasModifier(t))return e.isKey(["e","E"],t)?(r.trigger("directEditing"),!0):void 0}),t("replaceElement",function(i){var t=i.keyEvent;if(!e.hasModifier(t))return e.isKey(["r","R"],t)?(r.trigger("replaceElement",t),!0):void 0})};
},{"inherits-browser":"hUM3","diagram-js/lib/features/keyboard/KeyboardBindings":"QiDp"}],"EAEv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=d(require("diagram-js/lib/features/keyboard")),r=d(require("./BpmnKeyboardBindings"));function d(e){return e&&e.__esModule?e:{default:e}}var t=exports.default={__depends__:[e.default],__init__:["keyboardBindings"],keyboardBindings:["type",r.default]};
},{"diagram-js/lib/features/keyboard":"KmVM","./BpmnKeyboardBindings":"G5CR"}],"JX1v":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=d;var e=require("min-dash"),t={moveSpeed:1,moveSpeedAccelerated:10},n=1500,o="left",r="up",i="right",c="down",s={ArrowLeft:o,Left:o,ArrowUp:r,Up:r,ArrowRight:i,Right:i,ArrowDown:c,Down:c},u={left:function(e){return{x:-e,y:0}},up:function(e){return{x:0,y:-e}},right:function(e){return{x:e,y:0}},down:function(e){return{x:0,y:e}}};function d(o,r,i,c,d){var f=this;this._config=(0,e.assign)({},t,o||{}),r.addListener(n,function(e){var t=e.keyEvent,n=s[t.key];if(n&&!r.isCmd(t)){var o=r.isShift(t);return f.moveSelection(n,o),!0}}),this.moveSelection=function(e,t){var n=d.get();if(n.length){var o=this._config[t?"moveSpeedAccelerated":"moveSpeed"],r=u[e](o);c.allowed("elements.move",{shapes:n})&&i.moveElements(n,r)}}}d.$inject=["config.keyboardMoveSelection","keyboard","modeling","rules","selection"];
},{"min-dash":"AmEv"}],"fXhe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("../keyboard")),t=o(require("../selection")),r=o(require("./KeyboardMoveSelection"));function o(e){return e&&e.__esModule?e:{default:e}}var d=exports.default={__depends__:[e.default,t.default],__init__:["keyboardMoveSelection"],keyboardMoveSelection:["type",r.default]};
},{"../keyboard":"KmVM","../selection":"NUwH","./KeyboardMoveSelection":"JX1v"}],"LVt9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r,exports.getReferencePoint=o;var e=require("min-dash"),n=require("./ResizeUtil"),i=require("../../layout/LayoutUtil"),t=10;function r(e,t,r,o){this._dragging=o,this._rules=t;var a=this;e.on("resize.start",function(e){var n,t,r;n=e.context,t=n.resizeConstraints,r=n.minBounds,void 0===t&&(void 0===r&&(r=a.computeMinResizeBox(n)),n.resizeConstraints={min:(0,i.asTRBL)(r)})}),e.on("resize.move",function(e){var i={x:e.dx,y:e.dy};!function(e,i){var t,r=e.shape,s=e.direction,o=e.resizeConstraints;e.delta=i,t=(0,n.resizeBounds)(r,s,i),e.newBounds=(0,n.ensureConstraints)(t,o),e.canExecute=a.canResize(e)}(e.context,i)}),e.on("resize.end",function(e){!function(e){var n=e.shape,t=e.canExecute,o=e.newBounds;if(t){if(!s(n,o=(0,i.roundBounds)(o)))return;r.resizeShape(n,o)}}(e.context)})}function s(e,n){return e.x!==n.x||e.y!==n.y||e.width!==n.width||e.height!==n.height}function o(e,n){var t=(0,i.getMid)(e),r=(0,i.asTRBL)(e),s={x:t.x,y:t.y};return-1!==n.indexOf("n")?s.y=r.top:-1!==n.indexOf("s")&&(s.y=r.bottom),-1!==n.indexOf("e")?s.x=r.right:-1!==n.indexOf("w")&&(s.x=r.left),s}function a(e){return"n"===e||"s"===e?"resize-ns":"e"===e||"w"===e?"resize-ew":"nw"===e||"se"===e?"resize-nwse":"resize-nesw"}r.prototype.canResize=function(n){var i=this._rules,t=(0,e.pick)(n,["newBounds","shape","delta","direction"]);return i.allowed("shape.resize",t)},r.prototype.activate=function(n,i,t){var r,s,u=this._dragging;if("string"==typeof t&&(t={direction:t}),!(s=(r=(0,e.assign)({shape:i},t)).direction))throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");u.init(n,o(i,s),"resize",{autoActivate:!0,cursor:a(s),data:{shape:i,context:r}})},r.prototype.computeMinResizeBox=function(e){var i,r,s=e.shape,o=e.direction;return i=e.minDimensions||{width:t,height:t},r=(0,n.computeChildrenBBox)(s,e.childrenBoxPadding),(0,n.getMinResizeBounds)(o,s,i,r)},r.$inject=["eventBus","rules","modeling","dragging"];
},{"min-dash":"AmEv","./ResizeUtil":"yRPe","../../layout/LayoutUtil":"aRzT"}],"cMFw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var e=require("tiny-svg"),t="djs-resizing",r="resize-not-ok",a=500;function s(s,i,n){s.on("resize.move",a,function(a){var s,o,c,d;s=a.context,o=s.shape,c=s.newBounds,(d=s.frame)||(d=s.frame=n.addFrame(o,i.getActiveLayer()),i.addMarker(o,t)),c.width>5&&(0,e.attr)(d,{x:c.x,width:c.width}),c.height>5&&(0,e.attr)(d,{y:c.y,height:c.height}),s.canExecute?(0,e.classes)(d).remove(r):(0,e.classes)(d).add(r)}),s.on("resize.cleanup",function(r){var a,s;a=r.context,s=a.shape,a.frame&&(0,e.remove)(a.frame),i.removeMarker(s,t)})}s.$inject=["eventBus","canvas","previewSupport"];
},{"tiny-svg":"WdCh"}],"ktOJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=h;var e=require("min-dash"),t=require("tiny-svg"),r=require("min-dom"),i=require("../../util/Mouse"),s=require("../../util/SvgTransformUtil"),n=require("./Resize"),a=-6,o=8,c=20,d="djs-resizer",u=["n","w","s","e","nw","ne","se","sw"];function h(t,r,i,s){this._resize=s,this._canvas=r;var n=this;t.on("selection.changed",function(t){var r=t.newSelection;n.removeResizers(),1===r.length&&(0,e.forEach)(r,(0,e.bind)(n.addResizer,n))}),t.on("shape.changed",function(e){var t=e.element;i.isSelected(t)&&(n.removeResizers(),n.addResizer(t))})}function v(e){var t={x:0,y:0};return-1!==e.indexOf("e")?t.x=-a:-1!==e.indexOf("w")&&(t.x=a),-1!==e.indexOf("s")?t.y=-a:-1!==e.indexOf("n")&&(t.y=a),t}function f(e){return!!e.waypoints}h.prototype.makeDraggable=function(e,t,s){var n=this._resize;function a(t){(0,i.isPrimaryButton)(t)&&n.activate(t,e,s)}r.event.bind(t,"mousedown",a),r.event.bind(t,"touchstart",a)},h.prototype._createResizer=function(e,r,i,n){var a=this._getResizersParent(),u=v(n),h=(0,t.create)("g");(0,t.classes)(h).add(d),(0,t.classes)(h).add(d+"-"+e.id),(0,t.classes)(h).add(d+"-"+n),(0,t.append)(a,h);var f=(0,t.create)("rect");(0,t.attr)(f,{x:-o/2+u.x,y:-o/2+u.y,width:o,height:o}),(0,t.classes)(f).add(d+"-visual"),(0,t.append)(h,f);var p=(0,t.create)("rect");return(0,t.attr)(p,{x:-c/2+u.x,y:-c/2+u.y,width:c,height:c}),(0,t.classes)(p).add(d+"-hit"),(0,t.append)(h,p),(0,s.transform)(h,r,i),h},h.prototype.createResizer=function(e,t){var r=(0,n.getReferencePoint)(e,t),i=this._createResizer(e,r.x,r.y,t);this.makeDraggable(e,i,t)},h.prototype.addResizer=function(t){var r=this;!f(t)&&this._resize.canResize({shape:t})&&(0,e.forEach)(u,function(e){r.createResizer(t,e)})},h.prototype.removeResizers=function(){var e=this._getResizersParent();(0,t.clear)(e)},h.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")},h.$inject=["eventBus","canvas","selection","resize"];
},{"min-dash":"AmEv","tiny-svg":"WdCh","min-dom":"fWg5","../../util/Mouse":"sz9Y","../../util/SvgTransformUtil":"EK9i","./Resize":"LVt9"}],"Hvr4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=d(require("../rules")),r=d(require("../dragging")),i=d(require("../preview-support")),t=d(require("./Resize")),u=d(require("./ResizePreview")),s=d(require("./ResizeHandles"));function d(e){return e&&e.__esModule?e:{default:e}}var a=exports.default={__depends__:[e.default,r.default,i.default],__init__:["resize","resizePreview","resizeHandles"],resize:["type",t.default],resizePreview:["type",u.default],resizeHandles:["type",s.default]};
},{"../rules":"GwI0","../dragging":"gdZp","../preview-support":"ENK2","./Resize":"LVt9","./ResizePreview":"cMFw","./ResizeHandles":"ktOJ"}],"LvnZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=d;var t=require("min-dash"),e=require("./LabelUtil"),i=require("../../util/ModelUtil"),n=require("../modeling/util/ModelingUtil"),a=require("../../util/DiUtil"),o=require("../../util/LabelUtil"),s=2e3;function d(t,e,i,a,o,d,g){function r(t,e){(e||(0,n.isAny)(t,["bpmn:Task","bpmn:TextAnnotation","bpmn:Participant"])||p(t))&&a.activate(t)}this._bpmnFactory=e,this._canvas=i,this._modeling=o,this._textRenderer=g,a.registerProvider(this),t.on("element.dblclick",function(t){r(t.element,!0)}),t.on(["autoPlace.start","canvas.viewbox.changing","drag.init","element.mousedown","popupMenu.open","root.set","selection.changed"],function(t){a.isActive()&&a.complete()}),t.on(["shape.remove","connection.remove"],s,function(t){a.isActive(t.element)&&a.cancel()}),t.on(["commandStack.changed"],function(t){a.isActive()&&a.cancel()}),t.on("directEditing.activate",function(t){d.removeResizers()}),t.on("create.end",500,function(t){var e=t.context,i=e.shape,n=t.context.canExecute;t.isTouch||n&&(e.hints&&!1===e.hints.createElementsBehavior||r(i))}),t.on("autoPlace.end",500,function(t){r(t.shape)})}function p(t){return(0,i.is)(t,"bpmn:SubProcess")&&!(0,a.isExpanded)(t)}function g(t){return(0,i.is)(t,"bpmn:SubProcess")&&(0,a.isExpanded)(t)}function r(t){return(0,i.is)(t,"bpmn:Participant")&&!(0,a.isExpanded)(t)}function h(t){return(0,i.is)(t,"bpmn:Participant")&&(0,a.isExpanded)(t)}function l(t){return!t||!t.trim()}d.$inject=["eventBus","bpmnFactory","canvas","directEditing","modeling","resizeHandles","textRenderer"],d.prototype.activate=function(a){var s=(0,e.getLabel)(a);if(void 0!==s){var d={text:s},g=this.getEditingBBox(a);(0,t.assign)(d,g);var r={};return((0,n.isAny)(a,["bpmn:Task","bpmn:Participant","bpmn:Lane","bpmn:CallActivity"])||p(a))&&(0,t.assign)(r,{centerVertically:!0}),(0,o.isLabelExternal)(a)&&(0,t.assign)(r,{autoResize:!0}),(0,i.is)(a,"bpmn:TextAnnotation")&&(0,t.assign)(r,{resizable:!0,autoResize:!0}),(0,t.assign)(d,{options:r}),d}},d.prototype.getEditingBBox=function(e){var a=this._canvas,s=e.label||e,d=a.getAbsoluteBBox(s),l=d.x+d.width/2,x=d.y+d.height/2,c={x:d.x,y:d.y},u=a.zoom(),m=this._textRenderer.getDefaultStyle(),f=this._textRenderer.getExternalStyle(),b=f.fontSize*u,v=f.lineHeight,y=m.fontSize*u,B=m.lineHeight,w={fontFamily:this._textRenderer.getDefaultStyle().fontFamily,fontWeight:this._textRenderer.getDefaultStyle().fontWeight};((0,i.is)(e,"bpmn:Lane")||h(e))&&((0,t.assign)(c,{width:d.height,height:30*u,x:d.x-d.height/2+15*u,y:x-30*u/2}),(0,t.assign)(w,{fontSize:y+"px",lineHeight:B,paddingTop:7*u+"px",paddingBottom:7*u+"px",paddingLeft:5*u+"px",paddingRight:5*u+"px",transform:"rotate(-90deg)"})),((0,n.isAny)(e,["bpmn:Task","bpmn:CallActivity"])||r(e)||p(e))&&((0,t.assign)(c,{width:d.width,height:d.height}),(0,t.assign)(w,{fontSize:y+"px",lineHeight:B,paddingTop:7*u+"px",paddingBottom:7*u+"px",paddingLeft:5*u+"px",paddingRight:5*u+"px"})),g(e)&&((0,t.assign)(c,{width:d.width,x:d.x}),(0,t.assign)(w,{fontSize:y+"px",lineHeight:B,paddingTop:7*u+"px",paddingBottom:7*u+"px",paddingLeft:5*u+"px",paddingRight:5*u+"px"}));var A=90*u,E=7*u,L=4*u;if(s.labelTarget&&((0,t.assign)(c,{width:A,height:d.height+E+L,x:l-A/2,y:d.y-E}),(0,t.assign)(w,{fontSize:b+"px",lineHeight:v,paddingTop:E+"px",paddingBottom:L+"px"})),(0,o.isLabelExternal)(s)&&!(0,o.hasExternalLabel)(s)&&!(0,o.isLabel)(s)){var S=(0,o.getExternalLabelMid)(e),T=a.getAbsoluteBBox({x:S.x,y:S.y,width:0,height:0}),z=b+E+L;(0,t.assign)(c,{width:A,height:z,x:T.x-A/2,y:T.y-z/2}),(0,t.assign)(w,{fontSize:b+"px",lineHeight:v,paddingTop:E+"px",paddingBottom:L+"px"})}return(0,i.is)(e,"bpmn:TextAnnotation")&&((0,t.assign)(c,{width:d.width,height:d.height,minWidth:30*u,minHeight:10*u}),(0,t.assign)(w,{textAlign:"left",paddingTop:5*u+"px",paddingBottom:7*u+"px",paddingLeft:7*u+"px",paddingRight:5*u+"px",fontSize:y+"px",lineHeight:B})),{bounds:c,style:w}},d.prototype.update=function(t,e,n,a){var o,s;(0,i.is)(t,"bpmn:TextAnnotation")&&(s=this._canvas.getAbsoluteBBox(t),o={x:t.x,y:t.y,width:t.width/s.width*a.width,height:t.height/s.height*a.height}),l(e)&&(e=null),this._modeling.updateLabel(t,e,o)};
},{"min-dash":"AmEv","./LabelUtil":"v5cn","../../util/ModelUtil":"HvoA","../modeling/util/ModelingUtil":"YK7B","../../util/DiUtil":"lWoN","../../util/LabelUtil":"yKfU"}],"N1IA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("tiny-svg"),t=require("../../util/ModelUtil"),i=require("diagram-js/lib/util/SvgTransformUtil"),a="djs-element-hidden",n="djs-label-hidden";function r(r,c,d,l){var s,h,m,p=this,g=c.getDefaultLayer();r.on("directEditing.activate",function(r){var d=r.active;if(s=d.element.label||d.element,(0,t.is)(s,"bpmn:TextAnnotation")){h=c.getAbsoluteBBox(s),m=(0,e.create)("g");var v=l.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:0,my:0}}),u=p.path=(0,e.create)("path");(0,e.attr)(u,{d:v,strokeWidth:2,stroke:o(s)}),(0,e.append)(m,u),(0,e.append)(g,m),(0,i.translate)(m,s.x,s.y)}(0,t.is)(s,"bpmn:TextAnnotation")||s.labelTarget?c.addMarker(s,a):((0,t.is)(s,"bpmn:Task")||(0,t.is)(s,"bpmn:CallActivity")||(0,t.is)(s,"bpmn:SubProcess")||(0,t.is)(s,"bpmn:Participant"))&&c.addMarker(s,n)}),r.on("directEditing.resize",function(i){if((0,t.is)(s,"bpmn:TextAnnotation")){var a=i.height,n=i.dy,r=Math.max(s.height/h.height*(a+n),0),o=l.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:r,position:{mx:0,my:0}});(0,e.attr)(p.path,{d:o})}}),r.on(["directEditing.complete","directEditing.cancel"],function(t){var i=t.active;i&&(c.removeMarker(i.element.label||i.element,a),c.removeMarker(s,n)),s=void 0,h=void 0,m&&((0,e.remove)(m),m=void 0)})}function o(e,i){return(0,t.getDi)(e).get("stroke")||i||"black"}r.$inject=["eventBus","canvas","elementRegistry","pathMap"];
},{"tiny-svg":"WdCh","../../util/ModelUtil":"HvoA","diagram-js/lib/util/SvgTransformUtil":"EK9i"}],"Dg2X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("diagram-js/lib/features/change-support")),i=a(require("diagram-js/lib/features/resize")),r=a(require("diagram-js-direct-editing")),t=a(require("./LabelEditingProvider")),d=a(require("./LabelEditingPreview"));function a(e){return e&&e.__esModule?e:{default:e}}var l=exports.default={__depends__:[e.default,i.default,r.default],__init__:["labelEditingProvider","labelEditingPreview"],labelEditingProvider:["type",t.default],labelEditingPreview:["type",d.default]};
},{"diagram-js/lib/features/change-support":"PhDZ","diagram-js/lib/features/resize":"Hvr4","diagram-js-direct-editing":"ZHLi","./LabelEditingProvider":"LvnZ","./LabelEditingPreview":"N1IA"}],"hdLl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var t=a(require("inherits-browser")),e=require("diagram-js/lib/layout/LayoutUtil"),n=require("diagram-js/lib/util/Math"),i=require("../../../util/LabelUtil"),r=a(require("diagram-js/lib/command/CommandInterceptor"));function a(t){return t&&t.__esModule?t:{default:t}}var o=["top","bottom","left","right"],c=10;function u(t,a){function o(t){if((0,i.hasExternalLabel)(t)){var r=f(t);r&&function(t,i){var r=(0,e.getMid)(t),o=t.label,u=(0,e.getMid)(o);if(!o.parent)return;var s,l=(0,e.asTRBL)(t);switch(i){case"top":s={x:r.x,y:l.top-c-o.height/2};break;case"left":s={x:l.left-c-o.width/2,y:r.y};break;case"bottom":s={x:r.x,y:l.bottom+c+o.height/2};break;case"right":s={x:l.right+c+o.width/2,y:r.y}}var f=(0,n.substract)(s,u);a.moveShape(o,f)}(t,r)}}r.default.call(this,t),this.postExecuted(["connection.create","connection.layout","connection.updateWaypoints"],function(t){var e=t.context,n=e.connection,i=n.source,r=n.target;!1!==(e.hints||{}).createElementsBehavior&&(o(i),o(r))}),this.postExecuted(["label.create"],function(t){var e=t.context,n=e.shape;!1!==(e.hints||{}).createElementsBehavior&&o(n.labelTarget)}),this.postExecuted(["elements.create"],function(t){var e=t.context,n=e.elements;!1!==(e.hints||{}).createElementsBehavior&&n.forEach(function(t){o(t)})})}function s(t){var n,i=t.host,r=(0,e.getMid)(t),a=(0,e.getOrientation)(r,i);return n=a.indexOf("-")>=0?a.split("-"):[a],o.filter(function(t){return-1===n.indexOf(t)})}function l(t){var n=(0,e.getMid)(t);return[].concat(t.incoming.map(function(t){return t.waypoints[t.waypoints.length-2]}),t.outgoing.map(function(t){return t.waypoints[1]})).map(function(t){return d(n,t)})}function f(t){var n=(0,e.getMid)(t.label),i=d((0,e.getMid)(t),n);if(h(i)){var r=l(t);if(t.host){var a=s(t);r=r.concat(a)}var c=o.filter(function(t){return-1===r.indexOf(t)});if(-1===c.indexOf(i))return c[0]}}function d(t,n){return(0,e.getOrientation)(n,t,5)}function h(t){return-1!==o.indexOf(t)}(0,t.default)(u,r.default),u.$inject=["eventBus","modeling"];
},{"inherits-browser":"hUM3","diagram-js/lib/layout/LayoutUtil":"aRzT","diagram-js/lib/util/Math":"GvSn","../../../util/LabelUtil":"yKfU","diagram-js/lib/command/CommandInterceptor":"FIh1"}],"RTXu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=n(require("inherits-browser")),t=require("../../../util/ModelUtil"),i=n(require("diagram-js/lib/command/CommandInterceptor"));function n(e){return e&&e.__esModule?e:{default:e}}function r(e,n,r){i.default.call(this,e),this.preExecute("shape.append",function(e){var i=e.source,n=e.shape;e.position||((0,t.is)(n,"bpmn:TextAnnotation")?e.position={x:i.x+i.width/2+75,y:i.y-50-n.height/2}:e.position={x:i.x+i.width+80+n.width/2,y:i.y+i.height/2})},!0)}(0,e.default)(r,i.default),r.$inject=["eventBus","elementFactory","bpmnRules"];
},{"inherits-browser":"hUM3","../../../util/ModelUtil":"HvoA","diagram-js/lib/command/CommandInterceptor":"FIh1"}],"U4cy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=o(require("inherits-browser")),t=require("../../../util/ModelUtil"),n=o(require("diagram-js/lib/command/CommandInterceptor")),i=require("min-dash");function o(e){return e&&e.__esModule?e:{default:e}}function r(e,o){e.invoke(n.default,this),this.postExecute("shape.move",function(e){var n=e.newParent,r=e.shape,u=(0,i.filter)(r.incoming.concat(r.outgoing),function(e){return(0,t.is)(e,"bpmn:Association")});(0,i.forEach)(u,function(e){o.moveConnection(e,{x:0,y:0},n)})},!0)}(0,e.default)(r,n.default),r.$inject=["injector","modeling"];
},{"inherits-browser":"hUM3","../../../util/ModelUtil":"HvoA","diagram-js/lib/command/CommandInterceptor":"FIh1","min-dash":"AmEv"}],"PX1x":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=a(require("inherits-browser")),t=a(require("diagram-js/lib/command/CommandInterceptor")),n=require("../../../util/ModelUtil"),r=require("../util/ModelingUtil"),i=require("../../../util/LabelUtil");function a(e){return e&&e.__esModule?e:{default:e}}var o=500;function u(e,n){n.invoke(t.default,this),this._bpmnReplace=e;var r=this;this.postExecuted("elements.create",o,function(e){var t=e.elements;1===(t=t.filter(function(e){return s(e,e.host)})).length&&t.map(function(e){return t.indexOf(e)}).forEach(function(n){var i=t[n];e.elements[n]=r.replaceShape(t[n],i)})},!0),this.preExecute("elements.move",o,function(e){var t=e.shapes,n=e.newHost;if(1===t.length){var i=t[0];s(i,n)&&(e.shapes=[r.replaceShape(i,n)])}},!0)}function l(e){var t=(0,n.getBusinessObject)(e).eventDefinitions;return t&&t[0]}function s(e,t){return!(0,i.isLabel)(e)&&(0,r.isAny)(e,["bpmn:IntermediateThrowEvent","bpmn:IntermediateCatchEvent"])&&!!t}u.$inject=["bpmnReplace","injector"],(0,e.default)(u,t.default),u.prototype.replaceShape=function(e,t){var n=l(e),r={type:"bpmn:BoundaryEvent",host:t};return n&&(r.eventDefinitionType=n.$type),this._bpmnReplace.replaceElement(e,r,{layoutConnection:!1})};
},{"inherits-browser":"hUM3","diagram-js/lib/command/CommandInterceptor":"FIh1","../../../util/ModelUtil":"HvoA","../util/ModelingUtil":"YK7B","../../../util/LabelUtil":"yKfU"}],"jJ3v":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=o(require("inherits-browser")),t=o(require("diagram-js/lib/command/CommandInterceptor")),n=require("../../../util/ModelUtil"),r=require("min-dash");function o(e){return e&&e.__esModule?e:{default:e}}function i(e,o){function i(e){return(0,r.filter)(e.attachers,function(e){return(0,n.is)(e,"bpmn:BoundaryEvent")})}t.default.call(this,e),this.postExecute("connection.create",function(e){var t=e.context.source,r=e.context.target,a=i(r);(0,n.is)(t,"bpmn:EventBasedGateway")&&(0,n.is)(r,"bpmn:ReceiveTask")&&a.length>0&&o.removeElements(a)}),this.postExecute("connection.reconnect",function(e){var t=e.context.oldSource,a=e.context.newSource;(0,n.is)(t,"bpmn:Gateway")&&(0,n.is)(a,"bpmn:EventBasedGateway")&&(0,r.forEach)(a.outgoing,function(e){var t=e.target,r=i(t);(0,n.is)(t,"bpmn:ReceiveTask")&&r.length>0&&o.removeElements(r)})})}i.$inject=["eventBus","modeling"],(0,e.default)(i,t.default);
},{"inherits-browser":"hUM3","diagram-js/lib/command/CommandInterceptor":"FIh1","../../../util/ModelUtil":"HvoA","min-dash":"AmEv"}],"nTcQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=n(require("inherits-browser")),t=require("../../../util/ModelUtil"),r=n(require("diagram-js/lib/command/CommandInterceptor")),i=require("../util/ModelingUtil");function n(e){return e&&e.__esModule?e:{default:e}}function a(e){e.invoke(r.default,this),this.preExecute("shape.create",1500,function(e){var r=e.context,n=r.parent,a=r.shape;(0,t.is)(n,"bpmn:Lane")&&!(0,t.is)(a,"bpmn:Lane")&&(r.parent=(0,i.getParent)(n,"bpmn:Participant"))})}a.$inject=["injector"],(0,e.default)(a,r.default);
},{"inherits-browser":"hUM3","../../../util/ModelUtil":"HvoA","diagram-js/lib/command/CommandInterceptor":"FIh1","../util/ModelingUtil":"YK7B"}],"ZUTj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=a(require("inherits-browser")),t=a(require("diagram-js/lib/command/CommandInterceptor")),r=require("../../../util/ModelUtil");function a(e){return e&&e.__esModule?e:{default:e}}function i(e,a,i){t.default.call(this,e),this.preExecute("shape.create",function(e){var t=e.context.shape;if((0,r.is)(t,"bpmn:DataObjectReference")&&"label"!==t.type){var i=a.create("bpmn:DataObject");t.businessObject.dataObjectRef=i}})}i.$inject=["eventBus","bpmnFactory","moddle"],(0,e.default)(i,t.default);
},{"inherits-browser":"hUM3","diagram-js/lib/command/CommandInterceptor":"FIh1","../../../util/ModelUtil":"HvoA"}],"quXB":[function(require,module,exports) {
var process = require("process");
var e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.PARTICIPANT_BORDER_WIDTH=void 0,exports.default=f;var t=c(require("inherits-browser")),s=c(require("diagram-js/lib/command/CommandInterceptor")),r=require("../../../util/ModelUtil"),i=require("../../../util/LabelUtil"),n=require("diagram-js/lib/util/Elements"),a=require("min-dash"),o=require("diagram-js/lib/layout/LayoutUtil");function c(e){return e&&e.__esModule?e:{default:e}}var p=20,u=20,h=exports.PARTICIPANT_BORDER_WIDTH=30,l=2e3;function f(e,t,o){function c(){var t=e.getRootElement();return(0,r.is)(t,"bpmn:Collaboration")?t:o.makeCollaboration()}s.default.call(this,t),t.on(["create.start","shape.move.start"],l,function(t){var s=t.context,o=s.shape,c=e.getRootElement();if((0,r.is)(o,"bpmn:Participant")&&(0,r.is)(c,"bpmn:Process")&&c.children.length){var p=c.children.filter(function(e){return!(0,r.is)(e,"bpmn:Group")&&!(0,i.isLabel)(e)&&!d(e)});if(p.length){var u=(0,n.getBBox)(p),h=m(o,u);(0,a.assign)(o,h),s.createConstraints=g(o,u)}}}),t.on("create.start",l,function(s){var i=s.context.shape,n=e.getRootElement(),a=e.getGraphics(n);function o(e){e.element=n,e.gfx=a}(0,r.is)(i,"bpmn:Participant")&&(0,r.is)(n,"bpmn:Process")&&(t.on("element.hover",l,o),t.once("create.cleanup",function(){t.off("element.hover",o)}))}),this.preExecute("elements.create",l,function(e){var t,s=e.elements,i=e.parent,n=b(s);n&&(0,r.is)(i,"bpmn:Process")&&(e.parent=c(),(t=e.hints=e.hints||{}).participant=n,t.process=i,t.processRef=(0,r.getBusinessObject)(n).get("processRef"))},!0),this.preExecute("shape.create",function(e){var t=e.parent,s=e.shape;(0,r.is)(s,"bpmn:Participant")&&(0,r.is)(t,"bpmn:Process")&&(e.parent=c(),e.process=t,e.processRef=(0,r.getBusinessObject)(s).get("processRef"))},!0),this.execute("shape.create",function(e){var t=e.hints||{},s=e.process||t.process,i=e.shape,n=t.participant;!s||n&&i!==n||(0,r.getBusinessObject)(i).set("processRef",(0,r.getBusinessObject)(s))},!0),this.revert("shape.create",function(e){var t=e.hints||{},s=e.process||t.process,i=e.processRef||t.processRef,n=e.shape,a=t.participant;!s||a&&n!==a||(0,r.getBusinessObject)(n).set("processRef",i)},!0),this.postExecute("shape.create",function(e){var t=e.hints||{},s=e.process||e.hints.process,r=e.shape,i=t.participant;if(s){var n=s.children.slice();i?r===i&&o.moveElements(n,{x:0,y:0},i):o.moveElements(n,{x:0,y:0},r)}},!0)}function m(e,t){t={width:t.width+2*p+h,height:t.height+2*u};var s=Math.max(e.width,t.width),r=Math.max(e.height,t.height);return{x:-s/2,y:-r/2,width:s,height:r}}function g(e,t){return{bottom:(t=(0,o.asTRBL)(t)).top+e.height/2-u,left:t.right-e.width/2+p,top:t.bottom-e.height/2+u,right:t.left+e.width/2-p-h}}function d(e){return!!e.waypoints}function b(e){return(0,a.find)(e,function(e){return(0,r.is)(e,"bpmn:Participant")})}f.$inject=["canvas","eventBus","modeling"],(0,t.default)(f,s.default);
},{"inherits-browser":"hUM3","diagram-js/lib/command/CommandInterceptor":"FIh1","../../../util/ModelUtil":"HvoA","../../../util/LabelUtil":"yKfU","diagram-js/lib/util/Elements":"KTcn","min-dash":"AmEv","diagram-js/lib/layout/LayoutUtil":"aRzT","process":"g5IB"}],"p9Ou":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=i(require("inherits-browser")),t=i(require("diagram-js/lib/command/CommandInterceptor")),n=require("diagram-js/lib/util/Collections"),r=require("min-dash"),o=require("../../../util/ModelUtil");function i(e){return e&&e.__esModule?e:{default:e}}var c="__targetRef_placeholder";function a(e,o){function i(e,t){var i=e.get("properties"),a=(0,r.find)(i,function(e){return e.name===c});return!a&&t&&(a=o.create("bpmn:Property",{name:c}),(0,n.add)(i,a)),a}function a(e,t){var o=i(e);o&&(function(e,t,n){var o=e.get("dataInputAssociations");return(0,r.find)(o,function(e){return e!==n&&e.targetRef===t})}(e,o,t)||(0,n.remove)(e.get("properties"),o))}function s(e){var t,n=e.context,r=n.connection,o=r.businessObject,c=r.target,u=c&&c.businessObject,s=n.newTarget,d=s&&s.businessObject,l=n.oldTarget||n.target,f=l&&l.businessObject,b=r.businessObject;f&&f!==u&&a(f,o),d&&d!==u&&a(d,o),u?(t=i(u,!0),b.targetRef=t):b.targetRef=null}t.default.call(this,e),this.executed(["connection.create","connection.delete","connection.move","connection.reconnect"],u(s)),this.reverted(["connection.create","connection.delete","connection.move","connection.reconnect"],u(s))}function u(e){return function(t){var n=t.context.connection;if((0,o.is)(n,"bpmn:DataInputAssociation"))return e(t)}}a.$inject=["eventBus","bpmnFactory"],(0,e.default)(a,t.default);
},{"inherits-browser":"hUM3","diagram-js/lib/command/CommandInterceptor":"FIh1","diagram-js/lib/util/Collections":"Pujo","min-dash":"AmEv","../../../util/ModelUtil":"HvoA"}],"xpo1":[function(require,module,exports) {
"use strict";function t(t){this._bpmnUpdater=t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t,t.$inject=["bpmnUpdater"],t.prototype.execute=function(t){var e=t.dataStoreBo,a=t.dataStoreDi,n=t.newSemanticParent,r=t.newDiParent;t.oldSemanticParent=e.$parent,t.oldDiParent=a.$parent,this._bpmnUpdater.updateSemanticParent(e,n),this._bpmnUpdater.updateDiParent(a,r)},t.prototype.revert=function(t){var e=t.dataStoreBo,a=t.dataStoreDi,n=t.oldSemanticParent,r=t.oldDiParent;this._bpmnUpdater.updateSemanticParent(e,n),this._bpmnUpdater.updateDiParent(a,r)};
},{}],"AO72":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=i(require("inherits-browser")),t=i(require("diagram-js/lib/command/CommandInterceptor")),n=require("../../../util/ModelUtil"),r=require("../util/ModelingUtil"),a=i(require("../cmd/UpdateSemanticParentHandler"));function i(e){return e&&e.__esModule?e:{default:e}}function o(e,i,o,u){function p(e){return e.children.filter(function(e){return(0,n.is)(e,"bpmn:DataStoreReference")&&!e.labelTarget})}function l(e,t){var r=e.businessObject||e;if(t=t||o.filter(function(e){return(0,n.is)(e,"bpmn:Participant")&&(0,n.getBusinessObject)(e).processRef})[0]){var a=t.businessObject||t;i.execute("dataStore.updateContainment",{dataStoreBo:r,dataStoreDi:(0,n.getDi)(e),newSemanticParent:a.processRef||a,newDiParent:(0,n.getDi)(t)})}}t.default.call(this,u),i.registerHandler("dataStore.updateContainment",a.default),this.preExecute("shape.create",function(e){var t=e.context,r=t.shape;(0,n.is)(r,"bpmn:DataStoreReference")&&"label"!==r.type&&(t.hints||(t.hints={}),t.hints.autoResize=!1)}),this.preExecute("elements.move",function(e){var t=e.context,r=t.shapes;r.filter(function(e){return(0,n.is)(e,"bpmn:DataStoreReference")}).length&&(t.hints||(t.hints={}),t.hints.autoResize=r.filter(function(e){return!(0,n.is)(e,"bpmn:DataStoreReference")}))}),this.postExecute("shape.create",function(e){var t=e.context.shape,r=t.parent;(0,n.is)(t,"bpmn:DataStoreReference")&&"label"!==t.type&&(0,n.is)(r,"bpmn:Collaboration")&&l(t)}),this.postExecute("shape.move",function(e){var t=e.context,r=t.shape,a=t.oldParent,i=r.parent;(0,n.is)(a,"bpmn:Collaboration")||(0,n.is)(r,"bpmn:DataStoreReference")&&"label"!==r.type&&(0,n.is)(i,"bpmn:Collaboration")&&l(r,(0,n.is)(a,"bpmn:Participant")?a:c(a,"bpmn:Participant"))}),this.postExecute("shape.delete",function(t){var a=t.context.shape,i=e.getRootElement();(0,r.isAny)(a,["bpmn:Participant","bpmn:SubProcess"])&&(0,n.is)(i,"bpmn:Collaboration")&&p(i).filter(function(e){return s(e,a)}).forEach(function(e){l(e)})}),this.postExecute("canvas.updateRoot",function(e){var t=e.context,r=t.oldRoot,a=t.newRoot;p(r).forEach(function(e){(0,n.is)(a,"bpmn:Process")&&l(e,a)})})}function s(e,t){for(var n=e.businessObject||e,r=t.businessObject||t;n.$parent;){if(n.$parent===r.processRef||r)return!0;n=n.$parent}return!1}function c(e,t){for(;e.parent;){if((0,n.is)(e.parent,t))return e.parent;e=e.parent}}o.$inject=["canvas","commandStack","elementRegistry","eventBus"],(0,e.default)(o,t.default);
},{"inherits-browser":"hUM3","diagram-js/lib/command/CommandInterceptor":"FIh1","../../../util/ModelUtil":"HvoA","../util/ModelingUtil":"YK7B","../cmd/UpdateSemanticParentHandler":"xpo1"}],"i5lL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=l(require("inherits-browser")),t=l(require("diagram-js/lib/command/CommandInterceptor")),n=require("../../../util/ModelUtil"),i=require("../util/LaneUtil"),a=require("diagram-js/lib/util/Elements");function l(e){return e&&e.__esModule?e:{default:e}}var s=500;function r(e,l,r){t.default.call(this,e),this.postExecuted("shape.delete",s,function(e){var t=e.context,l=t.hints,s=t.shape,u=t.oldParent;(0,n.is)(s,"bpmn:Lane")&&(l&&l.nested||function(e,t){var n,l,s,u=(0,i.getChildLanes)(t),h=[],o=[];(0,a.eachElement)(u,function(t){return t.y>e.y?o.push(t):h.push(t),t.children}),u.length&&(n=o.length&&h.length?e.height/2:e.height,h.length&&(l=r.calculateAdjustments(h,"y",n,e.y-10),r.makeSpace(l.movingShapes,l.resizingShapes,{x:0,y:n},"s")),o.length&&(s=r.calculateAdjustments(o,"y",-n,e.y+e.height+10),r.makeSpace(s.movingShapes,s.resizingShapes,{x:0,y:-n},"n")))}(s,u))})}r.$inject=["eventBus","modeling","spaceTool"],(0,e.default)(r,t.default);
},{"inherits-browser":"hUM3","diagram-js/lib/command/CommandInterceptor":"FIh1","../../../util/ModelUtil":"HvoA","../util/LaneUtil":"yOBs","diagram-js/lib/util/Elements":"KTcn"}],"J3i0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=i(require("inherits-browser")),t=i(require("diagram-js/lib/command/CommandInterceptor")),n=require("../../../util/ModelUtil"),r=require("../../../util/LabelUtil");function i(e){return e&&e.__esModule?e:{default:e}}var a=500;function o(e,n){n.invoke(t.default,this),this._bpmnReplace=e;var r=this;this.postExecuted("elements.create",a,function(e){var t=e.elements;t.filter(function(e){return c(e,e.host)}).map(function(e){return t.indexOf(e)}).forEach(function(n){e.elements[n]=r.replaceShape(t[n])})},!0),this.preExecute("elements.move",a,function(e){var t=e.shapes,n=e.newHost;t.forEach(function(e,i){var a=e.host;c(e,s(t,a)?a:n)&&(t[i]=r.replaceShape(e))})},!0)}function u(e){var t=(0,n.getBusinessObject)(e).eventDefinitions;return t&&t[0]}function c(e,t){return!(0,r.isLabel)(e)&&(0,n.is)(e,"bpmn:BoundaryEvent")&&!t}function s(e,t){return-1!==e.indexOf(t)}o.$inject=["bpmnReplace","injector"],(0,e.default)(o,t.default),o.prototype.replaceShape=function(e){var t,n=u(e);return t=n?{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:n.$type}:{type:"bpmn:IntermediateThrowEvent"},this._bpmnReplace.replaceElement(e,t,{layoutConnection:!1})};
},{"inherits-browser":"hUM3","diagram-js/lib/command/CommandInterceptor":"FIh1","../../../util/ModelUtil":"HvoA","../../../util/LabelUtil":"yKfU"}],"vMbr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=o(require("inherits-browser")),t=require("min-dash"),n=require("diagram-js/lib/layout/LayoutUtil"),r=o(require("diagram-js/lib/command/CommandInterceptor")),i=require("diagram-js/lib/util/LineIntersection");function o(e){return e&&e.__esModule?e:{default:e}}function a(e,o,a){function u(e,r,u){var l,p,d,g,h,f,m,x,v=r.waypoints,y=e.outgoing.slice(),w=e.incoming.slice();x=(0,t.isNumber)(u.width)?(0,n.getMid)(u):u;var b=(0,i.getApproxIntersection)(v,x);if(b){if(l=v.slice(0,b.index),p=v.slice(b.index+(b.bendpoint?1:0)),!l.length||!p.length)return;d=b.bendpoint?v[b.index]:x,1!==l.length&&s(e,l[l.length-1])||l.push(c(d)),1!==p.length&&s(e,p[0])||p.unshift(c(d))}g=r.source,h=r.target,o.canConnect(g,e,r)&&(a.reconnectEnd(r,e,l||x),f=r),o.canConnect(e,h,r)&&(f?m=a.connect(e,h,{type:r.type,waypoints:p}):(a.reconnectStart(r,e,p||x),m=r));var E=[].concat(f&&(0,t.filter)(w,function(e){return e.source===f.source})||[],m&&(0,t.filter)(y,function(e){return e.target===m.target})||[]);E.length&&a.removeElements(E)}r.default.call(this,e),this.preExecute("elements.move",function(e){var r=e.newParent,a=e.shapes,s=e.delta,c=a[0];if(c&&r){r&&r.waypoints&&(e.newParent=r=r.parent);var u=(0,n.getMid)(c),l={x:u.x+s.x,y:u.y+s.y},p=(0,t.find)(r.children,function(e){return o.canInsert(a,e)&&(0,i.getApproxIntersection)(e.waypoints,l)});p&&(e.targetFlow=p,e.position=l)}},!0),this.postExecuted("elements.move",function(e){var t=e.shapes,n=e.targetFlow,r=e.position;n&&u(t[0],n,r)},!0),this.preExecute("shape.create",function(e){var t=e.parent,n=e.shape;o.canInsert(n,t)&&(e.targetFlow=t,e.parent=t.parent)},!0),this.postExecuted("shape.create",function(e){var t=e.shape,n=e.targetFlow,r=e.position;n&&u(t,n,r)},!0)}function s(e,t){var n=t.x,r=t.y;return n>=e.x&&n<=e.x+e.width&&r>=e.y&&r<=e.y+e.height}function c(e){return(0,t.assign)({},e)}(0,e.default)(a,r.default),a.$inject=["eventBus","bpmnRules","modeling"];
},{"inherits-browser":"hUM3","min-dash":"AmEv","diagram-js/lib/layout/LayoutUtil":"aRzT","diagram-js/lib/command/CommandInterceptor":"FIh1","diagram-js/lib/util/LineIntersection":"BNw3"}],"NDRW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=r(require("inherits-browser")),n=r(require("diagram-js/lib/command/CommandInterceptor")),t=require("../../../util/ModelUtil");function r(e){return e&&e.__esModule?e:{default:e}}function i(e,r){n.default.call(this,e),this.preExecuted("connection.create",function(e){var n=e.context,i=n.connection,c=n.source,u=n.target,a=n.hints;if((!a||!1!==a.createElementsBehavior)&&o(i)){((0,t.is)(c,"bpmn:EventBasedGateway")?u.incoming.filter(o):u.incoming.filter(function(e){return o(e)&&(0,t.is)(e.source,"bpmn:EventBasedGateway")})).forEach(function(e){r.removeConnection(e)})}}),this.preExecuted("shape.replace",function(e){var n=e.context.newShape;(0,t.is)(n,"bpmn:EventBasedGateway")&&n.outgoing.filter(o).reduce(function(e,n){return e.includes(n.target)?e:e.concat(n.target)},[]).forEach(function(e){e.incoming.filter(o).forEach(function(t){const i=e.incoming.filter(o).filter(function(e){return e.source===n});(t.source!==n||i.length>1)&&r.removeConnection(t)})})})}function o(e){return(0,t.is)(e,"bpmn:SequenceFlow")}i.$inject=["eventBus","modeling"],(0,e.default)(i,n.default);
},{"inherits-browser":"hUM3","diagram-js/lib/command/CommandInterceptor":"FIh1","../../../util/ModelUtil":"HvoA"}],"AenB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=require("../util/LaneUtil"),o=require("../../../util/ModelUtil"),t=require("../util/ModelingUtil"),n=1500,r=2e3;function a(a,c,s){c.on(["create.hover","create.move","create.out","create.end","shape.move.hover","shape.move.move","shape.move.out","shape.move.end"],n,function(n){var r=n.context.shape||n.shape,c=n.hover;(0,o.is)(c,"bpmn:Lane")&&!(0,t.isAny)(r,["bpmn:Lane","bpmn:Participant"])&&(n.hover=(0,e.getLanesRoot)(c),n.hoverGfx=a.getGraphics(n.hover));var v=s.getRootElement();c!==v&&(r.labelTarget||(0,o.is)(r,"bpmn:Group"))&&(n.hover=v,n.hoverGfx=a.getGraphics(n.hover))}),c.on(["connect.hover","connect.out","connect.end","connect.cleanup","global-connect.hover","global-connect.out","global-connect.end","global-connect.cleanup"],n,function(t){var n=t.hover;(0,o.is)(n,"bpmn:Lane")&&(t.hover=(0,e.getLanesRoot)(n)||n,t.hoverGfx=a.getGraphics(t.hover))}),c.on(["bendpoint.move.hover"],n,function(t){var n=t.context,r=t.hover,c=n.type;(0,o.is)(r,"bpmn:Lane")&&/reconnect/.test(c)&&(t.hover=(0,e.getLanesRoot)(r)||r,t.hoverGfx=a.getGraphics(t.hover))}),c.on(["connect.start"],n,function(t){var n=t.context,r=n.start;(0,o.is)(r,"bpmn:Lane")&&(n.start=(0,e.getLanesRoot)(r)||r)}),c.on("shape.move.start",r,function(t){var n=t.shape;(0,o.is)(n,"bpmn:Lane")&&(t.shape=(0,e.getLanesRoot)(n)||n)})}a.$inject=["elementRegistry","eventBus","canvas"];
},{"../util/LaneUtil":"yOBs","../../../util/ModelUtil":"HvoA","../util/ModelingUtil":"YK7B"}],"anqy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCategory=t,exports.createCategoryValue=r,exports.linkCategoryValue=n,exports.unlinkCategory=o,exports.unlinkCategoryValue=a;var e=require("diagram-js/lib/util/Collections");function t(e){return e.create("bpmn:Category")}function r(e){return e.create("bpmn:CategoryValue")}function n(t,r,n){return(0,e.add)(r.get("categoryValue"),t),t.$parent=r,(0,e.add)(n.get("rootElements"),r),r.$parent=n,t}function a(t){var r=t.$parent;return r&&((0,e.remove)(r.get("categoryValue"),t),t.$parent=null),t}function o(t){var r=t.$parent;return r&&((0,e.remove)(r.get("rootElements"),t),t.$parent=null),t}
},{"diagram-js/lib/util/Collections":"Pujo"}],"TJDk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=n(require("inherits-browser")),t=n(require("diagram-js/lib/command/CommandInterceptor")),r=require("../../../util/ModelUtil"),a=require("./util/CategoryUtil");function n(e){return e&&e.__esModule?e:{default:e}}var u=770;function o(e,n,o,c,i,l){function s(e,t,n){var u=o.filter(function(e){return(0,r.is)(e,"bpmn:Group")}).filter(function(e){return e.businessObject!==n});t&&!function(e,t){return e.some(function(e){var a=(0,r.getBusinessObject)(e);return(a.categoryValueRef&&a.categoryValueRef.$parent)===t})}(u,t)&&(0,a.unlinkCategory)(t),e&&!function(e,t){return e.some(function(e){return(0,r.getBusinessObject)(e).categoryValueRef===t})}(u,e)&&(0,a.unlinkCategoryValue)(e)}function g(e,t){return(0,a.linkCategoryValue)(e,t,n.getDefinitions())}function f(t,u){var o=(0,r.getBusinessObject)(t),c=o.categoryValueRef;c||(c=o.categoryValueRef=u.categoryValue=u.categoryValue||(0,a.createCategoryValue)(e));var i=c.$parent;i||(i=c.$parent=u.category=u.category||(0,a.createCategory)(e)),g(c,i,n.getDefinitions())}function p(e,t){var a=t.category,n=t.categoryValue,u=(0,r.getBusinessObject)(e);n?(u.categoryValueRef=null,s(n,a,u)):s(null,u.categoryValueRef.$parent,u)}function y(t,r){var a=e.create(t.$type);return l.copyElement(t,a,null,r)}i.invoke(t.default,this),this.execute("label.create",function(e){var t=e.context,a=t.labelTarget;(0,r.is)(a,"bpmn:Group")&&f(a,t)}),this.revert("label.create",function(e){var t=e.context,a=t.labelTarget;(0,r.is)(a,"bpmn:Group")&&p(a,t)}),this.execute("shape.delete",function(e){var t=e.context,a=t.shape,n=(0,r.getBusinessObject)(a);if((0,r.is)(a,"bpmn:Group")&&!a.labelTarget){var u=t.categoryValue=n.categoryValueRef;u&&(s(u,t.category=u.$parent,n),n.categoryValueRef=null)}}),this.reverted("shape.delete",function(e){var t=e.context,a=t.shape;if((0,r.is)(a,"bpmn:Group")&&!a.labelTarget){var n=t.category,u=t.categoryValue,o=(0,r.getBusinessObject)(a);u&&(o.categoryValueRef=u,g(u,n))}}),this.execute("shape.create",function(e){var t=e.context,a=t.shape;(0,r.is)(a,"bpmn:Group")&&!a.labelTarget&&(0,r.getBusinessObject)(a).categoryValueRef&&f(a,t)}),this.reverted("shape.create",function(e){var t=e.context,a=t.shape;(0,r.is)(a,"bpmn:Group")&&!a.labelTarget&&(0,r.getBusinessObject)(a).categoryValueRef&&p(a,t)}),c.on("copyPaste.copyElement",u,function(e){var t=e.descriptor,a=e.element;if((0,r.is)(a,"bpmn:Group")&&!a.labelTarget){var n=(0,r.getBusinessObject)(a);if(n.categoryValueRef){var u=n.categoryValueRef;t.categoryValue=y(u,!0),u.$parent&&(t.category=y(u.$parent,!0))}}}),c.on("copyPaste.pasteElement",u,function(e){var t=e.descriptor,r=t.businessObject,a=t.categoryValue,n=t.category;a&&(a=r.categoryValueRef=y(a)),n&&(a.$parent=y(n)),delete t.category,delete t.categoryValue})}o.$inject=["bpmnFactory","bpmnjs","elementRegistry","eventBus","injector","moddleCopy"],(0,e.default)(o,t.default);
},{"inherits-browser":"hUM3","diagram-js/lib/command/CommandInterceptor":"FIh1","../../../util/ModelUtil":"HvoA","./util/CategoryUtil":"anqy"}],"Fy7I":[function(require,module,exports) {
"use strict";function x(x,y,e,t){var r,u,n,o;return 0==(r=(t.y-e.y)*(y.x-x.x)-(t.x-e.x)*(y.y-x.y))?null:(u=x.y-e.y,n=x.x-e.x,o=((t.x-e.x)*u-(t.y-e.y)*n)/r,{x:Math.round(x.x+o*(y.x-x.x)),y:Math.round(x.y+o*(y.y-x.y))})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=x;
},{}],"XpEn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("diagram-js/lib/layout/LayoutUtil"),t=n(require("./util/LineIntersect"));function n(e){return e&&e.__esModule?e:{default:e}}function r(n){function r(e,n,r){var i,a={x:r.x,y:r.y-50},o={x:r.x-50,y:r.y},l=(0,t.default)(e,n,r,a),d=(0,t.default)(e,n,r,o);i=l&&d?u(l,r)>u(d,r)?d:l:l||d,e.original=i}n.on("bpmnElement.added",function(t){var n,u,i=t.element;i.waypoints&&(r((u=(n=i).waypoints)[0],u[1],(0,e.getMid)(n.source)),r(u[u.length-1],u[u.length-2],(0,e.getMid)(n.target)))})}function u(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}r.$inject=["eventBus"];
},{"diagram-js/lib/layout/LayoutUtil":"aRzT","./util/LineIntersect":"Fy7I"}],"gNDd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=a(require("inherits-browser")),t=a(require("diagram-js/lib/command/CommandInterceptor")),i=require("../../../util/ModelUtil"),r=require("../util/ModelingUtil");function a(e){return e&&e.__esModule?e:{default:e}}function n(e){t.default.call(this,e);var a=["bpmn:Participant","bpmn:Lane"];this.executed(["shape.move","shape.create","shape.resize"],function(e){var t=e.context.shape,n=(0,i.getBusinessObject)(t),s=(0,i.getDi)(t);(0,r.isAny)(n,a)&&!s.get("isHorizontal")&&s.set("isHorizontal",!0)})}n.$inject=["eventBus"],(0,e.default)(n,t.default);
},{"inherits-browser":"hUM3","diagram-js/lib/command/CommandInterceptor":"FIh1","../../../util/ModelUtil":"HvoA","../util/ModelingUtil":"YK7B"}],"KQc1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("diagram-js/lib/features/bendpoints/GeometricUtil");Object.keys(e).forEach(function(t){"default"!==t&&"__esModule"!==t&&(t in exports&&exports[t]===e[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return e[t]}}))});
},{"diagram-js/lib/features/bendpoints/GeometricUtil":"oQci"}],"YEIs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getAttachment=x;var t=Math.sqrt,e=Math.min,n=Math.max,r=Math.abs;function i(t){return Math.pow(t,2)}function o(e,n){return t(i(e.x-n.x)+i(e.y-n.y))}function x(t,n){var r,i,x,y,c,s,p,h,l,d,g=0;for(g=0;g<n.length-1;g++){if(f(r=n[g],i=n[g+1])?s=[r]:(x=o(t,r),y=o(t,i),s=u(r,i,t,e(x,y))),s.length<1)throw new Error("expected between [1, 2] circle -> line intersections");1===s.length&&(p={type:"bendpoint",position:s[0],segmentIndex:g,bendpointIndex:f(r,s[0])?g:g+1}),2===s.length&&(p={type:"segment",position:c=a(s[0],s[1]),segmentIndex:g,relativeLocation:o(r,c)/o(r,i)}),h=o(p.position,t),(!d||l>h)&&(d=p,l=h)}return d}function u(e,n,r,i){var o=n.x-e.x,x=n.y-e.y,u=r.x-e.x,c=r.y-e.y,a=o*o+x*x,s=(o*u+x*c)/a,f=s*s-(u*u+c*c-i*i)/a;if(f<0&&f>-1e-6&&(f=0),f<0)return[];var p=t(f),h=-s+p,l=-s-p,d={x:e.x-o*h,y:e.y-x*h};return 0===f?[d]:[d,{x:e.x-o*l,y:e.y-x*l}].filter(function(t){return y(t,e,n)})}function y(t,e,n){return c(t.x,e.x,n.x)&&c(t.y,e.y,n.y)}function c(t,r,i){return t>=e(r,i)-s&&t<=n(r,i)+s}function a(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}var s=.1;function f(t,e){return r(t.x-e.x)<=s&&r(t.y-e.y)<=s}
},{}],"MdDa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.findNewLineStartIndex=i,exports.getAnchorPointAdjustment=r;var t=require("./GeometricUtil"),e=require("./LineAttachmentUtil"),n=require("diagram-js/lib/layout/LayoutUtil");function i(t,e,n,i){var r=n.segmentIndex,a=e.length-t.length;if(i.segmentMove){var u=i.segmentMove.segmentStartIndex,x=i.segmentMove.newSegmentStartIndex;return r===u?x:r>=x?r+a<x?x:r+a:r}if(i.bendpointMove){var g,d=i.bendpointMove.insert,l=i.bendpointMove.bendpointIndex;if(0===a)return r;if(r>=l&&(g=d?r+1:r-1),r<l)if(g=r,d&&"bendpoint"!==n.type&&l-1===r)o(e,l)<n.relativeLocation&&g++;return g}return 0===a?r:i.connectionStart&&0===r?0:i.connectionEnd&&r===t.length-2?e.length-2:Math.floor((e.length-2)/2)}function r(r,g,d,l){var c=0,s=0,y={point:r,delta:{x:0,y:0}},v=(0,e.getAttachment)(r,d),f=v.segmentIndex,p=i(d,g,v,l);if(p<0||p>g.length-2||null===p)return y;var h=u(d,f),m=u(g,p),P=v.position,b=x(h,P),M=a(h,m);if("bendpoint"===v.type){var I=g.length-d.length,A=v.bendpointIndex,S=d[A];if(-1!==g.indexOf(S))return y;if(0===I){var D=g[A];return{delta:{x:c=D.x-v.position.x,y:s=D.y-v.position.y},point:{x:r.x+c,y:r.y+s}}}I<0&&0!==A&&A<d.length-1&&(b=o(d,A))}var L={x:(m[1].x-m[0].x)*b+m[0].x,y:(m[1].y-m[0].y)*b+m[0].y},j=(0,t.rotateVector)({x:r.x-P.x,y:r.y-P.y},M);return c=L.x+j.x-r.x,s=L.y+j.y-r.y,{point:(0,n.roundPoint)(L),delta:(0,n.roundPoint)({x:c,y:s})}}function o(e,n){var i=(0,t.getDistancePointPoint)(e[n-1],e[n]);return i/(i+(0,t.getDistancePointPoint)(e[n],e[n+1]))}function a(e,n){var i=(0,t.getAngle)(e);return(0,t.getAngle)(n)-i}function u(t,e){return[t[e],t[e+1]]}function x(e,n){var i=(0,t.getDistancePointPoint)(e[0],e[1]),r=(0,t.getDistancePointPoint)(e[0],n);return 0===i?0:r/i}
},{"./GeometricUtil":"KQc1","./LineAttachmentUtil":"YEIs","diagram-js/lib/layout/LayoutUtil":"aRzT"}],"QwEE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.findNewLabelLineStartIndex=t,exports.getLabelAdjustment=n;var e=require("./LayoutUtil");function t(t,n,r,i){return(0,e.findNewLineStartIndex)(t,n,r,i)}function n(t,n,i,u){var o=r(t);return(0,e.getAnchorPointAdjustment)(o,n,i,u).delta}function r(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}
},{"./LayoutUtil":"MdDa"}],"pUry":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getNewAttachPoint=r,exports.getNewAttachShapeDelta=i;var t=require("../layout/LayoutUtil"),e=require("./PositionUtil");function r(r,i,n){var o=(0,e.center)(i),u=(0,e.center)(n),l=(0,e.delta)(r,o),a=l.x*(n.width/i.width),h=l.y*(n.height/i.height);return(0,t.roundPoint)({x:u.x+a,y:u.y+h})}function i(r,i,o){var u=(0,e.center)(r),l=(0,e.center)(i),a=(0,e.center)(o),h=(0,e.delta)(r,u),f=(0,e.delta)(u,l),x=n(u,i,o);if(x)return x;var y=f.x*(o.width/i.width),c=f.y*(o.height/i.height),g=a.x+y,s=a.y+c;return(0,t.roundPoint)({x:g+h.x-r.x,y:s+h.y-r.y})}function n(e,r,i){var n=(0,t.asTRBL)(r),u=(0,t.asTRBL)(i);if(o(n,u))return null;var l,a,h=(0,t.getOrientation)(r,e);if("top"===h)l={x:0,y:u.bottom-n.bottom};else if("bottom"===h)l={x:0,y:u.top-n.top};else if("right"===h)l={x:u.left-n.left,y:0};else{if("left"!==h)return null;l={x:u.right-n.right,y:0}}return a={x:e.x+l.x,y:e.y+l.y},(0,t.getOrientation)(i,a)!==h?null:l}function o(t,e){return u(t,e)||l(t,e)}function u(t,e){return t.right!==e.right&&t.left!==e.left}function l(t,e){return t.top!==e.top&&t.bottom!==e.bottom}
},{"../layout/LayoutUtil":"aRzT","./PositionUtil":"XPIE"}],"JAgB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asEdges=f,exports.default=p,exports.getReferencePoint=y,exports.getReferencePointDelta=g;var e=require("min-dash"),t=d(require("inherits-browser")),n=require("../../../util/ModelUtil"),i=require("../../../util/LabelUtil"),a=require("../../label-editing/LabelUtil"),l=require("./util/LabelLayoutUtil"),r=d(require("diagram-js/lib/command/CommandInterceptor")),o=require("diagram-js/lib/util/AttachUtil"),s=require("diagram-js/lib/layout/LayoutUtil"),u=require("diagram-js/lib/util/PositionUtil"),c=require("./util/GeometricUtil");function d(e){return e&&e.__esModule?e:{default:e}}var h={width:90,height:20},b="name",x="text";function p(t,o,u,c){r.default.call(this,t),this.postExecute("element.updateProperties",function(e){var t=e.context,i=t.element,a=t.properties;if(b in a&&o.updateLabel(i,a[b]),x in a&&(0,n.is)(i,"bpmn:TextAnnotation")){var l=c.getTextAnnotationBounds({x:i.x,y:i.y,width:i.width,height:i.height},a[x]||"");o.updateLabel(i,a.text,l)}}),this.postExecute(["shape.create","connection.create"],function(e){var t=e.context;if(!1!==(t.hints||{}).createElementsBehavior){var n=t.shape||t.connection,l=n.businessObject;if(!(0,i.isLabel)(n)&&(0,i.isLabelExternal)(n)&&(0,a.getLabel)(n)){var r=(0,i.getExternalLabelMid)(n),s=c.getExternalLabelBounds(h,(0,a.getLabel)(n));o.createLabel(n,r,{id:l.id+"_label",businessObject:l,width:s.width,height:s.height})}}}),this.postExecute("shape.delete",function(e){var t=e.context,n=t.labelTarget,i=t.hints||{};n&&!1!==i.unsetLabel&&o.updateLabel(n,null,null,{removeShape:!1})}),this.postExecute(["label.create"],function(t){var i,a=t.context,l=a.shape,r=a.labelTarget;r&&(0,n.is)(r,"bpmn:BaseElement")&&((i=(0,n.getDi)(r)).label||(i.label=u.create("bpmndi:BPMNLabel",{bounds:u.create("dc:Bounds")}),l.di=i),(0,e.assign)(i.label.bounds,{x:l.x,y:l.y,width:l.width,height:l.height}))}),this.postExecute(["connection.layout","connection.updateWaypoints"],function(t){var n=t.context;if(!1!==(n.hints||{}).labelBehavior){var i,a=n.connection.label;a&&a.parent&&(i=function(t){var n=t.context,i=n.connection,a=i.label,r=(0,e.assign)({},n.hints),o=n.newWaypoints||i.waypoints,s=n.oldWaypoints;return void 0===r.startChanged&&(r.startChanged=!!r.connectionStart),void 0===r.endChanged&&(r.endChanged=!!r.connectionEnd),(0,l.getLabelAdjustment)(a,o,s,r)}(t),o.moveShape(a,i))}}),this.postExecute(["shape.replace"],function(e){var t=e.context,a=t.newShape,l=t.oldShape,r=(0,n.getBusinessObject)(a);r&&(0,i.isLabelExternal)(r)&&l.label&&a.label&&(a.label.x=l.label.x,a.label.y=l.label.y)}),this.postExecute("shape.resize",function(e){var t=e.context,n=t.shape,a=t.newBounds,l=t.oldBounds;if((0,i.hasExternalLabel)(n)){var r=n.label,u=g(y((0,s.getMid)(r),f(l)),l,a);o.moveShape(r,u)}})}function g(e,t,n){var i=(0,o.getNewAttachPoint)(e,t,n);return(0,s.roundPoint)((0,u.delta)(i,e))}function y(e,t){if(t.length){var n=v(e,t);return(0,c.perpendicularFoot)(e,n)}}function f(e){return[[{x:e.x,y:e.y},{x:e.x+(e.width||0),y:e.y}],[{x:e.x+(e.width||0),y:e.y},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y+(e.height||0)},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y},{x:e.x,y:e.y+(e.height||0)}]]}function v(t,n){var i=n.map(function(e){return{line:e,distance:(0,c.getDistancePointLine)(t,e)}});return(0,e.sortBy)(i,"distance")[0].line}(0,t.default)(p,r.default),p.$inject=["eventBus","modeling","bpmnFactory","textRenderer"];
},{"min-dash":"AmEv","inherits-browser":"hUM3","../../../util/ModelUtil":"HvoA","../../../util/LabelUtil":"yKfU","../../label-editing/LabelUtil":"v5cn","./util/LabelLayoutUtil":"QwEE","diagram-js/lib/command/CommandInterceptor":"FIh1","diagram-js/lib/util/AttachUtil":"pUry","diagram-js/lib/layout/LayoutUtil":"aRzT","diagram-js/lib/util/PositionUtil":"XPIE","./util/GeometricUtil":"KQc1"}],"TE9T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getConnectionAdjustment=e;var t=require("./LayoutUtil");function e(e,n,o,r){return(0,t.getAnchorPointAdjustment)(e,n,o,r).point}
},{"./LayoutUtil":"MdDa"}],"gG2J":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var n=require("min-dash"),t=i(require("inherits-browser")),o=i(require("diagram-js/lib/command/CommandInterceptor")),e=require("./util/ConnectionLayoutUtil");function i(n){return n&&n.__esModule?n:{default:n}}function a(t,i){function a(t,o){var i=t.context,a=i.connection,c=(0,n.assign)({},i.hints),s=i.newWaypoints||a.waypoints,r=i.oldWaypoints;return void 0===c.startChanged&&(c.startChanged=!!c.connectionStart),void 0===c.endChanged&&(c.endChanged=!!c.connectionEnd),(0,e.getConnectionAdjustment)(o,s,r,c)}o.default.call(this,t),this.postExecute(["connection.layout","connection.updateWaypoints"],function(n){var t=n.context.connection,o=t.outgoing;t.incoming.forEach(function(t){var o=t.waypoints[t.waypoints.length-1],e=a(n,o),c=[].concat(t.waypoints.slice(0,-1),[e]);i.updateWaypoints(t,c)}),o.forEach(function(t){var o=t.waypoints[0],e=a(n,o),c=[].concat([e],t.waypoints.slice(1));i.updateWaypoints(t,c)})}),this.postExecute(["connection.move"],function(n){var t=n.context,o=t.connection,e=o.outgoing,a=o.incoming,c=t.delta;a.forEach(function(n){var t=n.waypoints[n.waypoints.length-1],o={x:t.x+c.x,y:t.y+c.y},e=[].concat(n.waypoints.slice(0,-1),[o]);i.updateWaypoints(n,e)}),e.forEach(function(n){var t=n.waypoints[0],o={x:t.x+c.x,y:t.y+c.y},e=[].concat([o],n.waypoints.slice(1));i.updateWaypoints(n,e)})})}(0,t.default)(a,o.default),a.$inject=["eventBus","modeling"];
},{"min-dash":"AmEv","inherits-browser":"hUM3","diagram-js/lib/command/CommandInterceptor":"FIh1","./util/ConnectionLayoutUtil":"TE9T"}],"fUdJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMovedSourceAnchor=o,exports.getMovedTargetAnchor=u,exports.getResizedSourceAnchor=r,exports.getResizedTargetAnchor=i;var t=require("../../../../util/AttachUtil"),e=require("../../../../layout/LayoutUtil"),n=require("min-dash");function r(e,n,r){var i=c(e),o=g(i,n),u=i[0];return o.length?o[o.length-1]:(0,t.getNewAttachPoint)(u.original||u,r,n)}function i(e,n,r){var i=c(e),o=g(i,n),u=i[i.length-1];return o.length?o[0]:(0,t.getNewAttachPoint)(u.original||u,r,n)}function o(e,n,r){var i=c(e),o=a(n,r),u=i[0];return(0,t.getNewAttachPoint)(u.original||u,o,n)}function u(e,n,r){var i=c(e),o=a(n,r),u=i[i.length-1];return(0,t.getNewAttachPoint)(u.original||u,o,n)}function a(t,e){return{x:t.x-e.x,y:t.y-e.y,width:t.width,height:t.height}}function c(t){var e=t.waypoints;if(!e.length)throw new Error("connection#"+t.id+": no waypoints");return e}function g(t,e){var r=(0,n.map)(t,l);return(0,n.filter)(r,function(t){return h(t,e)})}function h(t,n){return"intersect"===(0,e.getOrientation)(n,t,1)}function l(t){return t.original||t}
},{"../../../../util/AttachUtil":"pUry","../../../../layout/LayoutUtil":"aRzT","min-dash":"AmEv"}],"rdM3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=a(require("inherits-browser")),n=a(require("diagram-js/lib/command/CommandInterceptor")),i=require("../../../util/ModelUtil"),r=require("../../../util/DiUtil"),t=require("diagram-js/lib/util/Elements"),o=require("diagram-js/lib/features/modeling/cmd/helper/AnchorsHelper");function a(e){return e&&e.__esModule?e:{default:e}}function u(e,i){n.default.call(this,e),this.postExecute("shape.replace",function(e){var n=e.oldShape,r=e.newShape;if(c(n,r)){var t=s(n);t.incoming.forEach(function(e){var t=(0,o.getResizedTargetAnchor)(e,r,n);i.reconnectEnd(e,r,t)}),t.outgoing.forEach(function(e){var t=(0,o.getResizedSourceAnchor)(e,r,n);i.reconnectStart(e,r,t)})}},!0)}function c(e,n){return(0,i.is)(e,"bpmn:Participant")&&(0,r.isExpanded)(e)&&(0,i.is)(n,"bpmn:Participant")&&!(0,r.isExpanded)(n)}function s(e){var n=(0,t.selfAndAllChildren)([e],!1),r=[],o=[];return n.forEach(function(n){n!==e&&(n.incoming.forEach(function(e){(0,i.is)(e,"bpmn:MessageFlow")&&r.push(e)}),n.outgoing.forEach(function(e){(0,i.is)(e,"bpmn:MessageFlow")&&o.push(e)}))},[]),{incoming:r,outgoing:o}}u.$inject=["eventBus","modeling"],(0,e.default)(u,n.default);
},{"inherits-browser":"hUM3","diagram-js/lib/command/CommandInterceptor":"FIh1","../../../util/ModelUtil":"HvoA","../../../util/DiUtil":"lWoN","diagram-js/lib/util/Elements":"KTcn","diagram-js/lib/features/modeling/cmd/helper/AnchorsHelper":"fUdJ"}],"YeI8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=require("../../../util/ModelUtil"),t="flow elements must be children of pools/participants";function o(o,i,r){o.on(["shape.move.rejected","create.rejected"],function(o){var n,s,l,a=o.context,p=a.shape,d=a.target;(0,e.is)(d,"bpmn:Collaboration")&&(0,e.is)(p,"bpmn:FlowNode")&&(n=o,s=r(t),i.add({position:{x:n.x+5,y:n.y+5},type:"error",timeout:l||2e3,html:"<div>"+s+"</div>"}))})}o.$inject=["eventBus","tooltips","translate"];
},{"../../../util/ModelUtil":"HvoA"}],"EJ0V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=i(require("inherits-browser")),t=i(require("diagram-js/lib/command/CommandInterceptor")),r=require("../../../util/ModelUtil");function i(e){return e&&e.__esModule?e:{default:e}}function u(e,i){t.default.call(this,e),this.preExecute("shape.resize",function(e){var t=e.shape,u=(0,r.getDi)(t),d=u&&u.get("label");d&&d.get("bounds")&&i.updateModdleProperties(t,d,{bounds:void 0})},!0)}(0,e.default)(u,t.default),u.$inject=["eventBus","modeling"];
},{"inherits-browser":"hUM3","diagram-js/lib/command/CommandInterceptor":"FIh1","../../../util/ModelUtil":"HvoA"}],"LQ6w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=r(require("inherits-browser")),t=require("../../../util/ModelUtil"),n=r(require("diagram-js/lib/command/CommandInterceptor")),i=r(require("./util/LineIntersect"));function r(e){return e&&e.__esModule?e:{default:e}}function o(e,i,r){n.default.call(this,e),this.preExecute("shape.delete",function(e){var n=e.context.shape;if(1===n.incoming.length&&1===n.outgoing.length){var o=n.incoming[0],u=n.outgoing[0];if((0,t.is)(o,"bpmn:SequenceFlow")&&(0,t.is)(u,"bpmn:SequenceFlow")&&i.canConnect(o.source,u.target,o)){var c=l(o.waypoints,u.waypoints);r.reconnectEnd(o,u.target,c)}}})}function u(e){return e.original||e}function l(e,t){var n=(0,i.default)(u(e[e.length-2]),u(e[e.length-1]),u(t[1]),u(t[0]));return n?[].concat(e.slice(0,e.length-1),[n],t.slice(1)):[u(e[0]),u(t[t.length-1])]}(0,e.default)(o,n.default),o.$inject=["eventBus","bpmnRules","modeling"];
},{"inherits-browser":"hUM3","../../../util/ModelUtil":"HvoA","diagram-js/lib/command/CommandInterceptor":"FIh1","./util/LineIntersect":"Fy7I"}],"yRuf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=i(require("inherits-browser")),t=i(require("diagram-js/lib/command/CommandInterceptor")),r=require("../../../util/ModelUtil");function i(e){return e&&e.__esModule?e:{default:e}}function a(e,i){t.default.call(this,e),this.preExecute("shape.delete",function(e){var t=e.shape,i=t.parent;(0,r.is)(t,"bpmn:Participant")&&(e.collaborationRoot=i)},!0),this.postExecute("shape.delete",function(e){var t=e.collaborationRoot;t&&!t.businessObject.participants.length&&i.makeProcess()},!0)}a.$inject=["eventBus","modeling"],(0,e.default)(a,t.default);
},{"inherits-browser":"hUM3","diagram-js/lib/command/CommandInterceptor":"FIh1","../../../util/ModelUtil":"HvoA"}],"LeQL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=require("min-dash"),n=c(require("inherits-browser")),t=c(require("diagram-js/lib/command/CommandInterceptor")),o=require("../../../util/ModelUtil");function c(e){return e&&e.__esModule?e:{default:e}}function i(n,c,i,s){t.default.call(this,n);var r=s.get("dragging",!1);function a(e){var n,t,s=e.source,r=e.target;e.parent&&((0,o.is)(e,"bpmn:SequenceFlow")&&(i.canConnectSequenceFlow(s,r)||(t=!0),i.canConnectMessageFlow(s,r)&&(n="bpmn:MessageFlow")),(0,o.is)(e,"bpmn:MessageFlow")&&(i.canConnectMessageFlow(s,r)||(t=!0),i.canConnectSequenceFlow(s,r)&&(n="bpmn:SequenceFlow")),(0,o.is)(e,"bpmn:Association")&&!i.canConnectAssociation(s,r)&&(t=!0),t&&c.removeConnection(e),n&&c.connect(s,r,{type:n,waypoints:e.waypoints.slice()}))}this.postExecuted("elements.move",function(n){var t=n.closure.allConnections;(0,e.forEach)(t,a)},!0),this.preExecute("connection.reconnect",function(e){var n,t,o=e.context,s=o.connection,a=o.newSource||s.source,u=o.newTarget||s.target;(n=i.canConnect(a,u))&&n.type!==s.type&&(t=c.connect(a,u,{type:n.type,waypoints:s.waypoints.slice()}),c.removeConnection(s),o.connection=t,r&&function(e,n){var t,o=r.context(),c=o&&o.payload.previousSelection;c&&c.length&&-1!==(t=c.indexOf(e))&&c.splice(t,1,n)}(s,t))}),this.postExecuted("element.updateProperties",function(n){var t,o=n.context,i=o.properties,s=o.element,r=s.businessObject;i.default&&(t=(0,e.find)(s.outgoing,(0,e.matchPattern)({id:s.businessObject.default.id})))&&c.updateProperties(t,{conditionExpression:void 0}),i.conditionExpression&&r.sourceRef.default===r&&c.updateProperties(s.source,{default:void 0})})}(0,n.default)(i,t.default),i.$inject=["eventBus","modeling","bpmnRules","injector"];
},{"min-dash":"AmEv","inherits-browser":"hUM3","diagram-js/lib/command/CommandInterceptor":"FIh1","../../../util/ModelUtil":"HvoA"}],"Qk32":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=c(require("inherits-browser")),t=require("min-dash"),n=c(require("diagram-js/lib/command/CommandInterceptor")),s=require("../../../util/DiUtil");function c(e){return e&&e.__esModule?e:{default:e}}function i(e,c,i,r,a,l){r.invoke(n.default,this),this._bpmnReplace=e,this._elementRegistry=i,this._selection=l,this.postExecuted(["elements.create"],500,function(e){var n=e.context,s=n.parent,i=n.elements,r=(0,t.reduce)(i,function(e,t){var n=c.canReplace([t],t.host||t.parent||s);return n?e.concat(n.replacements):e},[]);r.length&&this.replaceElements(i,r)},this),this.postExecuted(["elements.move"],500,function(e){var n=e.context,i=n.newParent,r=n.newHost,a=[];(0,t.forEach)(n.closure.topLevel,function(e){a=(0,s.isEventSubProcess)(e)?a.concat(e.children):a.concat(e)}),1===a.length&&r&&(i=r);var l=c.canReplace(a,i);l&&this.replaceElements(a,l.replacements,r)},this),this.postExecute(["shape.replace"],1500,function(e){var t,n=e.context,s=n.oldShape,i=n.newShape,r=s.attachers;r&&r.length&&(t=c.canReplace(r,i),this.replaceElements(r,t.replacements))},this),this.postExecuted(["shape.replace"],1500,function(e){var t=e.context,n=t.oldShape,s=t.newShape;a.unclaimId(n.businessObject.id,n.businessObject),a.updateProperties(s,{id:n.id})})}(0,e.default)(i,n.default),i.prototype.replaceElements=function(e,n){var s=this._elementRegistry,c=this._bpmnReplace,i=this._selection;(0,t.forEach)(n,function(t){var n={type:t.newElementType},i=s.get(t.oldElementId),r=e.indexOf(i);e[r]=c.replaceElement(i,n,{select:!1})}),n&&i.select(e)},i.$inject=["bpmnReplace","bpmnRules","elementRegistry","injector","modeling","selection"];
},{"inherits-browser":"hUM3","min-dash":"AmEv","diagram-js/lib/command/CommandInterceptor":"FIh1","../../../util/DiUtil":"lWoN"}],"Kn9N":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TEXT_ANNOTATION_MIN_DIMENSIONS=exports.SUB_PROCESS_MIN_DIMENSIONS=exports.PARTICIPANT_MIN_DIMENSIONS=exports.LANE_MIN_DIMENSIONS=exports.GROUP_MIN_DIMENSIONS=void 0,exports.default=h,exports.getParticipantResizeConstraints=E;var t=require("../../../util/ModelUtil"),e=require("../../../util/DiUtil"),i=require("diagram-js/lib/layout/LayoutUtil"),o=require("../util/LaneUtil"),n=1500,r=exports.GROUP_MIN_DIMENSIONS={width:140,height:120},s=exports.LANE_MIN_DIMENSIONS={width:300,height:60},a=exports.PARTICIPANT_MIN_DIMENSIONS={width:300,height:150},N=exports.SUB_PROCESS_MIN_DIMENSIONS={width:140,height:120},p=exports.TEXT_ANNOTATION_MIN_DIMENSIONS={width:50,height:30};function h(i){i.on("resize.start",n,function(i){var o=i.context,n=o.shape,r=o.direction,s=o.balanced;((0,t.is)(n,"bpmn:Lane")||(0,t.is)(n,"bpmn:Participant"))&&(o.resizeConstraints=E(n,r,s)),(0,t.is)(n,"bpmn:Participant")&&(o.minDimensions=a),(0,t.is)(n,"bpmn:SubProcess")&&(0,e.isExpanded)(n)&&(o.minDimensions=N),(0,t.is)(n,"bpmn:TextAnnotation")&&(o.minDimensions=p)})}h.$inject=["eventBus"];var I=Math.abs,m=Math.min,u=Math.max;function S(t,e,i,o){var n=t[e];t[e]=void 0===n?i:o(i,n)}function _(t,e,i){return S(t,e,i,m)}function c(t,e,i){return S(t,e,i,u)}var M=20,b=50,l=20,d=20;function E(e,n,r){var a=(0,o.getLanesRoot)(e),N=!0,p=!0,h=(0,o.collectLanes)(a,[a]),m=(0,i.asTRBL)(e),u={},S={};return/e/.test(n)?S.right=m.left+s.width:/w/.test(n)&&(S.left=m.right-s.width),h.forEach(function(t){var e=(0,i.asTRBL)(t);/n/.test(n)&&(e.top<m.top-10&&(N=!1),r&&I(m.top-e.bottom)<10&&c(u,"top",e.top+s.height),I(m.top-e.top)<5&&_(S,"top",e.bottom-s.height)),/s/.test(n)&&(e.bottom>m.bottom+10&&(p=!1),r&&I(m.bottom-e.top)<10&&_(u,"bottom",e.bottom-s.height),I(m.bottom-e.bottom)<5&&c(S,"bottom",e.top+s.height))}),a.children.filter(function(e){return!e.hidden&&!e.waypoints&&((0,t.is)(e,"bpmn:FlowElement")||(0,t.is)(e,"bpmn:Artifact"))}).forEach(function(t){var e=(0,i.asTRBL)(t);N&&/n/.test(n)&&_(S,"top",e.top-l),/e/.test(n)&&c(S,"right",e.right+M),p&&/s/.test(n)&&c(S,"bottom",e.bottom+d),/w/.test(n)&&_(S,"left",e.left-b)}),{min:S,max:u}}
},{"../../../util/ModelUtil":"HvoA","../../../util/DiUtil":"lWoN","diagram-js/lib/layout/LayoutUtil":"aRzT","../util/LaneUtil":"yOBs"}],"PN0t":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=require("../../../util/ModelUtil"),i=require("diagram-js/lib/layout/LayoutUtil"),n=require("diagram-js/lib/util/Mouse"),t=1001;function a(a,r){a.on("resize.start",t+500,function(i){var t=i.context,a=t.shape;((0,e.is)(a,"bpmn:Lane")||(0,e.is)(a,"bpmn:Participant"))&&(t.balanced=!(0,n.hasPrimaryModifier)(i))}),a.on("resize.end",t,function(n){var t=n.context,a=t.shape,s=t.canExecute,u=t.newBounds;if((0,e.is)(a,"bpmn:Lane")||(0,e.is)(a,"bpmn:Participant"))return s&&(u=(0,i.roundBounds)(u),r.resizeLane(a,u,t.balanced)),!1})}a.$inject=["eventBus","modeling"];
},{"../../../util/ModelUtil":"HvoA","diagram-js/lib/layout/LayoutUtil":"aRzT","diagram-js/lib/util/Mouse":"sz9Y"}],"zENp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var e=a(require("inherits-browser")),t=require("min-dash"),n=a(require("diagram-js/lib/command/CommandInterceptor")),i=require("diagram-js/lib/util/Collections"),r=require("../../../util/ModelUtil"),o=require("../util/ModelingUtil"),s=require("../../../util/DiUtil");function a(e){return e&&e.__esModule?e:{default:e}}var u=500;function l(e,s,a,l,f){function m(e){return(0,o.isAny)(e,["bpmn:ReceiveTask","bpmn:SendTask"])||d(e,["bpmn:ErrorEventDefinition","bpmn:EscalationEventDefinition","bpmn:MessageEventDefinition","bpmn:SignalEventDefinition"])}function c(n){var i=e.getDefinitions().get("rootElements");return!!(0,t.find)(i,(0,t.matchPattern)({id:n.id}))}function p(e){return(0,r.is)(e,"bpmn:ErrorEventDefinition")?"errorRef":(0,r.is)(e,"bpmn:EscalationEventDefinition")?"escalationRef":(0,r.is)(e,"bpmn:MessageEventDefinition")?"messageRef":(0,r.is)(e,"bpmn:SignalEventDefinition")?"signalRef":void 0}function v(e){if((0,o.isAny)(e,["bpmn:ReceiveTask","bpmn:SendTask"]))return e.get("messageRef");var t=e.get("eventDefinitions")[0];return t.get(p(t))}a.invoke(n.default,this),this.executed(["shape.create","element.updateProperties","element.updateModdleProperties"],function(t){var n=t.shape||t.element;if(m(n)){var o,s=v((0,r.getBusinessObject)(n));s&&!c(s)&&(o=e.getDefinitions().get("rootElements"),(0,i.add)(o,s),t.addedRootElement=s)}},!0),this.reverted(["shape.create","element.updateProperties","element.updateModdleProperties"],function(t){var n=t.addedRootElement;if(n){var r=e.getDefinitions().get("rootElements");(0,i.remove)(r,n)}},!0),s.on("copyPaste.copyElement",function(e){var t=e.descriptor,n=e.element;if(!n.labelTarget&&m(n)){var i=v((0,r.getBusinessObject)(n));i&&(t.referencedRootElement=i)}}),s.on("copyPaste.pasteElement",u,function(e){var t=e.descriptor,n=t.businessObject,i=t.referencedRootElement;i&&(c(i)||(i=l.copyElement(i,f.create(i.$type))),function(e,t){if((0,o.isAny)(e,["bpmn:ReceiveTask","bpmn:SendTask"]))return e.set("messageRef",t);var n=e.get("eventDefinitions")[0];n.set(p(n),t)}(n,i),delete t.referencedRootElement)})}function d(e,n){return(0,t.isArray)(n)||(n=[n]),(0,t.some)(n,function(t){return(0,s.hasEventDefinition)(e,t)})}l.$inject=["bpmnjs","eventBus","injector","moddleCopy","bpmnFactory"],(0,e.default)(l,n.default);
},{"inherits-browser":"hUM3","min-dash":"AmEv","diagram-js/lib/command/CommandInterceptor":"FIh1","diagram-js/lib/util/Collections":"Pujo","../../../util/ModelUtil":"HvoA","../util/ModelingUtil":"YK7B","../../../util/DiUtil":"lWoN"}],"H1o8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=N;var e=require("min-dash"),t=require("../../../util/ModelUtil"),i=require("../../../util/DiUtil"),n=require("./ResizeBehavior"),r=require("../util/LaneUtil"),I=Math.max;function N(r){r.on("spaceTool.getMinDimensions",function(r){var I=r.shapes,N=r.axis,a=r.start,s={};return(0,e.forEach)(I,function(e){var r=e.id;(0,t.is)(e,"bpmn:Participant")&&(u(N)?s[r]=n.PARTICIPANT_MIN_DIMENSIONS:s[r]={width:n.PARTICIPANT_MIN_DIMENSIONS.width,height:h(e,a)}),(0,t.is)(e,"bpmn:SubProcess")&&(0,i.isExpanded)(e)&&(s[r]=n.SUB_PROCESS_MIN_DIMENSIONS),(0,t.is)(e,"bpmn:TextAnnotation")&&(s[r]=n.TEXT_ANNOTATION_MIN_DIMENSIONS),(0,t.is)(e,"bpmn:Group")&&(s[r]=n.GROUP_MIN_DIMENSIONS)}),s})}function u(e){return"x"===e}function h(e,t){var i;return a(e)?(i=s(e,t),I(n.PARTICIPANT_MIN_DIMENSIONS.height,i)):n.PARTICIPANT_MIN_DIMENSIONS.height}function a(e){return!!(0,r.getChildLanes)(e).length}function s(e,t){var i;return i=o((0,r.getChildLanes)(e),t),e.height-i.height+n.LANE_MIN_DIMENSIONS.height}function o(e,t){var i,n,I;for(i=0;i<e.length;i++)if(t>=(n=e[i]).y&&t<=n.y+n.height)return(I=(0,r.getChildLanes)(n)).length?o(I,t):n}N.$inject=["eventBus"];
},{"min-dash":"AmEv","../../../util/ModelUtil":"HvoA","../../../util/DiUtil":"lWoN","./ResizeBehavior":"Kn9N","../util/LaneUtil":"yOBs"}],"TIpB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=l(require("inherits-browser")),t=l(require("diagram-js/lib/command/CommandInterceptor")),n=require("min-dash"),i=require("../../../util/DiUtil"),r=require("../../../util/ModelUtil"),a=require("diagram-js/lib/layout/LayoutUtil"),o=require("diagram-js/lib/util/Elements"),s=require("../../../util/DrilldownUtil");function l(e){return e&&e.__esModule?e:{default:e}}var d=400,p=600,c={x:180,y:160};function u(e,a,o,l,c,u,h){t.default.call(this,a),this._canvas=e,this._eventBus=a,this._modeling=o,this._elementFactory=l,this._bpmnFactory=c,this._bpmnjs=u,this._elementRegistry=h;var m=this;function v(e){return(0,r.is)(e,"bpmn:SubProcess")&&!(0,i.isExpanded)(e)}function f(t){var n=t.shape,i=t.newRootElement,a=(0,r.getBusinessObject)(n);i=m._addDiagram(i||a),t.newRootElement=e.addRootElement(i)}function g(t){var n=t.shape,i=(0,r.getBusinessObject)(n);m._removeDiagram(i);var a=t.newRootElement=h.get((0,s.getPlaneIdFromShape)(i));e.removeRootElement(a)}this.executed("shape.create",function(e){v(e.shape)&&f(e)},!0),this.postExecuted("shape.create",function(e){var t=e.shape,n=e.newRootElement;n&&t.children&&(m._showRecursively(t.children),m._moveChildrenToShape(t,n))},!0),this.reverted("shape.create",function(e){v(e.shape)&&g(e)},!0),this.preExecuted("shape.delete",function(e){var t=e.shape;if(v(t)){var n=h.get((0,s.getPlaneIdFromShape)(t));n&&o.removeElements(n.children.slice())}},!0),this.executed("shape.delete",function(e){v(e.shape)&&g(e)},!0),this.reverted("shape.delete",function(e){v(e.shape)&&f(e)},!0),this.preExecuted("shape.replace",function(t){var n=t.oldShape,i=t.newShape;v(n)&&v(i)&&(t.oldRoot=e.removeRootElement((0,s.getPlaneIdFromShape)(n)))},!0),this.postExecuted("shape.replace",function(t){var n=t.newShape,i=t.oldRoot,r=e.findRoot((0,s.getPlaneIdFromShape)(n));if(i&&r){var a=i.children;o.moveElements(a,{x:0,y:0},r)}},!0),this.executed("element.updateProperties",function(e){var t=e.element;if((0,r.is)(t,"bpmn:SubProcess")){var n=e.properties,i=e.oldProperties.id,a=n.id;if(i!==a){if((0,s.isPlane)(t))return h.updateId(t,(0,s.toPlaneId)(a)),void h.updateId(i,a);h.get((0,s.toPlaneId)(i))&&h.updateId((0,s.toPlaneId)(i),(0,s.toPlaneId)(a))}}},!0),this.reverted("element.updateProperties",function(e){var t=e.element;if((0,r.is)(t,"bpmn:SubProcess")){var n=e.properties,i=e.oldProperties.id,a=n.id;if(i!==a){if((0,s.isPlane)(t))return h.updateId(t,(0,s.toPlaneId)(i)),void h.updateId(a,i);var o=h.get((0,s.toPlaneId)(a));o&&h.updateId(o,(0,s.toPlaneId)(i))}}},!0),a.on("element.changed",function(e){var t=e.element;if((0,s.isPlane)(t)){var n=t,i=h.get((0,s.getShapeIdFromPlane)(n));i&&i!==n&&a.fire("element.changed",{element:i})}}),this.executed("shape.toggleCollapse",d,function(e){var t=e.shape;(0,r.is)(t,"bpmn:SubProcess")&&((0,i.isExpanded)(t)?g(e):(f(e),m._showRecursively(t.children)))},!0),this.reverted("shape.toggleCollapse",d,function(e){var t=e.shape;(0,r.is)(t,"bpmn:SubProcess")&&((0,i.isExpanded)(t)?g(e):(f(e),m._showRecursively(t.children)))},!0),this.postExecuted("shape.toggleCollapse",p,function(e){var t=e.shape;if((0,r.is)(t,"bpmn:SubProcess")){var n=e.newRootElement;n&&((0,i.isExpanded)(t)?m._moveChildrenToShape(n,t):m._moveChildrenToShape(t,n))}},!0),a.on("copyPaste.createTree",function(e){var t=e.element,n=e.children;if(v(t)){var i=(0,s.getPlaneIdFromShape)(t),r=h.get(i);r&&n.push.apply(n,r.children)}}),a.on("copyPaste.copyElement",function(e){var t=e.descriptor,i=e.element,a=e.elements,o=i.parent;if((0,r.is)((0,r.getDi)(o),"bpmndi:BPMNPlane")){var l=(0,s.getShapeIdFromPlane)(o),d=(0,n.find)(a,function(e){return e.id===l});d&&(t.parent=d.id)}}),a.on("copyPaste.pasteElement",function(e){var t=e.descriptor;t.parent&&(v(t.parent)||t.parent.hidden)&&(t.hidden=!0)})}(0,e.default)(u,t.default),u.prototype._moveChildrenToShape=function(e,t){var n,i=this._modeling,r=e.children;if(r){var s=(r=r.concat(r.reduce(function(t,n){return n.label&&n.label.parent!==e?t.concat(n.label):t},[]))).filter(function(e){return!e.hidden});if(s.length){var l=(0,o.getBBox)(s);if(t.x){var d=(0,a.getMid)(t),p=(0,a.getMid)(l);n={x:d.x-p.x,y:d.y-p.y}}else n={x:c.x-l.x,y:c.y-l.y};i.moveElements(r,n,t,{autoResize:!1})}else i.moveElements(r,{x:0,y:0},t,{autoResize:!1})}},u.prototype._showRecursively=function(e,t){var n=this,i=[];return e.forEach(function(e){e.hidden=!!t,i=i.concat(e),e.children&&(i=i.concat(n._showRecursively(e.children,e.collapsed||t)))}),i},u.prototype._addDiagram=function(e){var t=this._bpmnjs.getDefinitions().diagrams;return e.businessObject||(e=this._createNewDiagram(e)),t.push(e.di.$parent),e},u.prototype._createNewDiagram=function(e){var t=this._bpmnFactory,n=this._elementFactory,i=t.create("bpmndi:BPMNPlane",{bpmnElement:e}),r=t.create("bpmndi:BPMNDiagram",{plane:i});return i.$parent=r,n.createRoot({id:(0,s.getPlaneIdFromShape)(e),type:e.$type,di:i,businessObject:e,collapsed:!0})},u.prototype._removeDiagram=function(e){var t=this._bpmnjs.getDefinitions().diagrams,i=(0,n.find)(t,function(t){return t.plane.bpmnElement.id===e.id});return t.splice(t.indexOf(i),1),i},u.$inject=["canvas","eventBus","modeling","elementFactory","bpmnFactory","bpmnjs","elementRegistry"];
},{"inherits-browser":"hUM3","diagram-js/lib/command/CommandInterceptor":"FIh1","min-dash":"AmEv","../../../util/DiUtil":"lWoN","../../../util/ModelUtil":"HvoA","diagram-js/lib/layout/LayoutUtil":"aRzT","diagram-js/lib/util/Elements":"KTcn","../../../util/DrilldownUtil":"KVfl"}],"Kbme":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=n(require("inherits-browser")),t=n(require("diagram-js/lib/command/CommandInterceptor")),i=require("../../../util/ModelUtil"),r=require("../../../util/DiUtil.js");function n(e){return e&&e.__esModule?e:{default:e}}function a(e,n){e.invoke(t.default,this),this.postExecuted("shape.replace",function(e){var t=e.context.oldShape,a=e.context.newShape;if((0,i.is)(a,"bpmn:SubProcess")&&((0,i.is)(t,"bpmn:Task")||(0,i.is)(t,"bpmn:CallActivity"))&&(0,r.isExpanded)(a)){var o=u(a);n.createShape({type:"bpmn:StartEvent"},o,a)}})}function u(e){return{x:e.x+e.width/6,y:e.y+e.height/2}}a.$inject=["injector","modeling"],(0,e.default)(a,t.default);
},{"inherits-browser":"hUM3","diagram-js/lib/command/CommandInterceptor":"FIh1","../../../util/ModelUtil":"HvoA","../../../util/DiUtil.js":"lWoN"}],"SrNM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=o(require("inherits-browser")),i=o(require("diagram-js/lib/command/CommandInterceptor")),t=require("min-dash"),r=require("diagram-js/lib/layout/LayoutUtil"),n=require("diagram-js/lib/util/Elements"),a=require("../../../util/DiUtil");function o(e){return e&&e.__esModule?e:{default:e}}function u(e,o){i.default.call(this,e),this.postExecuted("shape.toggleCollapse",1500,function(e){var i=e.shape;if(!(0,a.isExpanded)(i)){var u=(0,n.selfAndAllChildren)(i);u.forEach(function(e){var i=e.incoming.slice(),r=e.outgoing.slice();(0,t.forEach)(i,function(e){l(e,!0)}),(0,t.forEach)(r,function(e){l(e,!1)})})}function l(e,t){-1!==u.indexOf(e.source)&&-1!==u.indexOf(e.target)||(t?o.reconnectEnd(e,i,(0,r.getMid)(i)):o.reconnectStart(e,i,(0,r.getMid)(i)))}},!0)}(0,e.default)(u,i.default),u.$inject=["eventBus","modeling"];
},{"inherits-browser":"hUM3","diagram-js/lib/command/CommandInterceptor":"FIh1","min-dash":"AmEv","diagram-js/lib/layout/LayoutUtil":"aRzT","diagram-js/lib/util/Elements":"KTcn","../../../util/DiUtil":"lWoN"}],"t2iU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=n(require("inherits-browser")),t=n(require("diagram-js/lib/command/CommandInterceptor")),i=require("../../../util/ModelUtil"),h=require("diagram-js/lib/features/resize/ResizeUtil");function n(e){return e&&e.__esModule?e:{default:e}}var a=500;function r(e,n,r,l){t.default.call(this,e),this.executed(["shape.toggleCollapse"],a,function(e){var t,h=e.context.shape;(0,i.is)(h,"bpmn:SubProcess")&&(h.collapsed?(0,i.getDi)(h).isExpanded=!1:((t=h.children).length&&t.forEach(function(e){"label"!==e.type||e.businessObject.name||(e.hidden=!0)}),(0,i.getDi)(h).isExpanded=!0))}),this.reverted(["shape.toggleCollapse"],a,function(e){var t=e.context.shape;t.collapsed?(0,i.getDi)(t).isExpanded=!1:(0,i.getDi)(t).isExpanded=!0}),this.postExecuted(["shape.toggleCollapse"],a,function(e){var t,i=e.context.shape,a=n.getDefaultSize(i);t=i.collapsed?function(e,t){return{x:e.x+(e.width-t.width)/2,y:e.y+(e.height-t.height)/2,width:t.width,height:t.height}}(i,a):function(e,t){var i,n,a=t;return i=d(e.children).concat([e]),(n=(0,h.computeChildrenBBox)(i))?(a.width=Math.max(n.width,a.width),a.height=Math.max(n.height,a.height),a.x=n.x+(n.width-a.width)/2,a.y=n.y+(n.height-a.height)/2):(a.x=e.x+(e.width-a.width)/2,a.y=e.y+(e.height-a.height)/2),a}(i,a),r.resizeShape(i,t,null,{autoResize:!i.collapsed&&"nwse"})})}function d(e){return e.filter(function(e){return!e.hidden})}(0,e.default)(r,t.default),r.$inject=["eventBus","elementFactory","modeling"];
},{"inherits-browser":"hUM3","diagram-js/lib/command/CommandInterceptor":"FIh1","../../../util/ModelUtil":"HvoA","diagram-js/lib/features/resize/ResizeUtil":"yRPe"}],"SE50":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=s(require("inherits-browser")),t=s(require("diagram-js/lib/command/CommandInterceptor")),i=require("../../../util/ModelUtil"),n=require("../../../util/DiUtil"),r=require("../../../util/LabelUtil");function s(e){return e&&e.__esModule?e:{default:e}}function u(e,s,u,o){s.invoke(t.default,this),this.preExecute("shape.delete",function(e){var t=e.context.shape,s=t.businessObject;(0,r.isLabel)(t)||((0,i.is)(t,"bpmn:Participant")&&(0,n.isExpanded)(t)&&u.ids.unclaim(s.processRef.id),o.unclaimId(s.id,s))}),this.preExecute("connection.delete",function(e){var t=e.context.connection.businessObject;o.unclaimId(t.id,t)}),this.preExecute("canvas.updateRoot",function(){var t=e.getRootElement(),n=t.businessObject;(0,i.is)(t,"bpmn:Collaboration")&&u.ids.unclaim(n.id)})}(0,e.default)(u,t.default),u.$inject=["canvas","injector","moddle","modeling"];
},{"inherits-browser":"hUM3","diagram-js/lib/command/CommandInterceptor":"FIh1","../../../util/ModelUtil":"HvoA","../../../util/DiUtil":"lWoN","../../../util/LabelUtil":"yKfU"}],"oJkr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=r(require("inherits-browser")),t=r(require("diagram-js/lib/command/CommandInterceptor")),n=require("../../../util/ModelUtil");function r(e){return e&&e.__esModule?e:{default:e}}function u(e,n){t.default.call(this,e),this.preExecute("connection.delete",function(e){var t=e.context.connection,r=t.source;i(t,r)&&n.updateProperties(r,{default:null})})}function i(e,t){if(!(0,n.is)(e,"bpmn:SequenceFlow"))return!1;var r=(0,n.getBusinessObject)(t),u=(0,n.getBusinessObject)(e);return r.get("default")===u}(0,e.default)(u,t.default),u.$inject=["eventBus","modeling"];
},{"inherits-browser":"hUM3","diagram-js/lib/command/CommandInterceptor":"FIh1","../../../util/ModelUtil":"HvoA"}],"Rh7n":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=s(require("inherits-browser")),t=s(require("diagram-js/lib/command/CommandInterceptor")),n=require("../../../util/ModelUtil");function s(e){return e&&e.__esModule?e:{default:e}}var o=500,r=5e3;function a(e,s,a){var l;function u(){if(!l)throw new Error(a("out of bounds release"));return l}t.default.call(this,e);var d=["spaceTool","lane.add","lane.resize","lane.split","elements.create","elements.delete","elements.move","shape.create","shape.delete","shape.move","shape.resize"];this.preExecute(d,r,function(e){(l=l||new i).enter()}),this.postExecuted(d,o,function(e){!function(){if(!l)throw new Error(a("out of bounds release"));var e=l.leave();e&&(s.updateLaneRefs(l.flowNodes,l.lanes),l=null)}()}),this.preExecute(["shape.create","shape.move","shape.delete","shape.resize"],function(e){var t=e.context.shape,s=u();t.labelTarget||((0,n.is)(t,"bpmn:Lane")&&s.addLane(t),(0,n.is)(t,"bpmn:FlowNode")&&s.addFlowNode(t))})}function i(){this.flowNodes=[],this.lanes=[],this.counter=0,this.addLane=function(e){this.lanes.push(e)},this.addFlowNode=function(e){this.flowNodes.push(e)},this.enter=function(){this.counter++},this.leave=function(){return this.counter--,!this.counter}}a.$inject=["eventBus","modeling","translate"],(0,e.default)(a,t.default);
},{"inherits-browser":"hUM3","diagram-js/lib/command/CommandInterceptor":"FIh1","../../../util/ModelUtil":"HvoA"}],"pyvZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=H(require("./AdaptiveLabelPositioningBehavior")),a=H(require("./AppendBehavior")),r=H(require("./AssociationBehavior")),o=H(require("./AttachEventBehavior")),i=H(require("./BoundaryEventBehavior")),t=H(require("./CreateBehavior")),v=H(require("./CreateDataObjectBehavior")),l=H(require("./CreateParticipantBehavior")),u=H(require("./DataInputAssociationBehavior")),n=H(require("./DataStoreBehavior")),B=H(require("./DeleteLaneBehavior")),h=H(require("./DetachEventBehavior")),d=H(require("./DropOnFlowBehavior")),p=H(require("./EventBasedGatewayBehavior")),s=H(require("./FixHoverBehavior")),c=H(require("./GroupBehavior")),f=H(require("./ImportDockingFix")),y=H(require("./IsHorizontalFix")),q=H(require("./LabelBehavior")),m=H(require("./LayoutConnectionBehavior")),E=H(require("./MessageFlowBehavior")),b=H(require("./ModelingFeedback")),g=H(require("./RemoveEmbeddedLabelBoundsBehavior")),F=H(require("./RemoveElementBehavior")),P=H(require("./RemoveParticipantBehavior")),C=H(require("./ReplaceConnectionBehavior")),w=H(require("./ReplaceElementBehaviour")),D=H(require("./ResizeBehavior")),L=H(require("./ResizeLaneBehavior")),R=H(require("./RootElementReferenceBehavior")),x=H(require("./SpaceToolBehavior")),z=H(require("./SubProcessPlaneBehavior")),S=H(require("./SubProcessStartEventBehavior")),I=H(require("./ToggleCollapseConnectionBehaviour")),_=H(require("./ToggleElementCollapseBehaviour")),A=H(require("./UnclaimIdBehavior")),O=H(require("./UnsetDefaultFlowBehavior")),k=H(require("./UpdateFlowNodeRefsBehavior"));function H(e){return e&&e.__esModule?e:{default:e}}var T=exports.default={__init__:["adaptiveLabelPositioningBehavior","appendBehavior","associationBehavior","attachEventBehavior","boundaryEventBehavior","createBehavior","createDataObjectBehavior","createParticipantBehavior","dataInputAssociationBehavior","dataStoreBehavior","deleteLaneBehavior","detachEventBehavior","dropOnFlowBehavior","eventBasedGatewayBehavior","fixHoverBehavior","groupBehavior","importDockingFix","isHorizontalFix","labelBehavior","layoutConnectionBehavior","messageFlowBehavior","modelingFeedback","removeElementBehavior","removeEmbeddedLabelBoundsBehavior","removeParticipantBehavior","replaceConnectionBehavior","replaceElementBehaviour","resizeBehavior","resizeLaneBehavior","rootElementReferenceBehavior","spaceToolBehavior","subProcessPlaneBehavior","subProcessStartEventBehavior","toggleCollapseConnectionBehaviour","toggleElementCollapseBehaviour","unclaimIdBehavior","updateFlowNodeRefsBehavior","unsetDefaultFlowBehavior"],adaptiveLabelPositioningBehavior:["type",e.default],appendBehavior:["type",a.default],associationBehavior:["type",r.default],attachEventBehavior:["type",o.default],boundaryEventBehavior:["type",i.default],createBehavior:["type",t.default],createDataObjectBehavior:["type",v.default],createParticipantBehavior:["type",l.default],dataInputAssociationBehavior:["type",u.default],dataStoreBehavior:["type",n.default],deleteLaneBehavior:["type",B.default],detachEventBehavior:["type",h.default],dropOnFlowBehavior:["type",d.default],eventBasedGatewayBehavior:["type",p.default],fixHoverBehavior:["type",s.default],groupBehavior:["type",c.default],importDockingFix:["type",f.default],isHorizontalFix:["type",y.default],labelBehavior:["type",q.default],layoutConnectionBehavior:["type",m.default],messageFlowBehavior:["type",E.default],modelingFeedback:["type",b.default],removeElementBehavior:["type",F.default],removeEmbeddedLabelBoundsBehavior:["type",g.default],removeParticipantBehavior:["type",P.default],replaceConnectionBehavior:["type",C.default],replaceElementBehaviour:["type",w.default],resizeBehavior:["type",D.default],resizeLaneBehavior:["type",L.default],rootElementReferenceBehavior:["type",R.default],spaceToolBehavior:["type",x.default],subProcessPlaneBehavior:["type",z.default],subProcessStartEventBehavior:["type",S.default],toggleCollapseConnectionBehaviour:["type",I.default],toggleElementCollapseBehaviour:["type",_.default],unclaimIdBehavior:["type",A.default],unsetDefaultFlowBehavior:["type",O.default],updateFlowNodeRefsBehavior:["type",k.default]};
},{"./AdaptiveLabelPositioningBehavior":"hdLl","./AppendBehavior":"RTXu","./AssociationBehavior":"U4cy","./AttachEventBehavior":"PX1x","./BoundaryEventBehavior":"jJ3v","./CreateBehavior":"nTcQ","./CreateDataObjectBehavior":"ZUTj","./CreateParticipantBehavior":"quXB","./DataInputAssociationBehavior":"p9Ou","./DataStoreBehavior":"AO72","./DeleteLaneBehavior":"i5lL","./DetachEventBehavior":"J3i0","./DropOnFlowBehavior":"vMbr","./EventBasedGatewayBehavior":"NDRW","./FixHoverBehavior":"AenB","./GroupBehavior":"TJDk","./ImportDockingFix":"XpEn","./IsHorizontalFix":"gNDd","./LabelBehavior":"JAgB","./LayoutConnectionBehavior":"gG2J","./MessageFlowBehavior":"rdM3","./ModelingFeedback":"YeI8","./RemoveEmbeddedLabelBoundsBehavior":"EJ0V","./RemoveElementBehavior":"LQ6w","./RemoveParticipantBehavior":"yRuf","./ReplaceConnectionBehavior":"LeQL","./ReplaceElementBehaviour":"Qk32","./ResizeBehavior":"Kn9N","./ResizeLaneBehavior":"PN0t","./RootElementReferenceBehavior":"zENp","./SpaceToolBehavior":"H1o8","./SubProcessPlaneBehavior":"TIpB","./SubProcessStartEventBehavior":"Kbme","./ToggleCollapseConnectionBehaviour":"SrNM","./ToggleElementCollapseBehaviour":"t2iU","./UnclaimIdBehavior":"SE50","./UnsetDefaultFlowBehavior":"oJkr","./UpdateFlowNodeRefsBehavior":"Rh7n"}],"LRth":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getBoundaryAttachment=e;var t=require("diagram-js/lib/layout/LayoutUtil");function e(e,r){var a=(0,t.getOrientation)(e,r,-15);return"intersect"!==a?a:null}
},{"diagram-js/lib/layout/LayoutUtil":"aRzT"}],"nctK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=p;var n=require("min-dash"),e=u(require("inherits-browser")),t=require("../../util/ModelUtil"),i=require("../modeling/util/ModelingUtil"),r=require("../../util/LabelUtil"),o=require("../../util/DiUtil"),s=u(require("diagram-js/lib/features/rules/RuleProvider")),a=require("../snapping/BpmnSnappingUtil");function u(n){return n&&n.__esModule?n:{default:n}}function p(n){s.default.call(this,n)}function c(n){return m(n)?null:(0,i.isAny)(n,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference","bpmn:Group","bpmn:TextAnnotation"])}function m(n){return!n||(0,r.isLabel)(n)}function b(n,e){return n===e}function l(n){do{if((0,t.is)(n,"bpmn:Process"))return(0,t.getBusinessObject)(n);if((0,t.is)(n,"bpmn:Participant"))return(0,t.getBusinessObject)(n).processRef||(0,t.getBusinessObject)(n)}while(n=n.parent)}function f(n){return(0,t.is)(n,"bpmn:TextAnnotation")}function d(n){return(0,t.is)(n,"bpmn:Group")&&!n.labelTarget}function v(n){return(0,t.is)(n,"bpmn:BoundaryEvent")&&A(n,"bpmn:CompensateEventDefinition")}function E(n){return(0,t.getBusinessObject)(n).isForCompensation}function y(n,e){return l(n)===l(e)}function h(n){return(0,t.is)(n,"bpmn:InteractionNode")&&!(0,t.is)(n,"bpmn:BoundaryEvent")&&(!(0,t.is)(n,"bpmn:Event")||(0,t.is)(n,"bpmn:ThrowEvent")&&R(n,"bpmn:MessageEventDefinition"))}function g(n){return(0,t.is)(n,"bpmn:InteractionNode")&&!E(n)&&(!(0,t.is)(n,"bpmn:Event")||(0,t.is)(n,"bpmn:CatchEvent")&&R(n,"bpmn:MessageEventDefinition"))&&!((0,t.is)(n,"bpmn:BoundaryEvent")&&!A(n,"bpmn:MessageEventDefinition"))}function D(n){for(var e=n;e=e.parent;){if((0,t.is)(e,"bpmn:FlowElementsContainer"))return(0,t.getBusinessObject)(e);if((0,t.is)(e,"bpmn:Participant"))return(0,t.getBusinessObject)(e).processRef}return null}function w(n,e){return D(n)===D(e)}function A(e,i){var r=(0,t.getBusinessObject)(e);return!!(0,n.find)(r.eventDefinitions||[],function(n){return(0,t.is)(n,i)})}function R(n,e){return((0,t.getBusinessObject)(n).eventDefinitions||[]).every(function(n){return(0,t.is)(n,e)})}function B(n){return(0,t.is)(n,"bpmn:FlowNode")&&!(0,t.is)(n,"bpmn:EndEvent")&&!(0,o.isEventSubProcess)(n)&&!((0,t.is)(n,"bpmn:IntermediateThrowEvent")&&A(n,"bpmn:LinkEventDefinition"))&&!v(n)&&!E(n)}function C(n){return(0,t.is)(n,"bpmn:FlowNode")&&!(0,t.is)(n,"bpmn:StartEvent")&&!(0,t.is)(n,"bpmn:BoundaryEvent")&&!(0,o.isEventSubProcess)(n)&&!((0,t.is)(n,"bpmn:IntermediateCatchEvent")&&A(n,"bpmn:LinkEventDefinition"))&&!E(n)}function S(n){return(0,t.is)(n,"bpmn:ReceiveTask")||(0,t.is)(n,"bpmn:IntermediateCatchEvent")&&(A(n,"bpmn:MessageEventDefinition")||A(n,"bpmn:TimerEventDefinition")||A(n,"bpmn:ConditionalEventDefinition")||A(n,"bpmn:SignalEventDefinition"))}function P(n){return n.waypoints}function O(n){for(var e=[];n;)(n=n.parent)&&e.push(n);return e}function T(n,e){return-1!==O(e).indexOf(n)}function j(n,e,i){if(m(n)||m(e))return null;if(!(0,t.is)(i,"bpmn:DataAssociation")){if(K(n,e))return{type:"bpmn:MessageFlow"};if(Q(n,e))return{type:"bpmn:SequenceFlow"}}var r=V(n,e);return r||(v(n)&&E(e)?{type:"bpmn:Association",associationDirection:"One"}:!!J(n,e)&&{type:"bpmn:Association"})}function I(e,s,a){return!(!(0,r.isLabel)(e)&&!d(e))||!((0,t.is)(s,"bpmn:Participant")&&!(0,o.isExpanded)(s))&&((0,t.is)(e,"bpmn:Participant")?(0,t.is)(s,"bpmn:Process")||(0,t.is)(s,"bpmn:Collaboration"):(0,i.isAny)(e,["bpmn:DataInput","bpmn:DataOutput"])&&e.parent?s===e.parent:(0,t.is)(e,"bpmn:Lane")?(0,t.is)(s,"bpmn:Participant")||(0,t.is)(s,"bpmn:Lane"):!((0,t.is)(e,"bpmn:BoundaryEvent")&&!L(e))&&((0,t.is)(e,"bpmn:FlowElement")&&!(0,t.is)(e,"bpmn:DataStoreReference")?(0,t.is)(s,"bpmn:FlowElementsContainer")?(0,o.isExpanded)(s):(0,i.isAny)(s,["bpmn:Participant","bpmn:Lane"]):(0,t.is)(e,"bpmn:DataStoreReference")&&(0,t.is)(s,"bpmn:Collaboration")?(0,n.some)((0,t.getBusinessObject)(s).get("participants"),function(n){return!!n.get("processRef")}):(0,i.isAny)(e,["bpmn:Artifact","bpmn:DataAssociation","bpmn:DataStoreReference"])?(0,i.isAny)(s,["bpmn:Collaboration","bpmn:Lane","bpmn:Participant","bpmn:Process","bpmn:SubProcess"]):!!(0,t.is)(e,"bpmn:MessageFlow")&&((0,t.is)(s,"bpmn:Collaboration")||e.source.parent==s||e.target.parent==s)))}function L(n){return(0,t.getBusinessObject)(n).cancelActivity&&(x(n)||N(n))}function F(n){return!(0,r.isLabel)(n)&&(0,t.is)(n,"bpmn:BoundaryEvent")}function M(n){return(0,t.is)(n,"bpmn:Lane")}function q(n){return!!F(n)||(!(!(0,t.is)(n,"bpmn:IntermediateThrowEvent")||!x(n))||(0,t.is)(n,"bpmn:IntermediateCatchEvent")&&N(n))}function x(n){var e=(0,t.getBusinessObject)(n);return e&&!(e.eventDefinitions&&e.eventDefinitions.length)}function N(n){return U(n,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])}function U(n,e){return e.some(function(e){return A(n,e)})}function k(e){return(0,t.is)(e,"bpmn:ReceiveTask")&&(0,n.find)(e.incoming,function(n){return(0,t.is)(n.source,"bpmn:EventBasedGateway")})}function G(n,e,i,s){if(Array.isArray(n)||(n=[n]),1!==n.length)return!1;var u=n[0];return!(0,r.isLabel)(u)&&(!!q(u)&&(!(0,o.isEventSubProcess)(e)&&(!(!(0,t.is)(e,"bpmn:Activity")||E(e))&&(!(s&&!(0,a.getBoundaryAttachment)(s,e))&&(!k(e)&&"attach")))))}function _(e,i,r){if(!i)return!1;var s={replacements:[]};return(0,n.forEach)(e,function(n){(0,o.isEventSubProcess)(i)||(0,t.is)(n,"bpmn:StartEvent")&&"label"!==n.type&&I(n,i)&&((0,o.isInterrupting)(n)||s.replacements.push({oldElementId:n.id,newElementType:"bpmn:StartEvent"}),((0,o.hasErrorEventDefinition)(n)||(0,o.hasEscalationEventDefinition)(n)||(0,o.hasCompensateEventDefinition)(n))&&s.replacements.push({oldElementId:n.id,newElementType:"bpmn:StartEvent"}),U(n,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])&&(0,t.is)(i,"bpmn:SubProcess")&&s.replacements.push({oldElementId:n.id,newElementType:"bpmn:StartEvent"})),(0,t.is)(i,"bpmn:Transaction")||A(n,"bpmn:CancelEventDefinition")&&"label"!==n.type&&((0,t.is)(n,"bpmn:EndEvent")&&I(n,i)&&s.replacements.push({oldElementId:n.id,newElementType:"bpmn:EndEvent"}),(0,t.is)(n,"bpmn:BoundaryEvent")&&G(n,i,null,r)&&s.replacements.push({oldElementId:n.id,newElementType:"bpmn:BoundaryEvent"}))}),!!s.replacements.length&&s}function z(e,t){return!(0,n.some)(e,M)&&(!t||e.every(function(n){return I(n,t)}))}function W(n,e,t,i){return!!e&&(!(!(0,r.isLabel)(n)&&!d(n))||!b(t,e)&&((!t||!T(t,e))&&(I(n,e,i)||X(n,e,i))))}function $(n,e){return(0,t.is)(n,"bpmn:SubProcess")?(0,o.isExpanded)(n)&&(!e||e.width>=100&&e.height>=80):(0,t.is)(n,"bpmn:Lane")?!e||e.width>=130&&e.height>=60:(0,t.is)(n,"bpmn:Participant")?!e||e.width>=250&&e.height>=50:!!f(n)||!!d(n)}function H(n,e){var t=f(n),i=f(e);return(t||i)&&t!==i}function J(n,e){return!(!v(n)||!E(e))||!T(e,n)&&!T(n,e)&&(!!H(n,e)||!!V(n,e))}function K(n,e){return!(nn(n)&&!nn(e))&&(h(n)&&g(e)&&!y(n,e))}function Q(n,e){return B(n)&&C(e)&&w(n,e)&&!((0,t.is)(n,"bpmn:EventBasedGateway")&&!S(e))}function V(n,e){return(0,i.isAny)(n,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&(0,i.isAny)(e,["bpmn:Activity","bpmn:ThrowEvent"])?{type:"bpmn:DataInputAssociation"}:!(!(0,i.isAny)(e,["bpmn:DataObjectReference","bpmn:DataStoreReference"])||!(0,i.isAny)(n,["bpmn:Activity","bpmn:CatchEvent"]))&&{type:"bpmn:DataOutputAssociation"}}function X(n,e,o){if(!e)return!1;if(Array.isArray(n)){if(1!==n.length)return!1;n=n[0]}return e.source!==n&&e.target!==n&&((0,i.isAny)(e,["bpmn:SequenceFlow","bpmn:MessageFlow"])&&!(0,r.isLabel)(e)&&(0,t.is)(n,"bpmn:FlowNode")&&!(0,t.is)(n,"bpmn:BoundaryEvent")&&I(n,e.parent,o))}function Y(n,e){return n&&e&&-1!==n.indexOf(e)}function Z(n,e){return!!(0,r.isLabel)(e)||!((0,t.is)(e,"bpmn:Lane")&&!Y(n,e.parent))}function nn(n){return(0,i.getParent)(n,"bpmn:Process")||(0,i.getParent)(n,"bpmn:Collaboration")}(0,e.default)(p,s.default),p.$inject=["eventBus"],p.prototype.init=function(){this.addRule("connection.start",function(n){return c(n.source)}),this.addRule("connection.create",function(n){var e=n.source,t=n.target,i=n.hints||{},r=i.targetParent;if(i.targetAttach)return!1;r&&(t.parent=r);try{return j(e,t)}finally{r&&(t.parent=null)}}),this.addRule("connection.reconnect",function(n){var e=n.connection;return j(n.source,n.target,e)}),this.addRule("connection.updateWaypoints",function(n){return{type:n.connection.type}}),this.addRule("shape.resize",function(n){return $(n.shape,n.newBounds)}),this.addRule("elements.create",function(e){var t=e.elements,i=e.position,r=e.target;return!(P(r)&&!X(t,r,i))&&(0,n.every)(t,function(n){return P(n)?j(n.source,n.target,n):n.host?G(n,n.host,null,i):W(n,r,null,i)})}),this.addRule("elements.move",function(n){var e=n.target,t=n.shapes,i=n.position;return G(t,e,null,i)||_(t,e,i)||z(t,e,i)||X(t,e,i)}),this.addRule("shape.create",function(n){return W(n.shape,n.target,n.source,n.position)}),this.addRule("shape.attach",function(n){return G(n.shape,n.target,null,n.position)}),this.addRule("element.copy",function(n){var e=n.element;return Z(n.elements,e)})},p.prototype.canConnectMessageFlow=K,p.prototype.canConnectSequenceFlow=Q,p.prototype.canConnectDataAssociation=V,p.prototype.canConnectAssociation=J,p.prototype.canMove=z,p.prototype.canAttach=G,p.prototype.canReplace=_,p.prototype.canDrop=I,p.prototype.canInsert=X,p.prototype.canCreate=W,p.prototype.canConnect=j,p.prototype.canResize=$,p.prototype.canCopy=Z;
},{"min-dash":"AmEv","inherits-browser":"hUM3","../../util/ModelUtil":"HvoA","../modeling/util/ModelingUtil":"YK7B","../../util/LabelUtil":"yKfU","../../util/DiUtil":"lWoN","diagram-js/lib/features/rules/RuleProvider":"EJm6","../snapping/BpmnSnappingUtil":"LRth"}],"FxPL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("diagram-js/lib/features/rules")),u=r(require("./BpmnRules"));function r(e){return e&&e.__esModule?e:{default:e}}var t=exports.default={__depends__:[e.default],__init__:["bpmnRules"],bpmnRules:["type",u.default]};
},{"diagram-js/lib/features/rules":"GwI0","./BpmnRules":"nctK"}],"icHO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=require("../../util/ModelUtil"),t=require("min-dash"),r=require("diagram-js/lib/util/Elements"),n=2e3;function i(i,l){i.on("saveXML.start",n,function(){var n=l.getRootElements();(0,t.forEach)(n,function(n){var i,l,a=(0,e.getDi)(n);i=(0,r.selfAndAllChildren)([n],!1),i=(0,t.filter)(i,function(e){return e!==n&&!e.labelTarget}),l=(0,t.map)(i,e.getDi),a.set("planeElement",l)})})}i.$inject=["eventBus","canvas"];
},{"../../util/ModelUtil":"HvoA","min-dash":"AmEv","diagram-js/lib/util/Elements":"KTcn"}],"WEN6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("../di-ordering/BpmnDiOrdering"));function r(e){return e&&e.__esModule?e:{default:e}}var i=exports.default={__init__:["bpmnDiOrdering"],bpmnDiOrdering:["type",e.default]};
},{"../di-ordering/BpmnDiOrdering":"icHO"}],"Yuuh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("inherits-browser")),n=t(require("../../command/CommandInterceptor"));function t(e){return e&&e.__esModule?e:{default:e}}function r(e){n.default.call(this,e);var t=this;this.preExecute(["shape.create","connection.create"],function(e){var n=e.context,r=n.shape||n.connection,a=n.parent,o=t.getOrdering(r,a);o&&(void 0!==o.parent&&(n.parent=o.parent),n.parentIndex=o.index)}),this.preExecute(["shape.move","connection.move"],function(e){var n=e.context,r=n.shape||n.connection,a=n.newParent||r.parent,o=t.getOrdering(r,a);o&&(void 0!==o.parent&&(n.newParent=o.parent),n.newParentIndex=o.index)})}r.prototype.getOrdering=function(e,n){return null},(0,e.default)(r,n.default);
},{"inherits-browser":"hUM3","../../command/CommandInterceptor":"FIh1"}],"uRxr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var e=o(require("inherits-browser")),r=o(require("diagram-js/lib/features/ordering/OrderingProvider")),n=require("../modeling/util/ModelingUtil"),t=require("min-dash");function o(e){return e&&e.__esModule?e:{default:e}}function l(e,o,l){r.default.call(this,e);var i=[{type:"bpmn:SubProcess",order:{level:6}},{type:"bpmn:SequenceFlow",order:{level:9,containers:["bpmn:Participant","bpmn:FlowElementsContainer"]}},{type:"bpmn:DataAssociation",order:{level:9,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:MessageFlow",order:{level:9,containers:["bpmn:Collaboration"]}},{type:"bpmn:Association",order:{level:6,containers:["bpmn:Participant","bpmn:FlowElementsContainer","bpmn:Collaboration"]}},{type:"bpmn:BoundaryEvent",order:{level:8}},{type:"bpmn:Group",order:{level:10,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:FlowElement",order:{level:5}},{type:"bpmn:Participant",order:{level:-2}},{type:"bpmn:Lane",order:{level:-1}}];function a(e){var r=e.order;if(r||(e.order=r=function(e){if(e.labelTarget)return{level:10};var r=(0,t.find)(i,function(r){return(0,n.isAny)(e,[r.type])});return r&&r.order||{level:1}}(e)),!r)throw new Error("no order for <"+e.id+">");return r}this.getOrdering=function(e,r){if(e.labelTarget)return{parent:o.findRoot(r)||o.getRootElement(),index:-1};var l=a(e);l.containers&&(r=function(e,r,t){for(var o=r;o&&!(0,n.isAny)(o,t);)o=o.parent;if(!o)throw new Error("no parent for <"+e.id+"> in <"+(r&&r.id)+">");return o}(e,r,l.containers));var i=r.children.indexOf(e),d=(0,t.findIndex)(r.children,function(r){return!(!e.labelTarget&&r.labelTarget)&&l.level<a(r).level});return-1!==d&&-1!==i&&i<d&&(d-=1),{index:d,parent:r}}}l.$inject=["eventBus","canvas","translate"],(0,e.default)(l,r.default);
},{"inherits-browser":"hUM3","diagram-js/lib/features/ordering/OrderingProvider":"Yuuh","../modeling/util/ModelingUtil":"YK7B","min-dash":"AmEv"}],"Brtj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=d(require("diagram-js/lib/i18n/translate")),r=d(require("./BpmnOrderingProvider"));function d(e){return e&&e.__esModule?e:{default:e}}var t=exports.default={__depends__:[e.default],__init__:["bpmnOrderingProvider"],bpmnOrderingProvider:["type",r.default]};
},{"diagram-js/lib/i18n/translate":"N3z5","./BpmnOrderingProvider":"uRxr"}],"qSqK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var t=require("min-dash"),e=require("min-dom"),i=250;function n(t,e){this._eventBus=t,this._dragging=e,this._tools=[],this._active=null}function o(t){var i=t.originalEvent&&t.originalEvent.target;return i&&(0,e.closest)(i,'.group[data-group="tools"]')}n.$inject=["eventBus","dragging"],n.prototype.registerTool=function(t,e){var i=this._tools;if(!e)throw new Error('A tool has to be registered with it\'s "events"');i.push(t),this.bindEvents(t,e)},n.prototype.isActive=function(t){return t&&this._active===t},n.prototype.length=function(t){return this._tools.length},n.prototype.setActive=function(t){var e=this._eventBus;this._active!==t&&(this._active=t,e.fire("tool-manager.update",{tool:t}))},n.prototype.bindEvents=function(e,n){var s=this._eventBus,r=this._dragging,u=[];s.on(n.tool+".init",function(t){if(!t.context.reactivate&&this.isActive(e))return this.setActive(null),void r.cancel();this.setActive(e)},this),(0,t.forEach)(n,function(t){u.push(t+".ended"),u.push(t+".canceled")}),s.on(u,i,function(t){this._active&&(o(t)||this.setActive(null))},this)};
},{"min-dash":"AmEv","min-dom":"fWg5"}],"jzIl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("../dragging")),r=t(require("./ToolManager"));function t(e){return e&&e.__esModule?e:{default:e}}var a=exports.default={__depends__:[e.default],__init__:["toolManager"],toolManager:["type",r.default]};
},{"../dragging":"gdZp","./ToolManager":"qSqK"}],"IxZ3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDirection=e,exports.getWaypointsUpdatingConnections=r,exports.resizeBounds=i;var t=require("min-dash");function e(t,e){if("x"===t){if(e>0)return"e";if(e<0)return"w"}if("y"===t){if(e>0)return"s";if(e<0)return"n"}return null}function r(e,r){var i=[];return(0,t.forEach)(e.concat(r),function(o){var u=o.incoming,c=o.outgoing;(0,t.forEach)(u.concat(c),function(t){var o=t.source,u=t.target;(n(e,o)||n(e,u)||n(r,o)||n(r,u))&&(n(i,t)||i.push(t))})}),i}function n(t,e){return-1!==t.indexOf(e)}function i(t,e,r){var n=t.x,i=t.y,o=t.width,u=t.height,c=r.x,h=r.y;switch(e){case"n":return{x:n,y:i+h,width:o,height:u-h};case"s":return{x:n,y:i,width:o,height:u+h};case"w":return{x:n+c,y:i,width:o-c,height:u};case"e":return{x:n,y:i,width:o+c,height:u};default:throw new Error("unknown direction: "+e)}}
},{"min-dash":"AmEv"}],"EcQc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=p;var t=require("min-dash"),e=require("../../layout/LayoutUtil"),i=require("../../util/Elements"),n=require("./SpaceUtil"),a=require("../../util/Mouse"),o=require("../../util/Cursor"),r=Math.abs,s=Math.round,c={x:"width",y:"height"},u="crosshair",h={n:"top",w:"left",s:"bottom",e:"right"},l=1500,m={n:"s",w:"e",s:"n",e:"w"},g=20;function p(t,e,i,n,a,o,r){this._canvas=t,this._dragging=e,this._eventBus=i,this._modeling=n,this._rules=a,this._toolManager=o,this._mouse=r;var c=this;o.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),i.on("spaceTool.selection.end",function(t){i.once("spaceTool.selection.ended",function(){c.activateMakeSpace(t.originalEvent)})}),i.on("spaceTool.move",l,function(t){var e=t.context,i=e.initialized;i||(i=e.initialized=c.init(t,e)),i&&d(t)}),i.on("spaceTool.end",function(t){var e=t.context,n=e.axis,a=e.direction,o=e.movingShapes,r=e.resizingShapes,u=e.start;if(e.initialized){d(t);var h={x:0,y:0};h[n]=s(t["d"+n]),c.makeSpace(o,r,h,a,u),i.once("spaceTool.ended",function(t){c.activateSelection(t.originalEvent,!0,!0)})}})}function f(t){return{top:t.top-g,right:t.right+g,bottom:t.bottom+g,left:t.left-g}}function d(e){var i,n,a=e.context.spaceToolConstraints;a&&((0,t.isNumber)(a.left)&&(i=Math.max(e.x,a.left),e.dx=e.dx+i-e.x,e.x=i),(0,t.isNumber)(a.right)&&(i=Math.min(e.x,a.right),e.dx=e.dx+i-e.x,e.x=i),(0,t.isNumber)(a.top)&&(n=Math.max(e.y,a.top),e.dy=e.dy+n-e.y,e.y=n),(0,t.isNumber)(a.bottom)&&(n=Math.min(e.y,a.bottom),e.dy=e.dy+n-e.y,e.y=n))}function v(n,a,o,r,s){var u=n.movingShapes,l=n.resizingShapes;if(l.length){var g,p,d={};return(0,t.forEach)(l,function(n){var v,M,N,T,_,B,S=n.attachers,E=n.children,w=(0,e.asTRBL)(n),z=(0,t.filter)(E,function(t){return!(b(t)||y(t)||x(u,t)||x(l,t))}),A=(0,t.filter)(E,function(t){return!b(t)&&!y(t)&&x(u,t)}),L=[],q=[];z.length&&(M=f((0,e.asTRBL)((0,i.getBBox)(z))),v=r-w[h[o]]+M[h[o]],"n"===o?d.bottom=p=(0,t.isNumber)(p)?Math.min(p,v):v:"w"===o?d.right=p=(0,t.isNumber)(p)?Math.min(p,v):v:"s"===o?d.top=g=(0,t.isNumber)(g)?Math.max(g,v):v:"e"===o&&(d.left=g=(0,t.isNumber)(g)?Math.max(g,v):v)),A.length&&(N=f((0,e.asTRBL)((0,i.getBBox)(A))),v=r-N[h[m[o]]]+w[h[m[o]]],"n"===o?d.bottom=p=(0,t.isNumber)(p)?Math.min(p,v):v:"w"===o?d.right=p=(0,t.isNumber)(p)?Math.min(p,v):v:"s"===o?d.top=g=(0,t.isNumber)(g)?Math.max(g,v):v:"e"===o&&(d.left=g=(0,t.isNumber)(g)?Math.max(g,v):v)),S&&S.length&&(S.forEach(function(t){x(u,t)?L.push(t):q.push(t)}),L.length&&(T=(0,e.asTRBL)((0,i.getBBox)(L.map(e.getMid))),_=w[h[m[o]]]-(T[h[m[o]]]-r)),q.length&&(B=(0,e.asTRBL)((0,i.getBBox)(q.map(e.getMid)))[h[o]]-(w[h[o]]-r)),"n"===o?(v=Math.min(_||1/0,B||1/0),d.bottom=p=(0,t.isNumber)(p)?Math.min(p,v):v):"w"===o?(v=Math.min(_||1/0,B||1/0),d.right=p=(0,t.isNumber)(p)?Math.min(p,v):v):"s"===o?(v=Math.max(_||-1/0,B||-1/0),d.top=g=(0,t.isNumber)(g)?Math.max(g,v):v):"e"===o&&(v=Math.max(_||-1/0,B||-1/0),d.left=g=(0,t.isNumber)(g)?Math.max(g,v):v));var R=s&&s[n.id];R&&("n"===o?(v=r+n[c[a]]-R[c[a]],d.bottom=p=(0,t.isNumber)(p)?Math.min(p,v):v):"w"===o?(v=r+n[c[a]]-R[c[a]],d.right=p=(0,t.isNumber)(p)?Math.min(p,v):v):"s"===o?(v=r-n[c[a]]+R[c[a]],d.top=g=(0,t.isNumber)(g)?Math.max(g,v):v):"e"===o&&(v=r-n[c[a]]+R[c[a]],d.left=g=(0,t.isNumber)(g)?Math.max(g,v):v))}),d}}function x(t,e){return-1!==t.indexOf(e)}function M(t){return!!t.host}function b(t){return!!t.waypoints}function y(t){return!!t.labelTarget}p.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager","mouse"],p.prototype.activateSelection=function(t,e,i){this._dragging.init(t,"spaceTool.selection",{autoActivate:e,cursor:u,data:{context:{reactivate:i}},trapClick:!1})},p.prototype.activateMakeSpace=function(t){this._dragging.init(t,"spaceTool",{autoActivate:!0,cursor:u,data:{context:{}}})},p.prototype.makeSpace=function(t,e,i,n,a){return this._modeling.createSpace(t,e,i,n,a)},p.prototype.init=function(e,s){var c=r(e.dx)>r(e.dy)?"x":"y",u=e["d"+c],h=e[c]-u;if(r(u)<5)return!1;u<0&&(u*=-1),(0,a.hasPrimaryModifier)(e)&&(u*=-1);var l=(0,n.getDirection)(c,u),m=this._canvas.getRootElement(),g=(0,i.selfAndAllChildren)(m,!0),p=this.calculateAdjustments(g,c,u,h),f=v(p,c,l,h,this._eventBus.fire("spaceTool.getMinDimensions",{axis:c,direction:l,shapes:p.resizingShapes,start:h}));return(0,t.assign)(s,p,{axis:c,direction:l,spaceToolConstraints:f,start:h}),(0,o.set)("resize-"+("x"===c?"ew":"ns")),!0},p.prototype.calculateAdjustments=function(i,n,a,o){var r=this._rules,s=[],u=[],h=[],l=[];function m(t){s.includes(t)||s.push(t);var e=t.label;e&&!s.includes(e)&&s.push(e)}(0,t.forEach)(i,function(t){if(t.parent&&!y(t))if(b(t))l.push(t);else{var i=t[n],s=i+t[c[n]];if(M(t)&&(a>0&&(0,e.getMid)(t)[n]>o||a<0&&(0,e.getMid)(t)[n]<o))h.push(t);else{var g;if(!(a>0&&i>o||a<0&&s<o))return i<o&&s>o&&r.allowed("shape.resize",{shape:t})?(g=t,void(u.includes(g)||u.push(g))):void 0;m(t)}}}),(0,t.forEach)(s,function(e){var i=e.attachers;i&&(0,t.forEach)(i,function(t){m(t)})});var g=s.concat(u);return(0,t.forEach)(h,function(t){var e=t.host;x(g,e)&&m(t)}),g=s.concat(u),(0,t.forEach)(l,function(t){var e=t.source,i=t.target,n=t.label;x(g,e)&&x(g,i)&&n&&m(n)}),{movingShapes:s,resizingShapes:u}},p.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var t=this._mouse.getLastMoveEvent();this.activateSelection(t,!!t)},p.prototype.isActive=function(){var t=this._dragging.context();return!!t&&/^spaceTool/.test(t.prefix)};
},{"min-dash":"AmEv","../../layout/LayoutUtil":"aRzT","../../util/Elements":"KTcn","./SpaceUtil":"IxZ3","../../util/Mouse":"sz9Y","../../util/Cursor":"d9XG"}],"Yinx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=c;var e=require("min-dash"),r=require("tiny-svg"),a=require("../../util/SvgTransformUtil"),t="djs-dragging",n="djs-resizing",o=250,i=Math.max;function c(c,u,d,f,p){function h(r,a){(0,e.forEach)(r,function(e){p.addDragger(e,a),d.addMarker(e,t)})}c.on("spaceTool.selection.start",function(e){var a=d.getLayer("space"),t=e.context,n="M 0,-10000 L 0,10000",o="M -10000,0 L 10000,0",i=(0,r.create)("g");(0,r.attr)(i,f.cls("djs-crosshair-group",["no-events"])),(0,r.append)(a,i);var c=(0,r.create)("path");(0,r.attr)(c,"d",n),(0,r.classes)(c).add("djs-crosshair"),(0,r.append)(i,c);var s=(0,r.create)("path");(0,r.attr)(s,"d",o),(0,r.classes)(s).add("djs-crosshair"),(0,r.append)(i,s),t.crosshairGroup=i}),c.on("spaceTool.selection.move",function(e){var r=e.context.crosshairGroup;(0,a.translate)(r,e.x,e.y)}),c.on("spaceTool.selection.cleanup",function(e){var a=e.context.crosshairGroup;a&&(0,r.remove)(a)}),c.on("spaceTool.move",o,function(t){var o=t.context,c=o.line,v=o.axis,g=o.movingShapes,l=o.resizingShapes;if(o.initialized){if(!o.dragGroup){var m=d.getLayer("space");c=(0,r.create)("path"),(0,r.attr)(c,"d","M0,0 L0,0"),(0,r.classes)(c).add("djs-crosshair"),(0,r.append)(m,c),o.line=c;var x=(0,r.create)("g");(0,r.attr)(x,f.cls("djs-drag-group",["no-events"])),(0,r.append)(d.getActiveLayer(),x),h(g,x),h(o.movingConnections=u.filter(function(r){var a=!1;(0,e.forEach)(g,function(t){(0,e.forEach)(t.outgoing,function(e){r===e&&(a=!0)})});var t=!1;(0,e.forEach)(g,function(a){(0,e.forEach)(a.incoming,function(e){r===e&&(t=!0)})});var n=!1;(0,e.forEach)(l,function(a){(0,e.forEach)(a.outgoing,function(e){r===e&&(n=!0)})});var o=!1;return(0,e.forEach)(l,function(a){(0,e.forEach)(a.incoming,function(e){r===e&&(o=!0)})}),s(r)&&(a||n)&&(t||o)}),x),o.dragGroup=x}if(!o.frameGroup){var y=(0,r.create)("g");(0,r.attr)(y,f.cls("djs-frame-group",["no-events"])),(0,r.append)(d.getActiveLayer(),y);var E=[];(0,e.forEach)(l,function(e){var r=p.addFrame(e,y),a=r.getBBox();E.push({element:r,initialBounds:a}),d.addMarker(e,n)}),o.frameGroup=y,o.frames=E}var M={x:"M"+t.x+", -10000 L"+t.x+", 10000",y:"M -10000, "+t.y+" L 10000, "+t.y};(0,r.attr)(c,{d:M[v]});var j={x:t.dx,y:t.dy};j[{x:"y",y:"x"}[o.axis]]=0,(0,a.translate)(o.dragGroup,j.x,j.y),(0,e.forEach)(o.frames,function(e){var a,t,n=e.element,c=e.initialBounds;"e"===o.direction?(0,r.attr)(n,{width:i(c.width+j.x,5)}):(a=i(c.width-j.x,5),(0,r.attr)(n,{width:a,x:c.x+c.width-a})),"s"===o.direction?(0,r.attr)(n,{height:i(c.height+j.y,5)}):(t=i(c.height-j.y,5),(0,r.attr)(n,{height:t,y:c.y+c.height-t}))})}}),c.on("spaceTool.cleanup",function(a){var o=a.context,i=o.movingShapes,c=o.movingConnections,s=o.resizingShapes,u=o.line,f=o.dragGroup,p=o.frameGroup;(0,e.forEach)(i,function(e){d.removeMarker(e,t)}),(0,e.forEach)(c,function(e){d.removeMarker(e,t)}),f&&((0,r.remove)(u),(0,r.remove)(f)),(0,e.forEach)(s,function(e){d.removeMarker(e,n)}),p&&(0,r.remove)(p)})}function s(e){return e.waypoints}c.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];
},{"min-dash":"AmEv","tiny-svg":"WdCh","../../util/SvgTransformUtil":"EK9i"}],"c1Ed":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("../dragging")),r=i(require("../rules")),u=i(require("../tool-manager")),t=i(require("../preview-support")),o=i(require("../mouse")),a=i(require("./SpaceTool")),l=i(require("./SpaceToolPreview"));function i(e){return e&&e.__esModule?e:{default:e}}var d=exports.default={__init__:["spaceToolPreview"],__depends__:[e.default,r.default,u.default,t.default,o.default],spaceTool:["type",a.default],spaceToolPreview:["type",l.default]};
},{"../dragging":"gdZp","../rules":"GwI0","../tool-manager":"jzIl","../preview-support":"ENK2","../mouse":"vh82","./SpaceTool":"EcQc","./SpaceToolPreview":"Yinx"}],"HLvp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=i(require("inherits-browser")),t=i(require("diagram-js/lib/features/space-tool/SpaceTool")),r=require("../../util/ModelUtil");function i(e){return e&&e.__esModule?e:{default:e}}function u(e){e.invoke(t.default,this)}u.$inject=["injector"],(0,e.default)(u,t.default),u.prototype.calculateAdjustments=function(e,i,u,n){var o=t.default.prototype.calculateAdjustments.call(this,e,i,u,n);return o.resizingShapes=o.resizingShapes.filter(function(e){return!(0,r.is)(e,"bpmn:TextAnnotation")}),o};
},{"inherits-browser":"hUM3","diagram-js/lib/features/space-tool/SpaceTool":"EcQc","../../util/ModelUtil":"HvoA"}],"a6Zj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("diagram-js/lib/features/space-tool")),t=r(require("./BpmnSpaceTool"));function r(e){return e&&e.__esModule?e:{default:e}}var a=exports.default={__depends__:[e.default],spaceTool:["type",t.default]};
},{"diagram-js/lib/features/space-tool":"c1Ed","./BpmnSpaceTool":"HLvp"}],"FHM1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var t=require("min-dash");function e(t,e){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=e,this._eventBus=t,this._uid=1,t.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}e.$inject=["eventBus","injector"],e.prototype.execute=function(t,e){if(!t)throw new Error("command required");this._currentExecution.trigger="execute";const i={command:t,context:e};this._pushAction(i),this._internalExecute(i),this._popAction(i)},e.prototype.canExecute=function(t,e){const i={command:t,context:e},n=this._getHandler(t);let r=this._fire(t,"canExecute",i);if(void 0===r){if(!n)return!1;n.canExecute&&(r=n.canExecute(e))}return r},e.prototype.clear=function(t){this._stack.length=0,this._stackIdx=-1,!1!==t&&this._fire("changed",{trigger:"clear"})},e.prototype.undo=function(){let t,e=this._getUndoAction();if(e){for(this._currentExecution.trigger="undo",this._pushAction(e);e&&(this._internalUndo(e),(t=this._getUndoAction())&&t.id===e.id);)e=t;this._popAction()}},e.prototype.redo=function(){let t,e=this._getRedoAction();if(e){for(this._currentExecution.trigger="redo",this._pushAction(e);e&&(this._internalExecute(e,!0),(t=this._getRedoAction())&&t.id===e.id);)e=t;this._popAction()}},e.prototype.register=function(t,e){this._setHandler(t,e)},e.prototype.registerHandler=function(t,e){if(!t||!e)throw new Error("command and handlerCls must be defined");const i=this._injector.instantiate(e);this.register(t,i)},e.prototype.canUndo=function(){return!!this._getUndoAction()},e.prototype.canRedo=function(){return!!this._getRedoAction()},e.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]},e.prototype._getUndoAction=function(){return this._stack[this._stackIdx]},e.prototype._internalUndo=function(t){const e=t.command,i=t.context,n=this._getHandler(e);this._atomicDo(()=>{this._fire(e,"revert",t),n.revert&&this._markDirty(n.revert(i)),this._revertedAction(t),this._fire(e,"reverted",t)})},e.prototype._fire=function(t,e,i){arguments.length<3&&(i=e,e=null);const n=e?[t+"."+e,e]:[t];let r;i=this._eventBus.createEvent(i);for(const o of n)if(r=this._eventBus.fire("commandStack."+o,i),i.cancelBubble)break;return r},e.prototype._createId=function(){return this._uid++},e.prototype._atomicDo=function(t){const e=this._currentExecution;e.atomic=!0;try{t()}finally{e.atomic=!1}},e.prototype._internalExecute=function(t,e){const i=t.command,n=t.context,r=this._getHandler(i);if(!r)throw new Error("no command handler registered for <"+i+">");this._pushAction(t),e||(this._fire(i,"preExecute",t),r.preExecute&&r.preExecute(n),this._fire(i,"preExecuted",t)),this._atomicDo(()=>{this._fire(i,"execute",t),r.execute&&this._markDirty(r.execute(n)),this._executedAction(t,e),this._fire(i,"executed",t)}),e||(this._fire(i,"postExecute",t),r.postExecute&&r.postExecute(n),this._fire(i,"postExecuted",t)),this._popAction(t)},e.prototype._pushAction=function(t){const e=this._currentExecution,i=e.actions,n=i[0];if(e.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+t.command+")");t.id||(t.id=n&&n.id||this._createId()),i.push(t)},e.prototype._popAction=function(){const e=this._currentExecution,i=e.trigger,n=e.actions,r=e.dirty;n.pop(),n.length||(this._eventBus.fire("elements.changed",{elements:(0,t.uniqueBy)("id",r.reverse())}),r.length=0,this._fire("changed",{trigger:i}),e.trigger=null)},e.prototype._markDirty=function(e){const i=this._currentExecution;e&&(e=(0,t.isArray)(e)?e:[e],i.dirty=i.dirty.concat(e))},e.prototype._executedAction=function(t,e){const i=++this._stackIdx;e||this._stack.splice(i,this._stack.length,t)},e.prototype._revertedAction=function(t){this._stackIdx--},e.prototype._getHandler=function(t){return this._handlerMap[t]},e.prototype._setHandler=function(t,e){if(!t||!e)throw new Error("command and handler required");if(this._handlerMap[t])throw new Error("overriding handler for command <"+t+">");this._handlerMap[t]=e};
},{"min-dash":"AmEv"}],"pKQJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./CommandStack"));function t(e){return e&&e.__esModule?e:{default:e}}var r=exports.default={commandStack:["type",e.default]};
},{"./CommandStack":"FHM1"}],"B6Dj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var t=require("min-dash"),o=require("min-dom"),i=e(require("../../util/IdGenerator"));function e(t){return t&&t.__esModule?t:{default:t}}var s=new i.default("tt");function n(t){var i=(0,o.domify)('<div class="djs-tooltip-container" />');return(0,o.assignStyle)(i,{position:"absolute",width:"0",height:"0"}),t.insertBefore(i,t.firstChild),i}function r(t,i,e){(0,o.assignStyle)(t,{left:i+"px",top:e+"px"})}function a(t,o){t.style.display=!1===o?"none":""}var p="djs-tooltip",l="."+p;function u(t,i){this._eventBus=t,this._canvas=i,this._ids=s,this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}},this._tooltips={},this._tooltipRoot=n(i.getContainer());var e=this;o.delegate.bind(this._tooltipRoot,l,"mousedown",function(t){t.stopPropagation()}),o.delegate.bind(this._tooltipRoot,l,"mouseover",function(t){e.trigger("mouseover",t)}),o.delegate.bind(this._tooltipRoot,l,"mouseout",function(t){e.trigger("mouseout",t)}),this._init()}u.$inject=["eventBus","canvas"],u.prototype.add=function(o){if(!o.position)throw new Error("must specifiy tooltip position");if(!o.html)throw new Error("must specifiy tooltip html");var i=this._ids.next();return o=(0,t.assign)({},this._tooltipDefaults,o,{id:i}),this._addTooltip(o),o.timeout&&this.setTimeout(o),i},u.prototype.trigger=function(t,i){var e=i.delegateTarget||i.target,s=this.get((0,o.attr)(e,"data-tooltip-id"));s&&("mouseover"===t&&s.timeout&&this.clearTimeout(s),"mouseout"===t&&s.timeout&&(s.timeout=1e3,this.setTimeout(s)))},u.prototype.get=function(t){return"string"!=typeof t&&(t=t.id),this._tooltips[t]},u.prototype.clearTimeout=function(t){if(t=this.get(t)){var o=t.removeTimer;o&&(clearTimeout(o),t.removeTimer=null)}},u.prototype.setTimeout=function(t){if(t=this.get(t)){this.clearTimeout(t);var o=this;t.removeTimer=setTimeout(function(){o.remove(t)},t.timeout)}},u.prototype.remove=function(t){var i=this.get(t);i&&((0,o.remove)(i.html),(0,o.remove)(i.htmlContainer),delete i.htmlContainer,delete this._tooltips[i.id])},u.prototype.show=function(){a(this._tooltipRoot)},u.prototype.hide=function(){a(this._tooltipRoot,!1)},u.prototype._updateRoot=function(t){var o=t.scale||1,i=t.scale||1,e="matrix("+o+",0,0,"+i+","+-1*t.x*o+","+-1*t.y*i+")";this._tooltipRoot.style.transform=e,this._tooltipRoot.style["-ms-transform"]=e},u.prototype._addTooltip=function(i){var e,s=i.id,n=i.html,r=this._tooltipRoot;n.get&&n.constructor.prototype.jquery&&(n=n.get(0)),(0,t.isString)(n)&&(n=(0,o.domify)(n)),e=(0,o.domify)('<div data-tooltip-id="'+s+'" class="'+p+'">'),(0,o.assignStyle)(e,{position:"absolute"}),e.appendChild(n),i.type&&(0,o.classes)(e).add("djs-tooltip-"+i.type),i.className&&(0,o.classes)(e).add(i.className),i.htmlContainer=e,r.appendChild(e),this._tooltips[s]=i,this._updateTooltip(i)},u.prototype._updateTooltip=function(t){var o=t.position;r(t.htmlContainer,o.x,o.y)},u.prototype._updateTooltipVisibilty=function(o){(0,t.forEach)(this._tooltips,function(t){var i=t.show,e=t.htmlContainer,s=!0;i&&((i.minZoom>o.scale||i.maxZoom<o.scale)&&(s=!1),a(e,s))})},u.prototype._init=function(){var t=this;this._eventBus.on("canvas.viewbox.changing",function(o){t.hide()}),this._eventBus.on("canvas.viewbox.changed",function(o){var i;i=o.viewbox,t._updateRoot(i),t._updateTooltipVisibilty(i),t.show()})};
},{"min-dash":"AmEv","min-dom":"fWg5","../../util/IdGenerator":"ga56"}],"n3pu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./Tooltips"));function t(e){return e&&e.__esModule?e:{default:e}}var o=exports.default={__init__:["tooltips"],tooltips:["type",e.default]};
},{"./Tooltips":"B6Dj"}],"bKlM":[function(require,module,exports) {
"use strict";function e(e,r){if("function"!=typeof r)throw new Error("removeFn iterator must be a function");if(e){for(var t;t=e[0];)r(t);return e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.saveClear=e;
},{}],"tqmB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=require("min-dash"),t=l(require("inherits-browser")),a=require("../../util/Collections"),n=require("../../util/Removal"),r=l(require("../../command/CommandInterceptor"));function l(e){return e&&e.__esModule?e:{default:e}}var o=250,s=1400;function i(t,l,i){r.default.call(this,l);var u=t.get("movePreview",!1);l.on("shape.move.start",s,function(e){var t=e.context,a=t.shapes,n=t.validatedShapes;t.shapes=c(a),t.validatedShapes=c(n)}),u&&l.on("shape.move.start",o,function(t){var a=t.context,n=a.shapes,r=[];(0,e.forEach)(n,function(t){(0,e.forEach)(t.labels,function(e){e.hidden||-1!==a.shapes.indexOf(e)||r.push(e),t.labelTarget&&r.push(t)})}),(0,e.forEach)(r,function(e){u.makeDraggable(a,e,!0)})}),this.preExecuted("elements.move",s,function(t){var a=t.context.closure,n=a.enclosedElements,r=[];(0,e.forEach)(n,function(t){(0,e.forEach)(t.labels,function(e){n[e.id]||r.push(e)})}),a.addAll(r)}),this.preExecute(["connection.delete","shape.delete"],function(e){var t=e.context,a=t.connection||t.shape;(0,n.saveClear)(a.labels,function(e){i.removeShape(e,{nested:!0})})}),this.execute("shape.delete",function(e){var t=e.context,n=t.shape,r=n.labelTarget;r&&(t.labelTargetIndex=(0,a.indexOf)(r.labels,n),t.labelTarget=r,n.labelTarget=null)}),this.revert("shape.delete",function(e){var t=e.context,n=t.shape,r=t.labelTarget,l=t.labelTargetIndex;r&&((0,a.add)(r.labels,n,l),n.labelTarget=r)})}function c(t){return(0,e.filter)(t,function(e){return-1===t.indexOf(e.labelTarget)})}(0,t.default)(i,r.default),i.$inject=["injector","eventBus","modeling"];
},{"min-dash":"AmEv","inherits-browser":"hUM3","../../util/Collections":"Pujo","../../util/Removal":"bKlM","../../command/CommandInterceptor":"FIh1"}],"v0UK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./LabelSupport"));function t(e){return e&&e.__esModule?e:{default:e}}var r=exports.default={__init__:["labelSupport"],labelSupport:["type",e.default]};
},{"./LabelSupport":"tqmB"}],"eRAI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=require("min-dash"),t=require("../../util/Removal"),n=require("../../util/AttachUtil"),a=r(require("inherits-browser")),o=r(require("../../command/CommandInterceptor"));function r(e){return e&&e.__esModule?e:{default:e}}var c=251,s=1401,u="attach-ok";function i(a,r,i,d,m){o.default.call(this,r);var g=a.get("movePreview",!1);r.on("shape.move.start",s,function(e){var t=e.context,n=t.shapes,a=t.validatedShapes;t.shapes=f(n),t.validatedShapes=p(a)}),g&&r.on("shape.move.start",c,function(t){var n=t.context,a=h(n.shapes);(0,e.forEach)(a,function(t){g.makeDraggable(n,t,!0),(0,e.forEach)(t.labels,function(e){g.makeDraggable(n,e,!0)})})}),g&&r.on("shape.move.start",function(e){var t=e.context.shapes;if(1===t.length){var n=t[0].host;n&&(i.addMarker(n,u),r.once(["shape.move.out","shape.move.cleanup"],function(){i.removeMarker(n,u)}))}}),this.preExecuted("elements.move",s,function(t){var n=t.context,a=n.closure,o=h(n.shapes);(0,e.forEach)(o,function(e){a.add(e,a.topLevel[e.host.id])})}),this.postExecuted("elements.move",function(t){var n,a=t.context,o=a.shapes,r=a.newHost;r&&1!==o.length||(n=r?o:(0,e.filter)(o,function(e){var t=e.host;return l(e)&&!v(o,t)}),(0,e.forEach)(n,function(e){m.updateAttachment(e,r)}))}),this.postExecuted("elements.move",function(t){var n=t.context.shapes;(0,e.forEach)(n,function(t){(0,e.forEach)(t.attachers,function(t){(0,e.forEach)(t.outgoing.slice(),function(e){d.allowed("connection.reconnect",{connection:e,source:e.source,target:e.target})||m.removeConnection(e)}),(0,e.forEach)(t.incoming.slice(),function(e){d.allowed("connection.reconnect",{connection:e,source:e.source,target:e.target})||m.removeConnection(e)})})})}),this.postExecute("shape.create",function(e){var t=e.context,n=t.shape,a=t.host;a&&m.updateAttachment(n,a)}),this.postExecute("shape.replace",function(a){var o=a.context,r=o.oldShape,c=o.newShape;(0,t.saveClear)(r.attachers,function(e){"attach"===d.allowed("elements.move",{target:c,shapes:[e]})?m.updateAttachment(e,c):m.removeShape(e)}),c.attachers.length&&(0,e.forEach)(c.attachers,function(e){var t=(0,n.getNewAttachShapeDelta)(e,r,c);m.moveShape(e,t,e.parent)})}),this.postExecute("shape.resize",function(t){var a=t.context,o=a.shape,r=a.oldBounds,c=a.newBounds,s=o.attachers;!1!==(a.hints||{}).attachSupport&&(0,e.forEach)(s,function(t){var a=(0,n.getNewAttachShapeDelta)(t,r,c);m.moveShape(t,a,t.parent),(0,e.forEach)(t.labels,function(e){m.moveShape(e,a,e.parent)})})}),this.preExecute("shape.delete",function(e){var n=e.context.shape;(0,t.saveClear)(n.attachers,function(e){m.removeShape(e)}),n.host&&m.updateAttachment(n,null)})}function h(t){return(0,e.flatten)((0,e.map)(t,function(e){return e.attachers||[]}))}function f(t){var n=h(t);return(0,e.unionBy)("id",t,n)}function p(t){var n=(0,e.groupBy)(t,"id");return(0,e.filter)(t,function(e){for(;e;){if(e.host&&n[e.host.id])return!1;e=e.parent}return!0})}function l(e){return!!e.host}function v(e,t){return-1!==e.indexOf(t)}(0,a.default)(i,o.default),i.$inject=["injector","eventBus","canvas","rules","modeling"];
},{"min-dash":"AmEv","../../util/Removal":"bKlM","../../util/AttachUtil":"pUry","inherits-browser":"hUM3","../../command/CommandInterceptor":"FIh1"}],"fiAw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("../rules")),t=r(require("./AttachSupport"));function r(e){return e&&e.__esModule?e:{default:e}}var u=exports.default={__depends__:[e.default],__init__:["attachSupport"],attachSupport:["type",t.default]};
},{"../rules":"GwI0","./AttachSupport":"eRAI"}],"J272":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=require("min-dash"),t=require("./util/ModelingUtil"),n=require("../../util/ModelUtil");function i(e){this._model=e}i.$inject=["moddle"],i.prototype._needsId=function(e){return(0,t.isAny)(e,["bpmn:RootElement","bpmn:FlowElement","bpmn:MessageFlow","bpmn:DataAssociation","bpmn:Artifact","bpmn:Participant","bpmn:Lane","bpmn:LaneSet","bpmn:Process","bpmn:Collaboration","bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane","bpmn:Property","bpmn:CategoryValue"])},i.prototype._ensureId=function(e){var i;e.id?this._model.ids.claim(e.id,e):(i=(0,n.is)(e,"bpmn:Activity")?"Activity":(0,n.is)(e,"bpmn:Event")?"Event":(0,n.is)(e,"bpmn:Gateway")?"Gateway":(0,t.isAny)(e,["bpmn:SequenceFlow","bpmn:MessageFlow"])?"Flow":(e.$type||"").replace(/^[^:]*:/g,""),i+="_",!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(i,e)))},i.prototype.create=function(e,t){var n=this._model.create(e,t||{});return this._ensureId(n),n},i.prototype.createDiLabel=function(){return this.create("bpmndi:BPMNLabel",{bounds:this.createDiBounds()})},i.prototype.createDiShape=function(t,n){return this.create("bpmndi:BPMNShape",(0,e.assign)({bpmnElement:t,bounds:this.createDiBounds()},n))},i.prototype.createDiBounds=function(e){return this.create("dc:Bounds",e)},i.prototype.createDiWaypoints=function(t){var n=this;return(0,e.map)(t,function(e){return n.createDiWaypoint(e)})},i.prototype.createDiWaypoint=function(t){return this.create("dc:Point",(0,e.pick)(t,["x","y"]))},i.prototype.createDiEdge=function(t,n){return this.create("bpmndi:BPMNEdge",(0,e.assign)({bpmnElement:t,waypoint:this.createDiWaypoints([])},n))},i.prototype.createDiPlane=function(t,n){return this.create("bpmndi:BPMNPlane",(0,e.assign)({bpmnElement:t},n))};
},{"min-dash":"AmEv","./util/ModelingUtil":"YK7B","../../util/ModelUtil":"HvoA"}],"zyU7":[function(require,module,exports) {
var process = require("process");
var e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var t=require("min-dash"),n=p(require("inherits-browser")),o=require("diagram-js/lib/util/Collections"),i=require("diagram-js/lib/model"),a=require("../../util/ModelUtil"),s=require("./util/ModelingUtil"),c=require("diagram-js/lib/util/PositionUtil"),r=p(require("diagram-js/lib/command/CommandInterceptor"));function p(e){return e&&e.__esModule?e:{default:e}}function u(e,n,o,i){r.default.call(this,e),this._bpmnFactory=n,this._translate=i;var c=this;function p(e){var n=e.context.oldRoot.children;(0,t.forEach)(n,function(e){(0,a.is)(e,"bpmn:BaseElement")&&c.updateParent(e)})}function u(e){var t=e.context.shape;(0,a.is)(t,"bpmn:BaseElement")&&c.updateBounds(t)}function l(e){c.updateConnection(e.context)}function m(e){c.updateConnectionWaypoints(e.context.connection)}function b(e){c.updateAttachment(e.context)}this.executed(["connection.layout","connection.create"],function(e){var t,n=e.context,i=n.hints||{};n.cropped||!1===i.createElementsBehavior||((t=n.connection).waypoints=o.getCroppedWaypoints(t),n.cropped=!0)}),this.reverted(["connection.layout"],function(e){delete e.context.cropped}),this.executed(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],d(function(e){var t=e.context;c.updateParent(t.shape||t.connection,t.oldParent)})),this.reverted(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],d(function(e){var t=e.context,n=t.shape||t.connection,o=t.parent||t.newParent;c.updateParent(n,o)})),this.executed(["canvas.updateRoot"],p),this.reverted(["canvas.updateRoot"],p),this.executed(["shape.move","shape.create","shape.resize"],d(function(e){"label"!==e.context.shape.type&&u(e)})),this.reverted(["shape.move","shape.create","shape.resize"],d(function(e){"label"!==e.context.shape.type&&u(e)})),e.on("shape.changed",function(e){"label"===e.element.type&&u({context:{shape:e.element}})}),this.executed(["connection.create","connection.move","connection.delete","connection.reconnect"],d(l)),this.reverted(["connection.create","connection.move","connection.delete","connection.reconnect"],d(l)),this.executed(["connection.layout","connection.move","connection.updateWaypoints"],d(m)),this.reverted(["connection.layout","connection.move","connection.updateWaypoints"],d(m)),this.executed("connection.reconnect",d(function(e){var t=e.context,n=t.connection,o=t.oldSource,i=t.newSource,c=(0,a.getBusinessObject)(n),r=(0,a.getBusinessObject)(o),p=(0,a.getBusinessObject)(i);c.conditionExpression&&!(0,s.isAny)(p,["bpmn:Activity","bpmn:ExclusiveGateway","bpmn:InclusiveGateway"])&&(t.oldConditionExpression=c.conditionExpression,delete c.conditionExpression),o!==i&&r.default===c&&(t.oldDefault=r.default,delete r.default)})),this.reverted("connection.reconnect",d(function(e){var t=e.context,n=t.connection,o=t.oldSource,i=t.newSource,s=(0,a.getBusinessObject)(n),c=(0,a.getBusinessObject)(o),r=(0,a.getBusinessObject)(i);t.oldConditionExpression&&(s.conditionExpression=t.oldConditionExpression),t.oldDefault&&(c.default=t.oldDefault,delete r.default)})),this.executed(["element.updateAttachment"],d(b)),this.reverted(["element.updateAttachment"],d(b))}function l(e){for(;e&&!(0,a.is)(e,"bpmn:Definitions");)e=e.$parent;return e}function d(e){return function(t){var n=t.context,o=n.shape||n.connection;(0,a.is)(o,"bpmn:BaseElement")&&e(t)}}function m(e){if((0,a.is)(e,"bpmn:Activity")){var t=(0,a.getDi)(e);if(t){var n=t.get("label");if(n)return n.get("bounds")}}}(0,n.default)(u,r.default),u.$inject=["eventBus","bpmnFactory","connectionDocking","translate"],u.prototype.updateAttachment=function(e){var t=e.shape,n=t.businessObject,o=t.host;n.attachedToRef=o&&o.businessObject},u.prototype.updateParent=function(e,t){if(!(e instanceof i.Label||(0,a.is)(e,"bpmn:DataStoreReference")&&e.parent&&(0,a.is)(e.parent,"bpmn:Collaboration"))){var n=e.parent,o=e.businessObject,s=(0,a.getDi)(e),c=n&&n.businessObject,r=(0,a.getDi)(n);(0,a.is)(e,"bpmn:FlowNode")&&this.updateFlowNodeRefs(o,c,t&&t.businessObject),(0,a.is)(e,"bpmn:DataOutputAssociation")&&(c=e.source?e.source.businessObject:null),(0,a.is)(e,"bpmn:DataInputAssociation")&&(c=e.target?e.target.businessObject:null),this.updateSemanticParent(o,c),(0,a.is)(e,"bpmn:DataObjectReference")&&o.dataObjectRef&&this.updateSemanticParent(o.dataObjectRef,c),this.updateDiParent(s,r)}},u.prototype.updateBounds=function(e){var n=(0,a.getDi)(e),o=m(e);if(o){var s=(0,c.delta)(o,n.get("bounds"));(0,t.assign)(o,{x:e.x+s.x,y:e.y+s.y})}var r=e instanceof i.Label?this._getLabel(n):n,p=r.bounds;p||(p=this._bpmnFactory.createDiBounds(),r.set("bounds",p)),(0,t.assign)(p,{x:e.x,y:e.y,width:e.width,height:e.height})},u.prototype.updateFlowNodeRefs=function(e,t,n){var i,s;n!==t&&((0,a.is)(n,"bpmn:Lane")&&(i=n.get("flowNodeRef"),(0,o.remove)(i,e)),(0,a.is)(t,"bpmn:Lane")&&(s=t.get("flowNodeRef"),(0,o.add)(s,e)))},u.prototype.updateDiConnection=function(e,t,n){var o=(0,a.getDi)(e),i=(0,a.getDi)(t),s=(0,a.getDi)(n);o.sourceElement&&o.sourceElement.bpmnElement!==(0,a.getBusinessObject)(t)&&(o.sourceElement=t&&i),o.targetElement&&o.targetElement.bpmnElement!==(0,a.getBusinessObject)(n)&&(o.targetElement=n&&s)},u.prototype.updateDiParent=function(e,t){if(t&&!(0,a.is)(t,"bpmndi:BPMNPlane")&&(t=t.$parent),e.$parent!==t){var n=(t||e.$parent).get("planeElement");t?(n.push(e),e.$parent=t):((0,o.remove)(n,e),e.$parent=null)}},u.prototype.getLaneSet=function(e){var t,n;return(0,a.is)(e,"bpmn:Lane")?((t=e.childLaneSet)||(t=this._bpmnFactory.create("bpmn:LaneSet"),e.childLaneSet=t,t.$parent=e),t):((0,a.is)(e,"bpmn:Participant")&&(e=e.processRef),(t=(n=e.get("laneSets"))[0])||((t=this._bpmnFactory.create("bpmn:LaneSet")).$parent=e,n.push(t)),t)},u.prototype.updateSemanticParent=function(e,t,n){var i,s=this._translate;if(e.$parent!==t&&!(((0,a.is)(e,"bpmn:DataInput")||(0,a.is)(e,"bpmn:DataOutput"))&&((0,a.is)(t,"bpmn:Participant")&&"processRef"in t&&(t=t.processRef),"ioSpecification"in t&&t.ioSpecification===e.$parent))){if((0,a.is)(e,"bpmn:Lane"))t&&(t=this.getLaneSet(t)),i="lanes";else if((0,a.is)(e,"bpmn:FlowElement")){if(t)if((0,a.is)(t,"bpmn:Participant"))t=t.processRef;else if((0,a.is)(t,"bpmn:Lane"))do{t=t.$parent.$parent}while((0,a.is)(t,"bpmn:Lane"));i="flowElements"}else if((0,a.is)(e,"bpmn:Artifact")){for(;t&&!(0,a.is)(t,"bpmn:Process")&&!(0,a.is)(t,"bpmn:SubProcess")&&!(0,a.is)(t,"bpmn:Collaboration");){if((0,a.is)(t,"bpmn:Participant")){t=t.processRef;break}t=t.$parent}i="artifacts"}else if((0,a.is)(e,"bpmn:MessageFlow"))i="messageFlows";else if((0,a.is)(e,"bpmn:Participant")){i="participants";var c,r=e.processRef;r&&(c=l(e.$parent||t),e.$parent&&((0,o.remove)(c.get("rootElements"),r),r.$parent=null),t&&((0,o.add)(c.get("rootElements"),r),r.$parent=c))}else(0,a.is)(e,"bpmn:DataOutputAssociation")?i="dataOutputAssociations":(0,a.is)(e,"bpmn:DataInputAssociation")&&(i="dataInputAssociations");if(!i)throw new Error(s("no parent for {element} in {parent}",{element:e.id,parent:t.id}));var p;if(e.$parent&&(p=e.$parent.get(i),(0,o.remove)(p,e)),t?((p=t.get(i)).push(e),e.$parent=t):e.$parent=null,n){var u=n.get(i);(0,o.remove)(p,e),t&&(u||(u=[],t.set(i,u)),u.push(e))}}},u.prototype.updateConnectionWaypoints=function(e){(0,a.getDi)(e).set("waypoint",this._bpmnFactory.createDiWaypoints(e.waypoints))},u.prototype.updateConnection=function(e){var t,n=e.connection,i=(0,a.getBusinessObject)(n),s=n.source,c=(0,a.getBusinessObject)(s),r=n.target,p=(0,a.getBusinessObject)(n.target);if((0,a.is)(i,"bpmn:DataAssociation"))(0,a.is)(i,"bpmn:DataInputAssociation")?(i.get("sourceRef")[0]=c,t=e.parent||e.newParent||p,this.updateSemanticParent(i,p,t)):(0,a.is)(i,"bpmn:DataOutputAssociation")&&(t=e.parent||e.newParent||c,this.updateSemanticParent(i,c,t),i.targetRef=p);else{var u=(0,a.is)(i,"bpmn:SequenceFlow");i.sourceRef!==c&&(u&&((0,o.remove)(i.sourceRef&&i.sourceRef.get("outgoing"),i),c&&c.get("outgoing")&&c.get("outgoing").push(i)),i.sourceRef=c),i.targetRef!==p&&(u&&((0,o.remove)(i.targetRef&&i.targetRef.get("incoming"),i),p&&p.get("incoming")&&p.get("incoming").push(i)),i.targetRef=p)}this.updateConnectionWaypoints(n),this.updateDiConnection(n,s,r)},u.prototype._getLabel=function(e){return e.label||(e.label=this._bpmnFactory.createDiLabel()),e.label};
},{"min-dash":"AmEv","inherits-browser":"hUM3","diagram-js/lib/util/Collections":"Pujo","diagram-js/lib/model":"av0a","../../util/ModelUtil":"HvoA","./util/ModelingUtil":"YK7B","diagram-js/lib/util/PositionUtil":"XPIE","diagram-js/lib/command/CommandInterceptor":"FIh1","process":"g5IB"}],"AVAe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=c;var e=require("min-dash"),t=p(require("inherits-browser")),i=require("../../util/ModelUtil"),n=require("../modeling/util/ModelingUtil"),r=require("../../util/DiUtil"),a=p(require("diagram-js/lib/core/ElementFactory")),s=require("../../util/LabelUtil"),o=require("../../util/CompatibilityUtil");function p(e){return e&&e.__esModule?e:{default:e}}function c(e,t,i){a.default.call(this),this._bpmnFactory=e,this._moddle=t,this._translate=i}function d(t,i,n){return(0,e.forEach)(n,function(e){i=h(t,i,e)}),i}function h(t,i,n){return void 0===i[n]?i:(t[n]=i[n],(0,e.omit)(i,[n]))}function l(e){return(0,n.isAny)(e,["bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane"])}(0,t.default)(c,a.default),c.$inject=["bpmnFactory","moddle","translate"],c.prototype.baseCreate=a.default.prototype.create,c.prototype.create=function(t,i){if("label"===t){var n=i.di||this._bpmnFactory.createDiLabel();return this.baseCreate(t,(0,e.assign)({type:"label",di:n},s.DEFAULT_LABEL_SIZE,i))}return this.createBpmnElement(t,i)},c.prototype.createBpmnElement=function(t,n){var a,s,p,c=this._translate,u=(n=(0,e.assign)({},n||{})).businessObject,b=n.di;if(!u){if(!n.type)throw new Error(c("no shape type specified"));u=this._bpmnFactory.create(n.type),(0,o.ensureCompatDiRef)(u)}if(!l(b)){var m=(0,e.assign)({},b||{},{id:u.id+"_di"});b="root"===t?this._bpmnFactory.createDiPlane(u,m):"connection"===t?this._bpmnFactory.createDiEdge(u,m):this._bpmnFactory.createDiShape(u,m)}return(0,i.is)(u,"bpmn:Group")&&(n=(0,e.assign)({isFrame:!0},n)),(n=d(u,n,["processRef","isInterrupting","associationDirection","isForCompensation"])).isExpanded&&(n=h(b,n,"isExpanded")),(0,i.is)(u,"bpmn:SubProcess")&&(n.collapsed=!(0,r.isExpanded)(u,b)),(0,i.is)(u,"bpmn:ExclusiveGateway")&&(b.isMarkerVisible=!0),(0,e.isDefined)(n.triggeredByEvent)&&(u.triggeredByEvent=n.triggeredByEvent,delete n.triggeredByEvent),(0,e.isDefined)(n.cancelActivity)&&(u.cancelActivity=n.cancelActivity,delete n.cancelActivity),n.eventDefinitionType&&(s=u.get("eventDefinitions")||[],p=this._bpmnFactory.create(n.eventDefinitionType,n.eventDefinitionAttrs),"bpmn:ConditionalEventDefinition"===n.eventDefinitionType&&(p.condition=this._bpmnFactory.create("bpmn:FormalExpression")),s.push(p),p.$parent=u,u.eventDefinitions=s,delete n.eventDefinitionType),a=this.getDefaultSize(u,b),n=(0,e.assign)({id:u.id},a,n,{businessObject:u,di:b}),this.baseCreate(t,n)},c.prototype.getDefaultSize=function(e,t){var n=(0,i.getBusinessObject)(e);return t=t||(0,i.getDi)(e),(0,i.is)(n,"bpmn:SubProcess")?(0,r.isExpanded)(n,t)?{width:350,height:200}:{width:100,height:80}:(0,i.is)(n,"bpmn:Task")?{width:100,height:80}:(0,i.is)(n,"bpmn:Gateway")?{width:50,height:50}:(0,i.is)(n,"bpmn:Event")?{width:36,height:36}:(0,i.is)(n,"bpmn:Participant")?(0,r.isExpanded)(n,t)?{width:600,height:250}:{width:400,height:60}:(0,i.is)(n,"bpmn:Lane")?{width:400,height:100}:(0,i.is)(n,"bpmn:DataObjectReference")?{width:36,height:50}:(0,i.is)(n,"bpmn:DataStoreReference")?{width:50,height:50}:(0,i.is)(n,"bpmn:TextAnnotation")?{width:100,height:30}:(0,i.is)(n,"bpmn:Group")?{width:300,height:300}:{width:100,height:80}},c.prototype.createParticipantShape=function(t){return(0,e.isObject)(t)||(t={isExpanded:t}),!1!==(t=(0,e.assign)({type:"bpmn:Participant"},t||{})).isExpanded&&(t.processRef=this._bpmnFactory.create("bpmn:Process")),this.createShape(t)};
},{"min-dash":"AmEv","inherits-browser":"hUM3","../../util/ModelUtil":"HvoA","../modeling/util/ModelingUtil":"YK7B","../../util/DiUtil":"lWoN","diagram-js/lib/core/ElementFactory":"eiiQ","../../util/LabelUtil":"yKfU","../../util/CompatibilityUtil":"QE22"}],"fnLq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("min-dash");function t(e,t){this._modeling=e,this._canvas=t}t.$inject=["modeling","canvas"],t.prototype.preExecute=function(t){var i=this._modeling,n=t.elements,o=t.alignment;(0,e.forEach)(n,function(t){var n={x:0,y:0};(0,e.isDefined)(o.left)?n.x=o.left-t.x:(0,e.isDefined)(o.right)?n.x=o.right-t.width-t.x:(0,e.isDefined)(o.center)?n.x=o.center-Math.round(t.width/2)-t.x:(0,e.isDefined)(o.top)?n.y=o.top-t.y:(0,e.isDefined)(o.bottom)?n.y=o.bottom-t.height-t.y:(0,e.isDefined)(o.middle)&&(n.y=o.middle-Math.round(t.height/2)-t.y),i.moveElements([t],n,t.parent)})},t.prototype.postExecute=function(e){};
},{"min-dash":"AmEv"}],"pPfR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("min-dash");function t(e){this._modeling=e}function o(t,o){return(0,e.some)(t.outgoing,function(e){return e.target===o})}t.$inject=["modeling"],t.prototype.preExecute=function(e){var t=e.source;if(!t)throw new Error("source required");var o=e.target||t.parent,n=e.shape,r=e.hints||{};n=e.shape=this._modeling.createShape(n,e.position,o,{attach:r.attach}),e.shape=n},t.prototype.postExecute=function(e){var t=e.hints||{};o(e.source,e.shape)||(t.connectionTarget===e.source?this._modeling.connect(e.shape,e.source,e.connection):this._modeling.connect(e.source,e.shape,e.connection))};
},{"min-dash":"AmEv"}],"mxOA":[function(require,module,exports) {
"use strict";function e(e,t){this._canvas=e,this._layouter=t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e,e.$inject=["canvas","layouter"],e.prototype.execute=function(e){var t=e.connection,r=e.source,n=e.target,o=e.parent,a=e.parentIndex,i=e.hints;if(!r||!n)throw new Error("source and target required");if(!o)throw new Error("parent required");return t.source=r,t.target=n,t.waypoints||(t.waypoints=this._layouter.layoutConnection(t,i)),this._canvas.addConnection(t,o,a),t},e.prototype.revert=function(e){var t=e.connection;return this._canvas.removeConnection(t),t.source=null,t.target=null,t};
},{}],"bnlL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=require("min-dash"),t=require("../../../util/Elements"),i=Math.round;function n(e){this._modeling=e}function r(e){return!!e.waypoints}n.$inject=["modeling"],n.prototype.preExecute=function(n){var a=n.elements,o=n.parent,s=n.parentIndex,u=n.position,c=n.hints,h=this._modeling;(0,e.forEach)(a,function(t){(0,e.isNumber)(t.x)||(t.x=0),(0,e.isNumber)(t.y)||(t.y=0)});var d=(0,e.filter)(a,function(e){return!e.hidden}),p=(0,t.getBBox)(d);(0,e.forEach)(a,function(t){r(t)&&(t.waypoints=(0,e.map)(t.waypoints,function(e){return{x:i(e.x-p.x-p.width/2+u.x),y:i(e.y-p.y-p.height/2+u.y)}})),(0,e.assign)(t,{x:i(t.x-p.x-p.width/2+u.x),y:i(t.y-p.y-p.height/2+u.y)})});var x=(0,t.getParents)(a),y={};(0,e.forEach)(a,function(t){if(r(t))y[t.id]=(0,e.isNumber)(s)?h.createConnection(y[t.source.id],y[t.target.id],s,t,t.parent||o,c):h.createConnection(y[t.source.id],y[t.target.id],t,t.parent||o,c);else{var i=(0,e.assign)({},c);-1===x.indexOf(t)&&(i.autoResize=!1),y[t.id]=(0,e.isNumber)(s)?h.createShape(t,(0,e.pick)(t,["x","y","width","height"]),t.parent||o,s,i):h.createShape(t,(0,e.pick)(t,["x","y","width","height"]),t.parent||o,i)}}),n.elements=(0,e.values)(y)};
},{"min-dash":"AmEv","../../../util/Elements":"KTcn"}],"MAzz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("min-dash"),r=Math.round;function t(e){this._canvas=e}t.$inject=["canvas"],t.prototype.execute=function(t){var n=t.shape,a=t.position,i=t.parent,o=t.parentIndex;if(!i)throw new Error("parent required");if(!a)throw new Error("position required");return void 0!==a.width?(0,e.assign)(n,a):(0,e.assign)(n,{x:a.x-r(n.width/2),y:a.y-r(n.height/2)}),this._canvas.addShape(n,i,o),n},t.prototype.revert=function(e){var r=e.shape;return this._canvas.removeShape(r),r};
},{"min-dash":"AmEv"}],"syCv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=r(require("inherits-browser")),t=r(require("./CreateShapeHandler"));function r(e){return e&&e.__esModule?e:{default:e}}function a(e){t.default.call(this,e)}(0,e.default)(a,t.default),a.$inject=["canvas"];var l=t.default.prototype.execute;a.prototype.execute=function(e){var t=e.shape;return o(t),t.labelTarget=e.labelTarget,l.call(this,e)};var u=t.default.prototype.revert;function o(e){["width","height"].forEach(function(t){void 0===e[t]&&(e[t]=0)})}a.prototype.revert=function(e){return e.shape.labelTarget=null,u.call(this,e)};
},{"inherits-browser":"hUM3","./CreateShapeHandler":"MAzz"}],"Pcug":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("../../../util/Collections"),n=require("../../../util/Removal");function t(e,n){this._canvas=e,this._modeling=n}t.$inject=["canvas","modeling"],t.prototype.preExecute=function(e){var t=this._modeling,o=e.connection;(0,n.saveClear)(o.incoming,function(e){t.removeConnection(e,{nested:!0})}),(0,n.saveClear)(o.outgoing,function(e){t.removeConnection(e,{nested:!0})})},t.prototype.execute=function(n){var t=n.connection,o=t.parent;return n.parent=o,n.parentIndex=(0,e.indexOf)(o.children,t),n.source=t.source,n.target=t.target,this._canvas.removeConnection(t),t.source=null,t.target=null,t},t.prototype.revert=function(n){var t=n.connection,o=n.parent,r=n.parentIndex;return t.source=n.source,t.target=n.target,(0,e.add)(o.children,t,r),this._canvas.addConnection(t,o),t};
},{"../../../util/Collections":"Pujo","../../../util/Removal":"bKlM"}],"ZnFc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("min-dash");function t(e,t){this._modeling=e,this._elementRegistry=t}t.$inject=["modeling","elementRegistry"],t.prototype.postExecute=function(t){var i=this._modeling,n=this._elementRegistry,o=t.elements;(0,e.forEach)(o,function(e){n.get(e.id)&&(e.waypoints?i.removeConnection(e):i.removeShape(e))})};
},{"min-dash":"AmEv"}],"jAaI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("../../../util/Collections"),n=require("../../../util/Removal");function t(e,n){this._canvas=e,this._modeling=n}function o(e){return e.waypoints}t.$inject=["canvas","modeling"],t.prototype.preExecute=function(e){var t=this._modeling,r=e.shape;(0,n.saveClear)(r.incoming,function(e){t.removeConnection(e,{nested:!0})}),(0,n.saveClear)(r.outgoing,function(e){t.removeConnection(e,{nested:!0})}),(0,n.saveClear)(r.children,function(e){o(e)?t.removeConnection(e,{nested:!0}):t.removeShape(e,{nested:!0})})},t.prototype.execute=function(n){var t=this._canvas,o=n.shape,r=o.parent;return n.oldParent=r,n.oldParentIndex=(0,e.indexOf)(r.children,o),t.removeShape(o),o},t.prototype.revert=function(n){var t=this._canvas,o=n.shape,r=n.oldParent,a=n.oldParentIndex;return(0,e.add)(r.children,o,a),t.addShape(o,r),o};
},{"../../../util/Collections":"Pujo","../../../util/Removal":"bKlM"}],"UpPc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var n=require("min-dash");function e(n){this._modeling=n}e.$inject=["modeling"];var t={x:"y",y:"x"};e.prototype.preExecute=function(e){var a=this._modeling,r=e.groups,o=e.axis,i=e.dimension;function m(n,e){n.range.min=Math.min(e[o],n.range.min),n.range.max=Math.max(e[o]+e[i],n.range.max)}function g(n){return n[o]+n[i]/2}function u(n){return n.length-1}function l(n){return n.max-n.min}var c,s,f=r[0],h=u(r),x=r[h],p=0;(0,n.forEach)(r,function(e,c){var s,f,x;e.elements.length<2?c&&c!==r.length-1&&(m(e,e.elements[0]),p+=l(e.range)):(f=(s=(0,n.sortBy)(e.elements,o))[0],c===h&&(f=s[u(s)]),x=g(f),e.range=null,(0,n.forEach)(s,function(n){!function(n,e){var r={y:0};r[o]=n-g(e),r[o]&&(r[t[o]]=0,a.moveElements([e],r,e.parent))}(x,n),null!==e.range?m(e,n):e.range={min:n[o],max:n[o]+n[i]}}),c&&c!==r.length-1&&(p+=l(e.range)))}),s=Math.abs(x.range.min-f.range.max),(c=Math.round((s-p)/(r.length-1)))<r.length-1||(0,n.forEach)(r,function(e,m){var g,u={};e!==f&&e!==x&&(g=r[m-1],e.range.max=0,(0,n.forEach)(e.elements,function(n,r){u[t[o]]=0,u[o]=g.range.max-n[o]+c,e.range.min!==n[o]&&(u[o]+=n[o]-e.range.min),u[o]&&a.moveElements([n],u,n.parent),e.range.max=Math.max(n[o]+n[i],r?e.range.max:0)}))})},e.prototype.postExecute=function(n){};
},{"min-dash":"AmEv"}],"WP7u":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var t=require("min-dash");function e(t,e){this._layouter=t,this._canvas=e}e.$inject=["layouter","canvas"],e.prototype.execute=function(e){var n=e.connection,o=n.waypoints;return(0,t.assign)(e,{oldWaypoints:o}),n.waypoints=this._layouter.layoutConnection(n,e.hints),n},e.prototype.revert=function(t){var e=t.connection;return e.waypoints=t.oldWaypoints,e};
},{"min-dash":"AmEv"}],"HJ1V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("min-dash"),n=require("../../../util/Collections");function r(){}r.prototype.execute=function(r){var t=r.connection,o=r.delta,i=r.newParent||t.parent,a=r.newParentIndex,l=t.parent;return r.oldParent=l,r.oldParentIndex=(0,n.remove)(l.children,t),(0,n.add)(i.children,t,a),t.parent=i,(0,e.forEach)(t.waypoints,function(e){e.x+=o.x,e.y+=o.y,e.original&&(e.original.x+=o.x,e.original.y+=o.y)}),t},r.prototype.revert=function(r){var t=r.connection,o=t.parent,i=r.oldParent,a=r.oldParentIndex,l=r.delta;return(0,n.remove)(o.children,t),(0,n.add)(i.children,t,a),t.parent=i,(0,e.forEach)(t.waypoints,function(e){e.x-=l.x,e.y-=l.y,e.original&&(e.original.x-=l.x,e.original.y-=l.y)}),t};
},{"min-dash":"AmEv","../../../util/Collections":"Pujo"}],"v8xR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var e=require("min-dash"),t=require("../../../../util/Elements");function s(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}s.prototype.add=function(e,t){return this.addAll([e],t)},s.prototype.addAll=function(s,i){var n=(0,t.getClosure)(s,!!i,this);return(0,e.assign)(this,n),this};
},{"min-dash":"AmEv","../../../../util/Elements":"KTcn"}],"bJO4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("min-dash"),o=require("./AnchorsHelper"),t=n(require("./MoveClosure"));function n(e){return e&&e.__esModule?e:{default:e}}function r(e){this._modeling=e}r.prototype.moveRecursive=function(e,o,t){return e?this.moveClosure(this.getClosure(e),o,t):[]},r.prototype.moveClosure=function(t,n,r,u,i){var c=this._modeling,s=t.allShapes,l=t.allConnections,a=t.enclosedConnections,d=t.topLevel,p=!1;i&&i.parent===r&&(p=!0),(0,e.forEach)(s,function(e){c.moveShape(e,n,d[e.id]&&!p&&r,{recurse:!1,layout:!1})}),(0,e.forEach)(l,function(e){var t=!!s[e.source.id],u=!!s[e.target.id];a[e.id]&&t&&u?c.moveConnection(e,n,d[e.id]&&!p&&r):c.layoutConnection(e,{connectionStart:t&&(0,o.getMovedSourceAnchor)(e,e.source,n),connectionEnd:u&&(0,o.getMovedTargetAnchor)(e,e.target,n)})})},r.prototype.getClosure=function(e){return(new t.default).addAll(e,!0)};
},{"min-dash":"AmEv","./AnchorsHelper":"fUdJ","./MoveClosure":"v8xR"}],"pWKm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("./helper/MoveHelper"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t){this._helper=new e.default(t)}r.$inject=["modeling"],r.prototype.preExecute=function(e){e.closure=this._helper.getClosure(e.shapes)},r.prototype.postExecute=function(e){var t,r=e.hints;r&&r.primaryShape&&(t=r.primaryShape,r.oldParent=t.parent),this._helper.moveClosure(e.closure,e.delta,e.newParent,e.newHost,t)};
},{"./helper/MoveHelper":"bJO4"}],"CYrB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=require("min-dash"),n=o(require("./helper/MoveHelper")),t=require("../../../util/Collections"),r=require("./helper/AnchorsHelper");function o(e){return e&&e.__esModule?e:{default:e}}function i(e){this._modeling=e,this._helper=new n.default(e)}i.$inject=["modeling"],i.prototype.execute=function(n){var r=n.shape,o=n.delta,i=n.newParent||r.parent,a=n.newParentIndex,l=r.parent;return n.oldBounds=(0,e.pick)(r,["x","y","width","height"]),n.oldParent=l,n.oldParentIndex=(0,t.remove)(l.children,r),(0,t.add)(i.children,r,a),(0,e.assign)(r,{parent:i,x:r.x+o.x,y:r.y+o.y}),r},i.prototype.postExecute=function(n){var t=n.shape,o=n.delta,i=n.hints,a=this._modeling;!1!==i.layout&&((0,e.forEach)(t.incoming,function(e){a.layoutConnection(e,{connectionEnd:(0,r.getMovedTargetAnchor)(e,t,o)})}),(0,e.forEach)(t.outgoing,function(e){a.layoutConnection(e,{connectionStart:(0,r.getMovedSourceAnchor)(e,t,o)})})),!1!==i.recurse&&this.moveChildren(n)},i.prototype.revert=function(n){var r=n.shape,o=n.oldParent,i=n.oldParentIndex,a=n.delta;return(0,t.add)(o.children,r,i),(0,e.assign)(r,{parent:o,x:r.x-a.x,y:r.y-a.y}),r},i.prototype.moveChildren=function(e){var n=e.delta,t=e.shape;this._helper.moveRecursive(t.children,n,null)},i.prototype.getNewParent=function(e){return e.newParent||e.shape.parent};
},{"min-dash":"AmEv","./helper/MoveHelper":"bJO4","../../../util/Collections":"Pujo","./helper/AnchorsHelper":"fUdJ"}],"tiMI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var n=require("min-dash");function o(n){this._modeling=n}function t(n){return n.original||n}o.$inject=["modeling"],o.prototype.execute=function(o){var t=o.newSource,e=o.newTarget,r=o.connection,i=o.dockingOrPoints;if(!t&&!e)throw new Error("newSource or newTarget required");return(0,n.isArray)(i)&&(o.oldWaypoints=r.waypoints,r.waypoints=i),t&&(o.oldSource=r.source,r.source=t),e&&(o.oldTarget=r.target,r.target=e),r},o.prototype.postExecute=function(o){var e=o.connection,r=o.newSource,i=o.newTarget,c=o.dockingOrPoints,a=o.hints||{},s={};a.connectionStart&&(s.connectionStart=a.connectionStart),a.connectionEnd&&(s.connectionEnd=a.connectionEnd),!1!==a.layoutConnection&&(!r||i&&"source"!==a.docking||(s.connectionStart=s.connectionStart||t((0,n.isArray)(c)?c[0]:c)),!i||r&&"target"!==a.docking||(s.connectionEnd=s.connectionEnd||t((0,n.isArray)(c)?c[c.length-1]:c)),a.newWaypoints&&(s.waypoints=a.newWaypoints),this._modeling.layoutConnection(e,s))},o.prototype.revert=function(n){var o=n.oldSource,t=n.oldTarget,e=n.oldWaypoints,r=n.connection;return o&&(r.source=o),t&&(r.target=t),e&&(r.waypoints=e),r};
},{"min-dash":"AmEv"}],"QtRz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=require("min-dash"),t=require("./helper/AnchorsHelper");function n(e,t){this._modeling=e,this._rules=t}n.$inject=["modeling","rules"],n.prototype.preExecute=function(n){var o,r=this,c=this._modeling,i=this._rules,h=n.oldShape,a=n.newData,p=n.hints||{};function s(e,t,n){return i.allowed("connection.reconnect",{connection:n,source:e,target:t})}var u,l={x:a.x,y:a.y},d={x:h.x,y:h.y,width:h.width,height:h.height};o=n.newShape=n.newShape||r.createShape(a,l,h.parent,p),h.host&&c.updateAttachment(o,h.host),!1!==p.moveChildren&&(u=h.children.slice(),c.moveElements(u,{x:0,y:0},o,p));var g=h.incoming.slice(),f=h.outgoing.slice();(0,e.forEach)(g,function(e){s(e.source,o,e)&&r.reconnectEnd(e,o,(0,t.getResizedTargetAnchor)(e,o,d),p)}),(0,e.forEach)(f,function(e){var n=e.target;s(o,n,e)&&r.reconnectStart(e,o,(0,t.getResizedSourceAnchor)(e,o,d),p)})},n.prototype.postExecute=function(e){var t=e.oldShape;this._modeling.removeShape(t)},n.prototype.execute=function(e){},n.prototype.revert=function(e){},n.prototype.createShape=function(e,t,n,o){return this._modeling.createShape(e,t,n,o)},n.prototype.reconnectStart=function(e,t,n,o){this._modeling.reconnectStart(e,t,n,o)},n.prototype.reconnectEnd=function(e,t,n,o){this._modeling.reconnectEnd(e,t,n,o)};
},{"min-dash":"AmEv","./helper/AnchorsHelper":"fUdJ"}],"TBrJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var t=require("min-dash"),e=require("./helper/AnchorsHelper");function i(t){this._modeling=t}i.$inject=["modeling"],i.prototype.execute=function(e){var i=e.shape,n=e.newBounds,o=e.minBounds;if(void 0===n.x||void 0===n.y||void 0===n.width||void 0===n.height)throw new Error("newBounds must have {x, y, width, height} properties");if(o&&(n.width<o.width||n.height<o.height))throw new Error("width and height cannot be less than minimum height and width");if(!o&&n.width<10||n.height<10)throw new Error("width and height cannot be less than 10px");return e.oldBounds={width:i.width,height:i.height,x:i.x,y:i.y},(0,t.assign)(i,{width:n.width,height:n.height,x:n.x,y:n.y}),i},i.prototype.postExecute=function(i){var n=this._modeling,o=i.shape,h=i.oldBounds;!1!==(i.hints||{}).layout&&((0,t.forEach)(o.incoming,function(t){n.layoutConnection(t,{connectionEnd:(0,e.getResizedTargetAnchor)(t,o,h)})}),(0,t.forEach)(o.outgoing,function(t){n.layoutConnection(t,{connectionStart:(0,e.getResizedSourceAnchor)(t,o,h)})}))},i.prototype.revert=function(e){var i=e.shape,n=e.oldBounds;return(0,t.assign)(i,{width:n.width,height:n.height,x:n.x,y:n.y}),i};
},{"min-dash":"AmEv","./helper/AnchorsHelper":"fUdJ"}],"kRlY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=require("min-dash"),t=require("../../space-tool/SpaceUtil"),n=require("./helper/AnchorsHelper");function o(e){this._modeling=e}function i(t){return(0,e.assign)({},t)}function r(t){return(0,e.map)(t.waypoints,function(e){return(e=i(e)).original&&(e.original=i(e.original)),e})}function a(e){switch(e){case"n":return"y";case"w":return"x";case"s":return"y";case"e":return"x"}}function c(e,t,n){var o=a(n);return/e|s/.test(n)?e[o]>t:/n|w/.test(n)?e[o]<t:void 0}function u(e,t){return-1!==e.indexOf(t)}function s(e){return{x:e.x,y:e.y,height:e.height,width:e.width}}o.$inject=["modeling"],o.prototype.preExecute=function(n){var o=n.delta,i=n.direction,r=n.movingShapes,a=n.resizingShapes,c=n.start,u={};this.moveShapes(r,o),(0,e.forEach)(a,function(e){u[e.id]=s(e)}),this.resizeShapes(a,o,i),this.updateConnectionWaypoints((0,t.getWaypointsUpdatingConnections)(r,a),o,i,c,r,a,u)},o.prototype.execute=function(){},o.prototype.revert=function(){},o.prototype.moveShapes=function(t,n){var o=this;(0,e.forEach)(t,function(e){o._modeling.moveShape(e,n,null,{autoResize:!1,layout:!1,recurse:!1})})},o.prototype.resizeShapes=function(n,o,i){var r=this;(0,e.forEach)(n,function(e){var n=(0,t.resizeBounds)(e,i,o);r._modeling.resizeShape(e,n,null,{attachSupport:!1,autoResize:!1,layout:!1})})},o.prototype.updateConnectionWaypoints=function(t,o,i,s,p,h,d){var l=this,g=p.concat(h);(0,e.forEach)(t,function(t){var f=t.source,y=t.target,v=r(t),S=a(i),m={};u(g,f)&&u(g,y)?(v=(0,e.map)(v,function(e){return c(e,s,i)&&(e[S]=e[S]+o[S]),e.original&&c(e.original,s,i)&&(e.original[S]=e.original[S]+o[S]),e}),l._modeling.updateWaypoints(t,v,{labelBehavior:!1})):(u(g,f)||u(g,y))&&(u(p,f)?m.connectionStart=(0,n.getMovedSourceAnchor)(t,f,o):u(p,y)?m.connectionEnd=(0,n.getMovedTargetAnchor)(t,y,o):u(h,f)?m.connectionStart=(0,n.getResizedSourceAnchor)(t,f,d[f.id]):u(h,y)&&(m.connectionEnd=(0,n.getResizedTargetAnchor)(t,y,d[y.id])),l._modeling.layoutConnection(t,m))})};
},{"min-dash":"AmEv","../../space-tool/SpaceUtil":"IxZ3","./helper/AnchorsHelper":"fUdJ"}],"C5yP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=require("min-dash");function n(e){this._modeling=e}function c(n){var i={};return(0,e.forEach)(n,function(n){i[n.id]=n.hidden,n.children&&(i=(0,e.assign)({},i,c(n.children)))}),i}function i(n,c){var r=[];return(0,e.forEach)(n,function(e){e.hidden=c,r=r.concat(e),e.children&&(r=r.concat(i(e.children,e.collapsed||c)))}),r}function r(n,c){var i=[];return(0,e.forEach)(n,function(e){e.hidden=c[e.id],i=i.concat(e),e.children&&(i=i.concat(r(e.children,c)))}),i}n.$inject=["modeling"],n.prototype.execute=function(e){var n=e.shape,r=n.children;e.oldChildrenVisibility=c(r),n.collapsed=!n.collapsed;var t=i(r,n.collapsed);return[n].concat(t)},n.prototype.revert=function(e){var n=e.shape,c=e.oldChildrenVisibility,i=r(n.children,c);return n.collapsed=!n.collapsed,[n].concat(i)};
},{"min-dash":"AmEv"}],"uGsg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var t=require("../../../util/Collections");function e(t){this._modeling=t}function o(e,o){return(0,t.remove)(e&&e.attachers,o)}function r(e,o,r){if(e){var n=e.attachers;n||(e.attachers=n=[]),(0,t.add)(n,o,r)}}e.$inject=["modeling"],e.prototype.execute=function(t){var e=t.shape,n=t.newHost,a=e.host;return t.oldHost=a,t.attacherIdx=o(a,e),r(n,e),e.host=n,e},e.prototype.revert=function(t){var e=t.shape,n=t.newHost,a=t.oldHost,s=t.attacherIdx;return e.host=a,o(n,e),r(a,e,s),e};
},{"../../../util/Collections":"Pujo"}],"qEPd":[function(require,module,exports) {
"use strict";function t(){}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t,t.prototype.execute=function(t){var e=t.connection,o=t.newWaypoints;return t.oldWaypoints=e.waypoints,e.waypoints=o,e},t.prototype.revert=function(t){var e=t.connection,o=t.oldWaypoints;return e.waypoints=o,e};
},{}],"KXpT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=q;var e=require("min-dash"),t=require("../../model"),n=k(require("./cmd/AlignElementsHandler")),a=k(require("./cmd/AppendShapeHandler")),o=k(require("./cmd/CreateConnectionHandler")),c=k(require("./cmd/CreateElementsHandler")),r=k(require("./cmd/CreateLabelHandler")),i=k(require("./cmd/CreateShapeHandler")),s=k(require("./cmd/DeleteConnectionHandler")),p=k(require("./cmd/DeleteElementsHandler")),d=k(require("./cmd/DeleteShapeHandler")),u=k(require("./cmd/DistributeElementsHandler")),l=k(require("./cmd/LayoutConnectionHandler")),m=k(require("./cmd/MoveConnectionHandler")),h=k(require("./cmd/MoveElementsHandler")),f=k(require("./cmd/MoveShapeHandler")),v=k(require("./cmd/ReconnectConnectionHandler")),y=k(require("./cmd/ReplaceShapeHandler")),S=k(require("./cmd/ResizeShapeHandler")),_=k(require("./cmd/SpaceToolHandler")),g=k(require("./cmd/ToggleShapeCollapseHandler")),x=k(require("./cmd/UpdateAttachmentHandler")),H=k(require("./cmd/UpdateWaypointsHandler"));function k(e){return e&&e.__esModule?e:{default:e}}function q(e,t,n){this._eventBus=e,this._elementFactory=t,this._commandStack=n;var a=this;e.on("diagram.init",function(){a.registerHandlers(n)})}q.$inject=["eventBus","elementFactory","commandStack"],q.prototype.getHandlers=function(){return{"shape.append":a.default,"shape.create":i.default,"shape.delete":d.default,"shape.move":f.default,"shape.resize":S.default,"shape.replace":y.default,"shape.toggleCollapse":g.default,spaceTool:_.default,"label.create":r.default,"connection.create":o.default,"connection.delete":s.default,"connection.move":m.default,"connection.layout":l.default,"connection.updateWaypoints":H.default,"connection.reconnect":v.default,"elements.create":c.default,"elements.move":h.default,"elements.delete":p.default,"elements.distribute":u.default,"elements.align":n.default,"element.updateAttachment":x.default}},q.prototype.registerHandlers=function(t){(0,e.forEach)(this.getHandlers(),function(e,n){t.registerHandler(n,e)})},q.prototype.moveShape=function(e,t,n,a,o){"object"==typeof a&&(o=a,a=null);var c={shape:e,delta:t,newParent:n,newParentIndex:a,hints:o||{}};this._commandStack.execute("shape.move",c)},q.prototype.updateAttachment=function(e,t){var n={shape:e,newHost:t};this._commandStack.execute("element.updateAttachment",n)},q.prototype.moveElements=function(e,t,n,a){var o,c=(a=a||{}).attach,r=n;!0===c?(o=n,r=n.parent):!1===c&&(o=null);var i={shapes:e,delta:t,newParent:r,newHost:o,hints:a};this._commandStack.execute("elements.move",i)},q.prototype.moveConnection=function(e,t,n,a,o){"object"==typeof a&&(o=a,a=void 0);var c={connection:e,delta:t,newParent:n,newParentIndex:a,hints:o||{}};this._commandStack.execute("connection.move",c)},q.prototype.layoutConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.layout",n)},q.prototype.createConnection=function(e,t,n,a,o,c){"object"==typeof n&&(c=o,o=a,a=n,n=void 0);var r={source:e,target:t,parent:o,parentIndex:n,connection:a=this._create("connection",a),hints:c};return this._commandStack.execute("connection.create",r),r.connection},q.prototype.createShape=function(e,t,n,a,o){"number"!=typeof a&&(o=a,a=void 0);var c,r,i=(o=o||{}).attach;e=this._create("shape",e),i?(c=n.parent,r=n):c=n;var s={position:t,shape:e,parent:c,parentIndex:a,host:r,hints:o};return this._commandStack.execute("shape.create",s),s.shape},q.prototype.createElements=function(t,n,a,o,c){(0,e.isArray)(t)||(t=[t]),"number"!=typeof o&&(c=o,o=void 0);var r={position:n,elements:t,parent:a,parentIndex:o,hints:c=c||{}};return this._commandStack.execute("elements.create",r),r.elements},q.prototype.createLabel=function(e,t,n,a){n=this._create("label",n);var o={labelTarget:e,position:t,parent:a||e.parent,shape:n};return this._commandStack.execute("label.create",o),o.shape},q.prototype.appendShape=function(e,t,n,a,o){o=o||{};var c={source:e,position:n,target:a,shape:t=this._create("shape",t),connection:o.connection,connectionParent:o.connectionParent,hints:o};return this._commandStack.execute("shape.append",c),c.shape},q.prototype.removeElements=function(e){var t={elements:e};this._commandStack.execute("elements.delete",t)},q.prototype.distributeElements=function(e,t,n){var a={groups:e,axis:t,dimension:n};this._commandStack.execute("elements.distribute",a)},q.prototype.removeShape=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.delete",n)},q.prototype.removeConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.delete",n)},q.prototype.replaceShape=function(e,t,n){var a={oldShape:e,newData:t,hints:n||{}};return this._commandStack.execute("shape.replace",a),a.newShape},q.prototype.alignElements=function(e,t){var n={elements:e,alignment:t};this._commandStack.execute("elements.align",n)},q.prototype.resizeShape=function(e,t,n,a){var o={shape:e,newBounds:t,minBounds:n,hints:a};this._commandStack.execute("shape.resize",o)},q.prototype.createSpace=function(e,t,n,a,o){var c={delta:n,direction:a,movingShapes:e,resizingShapes:t,start:o};this._commandStack.execute("spaceTool",c)},q.prototype.updateWaypoints=function(e,t,n){var a={connection:e,newWaypoints:t,hints:n||{}};this._commandStack.execute("connection.updateWaypoints",a)},q.prototype.reconnect=function(e,t,n,a,o){var c={connection:e,newSource:t,newTarget:n,dockingOrPoints:a,hints:o||{}};this._commandStack.execute("connection.reconnect",c)},q.prototype.reconnectStart=function(t,n,a,o){o||(o={}),this.reconnect(t,n,t.target,a,(0,e.assign)(o,{docking:"source"}))},q.prototype.reconnectEnd=function(t,n,a,o){o||(o={}),this.reconnect(t,t.source,n,a,(0,e.assign)(o,{docking:"target"}))},q.prototype.connect=function(e,t,n,a){return this.createConnection(e,t,n||{},e.parent,a)},q.prototype._create=function(e,n){return n instanceof t.Base?n:this._elementFactory.create(e,n)},q.prototype.toggleCollapse=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.toggleCollapse",n)};
},{"min-dash":"AmEv","../../model":"av0a","./cmd/AlignElementsHandler":"fnLq","./cmd/AppendShapeHandler":"pPfR","./cmd/CreateConnectionHandler":"mxOA","./cmd/CreateElementsHandler":"bnlL","./cmd/CreateLabelHandler":"syCv","./cmd/CreateShapeHandler":"MAzz","./cmd/DeleteConnectionHandler":"Pcug","./cmd/DeleteElementsHandler":"ZnFc","./cmd/DeleteShapeHandler":"jAaI","./cmd/DistributeElementsHandler":"UpPc","./cmd/LayoutConnectionHandler":"WP7u","./cmd/MoveConnectionHandler":"HJ1V","./cmd/MoveElementsHandler":"pWKm","./cmd/MoveShapeHandler":"CYrB","./cmd/ReconnectConnectionHandler":"tiMI","./cmd/ReplaceShapeHandler":"QtRz","./cmd/ResizeShapeHandler":"TBrJ","./cmd/SpaceToolHandler":"kRlY","./cmd/ToggleShapeCollapseHandler":"C5yP","./cmd/UpdateAttachmentHandler":"uGsg","./cmd/UpdateWaypointsHandler":"qEPd"}],"v1BX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("min-dash"),t=require("../../../util/ModelUtil");function r(e){this._elementRegistry=e}function n(t,r){return(0,e.reduce)(r,function(e,r){return e[r]=t.get(r),e},{})}function i(t,r){(0,e.forEach)(r,function(e,r){t.set(r,e)})}function o(e,r){return r.filter(function(r){return(0,t.is)(r,"bpmn:DataObjectReference")&&(0,t.getBusinessObject)(r).dataObjectRef===e})}r.$inject=["elementRegistry"],r.prototype.execute=function(t){var r=t.element,o=t.moddleElement,u=t.properties;if(!o)throw new Error("<moddleElement> required");var c=t.changed||this.getVisualReferences(o).concat(r),s=t.oldProperties||n(o,(0,e.keys)(u));return i(o,u),t.oldProperties=s,t.changed=c,c},r.prototype.revert=function(e){var t=e.oldProperties,r=e.moddleElement,n=e.changed;return i(r,t),n},r.prototype.getVisualReferences=function(e){var r=this._elementRegistry;return(0,t.is)(e,"bpmn:DataObject")?o(e,r):[]};
},{"min-dash":"AmEv","../../../util/ModelUtil":"HvoA"}],"xZXN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=require("min-dash"),t=require("../../../util/ModelUtil"),i="default",n="id",r="di",s={width:0,height:0};function u(e,t,i,n,r){this._elementRegistry=e,this._moddle=t,this._translate=i,this._modeling=n,this._textRenderer=r}function o(e,t){return n in e&&e[n]!==t[n]}function d(i,n){var s=(0,e.keys)(n),u=i.businessObject,o=(0,t.getDi)(i);return(0,e.reduce)(s,function(t,i){return t[i]=i!==r?u.get(i):a(o,(0,e.keys)(n.di)),t},{})}function a(t,i){return(0,e.reduce)(i,function(e,i){return e[i]=t&&t.get(i),e},{})}function c(i,n){var s=i.businessObject,u=(0,t.getDi)(i);(0,e.forEach)(n,function(e,t){t!==r?s.set(t,e):u&&l(u,e)})}function l(t,i){(0,e.forEach)(i,function(e,i){t.set(i,e)})}u.$inject=["elementRegistry","moddle","translate","modeling","textRenderer"],u.prototype.execute=function(e){var t=e.element,r=[t],s=this._translate;if(!t)throw new Error(s("element required"));var u=this._elementRegistry,a=this._moddle.ids,l=t.businessObject,h=f(e.properties),p=e.oldProperties||d(t,h);return o(h,l)&&(a.unclaim(l[n]),u.updateId(t,h[n]),a.claim(h[n],l)),i in h&&(h[i]&&r.push(u.get(h[i].id)),l[i]&&r.push(u.get(l[i].id))),c(t,h),e.oldProperties=p,e.changed=r,r},u.prototype.postExecute=function(e){var i=e.element.label,n=i&&(0,t.getBusinessObject)(i).name;if(n){var r=this._textRenderer.getExternalLabelBounds(i,n);this._modeling.resizeShape(i,r,s)}},u.prototype.revert=function(e){var t=e.element,i=e.properties,r=e.oldProperties,s=t.businessObject,u=this._elementRegistry,d=this._moddle.ids;return c(t,r),o(i,s)&&(d.unclaim(i[n]),u.updateId(t,r[n]),d.claim(r[n],s)),e.changed};var h=["default"];function f(i){var n=(0,e.assign)({},i);return h.forEach(function(e){e in i&&(n[e]=(0,t.getBusinessObject)(n[e]))}),n}
},{"min-dash":"AmEv","../../../util/ModelUtil":"HvoA"}],"hKa5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=require("diagram-js/lib/util/Collections"),t=require("../../../util/ModelUtil");function o(e,t){this._canvas=e,this._modeling=t}o.$inject=["canvas","modeling"],o.prototype.execute=function(o){var n=this._canvas,l=o.newRoot,s=l.businessObject,r=n.getRootElement(),i=r.businessObject,a=i.$parent,m=(0,t.getDi)(r);n.setRootElement(l),n.removeRootElement(r),(0,e.add)(a.rootElements,s),s.$parent=a,(0,e.remove)(a.rootElements,i),i.$parent=null,r.di=null,m.bpmnElement=s,l.di=m,o.oldRoot=r},o.prototype.revert=function(o){var n=this._canvas,l=o.newRoot,s=l.businessObject,r=o.oldRoot,i=r.businessObject,a=s.$parent,m=(0,t.getDi)(l);n.setRootElement(r),n.removeRootElement(l),(0,e.remove)(a.rootElements,s),s.$parent=null,(0,e.add)(a.rootElements,i),i.$parent=a,l.di=null,m.bpmnElement=i,r.di=m};
},{"diagram-js/lib/util/Collections":"Pujo","../../../util/ModelUtil":"HvoA"}],"uYmq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=require("min-dash"),t=require("diagram-js/lib/util/Elements"),i=require("../util/LaneUtil");function n(e,t){this._modeling=e,this._spaceTool=t}n.$inject=["modeling","spaceTool"],n.prototype.preExecute=function(n){var a=this._spaceTool,o=this._modeling,h=n.shape,r=n.location,p=(0,i.getLanesRoot)(h),l=p===h,s=l?h:h.parent;(0,i.getChildLanes)(s).length||o.createShape({type:"bpmn:Lane"},{x:h.x+i.LANE_INDENTATION,y:h.y,width:h.width-i.LANE_INDENTATION,height:h.height},s);var u=[];(0,t.eachElement)(p,function(t){return u.push(t),t.label&&u.push(t.label),t===h?[]:(0,e.filter)(t.children,function(e){return e!==h})});var c="top"===r?-120:120,N="top"===r?h.y:h.y+h.height,d=N+("top"===r?10:-10),g="top"===r?"n":"s",m=a.calculateAdjustments(u,"y",c,d);a.makeSpace(m.movingShapes,m.resizingShapes,{x:0,y:c},g,d),n.newLane=o.createShape({type:"bpmn:Lane"},{x:h.x+(l?i.LANE_INDENTATION:0),y:N-("top"===r?120:0),width:h.width-(l?i.LANE_INDENTATION:0),height:120},s)};
},{"min-dash":"AmEv","diagram-js/lib/util/Elements":"KTcn","../util/LaneUtil":"yOBs"}],"aAJR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("../util/LaneUtil");function t(e,t){this._modeling=e,this._translate=t}t.$inject=["modeling","translate"],t.prototype.preExecute=function(t){var i=this._modeling,n=this._translate,r=t.shape,a=t.count,h=(0,e.getChildLanes)(r),o=h.length;if(o>a)throw new Error(n("more than {count} child lanes",{count:a}));var s,l,u,c,d,p=Math.round(r.height/a);for(d=0;d<a;d++)s=r.y+d*p,l=d===a-1?r.height-p*d:p,u={x:r.x+e.LANE_INDENTATION,y:s,width:r.width-e.LANE_INDENTATION,height:l},d<o?i.resizeShape(h[d],u):(c={type:"bpmn:Lane"},i.createShape(c,u,r))};
},{"../util/LaneUtil":"yOBs"}],"YtmK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=require("../../../util/ModelUtil"),t=require("../util/LaneUtil"),i=require("diagram-js/lib/util/Elements"),a=require("diagram-js/lib/layout/LayoutUtil"),s=require("diagram-js/lib/features/resize/ResizeUtil");function o(e,t){this._modeling=e,this._spaceTool=t}o.$inject=["modeling","spaceTool"],o.prototype.preExecute=function(e){var t=e.shape,i=e.newBounds;!1!==e.balanced?this.resizeBalanced(t,i):this.resizeSpace(t,i)},o.prototype.resizeBalanced=function(e,i){var a=this._modeling,s=(0,t.computeLanesResize)(e,i);a.resizeShape(e,i),s.forEach(function(e){a.resizeShape(e.shape,e.newBounds)})},o.prototype.resizeSpace=function(o,r){var n,l,p,u,c,h=this._spaceTool,m=(0,a.asTRBL)(o),d=(0,a.asTRBL)(r),g=(0,s.substractTRBL)(d,m),b=(0,t.getLanesRoot)(o),f=[],z=[];(0,i.eachElement)(b,function(t){return f.push(t),((0,e.is)(t,"bpmn:Lane")||(0,e.is)(t,"bpmn:Participant"))&&z.push(t),t.children}),(g.bottom||g.top)&&(n=g.bottom||g.top,l=o.y+(g.bottom?o.height:0)+(g.bottom?-10:10),p=g.bottom?"s":"n",u=g.top>0||g.bottom<0?-n:n,c=h.calculateAdjustments(f,"y",u,l),h.makeSpace(c.movingShapes,c.resizingShapes,{x:0,y:n},p)),(g.left||g.right)&&(n=g.right||g.left,l=o.x+(g.right?o.width:0)+(g.right?-10:100),p=g.right?"e":"w",u=g.left>0||g.right<0?-n:n,c=h.calculateAdjustments(z,"x",u,l),h.makeSpace(c.movingShapes,c.resizingShapes,{x:n,y:0},p))};
},{"../../../util/ModelUtil":"HvoA","../util/LaneUtil":"yOBs","diagram-js/lib/util/Elements":"KTcn","diagram-js/lib/layout/LayoutUtil":"aRzT","diagram-js/lib/features/resize/ResizeUtil":"yRPe"}],"aISO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=require("../util/LaneUtil"),t=require("../../../util/ModelUtil"),o=require("diagram-js/lib/util/Collections"),r=require("diagram-js/lib/layout/LayoutUtil"),n="flowNodeRef",i="lanes";function a(e){this._elementRegistry=e}a.$inject=["elementRegistry"],a.prototype.computeUpdates=function(o,a){var u=[],c=[],f={},d=[];function s(e){-1===u.indexOf(e)&&(d.push(e),u.push(e))}function l(t){return t.parent?function(t){var o=(0,e.getLanesRoot)(t);return f[o.id]||(f[o.id]=(0,e.collectLanes)(o)),f[o.id]}(t).filter(function(e){return o=t,n=e,i=(0,r.asTRBL)(n),a=o.x+o.width/2,u=o.y+o.height/2,a>i.left&&a<i.right&&u>i.top&&u<i.bottom;var o,n,i,a,u}).map(function(e){return e.businessObject}):[]}return a.forEach(function(o){var r=(0,e.getLanesRoot)(o);r&&-1===u.indexOf(r)&&(r.children.filter(function(e){return(0,t.is)(e,"bpmn:FlowNode")}).forEach(s),u.push(r))}),o.forEach(s),d.forEach(function(e){var t=e.businessObject,o=t.get(i).slice(),r=l(e);c.push({flowNode:t,remove:o,add:r})}),a.forEach(function(e){var t=e.businessObject;e.parent||t.get(n).forEach(function(e){c.push({flowNode:e,remove:[t],add:[]})})}),c},a.prototype.execute=function(e){var t=e.updates;t||(t=e.updates=this.computeUpdates(e.flowNodeShapes,e.laneShapes)),t.forEach(function(e){var t=e.flowNode,r=t.get(i);e.remove.forEach(function(e){(0,o.remove)(r,e),(0,o.remove)(e.get(n),t)}),e.add.forEach(function(e){(0,o.add)(r,e),(0,o.add)(e.get(n),t)})})},a.prototype.revert=function(e){e.updates.forEach(function(e){var t=e.flowNode,r=t.get(i);e.add.forEach(function(e){(0,o.remove)(r,e),(0,o.remove)(e.get(n),t)}),e.remove.forEach(function(e){(0,o.add)(r,e),(0,o.add)(e.get(n),t)})})};
},{"../util/LaneUtil":"yOBs","../../../util/ModelUtil":"HvoA","diagram-js/lib/util/Collections":"Pujo","diagram-js/lib/layout/LayoutUtil":"aRzT"}],"UGdX":[function(require,module,exports) {
"use strict";function e(e){this._moddle=e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e,e.$inject=["moddle"],e.prototype.execute=function(e){var t=this._moddle.ids,i=e.id,d=e.element;e.claiming?t.claim(i,d):t.unclaim(i)},e.prototype.revert=function(e){var t=this._moddle.ids,i=e.id,d=e.element;e.claiming?t.unclaim(i):t.claim(i,d)};
},{}],"obNo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=require("min-dash"),o=require("../../../util/ModelUtil"),r=require("../../../util/LabelUtil"),t={fill:void 0,stroke:void 0};function i(o){this._commandStack=o,this._normalizeColor=function(o){if(o){if((0,e.isString)(o)){var r=l(o);if(r)return r}throw new Error("invalid color value: "+o)}}}function l(e){var o=document.createElement("canvas").getContext("2d");return o.fillStyle="transparent",o.fillStyle=e,/^#[0-9a-fA-F]{6}$/.test(o.fillStyle)?o.fillStyle:null}function n(e){return!!e.waypoints}function a(e){"border-color"in e&&(e.stroke=e["border-color"]),"background-color"in e&&(e.fill=e["background-color"])}i.$inject=["commandStack"],i.prototype.postExecute=function(i){var l=i.elements,c=i.colors||t,s=this,d={};"fill"in c&&(0,e.assign)(d,{"background-color":this._normalizeColor(c.fill)}),"stroke"in c&&(0,e.assign)(d,{"border-color":this._normalizeColor(c.stroke)}),(0,e.forEach)(l,function(t){var i=n(t)?(0,e.pick)(d,["border-color"]):d,l=(0,o.getDi)(t);if(a(i),(0,r.isLabel)(t))s._commandStack.execute("element.updateModdleProperties",{element:t,moddleElement:l.label,properties:{color:d["border-color"]}});else{if(!(0,o.isAny)(l,["bpmndi:BPMNEdge","bpmndi:BPMNShape"]))return;s._commandStack.execute("element.updateProperties",{element:t,properties:{di:i}})}})};
},{"min-dash":"AmEv","../../../util/ModelUtil":"HvoA","../../../util/LabelUtil":"yKfU"}],"RxS4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=require("../LabelUtil"),t=require("../../../util/LabelUtil"),l=require("../../../util/ModelUtil"),a={width:0,height:0};function i(i,r,b){function s(a,i){var n=a.label||a,r=a.labelTarget||a;return(0,e.setLabel)(n,i,r!==n),function(e,a){if(!(0,t.isLabelExternal)(e)){var i=(0,l.getDi)(e);a&&!i.label&&(i.label=b.create("bpmndi:BPMNLabel")),!a&&i.label&&delete i.label}}(a,i),[n,r]}this.preExecute=function(e){var l=e.element,a=l.businessObject,r=e.newLabel;if(!(0,t.isLabel)(l)&&(0,t.isLabelExternal)(l)&&!(0,t.hasExternalLabel)(l)&&!n(r)){var b=(0,t.getExternalLabelMid)(l);b={x:b.x,y:b.y+7},i.createLabel(l,b,{id:a.id+"_label",businessObject:a,di:l.di})}},this.execute=function(t){return t.oldLabel=(0,e.getLabel)(t.element),s(t.element,t.newLabel)},this.revert=function(e){return s(e.element,e.oldLabel)},this.postExecute=function(b){var s=b.element,u=s.label||s,o=b.newLabel,L=b.newBounds,c=b.hints||{};if((0,t.isLabel)(u)||(0,l.is)(u,"bpmn:TextAnnotation"))if((0,t.isLabel)(u)&&n(o))!1!==c.removeShape&&i.removeShape(u,{unsetLabel:!1});else{var d=(0,e.getLabel)(u);void 0===L&&(L=r.getExternalLabelBounds(u,d)),L&&i.resizeShape(u,L,a)}}}function n(e){return!e||!e.trim()}i.$inject=["modeling","textRenderer","bpmnFactory"];
},{"../LabelUtil":"v5cn","../../../util/LabelUtil":"yKfU","../../../util/ModelUtil":"HvoA"}],"qMWZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=m;var e=s(require("inherits-browser")),t=s(require("diagram-js/lib/features/modeling/Modeling")),a=s(require("./cmd/UpdateModdlePropertiesHandler")),n=s(require("./cmd/UpdatePropertiesHandler")),o=s(require("./cmd/UpdateCanvasRootHandler")),r=s(require("./cmd/AddLaneHandler")),d=s(require("./cmd/SplitLaneHandler")),l=s(require("./cmd/ResizeLaneHandler")),i=s(require("./cmd/UpdateFlowNodeRefsHandler")),u=s(require("./cmd/IdClaimHandler")),c=s(require("./cmd/SetColorHandler")),p=s(require("../label-editing/cmd/UpdateLabelHandler"));function s(e){return e&&e.__esModule?e:{default:e}}function m(e,a,n,o){t.default.call(this,e,a,n),this._bpmnRules=o}(0,e.default)(m,t.default),m.$inject=["eventBus","elementFactory","commandStack","bpmnRules"],m.prototype.getHandlers=function(){var e=t.default.prototype.getHandlers.call(this);return e["element.updateModdleProperties"]=a.default,e["element.updateProperties"]=n.default,e["canvas.updateRoot"]=o.default,e["lane.add"]=r.default,e["lane.resize"]=l.default,e["lane.split"]=d.default,e["lane.updateRefs"]=i.default,e["id.updateClaim"]=u.default,e["element.setColor"]=c.default,e["element.updateLabel"]=p.default,e},m.prototype.updateLabel=function(e,t,a,n){this._commandStack.execute("element.updateLabel",{element:e,newLabel:t,newBounds:a,hints:n||{}})},m.prototype.connect=function(e,t,a,n){var o=this._bpmnRules;if(a||(a=o.canConnect(e,t)),a)return this.createConnection(e,t,a,e.parent,n)},m.prototype.updateModdleProperties=function(e,t,a){this._commandStack.execute("element.updateModdleProperties",{element:e,moddleElement:t,properties:a})},m.prototype.updateProperties=function(e,t){this._commandStack.execute("element.updateProperties",{element:e,properties:t})},m.prototype.resizeLane=function(e,t,a){this._commandStack.execute("lane.resize",{shape:e,newBounds:t,balanced:a})},m.prototype.addLane=function(e,t){var a={shape:e,location:t};return this._commandStack.execute("lane.add",a),a.newLane},m.prototype.splitLane=function(e,t){this._commandStack.execute("lane.split",{shape:e,count:t})},m.prototype.makeCollaboration=function(){var e=this._create("root",{type:"bpmn:Collaboration"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e},m.prototype.updateLaneRefs=function(e,t){this._commandStack.execute("lane.updateRefs",{flowNodeShapes:e,laneShapes:t})},m.prototype.makeProcess=function(){var e={newRoot:this._create("root",{type:"bpmn:Process"})};this._commandStack.execute("canvas.updateRoot",e)},m.prototype.claimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t,claiming:!0})},m.prototype.unclaimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t})},m.prototype.setColor=function(e,t){e.length||(e=[e]),this._commandStack.execute("element.setColor",{elements:e,colors:t})};
},{"inherits-browser":"hUM3","diagram-js/lib/features/modeling/Modeling":"KXpT","./cmd/UpdateModdlePropertiesHandler":"v1BX","./cmd/UpdatePropertiesHandler":"xZXN","./cmd/UpdateCanvasRootHandler":"hKa5","./cmd/AddLaneHandler":"uYmq","./cmd/SplitLaneHandler":"aAJR","./cmd/ResizeLaneHandler":"YtmK","./cmd/UpdateFlowNodeRefsHandler":"aISO","./cmd/IdClaimHandler":"UGdX","./cmd/SetColorHandler":"obNo","../label-editing/cmd/UpdateLabelHandler":"RxS4"}],"Ey3l":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var t=require("./LayoutUtil");function e(){}e.prototype.layoutConnection=function(e,o){return[(o=o||{}).connectionStart||(0,t.getMid)(o.source||e.source),o.connectionEnd||(0,t.getMid)(o.target||e.target)]};
},{"./LayoutUtil":"aRzT"}],"tRDY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.connectPoints=d,exports.connectRectangles=g,exports.repairConnection=w,exports.tryLayoutStraight=D,exports.withoutRedundantPoints=A;var t=require("min-dash"),n=require("./LayoutUtil"),r=require("../util/Geometry"),e=20,i=5,o=Math.round,u=20,s={"h:h":20,"v:v":20,"h:v":-10,"v:h":-10};function c(t,n){return!{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/./,v:/./}[n].test(t)}function y(t,n){return{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/left|right/,v:/top|bottom/}[t].test(n)}function a(t,r,u){var s,a,h=(0,n.getOrientation)(r,t,i),x=u.split(":")[0],l=o((r.x-t.x)/2+t.x),f=o((r.y-t.y)/2+t.y),v=y(x,h),d=/h|r|l/.test(x),g=!1;return v?(s=d?{x:l,y:t.y}:{x:t.x,y:f},a=d?"h:h":"v:v"):(a=d?"h:v":"v:h",c(h,x)?d?(g=f===t.y,s={x:t.x+e*(/l/.test(x)?-1:1),y:g?f+e:f}):s={x:(g=l===t.x)?l+e:l,y:t.y+e*(/t/.test(x)?-1:1)}:s={x:l,y:f}),{waypoints:p(t,s,a).concat(s),directions:a,turnNextDirections:g}}function h(t,n,r){return a(t,n,r)}function x(t,n,r){var e=a(n,t,f(r));return{waypoints:e.waypoints.slice().reverse(),directions:f(e.directions),turnNextDirections:e.turnNextDirections}}function l(t,n){var r=t.directions.split(":")[1],e=n.directions.split(":")[0];t.turnNextDirections&&(r="h"==r?"v":"h"),n.turnNextDirections&&(e="h"==e?"v":"h");var i=r+":"+e;return{waypoints:p(t.waypoints[t.waypoints.length-1],n.waypoints[0],i),directions:i}}function f(t){return t.split(":").reverse().join(":")}function v(t,n,r){var e=o((n.x-t.x)/2+t.x),i=o((n.y-t.y)/2+t.y);if("h:v"===r)return[{x:n.x,y:t.y}];if("v:h"===r)return[{x:t.x,y:n.y}];if("h:h"===r)return[{x:e,y:t.y},{x:e,y:n.y}];if("v:v"===r)return[{x:t.x,y:i},{x:n.x,y:i}];throw new Error("invalid directions: can only handle varians of [hv]:[hv]")}function p(t,n,r){if(!N(r=r||"h:h"))throw new Error("unknown directions: <"+r+">: must be specified as <start>:<end> with start/end in { h,v,t,r,b,l }");if(R(r)){var e=h(t,n,r),i=x(t,n,r),o=l(e,i);return[].concat(e.waypoints,o.waypoints,i.waypoints)}return v(t,n,r)}function d(t,n,r){var e=p(t,n,r);return e.unshift(t),e.push(n),A(e)}function g(r,e,i,o,u){var c=u&&u.preferredLayouts||[],y=(0,t.without)(c,"straight")[0]||"h:h",a=s[y]||0,h=(0,n.getOrientation)(r,e,a),x=E(h,y);i=i||(0,n.getMid)(r),o=o||(0,n.getMid)(e);var l=x.split(":");return d(q(i,r,l[0],k(h)),q(o,e,l[1],h),x)}function w(r,e,i,o,u,s){var c;return(0,t.isArray)(i)&&(u=i,s=o,i=(0,n.getMid)(r),o=(0,n.getMid)(e)),u=u||[],(c=-1!==(s=(0,t.assign)({preferredLayouts:[]},s)).preferredLayouts.indexOf("straight")&&D(r,e,i,o,s))?c:(c=s.connectionEnd&&M(e,r,o,u))?c:(c=s.connectionStart&&L(r,e,i,u))||(!s.connectionStart&&!s.connectionEnd&&u&&u.length?u:g(r,e,i,o,s))}function b(t,n,r){return t>=n&&t<=r}function m(t,n,r){return b(n[t],r[t],r[t]+r[{x:"width",y:"height"}[t]])}function D(t,r,e,i,o){var u,s,c={};return s=(0,n.getOrientation)(t,r),/^(top|bottom|left|right)$/.test(s)?(/top|bottom/.test(s)&&(u="x"),/left|right/.test(s)&&(u="y"),"target"===o.preserveDocking?m(u,i,t)?(c[u]=i[u],[{x:void 0!==c.x?c.x:e.x,y:void 0!==c.y?c.y:e.y,original:{x:void 0!==c.x?c.x:e.x,y:void 0!==c.y?c.y:e.y}},{x:i.x,y:i.y}]):null:m(u,e,r)?(c[u]=e[u],[{x:e.x,y:e.y},{x:void 0!==c.x?c.x:i.x,y:void 0!==c.y?c.y:i.y,original:{x:void 0!==c.x?c.x:i.x,y:void 0!==c.y?c.y:i.y}}]):null):null}function L(t,n,r,e){return O(t,n,r,e)}function M(t,n,r,e){var i=e.slice().reverse();return(i=O(t,n,r,i))?i.reverse():null}function O(n,e,i,o){if(function(n){return n.length<3||!(n.length>4)&&!!(0,t.find)(n,function(t,e){var i=n[e-1];return i&&(0,r.pointDistance)(t,i)<3})}(o))return null;var s,c=o[0],y=o.slice();return y[0]=i,y[1]=function(t,n,e){switch((0,r.pointsAligned)(n,t)){case"v":return{x:e.x,y:t.y};case"h":return{x:t.x,y:e.y}}return{x:t.x,y:t.y}}(y[1],c,i),(s=function(t,n,e){var i;for(i=t.length-2;0!==i;i--)if((0,r.pointInRect)(t[i],n,u)||(0,r.pointInRect)(t[i],e,u))return t.slice(i);return t}(y,n,e))!==y&&(y=O(n,e,i,s)),y&&(0,r.pointsAligned)(y)?null:y}function E(t,n){if(R(n))return n;switch(t){case"intersect":return"t:t";case"top":case"bottom":return"v:v";case"left":case"right":return"h:h";default:return n}}function N(t){return t&&/^h|v|t|r|b|l:h|v|t|r|b|l$/.test(t)}function R(t){return t&&/t|r|b|l/.test(t)}function k(t){return{top:"bottom",bottom:"top",left:"right",right:"left","top-left":"bottom-right","bottom-right":"top-left","top-right":"bottom-left","bottom-left":"top-right"}[t]}function q(t,n,r,e){if("h"===r&&(r=/left/.test(e)?"l":"r"),"v"===r&&(r=/top/.test(e)?"t":"b"),"t"===r)return{original:t,x:t.x,y:n.y};if("r"===r)return{original:t,x:n.x+n.width,y:t.y};if("b"===r)return{original:t,x:t.x,y:n.y+n.height};if("l"===r)return{original:t,x:n.x,y:t.y};throw new Error("unexpected dockingDirection: <"+r+">")}function A(t){return t.reduce(function(n,e,i){var o=n[n.length-1],u=t[i+1];return(0,r.pointsOnLine)(o,u,e,0)||n.push(e),n},[])}
},{"min-dash":"AmEv","./LayoutUtil":"aRzT","../util/Geometry":"aD2B"}],"swCu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var t=a(require("inherits-browser")),e=require("min-dash"),r=a(require("diagram-js/lib/layout/BaseLayouter")),n=require("diagram-js/lib/layout/ManhattanLayout"),i=require("diagram-js/lib/layout/LayoutUtil"),o=require("../../util/DiUtil"),u=require("../../util/ModelUtil");function a(t){return t&&t.__esModule?t:{default:t}}var s=-10,c=40,f={top:"bottom","top-right":"bottom-left","top-left":"bottom-right",right:"left",bottom:"top","bottom-right":"top-left","bottom-left":"top-right",left:"right"},p={top:"t",right:"r",bottom:"b",left:"l"};function l(){}function h(t){var e=t.host;return(0,i.getOrientation)((0,i.getMid)(t),e,s)}function g(t,e){return{preferredLayouts:["straight","v:v"],preserveDocking:d(t,e)}}function d(t,e){return(0,u.is)(e,"bpmn:Participant")?"source":(0,u.is)(t,"bpmn:Participant")?"target":w(e)?"source":w(t)?"target":(0,u.is)(e,"bpmn:Event")?"target":(0,u.is)(t,"bpmn:Event")?"source":null}function b(t){return{preferredLayouts:["straight","h:h"],preserveDocking:v(t)}}function v(t){return w(t)?"target":"source"}function m(t,e){return t?t.original||t:(0,i.getMid)(e)}function y(t,e){return(0,u.is)(e,"bpmn:Activity")&&(0,u.is)(t,"bpmn:BoundaryEvent")&&e.businessObject.isForCompensation}function w(t){return(0,u.is)(t,"bpmn:SubProcess")&&(0,o.isExpanded)(t)}function x(t,e){return t===e}function M(t,e){return-1!==e.indexOf(t)}function L(t){var e=/right|left/.exec(t);return e&&e[0]}function q(t){var e=/top|bottom/.exec(t);return e&&e[0]}function O(t,e){return f[t]===e}function E(t,e){var r=L(t),n=f[r];return-1!==e.indexOf(n)}function j(t,e){var r=q(t),n=f[r];return-1!==e.indexOf(n)}function P(t){return"right"===t||"left"===t}function D(t,e){var r=e.waypoints,n=r&&r.length&&(0,i.getOrientation)(r[0],t);return"top"===n?["t:r"]:"right"===n?["r:b"]:"left"===n?["l:t"]:["b:l"]}function _(t,e,r){var n=(0,i.getMid)(t),o=(0,i.getMid)(e),u=h(t),a=x(t.host,e),s=M(u,["top","right","bottom","left"]),c=(0,i.getOrientation)(o,n,{x:t.width/2+e.width/2,y:t.height/2+e.height/2});return a?A(u,s,t,e,r):[F(u,c,s)+":"+S(u,c,s)]}function A(t,e,r,n,i){var o=e?t:q(t);return[p[o]+":"+(e?P(t)?B("y",r,n,i)?"h":"b":B("x",r,n,i)?"v":"l":"v")]}function B(t,e,r,n){var o=c;return!(C(t,n,r,o)||C(t,n,{x:r.x+r.width,y:r.y+r.height},o)||C(t,n,(0,i.getMid)(e),o))}function C(t,e,r,n){return Math.abs(e[t]-r[t])<n}function F(t,e,r){return r?p[t]:x(q(t),q(e))||O(L(t),L(e))?p[q(t)]:p[L(t)]}function S(t,e,r){return r?P(t)?E(t,e)||x(t,e)?"h":"v":j(t,e)||x(t,e)?"v":"h":P(e)||x(q(t),q(e))&&L(e)?"h":"v"}(0,t.default)(l,r.default),l.prototype.layoutConnection=function(t,r){r||(r={});var i,o,a=r.source||t.source,s=r.target||t.target,c=r.waypoints||t.waypoints,f=r.connectionStart,p=r.connectionEnd;return f||(f=m(c&&c[0],a)),p||(p=m(c&&c[c.length-1],s)),((0,u.is)(t,"bpmn:Association")||(0,u.is)(t,"bpmn:DataAssociation"))&&c&&!y(a,s)?[].concat([f],c.slice(1,-1),[p]):((0,u.is)(t,"bpmn:MessageFlow")?i=g(a,s):((0,u.is)(t,"bpmn:SequenceFlow")||y(a,s))&&(i=a===s?{preferredLayouts:D(a,t)}:(0,u.is)(a,"bpmn:BoundaryEvent")?{preferredLayouts:_(a,s,p)}:w(a)||w(s)?b(a):(0,u.is)(a,"bpmn:Gateway")?{preferredLayouts:["v:h"]}:(0,u.is)(s,"bpmn:Gateway")?{preferredLayouts:["h:v"]}:{preferredLayouts:["h:h"]}),i&&(i=(0,e.assign)(i,r),o=(0,n.withoutRedundantPoints)((0,n.repairConnection)(a,s,f,p,c,i))),o||[f,p])};
},{"inherits-browser":"hUM3","min-dash":"AmEv","diagram-js/lib/layout/BaseLayouter":"Ey3l","diagram-js/lib/layout/ManhattanLayout":"tRDY","diagram-js/lib/layout/LayoutUtil":"aRzT","../../util/DiUtil":"lWoN","../../util/ModelUtil":"HvoA"}],"FNYy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var t=require("min-dash"),e=require("./LayoutUtil");function n(e){return(0,t.assign)({original:e.point.original||e.point},e.actual)}function i(t,e){this._elementRegistry=t,this._graphicsFactory=e}i.$inject=["elementRegistry","graphicsFactory"],i.prototype.getCroppedWaypoints=function(t,e,i){e=e||t.source,i=i||t.target;var o=this.getDockingPoint(t,e,!0),r=this.getDockingPoint(t,i),a=t.waypoints.slice(o.idx+1,r.idx);return a.unshift(n(o)),a.push(n(r)),a},i.prototype.getDockingPoint=function(t,e,n){var i,o,r=t.waypoints;return{point:o=r[i=n?0:r.length-1],actual:this._getIntersection(e,t,n)||o,idx:i}},i.prototype._getIntersection=function(t,n,i){var o=this._getShapePath(t),r=this._getConnectionPath(n);return(0,e.getElementLineIntersection)(o,r,i)},i.prototype._getConnectionPath=function(t){return this._graphicsFactory.getConnectionPath(t)},i.prototype._getShapePath=function(t){return this._graphicsFactory.getShapePath(t)},i.prototype._getGfx=function(t){return this._elementRegistry.getGraphics(t)};
},{"min-dash":"AmEv","./LayoutUtil":"aRzT"}],"SrIh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=b(require("./behavior")),r=b(require("../rules")),t=b(require("../di-ordering")),a=b(require("../ordering")),u=b(require("../replace")),i=b(require("../space-tool")),l=b(require("diagram-js/lib/command")),d=b(require("diagram-js/lib/features/tooltips")),o=b(require("diagram-js/lib/features/label-support")),n=b(require("diagram-js/lib/features/attach-support")),p=b(require("diagram-js/lib/features/selection")),f=b(require("diagram-js/lib/features/change-support")),s=b(require("./BpmnFactory")),m=b(require("./BpmnUpdater")),c=b(require("./ElementFactory")),q=b(require("./Modeling")),g=b(require("./BpmnLayouter")),y=b(require("diagram-js/lib/layout/CroppingConnectionDocking"));function b(e){return e&&e.__esModule?e:{default:e}}var _=exports.default={__init__:["modeling","bpmnUpdater"],__depends__:[e.default,r.default,t.default,a.default,u.default,l.default,d.default,o.default,n.default,p.default,f.default,i.default],bpmnFactory:["type",s.default],bpmnUpdater:["type",m.default],elementFactory:["type",c.default],modeling:["type",q.default],layouter:["type",g.default],connectionDocking:["type",y.default]};
},{"./behavior":"pyvZ","../rules":"FxPL","../di-ordering":"WEN6","../ordering":"Brtj","../replace":"dy6N","../space-tool":"a6Zj","diagram-js/lib/command":"pKQJ","diagram-js/lib/features/tooltips":"n3pu","diagram-js/lib/features/label-support":"v0UK","diagram-js/lib/features/attach-support":"fiAw","diagram-js/lib/features/selection":"NUwH","diagram-js/lib/features/change-support":"PhDZ","./BpmnFactory":"J272","./BpmnUpdater":"zyU7","./ElementFactory":"AVAe","./Modeling":"qMWZ","./BpmnLayouter":"swCu","diagram-js/lib/layout/CroppingConnectionDocking":"FNYy"}],"srKE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=c;var e=require("min-dash"),t=require("tiny-svg"),n=require("../../util/Event"),a=require("../../util/Mouse"),r=500,i=1250,o=1500,s=Math.round;function u(e){return{x:e.x+s(e.width/2),y:e.y+s(e.height/2)}}function c(c,d,h,p,v){function f(e,t,n,a){return v.allowed("elements.move",{shapes:e,delta:t,position:n,target:a})}function m(n,a,r,i){if((0,e.isObject)(r)&&(i=r,r=!1),!a.waypoints&&a.parent&&!(0,t.classes)(n.target).has("djs-hit-no-move")){var o=u(a);return d.init(n,o,"shape.move",{cursor:"grabbing",autoActivate:r,data:{shape:a,context:i||{}}}),!0}}c.on("shape.move.start",o,function(t){var n=t.context,a=t.shape,r=p.get().slice();-1===r.indexOf(a)&&(r=[a]),r=l(r),(0,e.assign)(n,{shapes:r,validatedShapes:r,shape:a})}),c.on("shape.move.start",i,function(e){var t=e.context,n=t.validatedShapes;if(!(t.canExecute=f(n)))return!1}),c.on("shape.move.move",r,function(e){var t,n=e.context,a=n.validatedShapes,r=e.hover,i={x:e.dx,y:e.dy};t=f(a,i,{x:e.x,y:e.y},r),n.delta=i,n.canExecute=t,n.target=null!==t?r:null}),c.on("shape.move.end",function(e){var t=e.context,n=t.delta,a=t.canExecute,r="attach"===a,i=t.shapes;if(!1===a)return!1;n.x=s(n.x),n.y=s(n.y),0===n.x&&0===n.y||h.moveElements(i,n,t.target,{primaryShape:t.shape,attach:r})}),c.on("element.mousedown",function(e){if((0,a.isPrimaryButton)(e)){var t=(0,n.getOriginal)(e);if(!t)throw new Error("must supply DOM mousedown event");return m(t,e.element)}}),this.start=m}function l(t){var n=(0,e.groupBy)(t,"id");return(0,e.filter)(t,function(e){for(;e=e.parent;)if(n[e.id])return!1;return!0})}c.$inject=["eventBus","dragging","modeling","selection","rules"];
},{"min-dash":"AmEv","tiny-svg":"WdCh","../../util/Event":"NRQd","../../util/Mouse":"sz9Y"}],"e8Hc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=g;var e=require("min-dash"),r=require("../../util/Elements"),t=require("tiny-svg"),n=require("../../util/SvgTransformUtil"),a=499,o="djs-dragging",u="drop-ok",i="drop-not-ok",c="new-parent",d="attach-ok";function g(g,f,p,v){function m(t){var n=(0,r.selfAndAllChildren)(t,!0),a=(0,e.map)(n,function(e){return(e.incoming||[]).concat(e.outgoing||[])});return(0,e.flatten)(n.concat(a))}function h(e,r){[d,u,i,c].forEach(function(t){t===r?f.addMarker(e,t):f.removeMarker(e,t)})}g.on("shape.move.start",a,function(r){var n=r.context,a=n.shapes,u=n.allDraggedElements,i=l(m(a));if(!n.dragGroup){var c=(0,t.create)("g");(0,t.attr)(c,p.cls("djs-drag-group",["no-events"]));var d=f.getActiveLayer();(0,t.append)(d,c),n.dragGroup=c}i.forEach(function(e){v.addDragger(e,n.dragGroup)}),u=u?(0,e.flatten)([u,m(a)]):m(a),(0,e.forEach)(u,function(e){f.addMarker(e,o)}),n.allDraggedElements=u,n.differentParents=s(a)}),g.on("shape.move.move",a,function(e){var r=e.context,t=r.dragGroup,a=r.target,o=r.shape.parent,g=r.canExecute;a&&("attach"===g?h(a,d):r.canExecute&&a&&a.id!==o.id?h(a,c):h(a,r.canExecute?u:i)),(0,n.translate)(t,e.dx,e.dy)}),g.on(["shape.move.out","shape.move.cleanup"],function(e){var r=e.context.target;r&&h(r,null)}),g.on("shape.move.cleanup",function(r){var n=r.context,a=n.allDraggedElements,u=n.dragGroup;(0,e.forEach)(a,function(e){f.removeMarker(e,o)}),u&&(0,t.remove)(u)}),this.makeDraggable=function(e,r,t){v.addDragger(r,e.dragGroup),t&&f.addMarker(r,o),e.allDraggedElements?e.allDraggedElements.push(r):e.allDraggedElements=[r]}}function l(r){return(0,e.filter)(r,function(t){return!f(t)||(0,e.find)(r,(0,e.matchPattern)({id:t.source.id}))&&(0,e.find)(r,(0,e.matchPattern)({id:t.target.id}))})}function s(r){return 1!==(0,e.size)((0,e.groupBy)(r,function(e){return e.parent&&e.parent.id}))}function f(e){return e.waypoints}g.$inject=["eventBus","canvas","styles","previewSupport"];
},{"min-dash":"AmEv","../../util/Elements":"KTcn","tiny-svg":"WdCh","../../util/SvgTransformUtil":"EK9i"}],"QmqJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("../interaction-events")),r=a(require("../selection")),t=a(require("../outline")),u=a(require("../rules")),i=a(require("../dragging")),d=a(require("../preview-support")),o=a(require("./Move")),l=a(require("./MovePreview"));function a(e){return e&&e.__esModule?e:{default:e}}var v=exports.default={__depends__:[e.default,r.default,t.default,u.default,i.default,d.default],__init__:["move","movePreview"],move:["type",o.default],movePreview:["type",l.default]};
},{"../interaction-events":"JX1S","../selection":"NUwH","../outline":"mPg3","../rules":"GwI0","../dragging":"gdZp","../preview-support":"ENK2","./Move":"srKE","./MovePreview":"e8Hc"}],"f3FN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var t=require("min-dash"),e=require("../../util/Elements"),i=require("../../util/Mouse"),o=require("tiny-svg"),n="crosshair";function s(t,e,n,s,r,c,x){this._selection=r,this._dragging=n,this._mouse=x;var y=this,l=function(t){var i,n=e.getActiveLayer();i=t.frame=(0,o.create)("rect"),(0,o.attr)(i,{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),(0,o.append)(n,i)},u=function(t){var e=t.frame,i=t.bbox;(0,o.attr)(e,{x:i.x,y:i.y,width:i.width,height:i.height})},g=function(t){t.frame&&(0,o.remove)(t.frame)};c.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),t.on("lasso.selection.end",function(e){var i=e.originalEvent.target;(e.hover||i instanceof SVGElement)&&t.once("lasso.selection.ended",function(){y.activateLasso(e.originalEvent,!0)})}),t.on("lasso.end",function(t){var e=a(t),i=s.filter(function(t){return t});y.select(i,e)}),t.on("lasso.start",function(t){var e=t.context;e.bbox=a(t),l(e)}),t.on("lasso.move",function(t){var e=t.context;e.bbox=a(t),u(e)}),t.on("lasso.cleanup",function(t){var e=t.context;g(e)}),t.on("element.mousedown",1500,function(t){if((0,i.hasSecondaryModifier)(t))return y.activateLasso(t.originalEvent),!0})}function a(t){var e={x:t.x-t.dx,y:t.y-t.dy},i={x:t.x,y:t.y};return e.x<=i.x&&e.y<i.y||e.x<i.x&&e.y<=i.y?{x:e.x,y:e.y,width:i.x-e.x,height:i.y-e.y}:e.x>=i.x&&e.y<i.y||e.x>i.x&&e.y<=i.y?{x:i.x,y:e.y,width:e.x-i.x,height:i.y-e.y}:e.x<=i.x&&e.y>i.y||e.x<i.x&&e.y>=i.y?{x:e.x,y:i.y,width:i.x-e.x,height:e.y-i.y}:e.x>=i.x&&e.y>i.y||e.x>i.x&&e.y>=i.y?{x:i.x,y:i.y,width:e.x-i.x,height:e.y-i.y}:{x:i.x,y:i.y,width:0,height:0}}s.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager","mouse"],s.prototype.activateLasso=function(t,e){this._dragging.init(t,"lasso",{autoActivate:e,cursor:n,data:{context:{}}})},s.prototype.activateSelection=function(t,e){this._dragging.init(t,"lasso.selection",{trapClick:!1,autoActivate:e,cursor:n,data:{context:{}}})},s.prototype.select=function(i,o){var n=(0,e.getEnclosedElements)(i,o);this._selection.select((0,t.values)(n))},s.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var t=this._mouse.getLastMoveEvent();this.activateSelection(t,!!t)},s.prototype.isActive=function(){var t=this._dragging.context();return t&&/^lasso/.test(t.prefix)};
},{"min-dash":"AmEv","../../util/Elements":"KTcn","../../util/Mouse":"sz9Y","tiny-svg":"WdCh"}],"gNZf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("../tool-manager")),o=r(require("../mouse")),t=r(require("./LassoTool"));function r(e){return e&&e.__esModule?e:{default:e}}var u=exports.default={__depends__:[e.default,o.default],__init__:["lassoTool"],lassoTool:["type",t.default]};
},{"../tool-manager":"jzIl","../mouse":"vh82","./LassoTool":"f3FN"}],"M6YR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=require("../../util/Mouse"),t=require("../../features/keyboard/KeyboardUtil"),n=1500,a="grab";function i(t,a,i,r,c,d){this._dragging=i,this._mouse=d;var v=this,s=r.get("keyboard",!1);c.registerTool("hand",{tool:"hand",dragging:"hand.move"}),t.on("element.mousedown",n,function(t){if((0,e.hasPrimaryModifier)(t))return v.activateMove(t.originalEvent,!0),!1}),s&&s.addListener(n,function(e){if(o(e.keyEvent)&&!v.isActive()){var t=v._mouse.getLastMoveEvent();v.activateMove(t,!!t)}},"keyboard.keydown"),s&&s.addListener(n,function(e){o(e.keyEvent)&&v.isActive()&&v.toggle()},"keyboard.keyup"),t.on("hand.end",function(e){var n=e.originalEvent.target;if(!(e.hover||n instanceof SVGElement))return!1;t.once("hand.ended",function(){v.activateMove(e.originalEvent,{reactivate:!0})})}),t.on("hand.move.move",function(e){var t=a.viewbox().scale;a.scroll({dx:e.dx*t,dy:e.dy*t})}),t.on("hand.move.end",function(n){var a=n.context.reactivate;return!(0,e.hasPrimaryModifier)(n)&&a&&t.once("hand.move.ended",function(e){v.activateHand(e.originalEvent,!0,!0)}),!1})}function o(e){return(0,t.isKey)("Space",e)}i.$inject=["eventBus","canvas","dragging","injector","toolManager","mouse"],i.prototype.activateMove=function(e,t,n){"object"==typeof t&&(n=t,t=!1),this._dragging.init(e,"hand.move",{autoActivate:t,cursor:a,data:{context:n||{}}})},i.prototype.activateHand=function(e,t,n){this._dragging.init(e,"hand",{trapClick:!1,autoActivate:t,cursor:a,data:{context:{reactivate:n}}})},i.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateHand(e,!!e)},i.prototype.isActive=function(){var e=this._dragging.context();return!!e&&/^(hand|hand\.move)$/.test(e.prefix)};
},{"../../util/Mouse":"sz9Y","../../features/keyboard/KeyboardUtil":"gUUR"}],"ci8a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("../tool-manager")),t=r(require("../mouse")),o=r(require("./HandTool"));function r(e){return e&&e.__esModule?e:{default:e}}var u=exports.default={__depends__:[e.default,t.default],__init__:["handTool"],handTool:["type",o.default]};
},{"../tool-manager":"jzIl","../mouse":"vh82","./HandTool":"M6YR"}],"JeOH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var t="connect-ok",n="connect-not-ok";function e(e,o,c,r,a,i,l){var g=this;this._dragging=o,this._rules=i,this._mouse=l,a.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"}),e.on("global-connect.hover",function(e){var o=e.context,c=e.hover,a=o.canStartConnect=g.canStartConnect(c);null!==a&&(o.startTarget=c,r.addMarker(c,a?t:n))}),e.on(["global-connect.out","global-connect.cleanup"],function(e){var o=e.context.startTarget,c=e.context.canStartConnect;o&&r.removeMarker(o,c?t:n)}),e.on(["global-connect.ended"],function(t){var n=t.context.startTarget,o={x:t.x,y:t.y};if(g.canStartConnect(n))return e.once("element.out",function(){e.once(["connect.ended","connect.canceled"],function(){e.fire("global-connect.drag.ended")}),c.start(null,n,o)}),!1})}e.$inject=["eventBus","dragging","connect","canvas","toolManager","rules","mouse"],e.prototype.start=function(t,n){this._dragging.init(t,"global-connect",{autoActivate:n,trapClick:!1,data:{context:{}}})},e.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var t=this._mouse.getLastMoveEvent();return this.start(t,!!t)},e.prototype.isActive=function(){var t=this._dragging.context();return t&&/^global-connect/.test(t.prefix)},e.prototype.canStartConnect=function(t){return this._rules.allowed("connection.start",{source:t})};
},{}],"ZH3b":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=d(require("../connect")),r=d(require("../rules")),t=d(require("../dragging")),u=d(require("../tool-manager")),l=d(require("../mouse")),a=d(require("./GlobalConnect"));function d(e){return e&&e.__esModule?e:{default:e}}var o=exports.default={__depends__:[e.default,r.default,t.default,u.default,l.default],globalConnect:["type",a.default]};
},{"../connect":"qvKB","../rules":"GwI0","../dragging":"gdZp","../tool-manager":"jzIl","../mouse":"vh82","./GlobalConnect":"JeOH"}],"D0Q6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var t=require("min-dash"),e=require("../../util/ModelUtil");function a(t,e,a,n,o,c,r,i){this._palette=t,this._create=e,this._elementFactory=a,this._spaceTool=n,this._lassoTool=o,this._handTool=c,this._globalConnect=r,this._translate=i,t.registerProvider(this)}a.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"],a.prototype.getPaletteEntries=function(a){var n={},o=this._create,c=this._elementFactory,r=this._spaceTool,i=this._lassoTool,s=this._handTool,l=this._globalConnect,p=this._translate;function d(a,n,r,i,s){function l(n){var r=c.createShape((0,t.assign)({type:a},s));s&&((0,e.getDi)(r).isExpanded=s.isExpanded);o.start(n,r)}var d=a.replace(/^bpmn:/,"");return{group:n,className:r,title:i||p("Create {type}",{type:d}),action:{dragstart:l,click:l}}}function m(t){var e=c.createShape({type:"bpmn:SubProcess",x:0,y:0,isExpanded:!0}),a=c.createShape({type:"bpmn:StartEvent",x:40,y:82,parent:e});o.start(t,[e,a],{hints:{autoSelect:[e]}})}function b(t){o.start(t,c.createParticipantShape())}return(0,t.assign)(n,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:p("Activate the hand tool"),action:{click:function(t){s.activateHand(t)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:p("Activate the lasso tool"),action:{click:function(t){i.activateSelection(t)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:p("Activate the create/remove space tool"),action:{click:function(t){r.activateSelection(t)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:p("Activate the global connect tool"),action:{click:function(t){l.start(t)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":d("bpmn:StartEvent","event","bpmn-icon-start-event-none",p("Create StartEvent")),"create.intermediate-event":d("bpmn:IntermediateThrowEvent","event","bpmn-icon-intermediate-event-none",p("Create Intermediate/Boundary Event")),"create.end-event":d("bpmn:EndEvent","event","bpmn-icon-end-event-none",p("Create EndEvent")),"create.exclusive-gateway":d("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-none",p("Create Gateway")),"create.task":d("bpmn:Task","activity","bpmn-icon-task",p("Create Task")),"create.data-object":d("bpmn:DataObjectReference","data-object","bpmn-icon-data-object",p("Create DataObjectReference")),"create.data-store":d("bpmn:DataStoreReference","data-store","bpmn-icon-data-store",p("Create DataStoreReference")),"create.subprocess-expanded":{group:"activity",className:"bpmn-icon-subprocess-expanded",title:p("Create expanded SubProcess"),action:{dragstart:m,click:m}},"create.participant-expanded":{group:"collaboration",className:"bpmn-icon-participant",title:p("Create Pool/Participant"),action:{dragstart:b,click:b}},"create.group":d("bpmn:Group","artifact","bpmn-icon-group",p("Create Group"))}),n};
},{"min-dash":"AmEv","../../util/ModelUtil":"HvoA"}],"ZAAM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("diagram-js/lib/features/palette")),r=s(require("diagram-js/lib/features/create")),a=s(require("../space-tool")),t=s(require("diagram-js/lib/features/lasso-tool")),l=s(require("diagram-js/lib/features/hand-tool")),i=s(require("diagram-js/lib/features/global-connect")),u=s(require("diagram-js/lib/i18n/translate")),d=s(require("./PaletteProvider"));function s(e){return e&&e.__esModule?e:{default:e}}var o=exports.default={__depends__:[e.default,r.default,a.default,t.default,l.default,i.default,u.default],__init__:["paletteProvider"],paletteProvider:["type",d.default]};
},{"diagram-js/lib/features/palette":"VBge","diagram-js/lib/features/create":"qe87","../space-tool":"a6Zj","diagram-js/lib/features/lasso-tool":"gNZf","diagram-js/lib/features/hand-tool":"ci8a","diagram-js/lib/features/global-connect":"ZH3b","diagram-js/lib/i18n/translate":"N3z5","./PaletteProvider":"D0Q6"}],"i79W":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var e=u(require("diagram-js/lib/command/CommandInterceptor")),a=u(require("inherits-browser")),r=require("diagram-js/lib/util/EscapeUtil"),t=require("min-dash"),n=require("min-dom"),i=require("tiny-svg");function u(e){return e&&e.__esModule?e:{default:e}}var l=250;function s(a,u,s,c,o){e.default.call(this,a),a.on("shape.move.move",l,function(e){var a=e.context,l=a.canExecute;a.visualReplacements||(a.visualReplacements={}),l&&l.replacements?function(e){var a=e.canExecute.replacements;(0,t.forEach)(a,function(a){var l=a.oldElementId,d={type:a.newElementType};if(!e.visualReplacements[l]){var p=u.get(l);(0,t.assign)(d,{x:p.x,y:p.y});var m=s.createShape(d);c.addShape(m,p.parent);var v=(0,n.query)('[data-element-id="'+(0,r.escapeCSS)(p.id)+'"]',e.dragGroup);v&&(0,i.attr)(v,{display:"none"});var f=o.addDragger(m,e.dragGroup);e.visualReplacements[l]=f,c.removeShape(m)}})}(a):function(e){var a=e.visualReplacements;(0,t.forEach)(a,function(t,u){var l=(0,n.query)('[data-element-id="'+(0,r.escapeCSS)(u)+'"]',e.dragGroup);l&&(0,i.attr)(l,{display:"inline"}),t.remove(),a[u]&&delete a[u]})}(a)})}s.$inject=["eventBus","elementRegistry","elementFactory","canvas","previewSupport"],(0,a.default)(s,e.default);
},{"diagram-js/lib/command/CommandInterceptor":"FIh1","inherits-browser":"hUM3","diagram-js/lib/util/EscapeUtil":"eIZy","min-dash":"AmEv","min-dom":"fWg5","tiny-svg":"WdCh"}],"bk75":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("diagram-js/lib/features/preview-support")),r=t(require("./BpmnReplacePreview"));function t(e){return e&&e.__esModule?e:{default:e}}var p=exports.default={__depends__:[e.default],__init__:["bpmnReplacePreview"],bpmnReplacePreview:["type",r.default]};
},{"diagram-js/lib/features/preview-support":"ENK2","./BpmnReplacePreview":"i79W"}],"s51y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=f;var n=require("diagram-js/lib/features/snapping/SnapUtil"),t=require("diagram-js/lib/features/keyboard/KeyboardUtil"),e=require("diagram-js/lib/layout/LayoutUtil"),i=require("../../util/ModelUtil"),o=require("../modeling/util/ModelingUtil"),r=require("min-dash"),a=1250,u=40,c=20,s=10,p=20,d=["x","y"],m=Math.abs;function f(e){e.on(["connect.hover","connect.move","connect.end"],a,function(e){var r=e.context,a=r.canExecute,u=r.start,c=r.hover,s=r.source,p=r.target;e.originalEvent&&(0,t.isCmd)(e.originalEvent)||(r.initialConnectionStart||(r.initialConnectionStart=r.connectionStart),a&&c&&l(e,c,x(c)),c&&g(a,["bpmn:Association","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:SequenceFlow"])?(r.connectionStart=(0,n.mid)(u),(0,o.isAny)(c,["bpmn:Event","bpmn:Gateway"])&&S(e,(0,n.mid)(c)),(0,o.isAny)(c,["bpmn:Task","bpmn:SubProcess"])&&b(e,c),(0,i.is)(s,"bpmn:BoundaryEvent")&&p===s.host&&v(e)):h(a,"bpmn:MessageFlow")?((0,i.is)(u,"bpmn:Event")&&(r.connectionStart=(0,n.mid)(u)),(0,i.is)(c,"bpmn:Event")&&S(e,(0,n.mid)(c))):r.connectionStart=r.initialConnectionStart)})}function l(t,e,i){d.forEach(function(o){var r=y(o,e);t[o]<e[o]+i?(0,n.setSnapped)(t,o,e[o]+i):t[o]>e[o]+r-i&&(0,n.setSnapped)(t,o,e[o]+r-i)})}function b(t,e){var i=(0,n.mid)(e);d.forEach(function(o){E(t,e,o)&&(0,n.setSnapped)(t,o,i[o])})}function v(t){var i=t.context,o=i.source,r=i.target;if(!q(i)){var a=(0,n.mid)(o),c=(0,e.getOrientation)(a,r,-10),s=[];/top|bottom/.test(c)&&s.push("x"),/left|right/.test(c)&&s.push("y"),s.forEach(function(e){var i,o=t[e];m(o-a[e])<u&&(i=o>a[e]?a[e]+u:a[e]-u,(0,n.setSnapped)(t,e,i))})}}function S(t,e){(0,n.setSnapped)(t,"x",e.x),(0,n.setSnapped)(t,"y",e.y)}function h(n,t){return n&&n.type===t}function g(n,t){return(0,r.some)(t,function(t){return h(n,t)})}function y(n,t){return"x"===n?t.width:t.height}function x(n){return(0,i.is)(n,"bpmn:Task")?s:c}function E(n,t,e){return n[e]>t[e]+p&&n[e]<t[e]+y(e,t)-p}function q(n){var t=n.hover,e=n.source;return t&&e&&t===e}f.$inject=["eventBus"];
},{"diagram-js/lib/features/snapping/SnapUtil":"SLMo","diagram-js/lib/features/keyboard/KeyboardUtil":"gUUR","diagram-js/lib/layout/LayoutUtil":"aRzT","../../util/ModelUtil":"HvoA","../modeling/util/ModelingUtil":"YK7B","min-dash":"AmEv"}],"goOh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SnapPoints=i,exports.default=s;var t=require("min-dash"),n=require("./SnapUtil");function s(){this._targets={},this._snapOrigins={},this._snapLocations=[],this._defaultSnaps={}}function i(t){this._snapValues={}}s.prototype.getSnapOrigin=function(t){return this._snapOrigins[t]},s.prototype.setSnapOrigin=function(t,n){this._snapOrigins[t]=n,-1===this._snapLocations.indexOf(t)&&this._snapLocations.push(t)},s.prototype.addDefaultSnap=function(t,n){var s=this._defaultSnaps[t];s||(s=this._defaultSnaps[t]=[]),s.push(n)},s.prototype.getSnapLocations=function(){return this._snapLocations},s.prototype.setSnapLocations=function(t){this._snapLocations=t},s.prototype.pointsForTarget=function(t){var n=t.id||t,s=this._targets[n];return s||(s=this._targets[n]=new i).initDefaults(this._defaultSnaps),s},i.prototype.add=function(t,n){var s=this._snapValues[t];s||(s=this._snapValues[t]={x:[],y:[]}),-1===s.x.indexOf(n.x)&&s.x.push(n.x),-1===s.y.indexOf(n.y)&&s.y.push(n.y)},i.prototype.snap=function(t,s,i,a){var o=this._snapValues[s];return o&&(0,n.snapTo)(t[i],o[i],a)},i.prototype.initDefaults=function(n){var s=this;(0,t.forEach)(n||{},function(n,i){(0,t.forEach)(n,function(t){s.add(i,t)})})};
},{"min-dash":"AmEv","./SnapUtil":"SLMo"}],"D3A2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=r(require("./SnapContext")),t=require("./SnapUtil"),n=require("../keyboard/KeyboardUtil"),i=require("min-dash");function r(e){return e&&e.__esModule?e:{default:e}}var a=1250;function o(e,i,r){var o=this;this._elementRegistry=e,i.on(["create.start","shape.move.start"],function(e){o.initSnap(e)}),i.on(["create.move","create.end","shape.move.move","shape.move.end"],a,function(e){var i=e.context,a=i.shape,s=i.snapContext,d=i.target;if((!e.originalEvent||!(0,n.isCmd)(e.originalEvent))&&!(0,t.isSnapped)(e)&&d){var p=s.pointsForTarget(d);p.initialized||((p=o.addSnapTargetPoints(p,a,d)).initialized=!0),r.snap(e,p)}}),i.on(["create.cleanup","shape.move.cleanup"],function(){r.hide()})}function s(e){return!!e.waypoints}function d(e){return!!e.hidden}function p(e){return!!e.labelTarget}o.$inject=["elementRegistry","eventBus","snapping"],o.prototype.initSnap=function(n){var i,r=this._elementRegistry,a=n.context,o=a.shape,s=a.snapContext;s||(s=a.snapContext=new e.default);var d=(i=r.get(o.id)?(0,t.mid)(o,n):{x:n.x+(0,t.mid)(o).x,y:n.y+(0,t.mid)(o).y}).x-o.width/2,u=i.y-o.height/2,c=i.x+o.width/2,l=i.y+o.height/2;return s.setSnapOrigin("mid",{x:i.x-n.x,y:i.y-n.y}),p(o)?s:(s.setSnapOrigin("top-left",{x:d-n.x,y:u-n.y}),s.setSnapOrigin("bottom-right",{x:c-n.x,y:l-n.y}),s)},o.prototype.addSnapTargetPoints=function(e,n,r){var a=this.getSnapTargets(n,r);return(0,i.forEach)(a,function(r){if(p(r))p(n)&&e.add("mid",(0,t.mid)(r));else if(s(r)){if(r.waypoints.length<3)return;var a=r.waypoints.slice(1,-1);(0,i.forEach)(a,function(t){e.add("mid",t)})}else e.add("mid",(0,t.mid)(r))}),(0,i.isNumber)(n.x)&&(0,i.isNumber)(n.y)?(this._elementRegistry.get(n.id)&&e.add("mid",(0,t.mid)(n)),e):e},o.prototype.getSnapTargets=function(e,n){return(0,t.getChildren)(n).filter(function(e){return!d(e)})};
},{"./SnapContext":"goOh","./SnapUtil":"SLMo","../keyboard/KeyboardUtil":"gUUR","min-dash":"AmEv"}],"fAHb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var t=s(require("inherits-browser")),e=s(require("diagram-js/lib/features/snapping/CreateMoveSnapping")),n=require("diagram-js/lib/features/snapping/SnapUtil"),i=require("../../util/DiUtil"),a=require("../../util/ModelUtil"),r=require("diagram-js/lib/layout/LayoutUtil"),o=require("./BpmnSnappingUtil"),p=require("min-dash");function s(t){return t&&t.__esModule?t:{default:t}}var d=1500;function u(t,i){i.invoke(e.default,this),t.on(["create.move","create.end"],d,l),t.on(["create.move","create.end","shape.move.move","shape.move.end"],d,function(t){var e=t.context,i=e.canExecute,a=e.target;i&&("attach"===i||i.attach)&&!(0,n.isSnapped)(t)&&c(t,a)})}function c(t,e){var i,a=(0,r.asTRBL)(e),p=(0,o.getBoundaryAttachment)(t,e),s=t.context.shape;i=s.parent?{x:0,y:0}:(0,r.getMid)(s),/top/.test(p)?(0,n.setSnapped)(t,"y",a.top-i.y):/bottom/.test(p)&&(0,n.setSnapped)(t,"y",a.bottom-i.y),/left/.test(p)?(0,n.setSnapped)(t,"x",a.left-i.x):/right/.test(p)&&(0,n.setSnapped)(t,"x",a.right-i.x)}function g(t,e){return t.every(function(t){return(0,a.is)(t,e)})}function f(t){return!(!(0,a.is)(t,"bpmn:SubProcess")||!(0,i.isExpanded)(t))||(0,a.is)(t,"bpmn:Participant")}function l(t){var e=t.context.createConstraints;if(e){var i=e.top,a=e.right,r=e.bottom,o=e.left;(o&&o>=t.x||a&&a<=t.x)&&(0,n.setSnapped)(t,"x",t.x),(i&&i>=t.y||r&&r<=t.y)&&(0,n.setSnapped)(t,"y",t.y)}}function y(t,e){return-1!==t.indexOf(e)}function h(t,e,n){return e?{x:t.x-n.x,y:t.y-n.y}:{x:t.x,y:t.y}}(0,t.default)(u,e.default),u.$inject=["eventBus","injector"],u.prototype.initSnap=function(t){var n=e.default.prototype.initSnap.call(this,t),i=t.shape,r=!!this._elementRegistry.get(i.id);return(0,p.forEach)(i.outgoing,function(e){var i=e.waypoints[0];i=i.original||i,n.setSnapOrigin(e.id+"-docking",h(i,r,t))}),(0,p.forEach)(i.incoming,function(e){var i=e.waypoints[e.waypoints.length-1];i=i.original||i,n.setSnapOrigin(e.id+"-docking",h(i,r,t))}),(0,a.is)(i,"bpmn:Participant")&&n.setSnapLocations(["top-left","bottom-right","mid"]),n},u.prototype.addSnapTargetPoints=function(t,i,o){e.default.prototype.addSnapTargetPoints.call(this,t,i,o);var s=this.getSnapTargets(i,o);(0,p.forEach)(s,function(e){(f(e)||g([i,e],"bpmn:TextAnnotation"))&&(t.add("top-left",(0,n.topLeft)(e)),t.add("bottom-right",(0,n.bottomRight)(e)))});var d=this._elementRegistry;return(0,p.forEach)(i.incoming,function(e){if(d.get(i.id)){y(s,e.source)||t.add("mid",(0,r.getMid)(e.source));var n=e.waypoints[0];t.add(e.id+"-docking",n.original||n)}}),(0,p.forEach)(i.outgoing,function(e){if(d.get(i.id)){y(s,e.target)||t.add("mid",(0,r.getMid)(e.target));var n=e.waypoints[e.waypoints.length-1];t.add(e.id+"-docking",n.original||n)}}),(0,a.is)(o,"bpmn:SequenceFlow")&&(t=this.addSnapTargetPoints(t,i,o.parent)),t},u.prototype.getSnapTargets=function(t,n){return e.default.prototype.getSnapTargets.call(this,t,n).filter(function(t){return!(0,a.is)(t,"bpmn:Lane")})};
},{"inherits-browser":"hUM3","diagram-js/lib/features/snapping/CreateMoveSnapping":"D3A2","diagram-js/lib/features/snapping/SnapUtil":"SLMo","../../util/DiUtil":"lWoN","../../util/ModelUtil":"HvoA","diagram-js/lib/layout/LayoutUtil":"aRzT","./BpmnSnappingUtil":"LRth","min-dash":"AmEv"}],"M3fu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var n=o(require("./SnapContext")),e=require("./SnapUtil"),t=require("../keyboard/KeyboardUtil"),r=require("../../layout/LayoutUtil"),i=require("min-dash");function o(n){return n&&n.__esModule?n:{default:n}}var a=1250;function u(n,r){var i=this;n.on(["resize.start"],function(n){i.initSnap(n)}),n.on(["resize.move","resize.end"],a,function(n){var o=n.context,a=o.shape,u=a.parent,p=o.direction,d=o.snapContext;if(!(n.originalEvent&&(0,t.isCmd)(n.originalEvent)||(0,e.isSnapped)(n))){var s=d.pointsForTarget(u);s.initialized||((s=i.addSnapTargetPoints(s,a,u,p)).initialized=!0),x(p)&&(0,e.setSnapped)(n,"x",n.x),l(p)&&(0,e.setSnapped)(n,"y",n.y),r.snap(n,s)}}),n.on(["resize.cleanup"],function(){r.hide()})}function p(n,e){var t=(0,r.getMid)(n),i=(0,r.asTRBL)(n),o={x:t.x,y:t.y};return-1!==e.indexOf("n")?o.y=i.top:-1!==e.indexOf("s")&&(o.y=i.bottom),-1!==e.indexOf("e")?o.x=i.right:-1!==e.indexOf("w")&&(o.x=i.left),o}function d(n,e){return n.host===e}function s(n){return!!n.waypoints}function c(n){return!!n.hidden}function f(n){return!!n.labelTarget}function x(n){return"n"===n||"s"===n}function l(n){return"e"===n||"w"===n}u.prototype.initSnap=function(e){var t=e.context,r=t.shape,i=t.direction,o=t.snapContext;o||(o=t.snapContext=new n.default);var a=p(r,i);return o.setSnapOrigin("corner",{x:a.x-e.x,y:a.y-e.y}),o},u.prototype.addSnapTargetPoints=function(n,t,r,o){var a=this.getSnapTargets(t,r);return(0,i.forEach)(a,function(t){n.add("corner",(0,e.bottomRight)(t)),n.add("corner",(0,e.topLeft)(t))}),n.add("corner",p(t,o)),n},u.$inject=["eventBus","snapping"],u.prototype.getSnapTargets=function(n,t){return(0,e.getChildren)(t).filter(function(e){return!(d(e,n)||s(e)||c(e)||f(e))})};
},{"./SnapContext":"goOh","./SnapUtil":"SLMo","../keyboard/KeyboardUtil":"gUUR","../../layout/LayoutUtil":"aRzT","min-dash":"AmEv"}],"wPMT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SNAP_LINE_HIDE_DELAY=void 0,exports.default=s;var t=require("min-dash"),e=require("./SnapUtil"),n=require("tiny-svg"),i=7,a=exports.SNAP_LINE_HIDE_DELAY=1e3;function s(e){this._canvas=e,this._asyncHide=(0,t.debounce)((0,t.bind)(this.hide,this),a)}s.$inject=["canvas"],s.prototype.snap=function(n,a){var s=n.context.snapContext,r=s.getSnapLocations(),o={x:(0,e.isSnapped)(n,"x"),y:(0,e.isSnapped)(n,"y")};(0,t.forEach)(r,function(e){var r=s.getSnapOrigin(e),p={x:n.x+r.x,y:n.y+r.y};if((0,t.forEach)(["x","y"],function(t){var n;o[t]||void 0!==(n=a.snap(p,e,t,i))&&(o[t]={value:n,originValue:n-r[t]})}),o.x&&o.y)return!1}),this.showSnapLine("vertical",o.x&&o.x.value),this.showSnapLine("horizontal",o.y&&o.y.value),(0,t.forEach)(["x","y"],function(i){var a=o[i];(0,t.isObject)(a)&&(0,e.setSnapped)(n,i,a.originValue)})},s.prototype._createLine=function(e){var i=this._canvas.getLayer("snap"),a=(0,n.create)("path");return(0,n.attr)(a,{d:"M0,0 L0,0"}),(0,n.classes)(a).add("djs-snap-line"),(0,n.append)(i,a),{update:function(i){(0,t.isNumber)(i)?"horizontal"===e?(0,n.attr)(a,{d:"M-100000,"+i+" L+100000,"+i,display:""}):(0,n.attr)(a,{d:"M "+i+",-100000 L "+i+", +100000",display:""}):(0,n.attr)(a,{display:"none"})}}},s.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),vertical:this._createLine("vertical")}},s.prototype.showSnapLine=function(t,e){var n=this.getSnapLine(t);n&&n.update(e),this._asyncHide()},s.prototype.getSnapLine=function(t){return this._snapLines||this._createSnapLines(),this._snapLines[t]},s.prototype.hide=function(){(0,t.forEach)(this._snapLines,function(t){t.update()})};
},{"min-dash":"AmEv","./SnapUtil":"SLMo","tiny-svg":"WdCh"}],"g8Yh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./CreateMoveSnapping")),p=t(require("./ResizeSnapping")),n=t(require("./Snapping"));function t(e){return e&&e.__esModule?e:{default:e}}var a=exports.default={__init__:["createMoveSnapping","resizeSnapping","snapping"],createMoveSnapping:["type",e.default],resizeSnapping:["type",p.default],snapping:["type",n.default]};
},{"./CreateMoveSnapping":"D3A2","./ResizeSnapping":"M3fu","./Snapping":"wPMT"}],"Q0dl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=p(require("./BpmnConnectSnapping")),n=p(require("./BpmnCreateMoveSnapping")),t=p(require("diagram-js/lib/features/snapping"));function p(e){return e&&e.__esModule?e:{default:e}}var a=exports.default={__depends__:[t.default],__init__:["connectSnapping","createMoveSnapping"],connectSnapping:["type",e.default],createMoveSnapping:["type",n.default]};
},{"./BpmnConnectSnapping":"s51y","./BpmnCreateMoveSnapping":"fAHb","diagram-js/lib/features/snapping":"g8Yh"}],"iBqq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=require("min-dom"),t=require("../../util/Elements"),s=require("../../util/EscapeUtil"),r=require("../keyboard/KeyboardUtil");function i(t,s,r,n){this._open=!1,this._results=[],this._eventMaps=[],this._canvas=t,this._eventBus=s,this._overlays=r,this._selection=n,this._container=(0,e.domify)(i.BOX_HTML),this._searchInput=(0,e.query)(i.INPUT_SELECTOR,this._container),this._resultsContainer=(0,e.query)(i.RESULTS_CONTAINER_SELECTOR,this._container),this._canvas.getContainer().appendChild(this._container),s.on(["canvas.destroy","diagram.destroy"],this.close,this)}function n(t){var s=t.width+12,r=t.height+12,n={width:s+"px",height:r+"px"},o=(0,e.domify)('<div class="'+i.OVERLAY_CLASS+'"></div>');return(0,e.assignStyle)(o,n),{position:{bottom:r-6,right:s-6},show:!0,html:o}}function o(t,s,r){var i=a(s),n=(0,e.domify)(r);n.innerHTML=i,t.appendChild(n)}function a(e){var t="";return e.forEach(function(e){e.matched?t+='<strong class="'+i.RESULT_HIGHLIGHT_CLASS+'">'+(0,s.escapeHTML)(e.matched)+"</strong>":t+=(0,s.escapeHTML)(e.normal)}),""!==t?t:null}i.$inject=["canvas","eventBus","overlays","selection"],i.prototype._bindEvents=function(){var t=this;function s(s,r,i,n){t._eventMaps.push({el:s,type:i,listener:e.delegate.bind(s,r,i,n)})}s(document,"html","click",function(e){t.close()}),s(this._container,i.INPUT_SELECTOR,"click",function(e){e.stopPropagation(),e.delegateTarget.focus()}),s(this._container,i.RESULT_SELECTOR,"mouseover",function(e){e.stopPropagation(),t._scrollToNode(e.delegateTarget),t._preselect(e.delegateTarget)}),s(this._container,i.RESULT_SELECTOR,"click",function(e){e.stopPropagation(),t._select(e.delegateTarget)}),s(this._container,i.INPUT_SELECTOR,"keydown",function(e){(0,r.isKey)("ArrowUp",e)&&e.preventDefault(),(0,r.isKey)("ArrowDown",e)&&e.preventDefault()}),s(this._container,i.INPUT_SELECTOR,"keyup",function(e){if((0,r.isKey)("Escape",e))return t.close();if((0,r.isKey)("Enter",e)){var s=t._getCurrentResult();return s?t._select(s):t.close()}return(0,r.isKey)("ArrowUp",e)?t._scrollToDirection(!0):(0,r.isKey)("ArrowDown",e)?t._scrollToDirection():void((0,r.isKey)(["ArrowLeft","ArrowRight"],e)||t._search(e.delegateTarget.value))})},i.prototype._unbindEvents=function(){this._eventMaps.forEach(function(t){e.delegate.unbind(t.el,t.type,t.listener)})},i.prototype._search=function(t){var s=this;if(this._clearResults(),t&&""!==t){var r=this._searchProvider.find(t);if(r.length){r.forEach(function(e){var t=e.element.id,r=s._createResultNode(e,t);s._results[t]={element:e.element,node:r}});var n=(0,e.query)(i.RESULT_SELECTOR,this._resultsContainer);this._scrollToNode(n),this._preselect(n)}}},i.prototype._scrollToDirection=function(e){var t=this._getCurrentResult();if(t){var s=e?t.previousElementSibling:t.nextElementSibling;s&&(this._scrollToNode(s),this._preselect(s))}},i.prototype._scrollToNode=function(e){if(e&&e!==this._getCurrentResult()){var t=e.offsetTop,s=this._resultsContainer.scrollTop,r=t-this._resultsContainer.clientHeight+e.clientHeight;t<s?this._resultsContainer.scrollTop=t:s<r&&(this._resultsContainer.scrollTop=r)}},i.prototype._clearResults=function(){(0,e.clear)(this._resultsContainer),this._results=[],this._resetOverlay(),this._eventBus.fire("searchPad.cleared")},i.prototype._getCurrentResult=function(){return(0,e.query)(i.RESULT_SELECTED_SELECTOR,this._resultsContainer)},i.prototype._createResultNode=function(t,s){var r=(0,e.domify)(i.RESULT_HTML);return t.primaryTokens.length>0&&o(r,t.primaryTokens,i.RESULT_PRIMARY_HTML),o(r,t.secondaryTokens,i.RESULT_SECONDARY_HTML),(0,e.attr)(r,i.RESULT_ID_ATTRIBUTE,s),this._resultsContainer.appendChild(r),r},i.prototype.registerProvider=function(e){this._searchProvider=e},i.prototype.open=function(){if(!this._searchProvider)throw new Error("no search provider registered");this.isOpen()||(this._bindEvents(),this._open=!0,(0,e.classes)(this._container).add("open"),this._searchInput.focus(),this._eventBus.fire("searchPad.opened"))},i.prototype.close=function(){this.isOpen()&&(this._unbindEvents(),this._open=!1,(0,e.classes)(this._container).remove("open"),this._clearResults(),this._searchInput.value="",this._searchInput.blur(),this._resetOverlay(),this._eventBus.fire("searchPad.closed"))},i.prototype.toggle=function(){this.isOpen()?this.close():this.open()},i.prototype.isOpen=function(){return this._open},i.prototype._preselect=function(t){var s=this._getCurrentResult();if(t!==s){s&&(0,e.classes)(s).remove(i.RESULT_SELECTED_CLASS);var r=(0,e.attr)(t,i.RESULT_ID_ATTRIBUTE),n=this._results[r].element;(0,e.classes)(t).add(i.RESULT_SELECTED_CLASS),this._resetOverlay(n),this._canvas.scrollToElement(n,{top:400}),this._selection.select(n),this._eventBus.fire("searchPad.preselected",n)}},i.prototype._select=function(t){var s=(0,e.attr)(t,i.RESULT_ID_ATTRIBUTE),r=this._results[s].element;this.close(),this._resetOverlay(),this._canvas.scrollToElement(r,{top:400}),this._selection.select(r),this._eventBus.fire("searchPad.selected",r)},i.prototype._resetOverlay=function(e){if(this._overlayId&&this._overlays.remove(this._overlayId),e){var s=n((0,t.getBBox)(e));this._overlayId=this._overlays.add(e,s)}},i.CONTAINER_SELECTOR=".djs-search-container",i.INPUT_SELECTOR=".djs-search-input input",i.RESULTS_CONTAINER_SELECTOR=".djs-search-results",i.RESULT_SELECTOR=".djs-search-result",i.RESULT_SELECTED_CLASS="djs-search-result-selected",i.RESULT_SELECTED_SELECTOR="."+i.RESULT_SELECTED_CLASS,i.RESULT_ID_ATTRIBUTE="data-result-id",i.RESULT_HIGHLIGHT_CLASS="djs-search-highlight",i.OVERLAY_CLASS="djs-search-overlay",i.BOX_HTML='<div class="djs-search-container djs-draggable djs-scrollable"><div class="djs-search-input"><input type="text"/></div><div class="djs-search-results"></div></div>',i.RESULT_HTML='<div class="djs-search-result"></div>',i.RESULT_PRIMARY_HTML='<div class="djs-search-result-primary"></div>',i.RESULT_SECONDARY_HTML='<p class="djs-search-result-secondary"></p>';
},{"min-dom":"fWg5","../../util/Elements":"KTcn","../../util/EscapeUtil":"eIZy","../keyboard/KeyboardUtil":"gUUR"}],"l6Su":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("../overlays")),r=u(require("../selection")),t=u(require("./SearchPad"));function u(e){return e&&e.__esModule?e:{default:e}}var a=exports.default={__depends__:[e.default,r.default],searchPad:["type",t.default]};
},{"../overlays":"awXg","../selection":"NUwH","./SearchPad":"iBqq"}],"cyaB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("min-dash"),t=require("../label-editing/LabelUtil");function r(e,t,r){this._elementRegistry=e,this._canvas=r,t.registerProvider(this)}function n(t){return(0,e.filter)(t,function(e){return!!e.matched}).length>0}function i(e,t){var r=[],n=e;if(!e)return r;e=e.toLowerCase(),t=t.toLowerCase();var i=e.indexOf(t);return i>-1?(0!==i&&r.push({normal:n.substr(0,i)}),r.push({matched:n.substr(i,t.length)}),t.length+i<e.length&&r.push({normal:n.substr(t.length+i,e.length)})):r.push({normal:n}),r}r.$inject=["elementRegistry","searchPad","canvas"],r.prototype.find=function(r){var s=this._canvas.getRootElement(),a=this._elementRegistry.filter(function(e){return!e.labelTarget});return a=(0,e.filter)(a,function(e){return e!==s}),a=(0,e.map)(a,function(e){return{primaryTokens:i((0,t.getLabel)(e),r),secondaryTokens:i(e.id,r),element:e}}),a=(0,e.filter)(a,function(e){return n(e.primaryTokens)||n(e.secondaryTokens)}),a=(0,e.sortBy)(a,function(e){return(0,t.getLabel)(e.element)+e.element.id})};
},{"min-dash":"AmEv","../label-editing/LabelUtil":"v5cn"}],"lo6s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("diagram-js/lib/features/search-pad")),r=t(require("./BpmnSearchProvider"));function t(e){return e&&e.__esModule?e:{default:e}}var a=exports.default={__depends__:[e.default],__init__:["bpmnSearch"],bpmnSearch:["type",r.default]};
},{"diagram-js/lib/features/search-pad":"l6Su","./BpmnSearchProvider":"cyaB"}],"lTH2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=L;var e=z(require("inherits-browser")),r=z(require("./BaseModeler")),t=z(require("./Viewer")),a=z(require("./NavigatedViewer")),i=z(require("diagram-js/lib/navigation/keyboard-move")),u=z(require("diagram-js/lib/navigation/movecanvas")),s=z(require("diagram-js/lib/navigation/touch")),d=z(require("diagram-js/lib/navigation/zoomscroll")),l=z(require("./features/align-elements")),n=z(require("./features/auto-place")),o=z(require("./features/auto-resize")),f=z(require("diagram-js/lib/features/auto-scroll")),p=z(require("diagram-js/lib/features/bendpoints")),m=z(require("diagram-js/lib/features/connect")),c=z(require("diagram-js/lib/features/connection-preview")),g=z(require("./features/context-pad")),b=z(require("./features/copy-paste")),q=z(require("diagram-js/lib/features/create")),v=z(require("./features/create-append-anything")),w=z(require("./features/distribute-elements")),M=z(require("./features/editor-actions")),_=z(require("./features/grid-snapping")),h=z(require("./features/interaction-events")),P=z(require("./features/keyboard")),y=z(require("diagram-js/lib/features/keyboard-move-selection")),N=z(require("./features/label-editing")),j=z(require("./features/modeling")),B=z(require("diagram-js/lib/features/move")),x=z(require("./features/palette")),D=z(require("./features/replace-preview")),E=z(require("diagram-js/lib/features/resize")),S=z(require("./features/snapping")),V=z(require("./features/search")),k=require("./util/CompatibilityUtil");function z(e){return e&&e.__esModule?e:{default:e}}var C='<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" targetNamespace="http://bpmn.io/schema/bpmn" id="Definitions_1"><bpmn:process id="Process_1" isExecutable="false"><bpmn:startEvent id="StartEvent_1"/></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds height="36.0" width="36.0" x="173.0" y="102.0"/></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>';function L(e){r.default.call(this,e)}(0,e.default)(L,r.default),L.Viewer=t.default,L.NavigatedViewer=a.default,L.prototype.createDiagram=(0,k.wrapForCompatibility)(function(){return this.importXML(C)}),L.prototype._interactionModules=[i.default,u.default,s.default,d.default],L.prototype._modelingModules=[l.default,n.default,f.default,o.default,p.default,m.default,c.default,g.default,b.default,q.default,v.default,w.default,M.default,_.default,h.default,P.default,y.default,N.default,j.default,B.default,x.default,D.default,E.default,S.default,V.default],L.prototype._modules=[].concat(t.default.prototype._modules,L.prototype._interactionModules,L.prototype._modelingModules);
},{"inherits-browser":"hUM3","./BaseModeler":"QfFV","./Viewer":"dNJf","./NavigatedViewer":"I9NY","diagram-js/lib/navigation/keyboard-move":"qQDY","diagram-js/lib/navigation/movecanvas":"FQgA","diagram-js/lib/navigation/touch":"mZoZ","diagram-js/lib/navigation/zoomscroll":"AqEc","./features/align-elements":"MCWE","./features/auto-place":"HcBr","./features/auto-resize":"E9uH","diagram-js/lib/features/auto-scroll":"Zptz","diagram-js/lib/features/bendpoints":"MMuP","diagram-js/lib/features/connect":"qvKB","diagram-js/lib/features/connection-preview":"KC0J","./features/context-pad":"P4QC","./features/copy-paste":"iTbg","diagram-js/lib/features/create":"qe87","./features/create-append-anything":"ax38","./features/distribute-elements":"qSq4","./features/editor-actions":"kHTJ","./features/grid-snapping":"pm0i","./features/interaction-events":"xeLQ","./features/keyboard":"EAEv","diagram-js/lib/features/keyboard-move-selection":"fXhe","./features/label-editing":"Dg2X","./features/modeling":"SrIh","diagram-js/lib/features/move":"QmqJ","./features/palette":"ZAAM","./features/replace-preview":"bk75","diagram-js/lib/features/resize":"Hvr4","./features/snapping":"Q0dl","./features/search":"lo6s","./util/CompatibilityUtil":"QE22"}],"prLV":[function(require,module,exports) {

},{}],"RjKz":[function(require,module,exports) {

},{"./../font/bpmn.eot":[["bpmn.8afa5aa7.eot","YmP9"],"YmP9"],"./../font/bpmn.svg":[["bpmn.c9569e74.svg","Rzka"],"Rzka"]}],"jd6L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ScopeTraits=void 0;const e=1,E=2,D=4,t=8,N=16,T=32,o=64,r=128,s=256,A=512,c=7,p=9,C=exports.ScopeTraits=Object.freeze({ACTIVATED:1,RUNNING:2,ENDING:4,ENDED:8,DESTROYED:16,FAILED:32,TERMINATED:64,CANCELED:128,COMPLETED:256,COMPENSABLE:512,ACTIVE:7,NOT_DEAD:9});
},{}],"K4Pl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ScopeStates=exports.ScopeState=void 0;var e=require("./ScopeTraits");const t={};function s(e,t){throw new Error(`illegal transition: ${e.name} -> ${t}`)}function i(e,s){return e===t?s:e}class r{constructor(e,t,{start:s,cancel:r,complete:a,destroy:c,fail:o,terminate:n,compensable:p}={}){this.name=e,this.traits=t,this._start=i(s,this),this._compensable=i(p,this),this._cancel=i(r,this),this._complete=i(a,this),this._destroy=i(c,this),this._fail=i(o,this),this._terminate=i(n,this)}hasTrait(e){return 0!=(this.traits&e)}complete(){return this._complete||s(this,"complete")}destroy(){return this._destroy||s(this,"destroy")}cancel(){return this._cancel||s(this,"cancel")}fail(){return this._fail||s(this,"fail")}terminate(){return this._terminate||s(this,"terminate")}compensable(){return this._compensable||s(this,"compensable")}start(){return this._start||s(this,"start")}}exports.ScopeState=r;const a=new r("failed",e.ScopeTraits.DESTROYED|e.ScopeTraits.FAILED),c=new r("terminated",e.ScopeTraits.DESTROYED|e.ScopeTraits.TERMINATED),o=new r("completed",e.ScopeTraits.DESTROYED|e.ScopeTraits.COMPLETED),n=new r("terminating",e.ScopeTraits.ENDING|e.ScopeTraits.TERMINATED,{destroy:c}),p=new r("canceling",e.ScopeTraits.ENDING|e.ScopeTraits.FAILED|e.ScopeTraits.CANCELED,{destroy:a,complete:t,terminate:n}),l=new r("completing",e.ScopeTraits.ENDING|e.ScopeTraits.COMPLETED,{destroy:o,cancel:p,terminate:n}),T=new r("failing",e.ScopeTraits.ENDING|e.ScopeTraits.FAILED,{cancel:p,complete:l,destroy:a,terminate:n}),E=new r("compensable:failing",e.ScopeTraits.ENDING|e.ScopeTraits.FAILED,{complete:t,terminate:n,destroy:a}),m=new r("compensable:completed",e.ScopeTraits.ENDED|e.ScopeTraits.COMPLETED,{cancel:p,fail:E,destroy:o,compensable:t}),S=new r("compensable:completing",e.ScopeTraits.ENDING|e.ScopeTraits.COMPLETED,{destroy:m,terminate:n,compensable:t}),h=new r("compensable:running",e.ScopeTraits.RUNNING|e.ScopeTraits.COMPENSABLE,{cancel:p,complete:S,compensable:t,destroy:m,fail:T,terminate:n}),N=new r("running",e.ScopeTraits.RUNNING,{cancel:p,complete:l,compensable:h,destroy:c,fail:T,terminate:n}),D=new r("activated",e.ScopeTraits.ACTIVATED,{start:N,destroy:c}),I=exports.ScopeStates=Object.freeze({ACTIVATED:D,RUNNING:N,CANCELING:p,COMPLETING:l,COMPLETED:o,FAILING:T,FAILED:a,TERMINATING:n,TERMINATED:c});
},{"./ScopeTraits":"jd6L"}],"MHCB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./ScopeTraits"),e=require("./ScopeStates");class s{constructor(t,s,i=null,r=null){this.id=t,this.element=s,this.parent=i,this.initiator=r,this.subscriptions=new Set,this.children=[],this.state=e.ScopeStates.ACTIVATED}get running(){return this.hasTrait(t.ScopeTraits.RUNNING)}get destroyed(){return this.hasTrait(t.ScopeTraits.DESTROYED)}get completed(){return this.hasTrait(t.ScopeTraits.COMPLETED)}get canceled(){return this.hasTrait(t.ScopeTraits.CANCELED)}get failed(){return this.hasTrait(t.ScopeTraits.FAILED)}hasTrait(t){return this.state.hasTrait(t)}start(){return this.state=this.state.start(),this}compensable(){return this.state=this.state.compensable(),this}fail(t){return this.failed||(this.state=this.state.fail(),this.failInitiator=t),this}cancel(t){return this.canceled||(this.state=this.state.cancel(),this.cancelInitiator=t),this}terminate(t){return this.state=this.state.terminate(),this.terminateInitiator=t,this}complete(){return this.state=this.state.complete(),this}destroy(t){return this.state=this.state.destroy(),this.destroyInitiator=t,this}getTokens(){return this.children.filter(t=>!t.destroyed).length}getTokensByElement(t){return this.children.filter(e=>!e.destroyed&&e.element===t).length}}exports.default=s;
},{"./ScopeTraits":"jd6L","./ScopeStates":"K4Pl"}],"j5Ei":[function(require,module,exports) {
"use strict";function t(t,e){const r=[];for(const o of t)e(o)&&r.push(o);return r}function e(t,e){for(const r of t)if(e(r))return r;return null}Object.defineProperty(exports,"__esModule",{value:!0}),exports.filterSet=t,exports.findSet=e;
},{}],"v3Zr":[function(require,module,exports) {
"use strict";function e(e,t){return["type","name","ref","iref"].every(r=>!(r in e)||e[r]===t[r])}Object.defineProperty(exports,"__esModule",{value:!0}),exports.eventsMatch=e;
},{}],"IKyH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.filterSequenceFlows=n,Object.defineProperty(exports,"getBusinessObject",{enumerable:!0,get:function(){return e.getBusinessObject}}),Object.defineProperty(exports,"is",{enumerable:!0,get:function(){return e.is}}),exports.isAny=l,exports.isBoundaryEvent=b,exports.isCatchEvent=p,exports.isCompensationActivity=c,exports.isCompensationEvent=u,exports.isEventSubProcess=m,exports.isInterrupting=v,exports.isLabel=f,exports.isLinkCatch=o,exports.isMessageCatch=r,exports.isMessageFlow=i,exports.isSequenceFlow=s,exports.isStartEvent=a,exports.isTypedEvent=x;var e=require("bpmn-js/lib/util/ModelUtil"),t=require("min-dash");function n(t){return t.filter(t=>(0,e.is)(t,"bpmn:SequenceFlow"))}function i(t){return(0,e.is)(t,"bpmn:MessageFlow")}function s(t){return(0,e.is)(t,"bpmn:SequenceFlow")}function r(e){return p(e)&&x(e,"bpmn:MessageEventDefinition")}function o(e){return p(e)&&x(e,"bpmn:LinkEventDefinition")}function u(e){return p(e)&&x(e,"bpmn:CompensateEventDefinition")}function c(t){return(0,e.is)(t,"bpmn:Activity")&&t.businessObject.isForCompensation}function p(t){return((0,e.is)(t,"bpmn:CatchEvent")||(0,e.is)(t,"bpmn:ReceiveTask"))&&!f(t)}function b(t){return(0,e.is)(t,"bpmn:BoundaryEvent")&&!f(t)}function a(t){return(0,e.is)(t,"bpmn:StartEvent")&&!f(t)}function f(e){return!!e.labelTarget}function m(t){return(0,e.getBusinessObject)(t).triggeredByEvent}function v(t){return(0,e.is)(t,"bpmn:StartEvent")&&(0,e.getBusinessObject)(t).isInterrupting||(0,e.is)(t,"bpmn:BoundaryEvent")&&(0,e.getBusinessObject)(t).cancelActivity}function l(t,n){return n.some(n=>(0,e.is)(t,n))}function x(n,i){return(0,t.some)((0,e.getBusinessObject)(n).eventDefinitions,t=>(0,e.is)(t,i))}
},{"bpmn-js/lib/util/ModelUtil":"HvoA","min-dash":"AmEv"}],"sQYa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=c;var e=s(require("ids")),t=s(require("./Scope")),n=require("./ScopeTraits"),i=require("./util/SetUtil"),r=require("./util/EventsUtil"),o=require("./util/ModelUtil");function s(e){return e&&e.__esModule?e:{default:e}}function c(s,c,m){const d=s.get("scopeIds",!1)||new e.default([32,36]),v={},g={},h=new u,y=new Set,S=[],b=new Set,E=new Set;function w(e,t){if(S.push([t,e]),1!==S.length)return;let n;for(;n=S[0];){const[e,t]=n;t.destroyed||e(),S.shift()}O("tick")}function k(e){return g[e.type]||h}function C(e){const{element:t,parentScope:n,initiator:i=null}=e,r=e.scope||N({element:t,parent:n,initiator:i});return w(r,function(){r.running||r.start(),A("signal",{...e,scope:r}),k(t).signal({...e,scope:r}),r.parent&&I(r.parent)}),r}function D(e){const{event:t,initiator:n,scope:o}=e,s=x(t),c=o.subscriptions,u=(0,i.filterSet)(c,e=>(0,r.eventsMatch)(s,e.event)),a=u.filter(e=>!e.event.interrupting),p=u.filter(e=>e.event.interrupting);if(!p.length)return a.map(e=>e.triggerFn(n)).flat();const l=p.find(e=>!e.event.boundary)||p[0],m=(0,i.filterSet)(c,e=>e.event.persistent||f(e.event,l.event));return c.forEach(e=>{m.includes(e)||e.remove()}),[l.triggerFn(n)].flat().filter(e=>e)}function T(e,t,n){const i=(t=x(t)).element,r={scope:e,event:t,element:i,triggerFn:n,remove(){R(r)}};return E.add(r),e.subscriptions.add(r),i&&F(i),r}function R(e){const{scope:t,event:n}=e;E.delete(e),t.subscriptions.delete(e),n.element&&F(n.element)}function x(e){if(!e.businessObject)return e;const t=(0,o.isInterrupting)(e),n=(0,o.isBoundaryEvent)(e),i=function(e){return(0,o.is)(e,"bpmn:StartEvent")||(0,o.is)(e,"bpmn:IntermediateCatchEvent")||(0,o.is)(e,"bpmn:ReceiveTask")||p(e)?(0,o.getBusinessObject)(e).name||e.id:null}(e),r={element:e,interrupting:t,boundary:n,...i?{iref:i}:{}},s=l(e)[0];if(!s)return{...r,type:a(e)?"message":"none"};if((0,o.is)(s,"bpmn:LinkEventDefinition"))return{...r,type:"link",name:s.name};if((0,o.is)(s,"bpmn:SignalEventDefinition"))return{...r,type:"signal",ref:s.signalRef};if((0,o.is)(s,"bpmn:TimerEventDefinition"))return{...r,type:"timer"};if((0,o.is)(s,"bpmn:ConditionalEventDefinition"))return{...r,type:"condition"};if((0,o.is)(s,"bpmn:EscalationEventDefinition"))return{...r,type:"escalation",ref:s.escalationRef};if((0,o.is)(s,"bpmn:CancelEventDefinition"))return{...r,type:"cancel"};if((0,o.is)(s,"bpmn:ErrorEventDefinition"))return{...r,type:"error",ref:s.errorRef};if((0,o.is)(s,"bpmn:MessageEventDefinition"))return{...r,type:"message",ref:s.messageRef};if((0,o.is)(s,"bpmn:CompensateEventDefinition")){let t=s.activityRef&&m.get(s.activityRef.id);return t||(t=(0,o.isStartEvent)(e)&&(0,o.isEventSubProcess)(e.parent)?e.parent.parent:(0,o.isBoundaryEvent)(e)?e.host:e.parent),{...r,type:"compensate",ref:t,persistent:!0}}throw new Error("unknown event definition",s)}function B(e,n=!0){const{element:i,parent:r,initiator:o}=e;n&&A("createScope",{element:i,scope:r});const s=new t.default(d.next(),i,r,o);return r&&r.children.push(s),b.add(s),n&&O("createScope",{scope:s}),F(i),r&&F(r.element),s}function M(e){if("function"==typeof e)return e;const{event:t,element:n,scope:i}=e,o=e.elements||n&&[n],s=t&&x(t);return e=>(!s||(0,r.eventsMatch)(s,e.event))&&(!o||o.includes(e.element))&&(!i||i===e.scope)}function j(e){if("function"==typeof e)return e;const{element:t,waitsOnElement:i,parent:r,trait:o=n.ScopeTraits.RUNNING,subscribedTo:s}=e,c=s?function(e){const t="function"===e?e:M(e);return e=>Array.from(e.subscriptions).some(t)}(s):()=>!0;return e=>(!t||e.element===t)&&(!r||e.parent===r)&&(!i||e.getTokensByElement(i)>0)&&e.hasTrait(o)&&c(e)}function q(e,t=null){if(!e.destroyed){e.destroy(t);for(const t of e.subscriptions){const i=t.event.traits||n.ScopeTraits.ACTIVE;e.hasTrait(i)||R(t)}if(e.destroyed){for(const n of e.children)n.destroyed||q(n,t);A("destroyScope",{element:e.element,scope:e}),b.delete(e),O("destroyScope",{scope:e})}F(e.element),e.parent&&F(e.parent.element)}}function A(e,t){O("trace",{...t,action:e})}function F(e){y.add(e),S.length||O("tick")}function I(e){O("scopeChanged",{scope:e})}function O(e,t={}){return c.fire(`tokenSimulation.simulator.${e}`,t)}function P(e,t){c.on("tokenSimulation.simulator."+e,t)}function U(e,t){c.off("tokenSimulation.simulator."+e,t)}function _(e,t){const n=$(e);v[e.id||e]={...n,...t},F(e)}function N(e){const{element:t}=e,n=B(e),{children:i=[],attachers:r=[]}=t;for(const s of i)if((0,o.isEventSubProcess)(s)){const e=s.children.filter(e=>(0,o.isStartEvent)(e)&&!(0,o.isCompensationEvent)(e));for(const t of e)T(n,t,e=>C({element:s,parentScope:n,startEvent:t,initiator:e}))}for(const s of r)(0,o.isBoundaryEvent)(s)&&!(0,o.isCompensationEvent)(s)&&T(n,s,e=>C({element:s,parentScope:n.parent,hostScope:n,initiator:e}));return n}function $(e){return v[e.id||e]||{}}P("tick",function(){for(const e of y)O("elementChanged",{element:e});y.clear()}),this.createScope=B,this.destroyScope=q,this.findScope=function(e){return(0,i.findSet)(b,j(e))},this.findScopes=function(e){return(0,i.filterSet)(b,j(e))},this.findSubscription=function(e){return(0,i.findSet)(E,M(e))},this.findSubscriptions=function(e){return(0,i.filterSet)(E,M(e))},this.waitAtElement=function(e,t=!0){_(e,{wait:t})},this.waitForScopes=function(e,t){if(!t.length)return;const n={type:"all-completed",persistent:!1},i=new Set(t),r=t=>{i.delete(t.scope),0===i.size&&(U("destroyScope",r),D({scope:e,event:n}))};return P("destroyScope",r),n},this.setConfig=_,this.getConfig=$,this.signal=C,this.enter=function(e){const{element:t,scope:n,initiator:i=n}=e,r=N({element:t,parent:n,initiator:i});return w(r,function(){r.running||r.start(),A("enter",e),k(t).enter({...e,initiator:i,scope:r}),I(n)}),r},this.exit=function(e){const{element:t,scope:n,initiator:i=n}=e;w(n,function(){A("exit",e),k(t).exit({...e,initiator:i}),n.running&&n.complete(),q(n,i),n.parent&&I(n.parent)})},this.subscribe=T,this.trigger=D,this.reset=function(){for(const e of b)q(e);for(const e of function(){const e=[];return m.forEach(t=>{if(!(0,o.isAny)(t,["bpmn:Process","bpmn:Participant"]))return;const n=B({element:t},!1);e.push(n);const i=t.children.filter(o.isStartEvent);for(const e of i)T(n,{...x(e),interrupting:!1},n=>C({element:t,startEvent:e,initiator:n}))}),e}())b.add(e);O("tick"),O("reset")},this.on=P,this.off=U,this.registerBehavior=function(e,t){g[e]=t}}function u(){this.signal=function(e){console.log("ignored #exit",e.element)},this.exit=function(e){console.log("ignored #exit",e.element)},this.enter=function(e){console.log("ignored #enter",e.element)}}function f(e,t){return e.type===t.type&&e.boundary&&!t.boundary}function a(e){return(0,o.is)(e,"bpmn:ReceiveTask")||e.incoming.some(e=>(0,o.is)(e,"bpmn:MessageFlow"))}function p(e){if(!(0,o.isBoundaryEvent)(e))return!1;const t=l(e);return!t[0]||(0,o.isAny)(t[0],["bpmn:ConditionalEventDefinition","bpmn:TimerEventDefinition"])}function l(e){return e.businessObject.get("eventDefinitions")||[]}c.$inject=["injector","eventBus","elementRegistry"];
},{"ids":"Ia3Z","./Scope":"MHCB","./ScopeTraits":"jd6L","./util/SetUtil":"j5Ei","./util/EventsUtil":"v3Zr","./util/ModelUtil":"IKyH"}],"LDe3":[function(require,module,exports) {
"use strict";function t(t,i){this._simulator=t,this._activityBehavior=i,t.registerBehavior("bpmn:StartEvent",this)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t,t.prototype.signal=function(t){this._simulator.exit(t)},t.prototype.exit=function(t){this._activityBehavior.exit(t)},t.$inject=["simulator","activityBehavior"];
},{}],"zVys":[function(require,module,exports) {
"use strict";function e(e,t,i){this._intermediateThrowEventBehavior=i,this._scopeBehavior=t,e.registerBehavior("bpmn:EndEvent",this)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e,e.$inject=["simulator","scopeBehavior","intermediateThrowEventBehavior"],e.prototype.enter=function(e){this._intermediateThrowEventBehavior.enter(e)},e.prototype.signal=function(e){this._intermediateThrowEventBehavior.signal(e)},e.prototype.exit=function(e){const{scope:t}=e;this._scopeBehavior.tryExit(t.parent,t)};
},{}],"eMCZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var t=require("../util/ModelUtil");function e(t,e,i){this._simulator=t,this._activityBehavior=e,this._scopeBehavior=i,t.registerBehavior("bpmn:BoundaryEvent",this)}e.prototype.signal=function(e){const{element:i,scope:o,hostScope:s=this._simulator.findScope({parent:o.parent,element:i.host})}=e;if(!s)throw new Error("host scope not found");if((0,t.getBusinessObject)(i).cancelActivity){this._scopeBehavior.interrupt(s,o);const t=this._scopeBehavior.tryExit(s,o);if(t){const i=this._simulator.subscribe(s,t,t=>(i.remove(),this._simulator.exit(e)));return}}this._simulator.exit(e)},e.prototype.exit=function(t){this._activityBehavior.exit(t)},e.$inject=["simulator","activityBehavior","scopeBehavior"];
},{"../util/ModelUtil":"IKyH"}],"PcRi":[function(require,module,exports) {
"use strict";function t(t,e){this._activityBehavior=e,this._simulator=t,t.registerBehavior("bpmn:IntermediateCatchEvent",this),t.registerBehavior("bpmn:ReceiveTask",this)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t,t.$inject=["simulator","activityBehavior"],t.prototype.signal=function(t){return this._simulator.exit(t)},t.prototype.enter=function(t){const{element:e}=t;return this._activityBehavior.signalOnEvent(t,e)},t.prototype.exit=function(t){this._activityBehavior.exit(t)};
},{}],"eYSq":[function(require,module,exports) {
"use strict";function t(t,e,i){this._simulator=t,this._activityBehavior=e,this._eventBehaviors=i,t.registerBehavior("bpmn:IntermediateThrowEvent",this),t.registerBehavior("bpmn:SendTask",this)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t,t.prototype.enter=function(t){const{element:e}=t,i=this._eventBehaviors.get(e);if(i){const e=i(t);if(e)return this._activityBehavior.signalOnEvent(t,e)}this._activityBehavior.enter(t)},t.prototype.signal=function(t){this._activityBehavior.signal(t)},t.prototype.exit=function(t){this._activityBehavior.exit(t)},t.$inject=["simulator","activityBehavior","eventBehaviors"];
},{}],"DjNc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("../util/ModelUtil");function t(e){this._simulator=e,e.registerBehavior("bpmn:ExclusiveGateway",this)}t.prototype.enter=function(e){this._simulator.exit(e)},t.prototype.exit=function(t){const{element:i,scope:o}=t,r=(0,e.filterSequenceFlows)(i.outgoing);if(1===r.length)return this._simulator.enter({element:r[0],scope:o.parent});const{activeOutgoing:n}=this._simulator.getConfig(i),s=r.find(e=>e===n);if(!s)throw new Error("no outgoing configured");return this._simulator.enter({element:s,scope:o.parent})},t.$inject=["simulator"];
},{"../util/ModelUtil":"IKyH"}],"LWVJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var t=require("../util/ModelUtil");function e(t,e){this._simulator=t,this._activityBehavior=e,t.registerBehavior("bpmn:ParallelGateway",this)}e.prototype.enter=function(e){const{scope:i,element:o}=e,r=(0,t.filterSequenceFlows)(o.incoming),{parent:s}=i,n=this._simulator.findScopes({parent:s,element:o});if(n.length===r.length){for(const t of n)t!==i&&this._simulator.destroyScope(t.complete(),i);this._simulator.exit(e)}},e.prototype.exit=function(t){this._activityBehavior.exit(t)},e.$inject=["simulator","activityBehavior"];
},{"../util/ModelUtil":"IKyH"}],"TiXm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("../util/ModelUtil");function t(e){this._simulator=e,e.registerBehavior("bpmn:EventBasedGateway",this)}function i(t){return t.outgoing.map(e=>e.target).filter(t=>(0,e.isAny)(t,["bpmn:IntermediateCatchEvent","bpmn:ReceiveTask"]))}t.$inject=["simulator"],t.prototype.enter=function(e){const{element:t,scope:r}=e,o=r.parent,n=i(t).map(e=>this._simulator.subscribe(o,e,t=>(n.forEach(e=>e.remove()),this._simulator.destroyScope(r,t),this._simulator.signal({element:e,parentScope:o,initiator:t}))))};
},{"../util/ModelUtil":"IKyH"}],"fiD5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("../util/ModelUtil");function t(e,t,n){this._simulator=e,this._scopeBehavior=t,this._transactionBehavior=n;const i=["bpmn:BusinessRuleTask","bpmn:CallActivity","bpmn:ManualTask","bpmn:ScriptTask","bpmn:ServiceTask","bpmn:Task","bpmn:UserTask"];for(const s of i)e.registerBehavior(s,this)}function n(e){return e&&e[0]}function i(e){return e&&e[e.length-1]}t.$inject=["simulator","scopeBehavior","transactionBehavior"],t.prototype.signal=function(e){const t=this._triggerMessages(e);if(t)return this.signalOnEvent(e,t);this._simulator.exit(e)},t.prototype.enter=function(e){const{element:t}=e,n=this.waitAtElement(t);if(n)return this.signalOnEvent(e,n);const i=this._triggerMessages(e);if(i)return this.signalOnEvent(e,i);this._simulator.exit(e)},t.prototype.exit=function(t){const{element:n,scope:i}=t,s=i.parent,o=!i.failed;o&&!(0,e.isEventSubProcess)(n)&&this._transactionBehavior.registerCompensation(i);const r=o?n.outgoing.filter(e.isSequenceFlow):[];r.forEach(e=>this._simulator.enter({element:e,scope:s})),0===r.length&&this._scopeBehavior.tryExit(s,i)},t.prototype.signalOnEvent=function(e,t){const{scope:n,element:i}=e,s=this._simulator.subscribe(n,t,e=>(s.remove(),this._simulator.signal({scope:n,element:i,initiator:e})))},t.prototype.waitAtElement=function(e){return this._simulator.getConfig(e).wait&&{element:e,type:"continue",interrupting:!1,boundary:!1}},t.prototype._getMessageContexts=function(t,s=null){const o=s?e=>e.referencePoint.x>s.x:()=>!0;return[...t.incoming.filter(e.isMessageFlow).map(e=>({incoming:e,referencePoint:i(e.waypoints)})),...t.outgoing.filter(e.isMessageFlow).map(e=>({outgoing:e,referencePoint:n(e.waypoints)}))].sort((e,t)=>e.referencePoint.x-t.referencePoint.x).filter(o)},t.prototype._triggerMessages=function(t){const{element:n,initiator:i,scope:s}=t;let o=s.messageContexts;o||(o=s.messageContexts=this._getMessageContexts(n));const r=i&&i.element;if((0,e.isMessageFlow)(r)&&s.expectedIncoming!==r)console.debug("Simulator :: ActivityBehavior :: ignoring out-of-bounds message");else for(;o.length;){const{incoming:e,outgoing:t}=o.shift();if(e){if(!i)continue;return s.expectedIncoming=e,{element:n,type:"message",name:e.id,interrupting:!1,boundary:!1}}this._simulator.signal({element:t})}};
},{"../util/ModelUtil":"IKyH"}],"L42a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var t=require("../util/ModelUtil");function e(t,e,i,r,n){this._simulator=t,this._activityBehavior=e,this._scopeBehavior=i,this._transactionBehavior=r,this._elementRegistry=n,t.registerBehavior("bpmn:SubProcess",this),t.registerBehavior("bpmn:Transaction",this),t.registerBehavior("bpmn:AdHocSubProcess",this)}function i(e){return(0,t.is)(e,"bpmn:Transaction")}e.$inject=["simulator","activityBehavior","scopeBehavior","transactionBehavior","elementRegistry"],e.prototype.signal=function(t){this._start(t)},e.prototype.enter=function(t){const{element:e}=t,i=this._activityBehavior.waitAtElement(e);if(i)return this._activityBehavior.signalOnEvent(t,i);this._start(t)},e.prototype.exit=function(t){const{scope:e}=t,i=e.parent;i.failInitiator===e&&i.complete(),this._activityBehavior.exit(t)},e.prototype._start=function(e){const{element:r,startEvent:n,scope:s}=e,o=s.parent;if((0,t.isEventSubProcess)(r)){if(!n)throw new Error("missing <startEvent>: required for event sub-process")}else if(n)throw new Error("unexpected <startEvent>: not allowed for sub-process");if(o.destroyed)throw new Error(`target scope <${o.id}> destroyed`);i(r)&&this._transactionBehavior.setup(e),n&&(0,t.isInterrupting)(n)&&this._scopeBehavior.interrupt(o,s);const a=n?[n]:this._findStarts(r);for(const t of a)this._simulator.signal({element:t,parentScope:s,initiator:s})},e.prototype._findStarts=function(e){return(e=this._elementRegistry.get(e.id+"_plane")||e).children.filter(e=>{if((0,t.isLabel)(e))return!1;return!e.incoming.find(e=>(0,t.is)(e,"bpmn:SequenceFlow"))&&(!(0,t.isCompensationActivity)(e)&&(!(0,t.isEventSubProcess)(e)&&(0,t.isAny)(e,["bpmn:Activity","bpmn:StartEvent","bpmn:EndEvent"])))})};
},{"../util/ModelUtil":"IKyH"}],"vKfd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=require("../ScopeTraits"),t=require("../util/ModelUtil"),i=require("../util/EventsUtil"),r=require("../util/SetUtil");const s={type:"cancel",interrupting:!0,boundary:!1,persistent:!0};function n(e,t){this._simulator=e,this._scopeBehavior=t}function o(e){throw new Error(`no transaction context for <${e.id}>`)}n.$inject=["simulator","scopeBehavior"],n.prototype.setup=function(t){const{scope:i}=t,r=this._simulator.subscribe(i,s,e=>(r.remove(),this.cancel({scope:i,initiator:e}))),n={type:"compensate",ref:i.element,persistent:!0,traits:e.ScopeTraits.NOT_DEAD},o=this._simulator.subscribe(i,n,e=>i.canceled?(o.remove(),this.compensate({scope:i,element:i.element,initiator:e})):this._simulator.trigger({event:s,scope:i}))},n.prototype.cancel=function(e){const{scope:t,initiator:i}=e;if(!t.destroyed)return t.cancel(i),this._simulator.trigger({event:{type:"compensate",ref:t.element},initiator:i,scope:t}),this._simulator.trigger({scope:t,initiator:i,event:s})},n.prototype.registerCompensation=function(i){const{element:r}=i,s=r.children.filter(t.isEventSubProcess).map(e=>e.children.find(e=>(0,t.isStartEvent)(e)&&(0,t.isCompensationEvent)(e))).filter(e=>e),n=r.attachers.filter(t.isCompensationEvent);if(!s.length&&!n.length)return;const o=this.findTransactionScope(i.parent);(0,t.is)(o.element,"bpmn:Transaction")||this.makeCompensable(o);for(const t of s){const s={element:t,type:"compensate",persistent:!0,interrupting:!0,ref:r,traits:e.ScopeTraits.NOT_DEAD},n=t.parent,o=this._simulator.subscribe(i,s,e=>(o.remove(),this._simulator.signal({initiator:e,element:n,startEvent:t,parentScope:i})))}for(const a of n){const i={element:a,type:"compensate",persistent:!0,ref:r,traits:e.ScopeTraits.NOT_DEAD},s=a.outgoing.map(e=>e.target).find(t.isCompensationActivity);if(!s)continue;const n=this._simulator.subscribe(o,i,e=>(n.remove(),this._simulator.enter({initiator:e,element:s,scope:o})))}},n.prototype.makeCompensable=function(t){if(t.hasTrait(e.ScopeTraits.COMPENSABLE)||!t.parent)return;const i={type:"compensate",ref:t.element,interrupting:!0,persistent:!0,traits:e.ScopeTraits.NOT_DEAD};t.compensable();const r=this._simulator.subscribe(t,i,e=>(r.remove(),t.fail(e),this.compensate({scope:t,element:t.element,initiator:e}),this._scopeBehavior.tryExit(t,e),t)),s=t.parent;if(!s)return;const n=this._simulator.subscribe(s,i,e=>(n.remove(),this._simulator.trigger({scope:t,event:i,initiator:e})));this.makeCompensable(s)},n.prototype.findTransactionScope=function(e){let i=e;for(;i;){const e=i.element;if((0,t.is)(e,"bpmn:SubProcess")&&!(0,t.isEventSubProcess)(e))return i;if((0,t.isAny)(e,["bpmn:Transaction","bpmn:Process","bpmn:Participant"]))return i;i=i.parent}throw o(e)},n.prototype.compensate=function(e){const{scope:t,element:s}=e,n=(0,r.filterSet)(t.subscriptions,e=>(0,i.eventsMatch)({type:"compensate"},e.event)),o=n.filter(e=>e.event.ref===s),a=n.filter(e=>e.event.ref!==s);for(const i of o)this._scopeBehavior.preExit(t,e=>this._simulator.trigger(i));for(const i of a.reverse())this._scopeBehavior.preExit(t,e=>this._simulator.trigger(i))};
},{"../ScopeTraits":"jd6L","../util/ModelUtil":"IKyH","../util/EventsUtil":"v3Zr","../util/SetUtil":"j5Ei"}],"NMJm":[function(require,module,exports) {
"use strict";function e(e,t){this._simulator=e,this._scopeBehavior=t,e.registerBehavior("bpmn:SequenceFlow",this)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e,e.prototype.enter=function(e){this._simulator.exit(e)},e.prototype.exit=function(e){const{element:t,scope:o}=e;this._simulator.enter({element:t.target,scope:o.parent})},e.$inject=["simulator","scopeBehavior"];
},{}],"tvk5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("../util/ModelUtil");function t(e){this._simulator=e,e.registerBehavior("bpmn:MessageFlow",this)}t.$inject=["simulator"],t.prototype.signal=function(e){this._simulator.exit(e)},t.prototype.exit=function(t){const{element:i,scope:s}=t,o=i.target,r=(0,e.isCatchEvent)(o)?o:{type:"message",element:i,name:i.id},n=this._simulator.findSubscription({event:r,elements:[o,o.parent]});n&&this._simulator.trigger({event:r,initiator:s,scope:n.scope})};
},{"../util/ModelUtil":"IKyH"}],"vDHo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"getBusinessObject",{enumerable:!0,get:function(){return t.getBusinessObject}}),exports.getEventDefinition=i,exports.is=n,exports.isTypedEvent=r;var e=require("min-dash"),t=require("bpmn-js/lib/util/ModelUtil");function n(e,n){return"label"!==e.type&&(Array.isArray(n)||(n=[n]),n.some(function(n){return(0,t.is)(e,n)}))}function i(i,r){return(0,e.find)((0,t.getBusinessObject)(i).eventDefinitions,e=>n(e,r))}function r(i,r){return(0,e.some)((0,t.getBusinessObject)(i).eventDefinitions,e=>n(e,r))}
},{"min-dash":"AmEv","bpmn-js/lib/util/ModelUtil":"HvoA"}],"o1LB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=require("../../util/ElementHelper"),t=require("../ScopeTraits"),i=require("../util/ModelUtil");function n(e,t,i){this._simulator=e,this._elementRegistry=t,this._scopeBehavior=i}function o(t){return(0,e.getEventDefinition)(t,"bpmn:LinkEventDefinition")}function r(e){for(;(0,i.isEventSubProcess)(e.parent.element);)e=e.parent;return e.parent}n.$inject=["simulator","elementRegistry","scopeBehavior"],n.prototype.get=function(n){const s={"bpmn:LinkEventDefinition":e=>{const{element:t,scope:n}=e,r=o(t),s=n.parent,c=s.element.children.filter(e=>(0,i.isLinkCatch)(e)&&o(e).name===r.name);for(const i of c)this._simulator.signal({element:i,parentScope:s,initiator:n})},"bpmn:SignalEventDefinition":e=>{const{element:t,scope:i}=e,n=this._simulator.findSubscriptions({event:t}),o=new Set;for(const r of n){const e=r.scope;o.has(e)||(o.add(e),this._simulator.trigger({event:t,scope:e,initiator:i}))}},"bpmn:EscalationEventDefinition":e=>{const{element:i,scope:n}=e,o=this._simulator.findScopes({subscribedTo:{event:i},trait:t.ScopeTraits.ACTIVE});let r=n;for(;r=r.parent;)if(o.includes(r)){this._simulator.trigger({event:i,scope:r,initiator:n});break}},"bpmn:ErrorEventDefinition":e=>{const{element:t,scope:i}=e;this._simulator.trigger({event:t,initiator:i,scope:r(i)})},"bpmn:TerminateEventDefinition":e=>{const{scope:t}=e;this._scopeBehavior.terminate(t.parent,t)},"bpmn:CancelEventDefinition":e=>{const{scope:t,element:i}=e;this._simulator.trigger({event:i,initiator:t,scope:r(t)})},"bpmn:CompensateEventDefinition":e=>{const{scope:t,element:i}=e;return this._simulator.waitForScopes(t,this._simulator.trigger({event:i,scope:r(t)}))}},c=Object.entries(s).find(t=>(0,e.isTypedEvent)(n,t[0]));return c&&c[1]};
},{"../../util/ElementHelper":"vDHo","../ScopeTraits":"jd6L","../util/ModelUtil":"IKyH"}],"MFQa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;const t={type:"pre-exit",persistent:!0,interrupting:!0,boundary:!1},e={type:"exit",interrupting:!0,boundary:!1,persistent:!0};function i(t){this._simulator=t}function r(t){return"function"==typeof t?t:e=>e===t}i.$inject=["simulator"],i.prototype.isFinished=function(t,e=null){return e=r(e),t.children.every(t=>t.destroyed||t.completed||e(t))},i.prototype.destroyChildren=function(t,e,i=null){i=r(i),t.children.filter(t=>!t.destroyed&&!i(t)).map(t=>{this._simulator.destroyScope(t,e)})},i.prototype.terminate=function(t,e){this.destroyChildren(t,e),t.terminate(e),this.tryExit(t,e)},i.prototype.interrupt=function(t,e){this.destroyChildren(t,e,e),t.fail(e)},i.prototype.tryExit=function(i,r){if(!i)throw new Error("missing <scope>");if(r||(r=i),!this.isFinished(i,r))return e;const o=this._simulator.findSubscriptions({event:t,scope:i});for(const t of o){const{event:i,scope:o}=t;if(this._simulator.trigger({event:i,scope:o,initiator:r}).length)return e}this._simulator.trigger({event:e,scope:i,initiator:r}),this.exit({scope:i,initiator:r})},i.prototype.exit=function(t){const{scope:e,initiator:i}=t;if(!i)throw new Error("missing <initiator>");this._simulator.exit({element:e.element,scope:e,initiator:i})},i.prototype.preExit=function(e,i){const r=this._simulator.subscribe(e,t,t=>(r.remove(),i(t)));return r};
},{}],"HG2B":[function(require,module,exports) {
"use strict";function t(t,e){this._simulator=t,this._scopeBehavior=e,t.registerBehavior("bpmn:Process",this),t.registerBehavior("bpmn:Participant",this)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t,t.prototype.signal=function(t){const{startEvent:e,scope:i}=t;if(!e)throw new Error("missing <startEvent>");this._simulator.signal({element:e,parentScope:i})},t.prototype.exit=function(t){const{scope:e,initiator:i}=t;this._scopeBehavior.destroyChildren(e,i)},t.$inject=["simulator","scopeBehavior"];
},{}],"OKqd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("./StartEventBehavior")),a=c(require("./EndEventBehavior")),r=c(require("./BoundaryEventBehavior")),t=c(require("./IntermediateCatchEventBehavior")),i=c(require("./IntermediateThrowEventBehavior")),o=c(require("./ExclusiveGatewayBehavior")),v=c(require("./ParallelGatewayBehavior")),u=c(require("./EventBasedGatewayBehavior")),h=c(require("./ActivityBehavior")),B=c(require("./SubProcessBehavior")),n=c(require("./TransactionBehavior")),s=c(require("./SequenceFlowBehavior")),l=c(require("./MessageFlowBehavior")),d=c(require("./EventBehaviors")),y=c(require("./ScopeBehavior")),p=c(require("./ProcessBehavior"));function c(e){return e&&e.__esModule?e:{default:e}}var f=exports.default={__init__:["startEventBehavior","endEventBehavior","boundaryEventBehavior","intermediateCatchEventBehavior","intermediateThrowEventBehavior","exclusiveGatewayBehavior","parallelGatewayBehavior","eventBasedGatewayBehavior","subProcessBehavior","sequenceFlowBehavior","messageFlowBehavior","processBehavior"],startEventBehavior:["type",e.default],endEventBehavior:["type",a.default],boundaryEventBehavior:["type",r.default],intermediateCatchEventBehavior:["type",t.default],intermediateThrowEventBehavior:["type",i.default],exclusiveGatewayBehavior:["type",o.default],parallelGatewayBehavior:["type",v.default],eventBasedGatewayBehavior:["type",u.default],activityBehavior:["type",h.default],subProcessBehavior:["type",B.default],sequenceFlowBehavior:["type",s.default],messageFlowBehavior:["type",l.default],eventBehaviors:["type",d.default],scopeBehavior:["type",y.default],processBehavior:["type",p.default],transactionBehavior:["type",n.default]};
},{"./StartEventBehavior":"LDe3","./EndEventBehavior":"zVys","./BoundaryEventBehavior":"eMCZ","./IntermediateCatchEventBehavior":"PcRi","./IntermediateThrowEventBehavior":"eYSq","./ExclusiveGatewayBehavior":"DjNc","./ParallelGatewayBehavior":"LWVJ","./EventBasedGatewayBehavior":"TiXm","./ActivityBehavior":"fiD5","./SubProcessBehavior":"L42a","./TransactionBehavior":"vKfd","./SequenceFlowBehavior":"NMJm","./MessageFlowBehavior":"tvk5","./EventBehaviors":"o1LB","./ScopeBehavior":"MFQa","./ProcessBehavior":"HG2B"}],"ydMS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./Simulator")),t=o(require("./behaviors"));function o(e){return e&&e.__esModule?e:{default:e}}const u=5e3;var r=exports.default={__depends__:[t.default],__init__:[["eventBus","simulator",function(e,t){e.on(["tokenSimulation.toggleMode","tokenSimulation.resetSimulation"],5e3,e=>{t.reset()})}]],simulator:["type",e.default]};
},{"./Simulator":"sQYa","./behaviors":"OKqd"}],"at6n":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=i(require("../../simulator/behaviors/MessageFlowBehavior")),t=i(require("inherits-browser"));function i(e){return e&&e.__esModule?e:{default:e}}function o(t,i){t.invoke(e.default,this),this._animation=i}(0,t.default)(o,e.default),o.$inject=["injector","animation"],o.prototype.signal=function(t){const{element:i,scope:o}=t;this._animation.animate(i,o,()=>{e.default.prototype.signal.call(this,t)})};
},{"../../simulator/behaviors/MessageFlowBehavior":"tvk5","inherits-browser":"hUM3"}],"CiSn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=i(require("../../simulator/behaviors/SequenceFlowBehavior")),t=i(require("inherits-browser"));function i(e){return e&&e.__esModule?e:{default:e}}function n(t,i){t.invoke(e.default,this),this._animation=i}(0,t.default)(n,e.default),n.$inject=["injector","animation"],n.prototype.enter=function(t){const{element:i,scope:n}=t;this._animation.animate(i,n,()=>{e.default.prototype.enter.call(this,t)})};
},{"../../simulator/behaviors/SequenceFlowBehavior":"NMJm","inherits-browser":"hUM3"}],"QcOs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./AnimatedMessageFlowBehavior")),r=t(require("./AnimatedSequenceFlowBehavior"));function t(e){return e&&e.__esModule?e:{default:e}}var a=exports.default={sequenceFlowBehavior:["type",r.default],messageFlowBehavior:["type",e.default]};
},{"./AnimatedMessageFlowBehavior":"at6n","./AnimatedSequenceFlowBehavior":"CiSn"}],"PJes":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TRACE_EVENT=exports.TOGGLE_MODE_EVENT=exports.SCOPE_FILTER_CHANGED_EVENT=exports.SCOPE_DESTROYED_EVENT=exports.SCOPE_CREATE_EVENT=exports.SCOPE_CHANGED_EVENT=exports.RESET_SIMULATION_EVENT=exports.PLAY_SIMULATION_EVENT=exports.PAUSE_SIMULATION_EVENT=exports.ELEMENT_CHANGED_EVENT=exports.ANIMATION_SPEED_CHANGED_EVENT=exports.ANIMATION_CREATED_EVENT=void 0;const E=exports.TOGGLE_MODE_EVENT="tokenSimulation.toggleMode",t=exports.PLAY_SIMULATION_EVENT="tokenSimulation.playSimulation",e=exports.PAUSE_SIMULATION_EVENT="tokenSimulation.pauseSimulation",o=exports.RESET_SIMULATION_EVENT="tokenSimulation.resetSimulation",_=exports.ANIMATION_CREATED_EVENT="tokenSimulation.animationCreated",T=exports.ANIMATION_SPEED_CHANGED_EVENT="tokenSimulation.animationSpeedChanged",N=exports.ELEMENT_CHANGED_EVENT="tokenSimulation.simulator.elementChanged",i=exports.SCOPE_DESTROYED_EVENT="tokenSimulation.simulator.destroyScope",S=exports.SCOPE_CHANGED_EVENT="tokenSimulation.simulator.scopeChanged",r=exports.SCOPE_CREATE_EVENT="tokenSimulation.simulator.createScope",s=exports.SCOPE_FILTER_CHANGED_EVENT="tokenSimulation.scopeFilterChanged",n=exports.TRACE_EVENT="tokenSimulation.simulator.trace";
},{}],"IxYW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var t=require("../../util/EventHelper");const e=t=>!0;function i(i,o){this._eventBus=i,this._simulator=o,this._filter=e,i.on([t.TOGGLE_MODE_EVENT,t.RESET_SIMULATION_EVENT],()=>{this._filter=e}),i.on(t.SCOPE_DESTROYED_EVENT,t=>{const{scope:e}=t;this._scope===e&&e.parent&&this.toggle(e.parent)}),i.on(t.SCOPE_CREATE_EVENT,t=>{const{scope:e}=t;e.parent||!this._scope||s(this._scope,e)||this.toggle(null)})}function s(t,e){do{if(t===e)return!0}while(e=e.parent);return!1}i.prototype.toggle=function(e){const i=this._scope!==e;this._scope=i?e:null,this._filter=this._scope?t=>s(this._scope,t):t=>!0,this._eventBus.fire(t.SCOPE_FILTER_CHANGED_EVENT,{filter:this._filter,scope:this._scope})},i.prototype.isShown=function(t){return"string"==typeof t&&(t=this._simulator.findScope(e=>e.id===t)),t&&this._filter(t)},i.prototype.findScope=function(t){return this._simulator.findScopes(t).filter(t=>this.isShown(t))[0]},i.$inject=["eventBus","simulator"];
},{"../../util/EventHelper":"PJes"}],"RIr8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./ScopeFilter"));function t(e){return e&&e.__esModule?e:{default:e}}var r=exports.default={scopeFilter:["type",e.default]};
},{"./ScopeFilter":"IxYW"}],"h1qv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var t=require("min-dom"),e=require("tiny-svg"),n=require("../util/EventHelper");const i=getComputedStyle(document.documentElement),o=i.getPropertyValue("--token-simulation-green-base-44"),s=i.getPropertyValue("--token-simulation-white");function r(){}function a(t,e){return 2===e.length?u:1===t?c:t===e.length-1?p:h}const h=function(t){return t},c=function(t){return 1-Math.cos(t*Math.PI/2)},p=function(t){return Math.sin(t*Math.PI/2)},u=function(t){return-Math.cos(t*Math.PI)/2+.5},d=20;function l(t,e,i){this._eventBus=e,this._scopeFilter=i,this._canvas=t,this._animations=new Set,this._speed=1,e.on(n.RESET_SIMULATION_EVENT,()=>{this.clearAnimations()}),e.on(n.PAUSE_SIMULATION_EVENT,()=>{this.pause()}),e.on(n.PLAY_SIMULATION_EVENT,()=>{this.play()}),e.on(n.SCOPE_FILTER_CHANGED_EVENT,t=>{this.each(t=>{this._scopeFilter.isShown(t.scope)?t.show():t.hide()})}),e.on(n.SCOPE_DESTROYED_EVENT,t=>{const{scope:e}=t;this.clearAnimations(e)})}function _(t,e,n){this.gfx=t,this.waypoints=e,this.done=n,this._paused=!0,this._t=0,this._parts=[],this.create()}function f(t){return Math.log(t)*y(250,300)}function y(t,e){return t+Math.floor(Math.random()*(e-t))}function m(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}l.prototype.animate=function(t,e,n){this.createAnimation(t,e,n)},l.prototype.pause=function(){this.each(t=>t.pause())},l.prototype.play=function(){this.each(t=>t.play())},l.prototype.each=function(t){this._animations.forEach(t)},l.prototype.createAnimation=function(t,e,i=r){const o=this._getGroup(e);if(!o)return;const s=new _(this._createTokenGfx(o,e),t.waypoints,()=>{this._animations.delete(s),i()});return s.setSpeed(this.getAnimationSpeed()),this._scopeFilter.isShown(e)||s.hide(),s.scope=e,s.element=t,this._animations.add(s),this._eventBus.fire(n.ANIMATION_CREATED_EVENT,{animation:s}),s.play(),s},l.prototype.setAnimationSpeed=function(t){this._speed=t,this.each(e=>e.setSpeed(t)),this._eventBus.fire(n.ANIMATION_SPEED_CHANGED_EVENT,{speed:t})},l.prototype.getAnimationSpeed=function(){return this._speed},l.prototype.clearAnimations=function(t){this.each(e=>{t&&e.scope!==t||e.remove()})},l.prototype._createTokenGfx=function(t,n){const i=(0,e.create)(this._getTokenSVG(n).trim());return(0,e.appendTo)(i,t)},l.prototype._getTokenSVG=function(t){const e=t.colors||{primary:o,auxiliary:s};return`\n    <g class="bts-token">\n      <circle\n        class="bts-circle"\n        r="10"\n        cx="10"\n        cy="10"\n        fill="${e.primary}"\n      />\n      <text\n        class="bts-text"\n        transform="translate(10, 14)"\n        text-anchor="middle"\n        fill="${e.auxiliary}"\n      >1</text>\n    </g>\n  `},l.prototype._getGroup=function(n){var i,o,s=this._canvas;"findRoot"in s?(o=s.findRoot(n.element),i=s._findPlaneForRoot(o).layer):i=(0,t.query)(".viewport",s._svg);var r=(0,t.query)(".bts-animation-tokens",i);return r||(r=(0,e.create)('<g class="bts-animation-tokens" />'),(0,e.appendTo)(r,i)),r},l.$inject=["canvas","eventBus","scopeFilter"],_.prototype.pause=function(){this._paused=!0},_.prototype.play=function(){this._paused&&(this._paused=!1,this.tick(0)),this.schedule()},_.prototype.schedule=function(){if(this._paused)return;if(this._scheduled)return;const t=Date.now();this._scheduled=!0,requestAnimationFrame(()=>{this._scheduled=!1,this._paused||(this.tick((Date.now()-t)*this._speed),this.schedule())})},_.prototype.tick=function(t){const e=this._t=this._t+t,n=this._parts.find(t=>t.startTime<=e&&t.endTime>e);if(!n)return this.remove();const i=e-n.startTime,o=n.length*n.easing(i/n.duration),s=n.startLength+o,r=this._path.getPointAtLength(s);this.move(r.x,r.y)},_.prototype.move=function(t,n){(0,e.attr)(this.gfx,"transform",`translate(${t}, ${n})`)},_.prototype.create=function(){const t=this.waypoints,n=t.reduce((e,n,i)=>{const o=t[i-1];if(o){const s=e[e.length-1],r=s&&s.endLength||0,h=m(o,n);e.push({startLength:r,endLength:r+h,length:h,easing:a(i,t)})}return e},[]),i=n.reduce(function(t,e){return t+e.length},0),o=t.reduce((t,e,n)=>{const i=e.x-10,o=e.y-10;return t.push([n>0?"L":"M",i,o]),t},[]).flat().join(" "),s=f(i);this._parts=n.reduce((t,e,n)=>{const o=s/i*e.length,r=n>0?t[n-1].endTime:0,a=r+o;return[...t,{...e,startTime:r,endTime:a,duration:o}]},[]),this._path=(0,e.create)(`<path d="${o}" />`),this._t=0},_.prototype.show=function(){(0,e.attr)(this.gfx,"display","")},_.prototype.hide=function(){(0,e.attr)(this.gfx,"display","none")},_.prototype.remove=function(){this.pause(),(0,e.remove)(this.gfx),this.done()},_.prototype.setSpeed=function(t){this._speed=t};
},{"min-dom":"fWg5","tiny-svg":"WdCh","../util/EventHelper":"PJes"}],"eGIE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("./behaviors")),r=a(require("../features/scope-filter")),t=a(require("../simulator")),u=a(require("./Animation"));function a(e){return e&&e.__esModule?e:{default:e}}var i=exports.default={__depends__:[t.default,e.default,r.default],animation:["type",u.default]};
},{"./behaviors":"QcOs","../features/scope-filter":"RIr8","../simulator":"ydMS","./Animation":"h1qv"}],"krLc":[function(require,module,exports) {
var define;
var r;!function(e,n){if("object"==typeof exports){var t=n();"object"==typeof module&&module&&module.exports&&(exports=module.exports=t),exports.randomColor=t}else"function"==typeof r&&r.amd?r([],n):e.randomColor=n()}(this,function(){var r=null,e={};o("monochrome",null,[[0,0],[100,0]]),o("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),o("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),o("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),o("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),o("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),o("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),o("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]]);var n=[],t=function(o){if(void 0!==(o=o||{}).seed&&null!==o.seed&&o.seed===parseInt(o.seed,10))r=o.seed;else if("string"==typeof o.seed)r=function(r){for(var e=0,n=0;n!==r.length&&!(e>=Number.MAX_SAFE_INTEGER);n++)e+=r.charCodeAt(n);return e}(o.seed);else{if(void 0!==o.seed&&null!==o.seed)throw new TypeError("The seed value must be an integer or string");r=null}var f,c;if(null!==o.count&&void 0!==o.count){for(var h=o.count,v=[],g=0;g<o.count;g++)n.push(!1);for(o.count=null;h>v.length;){var d=t(o);null!==r&&(o.seed=r),v.push(d)}return o.count=h,v}return function(r,e){switch(e.format){case"hsvArray":return r;case"hslArray":return l(r);case"hsl":var n=l(r);return"hsl("+n[0]+", "+n[1]+"%, "+n[2]+"%)";case"hsla":var t=l(r),a=e.alpha||Math.random();return"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+a+")";case"rgbArray":return s(r);case"rgb":var u=s(r);return"rgb("+u.join(", ")+")";case"rgba":var o=s(r),a=e.alpha||Math.random();return"rgba("+o.join(", ")+", "+a+")";default:return function(r){var e=s(r);function n(r){var e=r.toString(16);return 1==e.length?"0"+e:e}return"#"+n(e[0])+n(e[1])+n(e[2])}(r)}}([f=function(r){if(n.length>0){var t=function(r){if(isNaN(r)){if("string"==typeof r)if(e[r]){var n=e[r];if(n.hueRange)return n.hueRange}else if(r.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var t=i(r)[0];return a(t).hueRange}}else{var u=parseInt(r);if(u<360&&u>0)return a(r).hueRange}return[0,360]}(r.hue),o=u(t),s=(t[1]-t[0])/n.length,l=parseInt((o-t[0])/s);!0===n[l]?l=(l+2)%n.length:n[l]=!0;var f=(t[0]+l*s)%359,c=(t[0]+(l+1)*s)%359;return(o=u(t=[f,c]))<0&&(o=360+o),o}var t=function(r){if("number"==typeof parseInt(r)){var n=parseInt(r);if(n<360&&n>0)return[n,n]}if("string"==typeof r)if(e[r]){var t=e[r];if(t.hueRange)return t.hueRange}else if(r.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var a=i(r)[0];return[a,a]}return[0,360]}(r.hue);return(o=u(t))<0&&(o=360+o),o}(o),c=function(r,e){if("monochrome"===e.hue)return 0;if("random"===e.luminosity)return u([0,100]);var n=function(r){return a(r).saturationRange}(r),t=n[0],o=n[1];switch(e.luminosity){case"bright":t=55;break;case"dark":t=o-10;break;case"light":o=55}return u([t,o])}(f,o),function(r,e,n){var t=function(r,e){for(var n=a(r).lowerBounds,t=0;t<n.length-1;t++){var u=n[t][0],o=n[t][1],s=n[t+1][0],i=n[t+1][1];if(e>=u&&e<=s){var l=(i-o)/(s-u),f=o-l*u;return l*e+f}}return 0}(r,e),o=100;switch(n.luminosity){case"dark":o=t+20;break;case"light":t=(o+t)/2;break;case"random":t=0,o=100}return u([t,o])}(f,c,o)],o)};function a(r){for(var n in r>=334&&r<=360&&(r-=360),e){var t=e[n];if(t.hueRange&&r>=t.hueRange[0]&&r<=t.hueRange[1])return e[n]}return"Color not found"}function u(e){if(null===r){var n=Math.random();return n+=.618033988749895,n%=1,Math.floor(e[0]+n*(e[1]+1-e[0]))}var t=e[1]||1,a=e[0]||0,u=(r=(9301*r+49297)%233280)/233280;return Math.floor(a+u*(t-a))}function o(r,n,t){var a=t[0][0],u=t[t.length-1][0],o=t[t.length-1][1],s=t[0][1];e[r]={hueRange:n,lowerBounds:t,saturationRange:[a,u],brightnessRange:[o,s]}}function s(r){var e=r[0];0===e&&(e=1),360===e&&(e=359),e/=360;var n=r[1]/100,t=r[2]/100,a=Math.floor(6*e),u=6*e-a,o=t*(1-n),s=t*(1-u*n),i=t*(1-(1-u)*n),l=256,f=256,c=256;switch(a){case 0:l=t,f=i,c=o;break;case 1:l=s,f=t,c=o;break;case 2:l=o,f=t,c=i;break;case 3:l=o,f=s,c=t;break;case 4:l=i,f=o,c=t;break;case 5:l=t,f=o,c=s}return[Math.floor(255*l),Math.floor(255*f),Math.floor(255*c)]}function i(r){r=3===(r=r.replace(/^#/,"")).length?r.replace(/(.)/g,"$1$1"):r;var e=parseInt(r.substr(0,2),16)/255,n=parseInt(r.substr(2,2),16)/255,t=parseInt(r.substr(4,2),16)/255,a=Math.max(e,n,t),u=a-Math.min(e,n,t),o=a?u/a:0;switch(a){case e:return[(n-t)/u%6*60||0,o,a];case n:return[60*((t-e)/u+2)||0,o,a];case t:return[60*((e-n)/u+4)||0,o,a]}}function l(r){var e=r[0],n=r[1]/100,t=r[2]/100,a=(2-n)*t;return[e,Math.round(n*t/(a<1?a:2-a)*1e4)/100,a/2*100]}return t});
},{}],"FXkF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var e=r(require("randomcolor")),t=require("../../util/EventHelper");function r(e){return e&&e.__esModule?e:{default:e}}const n=1500;function s(r){const s=(0,e.default)({count:60}).filter(e=>u(e.substring(1))<200);function u(e){return(299*parseInt(e.substr(0,2),16)+587*parseInt(e.substr(2,2),16)+114*parseInt(e.substr(4,2),16))/1e3}let o=0;r.on(t.SCOPE_CREATE_EVENT,n,e=>{const{scope:t}=e;t.colors=function(e){const{element:t}=e;if(t&&"bpmn:MessageFlow"===t.type)return{primary:"#999",auxiliary:"#FFF"};if(e.parent)return e.parent.colors;const r=s[o++%s.length];return{primary:r,auxiliary:u(r)>=128?"#111":"#fff"}}(t)})}s.$inject=["eventBus"];
},{"randomcolor":"krLc","../../util/EventHelper":"PJes"}],"vE80":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./ColoredScopes"));function o(e){return e&&e.__esModule?e:{default:e}}var r=exports.default={__init__:["coloredScopes"],coloredScopes:["type",e.default]};
},{"./ColoredScopes":"FXkF"}],"dh36":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ToggleOnIcon=exports.ToggleOffIcon=exports.TimesIcon=exports.TimesCircleIcon=exports.TachometerIcon=exports.ResetIcon=exports.RemovePauseIcon=exports.PlayIcon=exports.PauseIcon=exports.LogIcon=exports.InfoIcon=exports.ForkIcon=exports.ExclamationTriangleIcon=exports.CheckCircleIcon=exports.AngleRightIcon=void 0;var e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">\x3c!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --\x3e<path fill="currentColor" d="M12.83 352h262.34A12.82 12.82 0 0 0 288 339.17v-38.34A12.82 12.82 0 0 0 275.17 288H12.83A12.82 12.82 0 0 0 0 300.83v38.34A12.82 12.82 0 0 0 12.83 352zm0-256h262.34A12.82 12.82 0 0 0 288 83.17V44.83A12.82 12.82 0 0 0 275.17 32H12.83A12.82 12.82 0 0 0 0 44.83v38.34A12.82 12.82 0 0 0 12.83 96zM432 160H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0 256H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"/></svg>',o='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512">\x3c!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --\x3e<path fill="currentColor" d="M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34z"/></svg>',s='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\x3c!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --\x3e<path fill="currentColor" d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></svg>',c='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">\x3c!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --\x3e<path fill="currentColor" d="M384 144c0-44.2-35.8-80-80-80s-80 35.8-80 80c0 36.4 24.3 67.1 57.5 76.8-.6 16.1-4.2 28.5-11 36.9-15.4 19.2-49.3 22.4-85.2 25.7-28.2 2.6-57.4 5.4-81.3 16.9v-144c32.5-10.2 56-40.5 56-76.3 0-44.2-35.8-80-80-80S0 35.8 0 80c0 35.8 23.5 66.1 56 76.3v199.3C23.5 365.9 0 396.2 0 432c0 44.2 35.8 80 80 80s80-35.8 80-80c0-34-21.2-63.1-51.2-74.6 3.1-5.2 7.8-9.8 14.9-13.4 16.2-8.2 40.4-10.4 66.1-12.8 42.2-3.9 90-8.4 118.2-43.4 14-17.4 21.1-39.8 21.6-67.9 31.6-10.8 54.4-40.7 54.4-75.9zM80 64c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16zm0 384c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16zm224-320c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16z"/></svg>',t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">\x3c!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --\x3e<path fill="currentColor" d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></svg>',n='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 512">\x3c!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --\x3e<path fill="currentColor" d="M20 424.229h20V279.771H20c-11.046 0-20-8.954-20-20V212c0-11.046 8.954-20 20-20h112c11.046 0 20 8.954 20 20v212.229h20c11.046 0 20 8.954 20 20V492c0 11.046-8.954 20-20 20H20c-11.046 0-20-8.954-20-20v-47.771c0-11.046 8.954-20 20-20zM96 0C56.235 0 24 32.235 24 72s32.235 72 72 72 72-32.235 72-72S135.764 0 96 0z"/></svg>',r='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">\x3c!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --\x3e<path fill="currentColor" d="M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"/></svg>',l='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 580.5 448">\n  <path fill="currentColor" d="M112 0C85 0 64 22 64 48v196l192-89V48c0-26-22-48-48-48zm256 0c-27 0-48 22-48 48v77l190-89c-5-21-24-36-46-36Zm144 105-192 89v70l192-89zM256 224 64 314v70l192-90zm256 21-192 89v66c0 27 21 48 48 48h96c26 0 48-21 48-48zM256 364 89 442c7 4 14 6 23 6h96c26 0 48-21 48-48z"/>\n  <rect fill="currentColor" width="63.3" height="618.2" x="311.5" y="-469.4" transform="rotate(65)" rx="10"/>\n</svg>\n',w='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">\x3c!-- Adapted from Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --\x3e<path fill="currentColor" d="M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"/></svg>',m='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\x3c!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --\x3e<path fill="currentColor" d="M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"/></svg>',a='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">\x3c!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --\x3e<path fill="currentColor" d="M288 32C128.94 32 0 160.94 0 320c0 52.8 14.25 102.26 39.06 144.8 5.61 9.62 16.3 15.2 27.44 15.2h443c11.14 0 21.83-5.58 27.44-15.2C561.75 422.26 576 372.8 576 320c0-159.06-128.94-288-288-288zm0 64c14.71 0 26.58 10.13 30.32 23.65-1.11 2.26-2.64 4.23-3.45 6.67l-9.22 27.67c-5.13 3.49-10.97 6.01-17.64 6.01-17.67 0-32-14.33-32-32S270.33 96 288 96zM96 384c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm48-160c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm246.77-72.41l-61.33 184C343.13 347.33 352 364.54 352 384c0 11.72-3.38 22.55-8.88 32H232.88c-5.5-9.45-8.88-20.28-8.88-32 0-33.94 26.5-61.43 59.9-63.59l61.34-184.01c4.17-12.56 17.73-19.45 30.36-15.17 12.57 4.19 19.35 17.79 15.17 30.36zm14.66 57.2l15.52-46.55c3.47-1.29 7.13-2.23 11.05-2.23 17.67 0 32 14.33 32 32s-14.33 32-32 32c-11.38-.01-20.89-6.28-26.57-15.22zM480 384c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"/></svg>',i='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\x3c!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --\x3e<path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"/></svg>',p='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512">\x3c!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --\x3e<path fill="currentColor" d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"/></svg>',x='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">\x3c!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --\x3e<path fill="currentColor" d="M384 64H192C85.961 64 0 149.961 0 256s85.961 192 192 192h192c106.039 0 192-85.961 192-192S490.039 64 384 64zM64 256c0-70.741 57.249-128 128-128 70.741 0 128 57.249 128 128 0 70.741-57.249 128-128 128-70.741 0-128-57.249-128-128zm320 128h-48.905c65.217-72.858 65.236-183.12 0-256H384c70.741 0 128 57.249 128 128 0 70.74-57.249 128-128 128z"/></svg>',h='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">\x3c!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --\x3e<path fill="currentColor" d="M384 64H192C86 64 0 150 0 256s86 192 192 192h192c106 0 192-86 192-192S490 64 384 64zm0 320c-70.8 0-128-57.3-128-128 0-70.8 57.3-128 128-128 70.8 0 128 57.3 128 128 0 70.8-57.3 128-128 128z"/></svg>';function v(e){return function(o=""){return`<span class="bts-icon ${o}">${e}</span>`}}const f=exports.LogIcon=v(e),g=exports.AngleRightIcon=v(o),C=exports.CheckCircleIcon=v(s),I=exports.RemovePauseIcon=v(l),L=exports.ForkIcon=v(c),F=exports.ExclamationTriangleIcon=v(t),z=exports.InfoIcon=v(n),M=exports.PauseIcon=v(r),d=exports.PlayIcon=v(w),A=exports.ResetIcon=v(m),B=exports.TachometerIcon=v(a),u=exports.TimesCircleIcon=v(i),T=exports.TimesIcon=v(p),S=exports.ToggleOffIcon=v(x),O=exports.ToggleOnIcon=v(h);
},{}],"u5SI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=require("../../../util/ElementHelper"),t=require("../../../icons");function n(e){this._exclusiveGatewaySettings=e}n.prototype.createContextPads=function(n){if(n.outgoing.filter(function(t){return(0,e.is)(t,"bpmn:SequenceFlow")}).length<2)return;const i=`\n    <div class="bts-context-pad" title="Set Sequence Flow">\n      ${(0,t.ForkIcon)()}\n    </div>\n  `;return[{action:()=>{this._exclusiveGatewaySettings.setSequenceFlow(n)},element:n,html:i}]},n.$inject=["exclusiveGatewaySettings"];
},{"../../../util/ElementHelper":"vDHo","../../../icons":"dh36"}],"EKJp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var e=require("../../../icons"),t=require("../../../util/ElementHelper");function s(e){this._simulator=e}s.prototype.createContextPads=function(e){return(0,t.is)(e,"bpmn:ReceiveTask")||(0,t.is)(e,"bpmn:SubProcess")&&(0,t.getBusinessObject)(e).triggeredByEvent?[]:[this.createPauseContextPad(e)]},s.prototype.createPauseContextPad=function(t){const s=this._isPaused(t),i=`\n    <div class="bts-context-pad ${s?"":"show-hover"}" title="${s?"Remove":"Add"} pause point">\n      ${(s?e.RemovePauseIcon:e.PauseIcon)("show-hover")}\n      ${(0,e.PauseIcon)("hide-hover")}\n    </div>\n  `;return{action:()=>{this._togglePaused(t)},element:t,hideContexts:()=>this._findSubscriptions({element:t}),html:i}},s.prototype._isPaused=function(e){const{wait:t}=this._simulator.getConfig(e);return t},s.prototype._togglePaused=function(e){const t=!this._isPaused(e);this._simulator.waitAtElement(e,t)},s.prototype._findSubscriptions=function(e){return this._simulator.findSubscriptions(e)},s.$inject=["simulator"];
},{"../../../icons":"dh36","../../../util/ElementHelper":"vDHo"}],"OHFG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var t=require("../../../icons");function e(t){this._simulator=t}e.$inject=["simulator"],e.prototype.createContextPads=function(t){return[this.createTriggerContextPad(t)]},e.prototype.createTriggerContextPad=function(e){const n=`\n    <div class="bts-context-pad" title="Trigger Event">\n      ${(0,t.PlayIcon)()}\n    </div>\n  `;return{action:t=>{const{event:e,scope:n}=t[0];return this._simulator.trigger({event:e,scope:n})},element:e,html:n,contexts:()=>this._findSubscriptions({element:e})}},e.prototype._findSubscriptions=function(t){return this._simulator.findSubscriptions(t)};
},{"../../../icons":"dh36"}],"RgOS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=h,exports.isAncestor=c;var e=require("../../util/ElementHelper"),t=require("../../util/EventHelper"),s=require("min-dom"),o=i(require("./handler/ExclusiveGatewayHandler")),n=i(require("./handler/PauseHandler")),r=i(require("./handler/TriggerHandler"));function i(e){return e&&e.__esModule?e:{default:e}}const a=500,l=-15,d=-15;function h(e,i,l,d,h,c){this._elementRegistry=i,this._overlays=l,this._injector=d,this._canvas=h,this._scopeFilter=c,this._overlayCache=new Map,this._handlerIdx=0,this._handlers=[],this.registerHandler("bpmn:ExclusiveGateway",o.default),this.registerHandler("bpmn:Activity",n.default),this.registerHandler("bpmn:StartEvent",r.default),this.registerHandler("bpmn:IntermediateCatchEvent",r.default),this.registerHandler("bpmn:BoundaryEvent",r.default),this.registerHandler("bpmn:Activity",r.default),e.on(t.TOGGLE_MODE_EVENT,a,e=>{e.active?this.openContextPads():this.closeContextPads()}),e.on(t.RESET_SIMULATION_EVENT,a,()=>{this.closeContextPads(),this.openContextPads()}),e.on(t.SCOPE_FILTER_CHANGED_EVENT,e=>{const t=(0,s.queryAll)(".djs-overlay-ts-context-menu [data-scope-ids]",l._overlayRoot);for(const n of t){const e=n.dataset.scopeIds.split(",").some(e=>c.isShown(e));(0,s.classes)(n).toggle("hidden",!e)}const o=(0,s.queryAll)(".djs-overlay-ts-context-menu [data-hide-scope-ids]",l._overlayRoot);for(const n of o){const e=n.dataset.hideScopeIds.split(",").some(e=>c.isShown(e));(0,s.classes)(n).toggle("hidden",e)}}),e.on(t.ELEMENT_CHANGED_EVENT,a,e=>{const{element:t}=e;this.updateElementContextPads(t)})}function c(e,t){do{if(e===t)return!0;t=t.parent}while(t);return!1}h.prototype.registerHandler=function(e,t){const s=this._injector.instantiate(t);s.hash=String(this._handlerIdx++),this._handlers.push({handler:s,type:e})},h.prototype.getHandlers=function(t){return this._handlers.filter(({type:s})=>(0,e.is)(t,s)).map(({handler:e})=>e)},h.prototype.openContextPads=function(e){e||(e=this._canvas.getRootElement()),this._elementRegistry.forEach(t=>{c(e,t)&&this.updateElementContextPads(t)})},h.prototype._getOverlays=function(e){return this._overlayCache.get(e)||[]},h.prototype._addOverlay=function(e,t){const{handlerHash:s}=t;if(!s)throw new Error("<handlerHash> required");const o=this._overlays.add(e,"ts-context-menu",{...t,position:{top:-15,left:-15},show:{minZoom:.5}}),n=this._overlays.get(o),r=this._overlayCache;r.has(s)||r.set(s,[]),r.get(s).push(n)},h.prototype._removeOverlay=function(e){const{id:t,handlerHash:s}=e;this._overlays.remove(t);const o=this._overlayCache.get(s)||[],n=o.indexOf(e);-1!==n&&o.splice(n,1)},h.prototype.updateElementContextPads=function(e){for(const t of this.getHandlers(e))this._updateElementContextPads(e,t)},h.prototype._updateElementContextPads=function(e,t){const o=(t.createContextPads(e)||[]).filter(e=>e),n=`${e.id}------${t.hash}`,r=this._getOverlays(n),i=[];for(const a of o){const{element:e,contexts:t,hideContexts:o,action:l,html:d}=a,h=`${a.element.id}-------${d}`;let c=r.find(e=>e.hash===h);const p=c&&c.html||(0,s.domify)(d);if(t){const e=t();p.dataset.scopeIds=e.map(e=>e.scope.id).join(",");const o=e.filter(e=>this._scopeFilter.isShown(e.scope));(0,s.classes)(p).toggle("hidden",0===o.length)}if(o){const e=o();p.dataset.hideScopeIds=e.map(e=>e.scope.id).join(",");const t=e.filter(e=>this._scopeFilter.isShown(e.scope));(0,s.classes)(p).toggle("hidden",t.length>0)}c?i.push(c):(l&&s.event.bind(p,"click",e=>{e.preventDefault();const s=t?t().filter(e=>this._scopeFilter.isShown(e.scope)):null;l(s)}),this._addOverlay(e,{hash:h,handlerHash:n,html:p}))}for(const s of r)i.includes(s)||this._removeOverlay(s)},h.prototype.closeContextPads=function(){for(const e of this._overlayCache.values())for(const t of e)this._closeOverlay(t);this._overlayCache.clear()},h.prototype._closeOverlay=function(e){this._overlays.remove(e.id)},h.$inject=["eventBus","elementRegistry","overlays","injector","canvas","scopeFilter"];
},{"../../util/ElementHelper":"vDHo","../../util/EventHelper":"PJes","min-dom":"fWg5","./handler/ExclusiveGatewayHandler":"u5SI","./handler/PauseHandler":"EKJp","./handler/TriggerHandler":"OHFG"}],"TL4I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./ContextPads")),t=r(require("../scope-filter"));function r(e){return e&&e.__esModule?e:{default:e}}var d=exports.default={__depends__:[t.default],__init__:["contextPads"],contextPads:["type",e.default]};
},{"./ContextPads":"RgOS","../scope-filter":"RIr8"}],"wFxd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=require("../../util/EventHelper"),t=require("../../icons");function i(i,n,o){i.on(e.SCOPE_DESTROYED_EVENT,e=>{const{scope:i}=e,{destroyInitiator:n,element:c}=i;if(!i.completed||!n)return;["bpmn:Process","bpmn:Participant"].includes(c.type)&&o.addElementNotification(n.element,{type:"success",icon:(0,t.CheckCircleIcon)(),text:"Finished",scope:i})})}i.$inject=["eventBus","simulator","elementNotifications"];
},{"../../util/EventHelper":"PJes","../../icons":"dh36"}],"KYK7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=require("min-dom"),t=require("../../util/EventHelper");const o=-15,i=15;function n(e,o){this._overlays=e,o.on([t.RESET_SIMULATION_EVENT,t.SCOPE_CREATE_EVENT,t.TOGGLE_MODE_EVENT],()=>{this.clear()})}n.prototype.addElementNotification=function(t,o){const i={top:-15,right:15},{type:n,icon:r,text:s,scope:a={}}=o,l=a.colors,c=l?`style="color: ${l.auxiliary}; background: ${l.primary}"`:"",p=(0,e.domify)(`\n    <div class="bts-element-notification ${n||""}" ${c}>\n      ${r||""}\n      <span class="bts-text">${s}</span>\n    </div>\n  `);this._overlays.add(t,"element-notification",{position:i,html:p,show:{minZoom:.5}})},n.prototype.clear=function(){this._overlays.remove({type:"element-notification"})},n.prototype.removeElementNotification=function(e){this._overlays.remove({element:e})},n.$inject=["overlays","eventBus"];
},{"min-dom":"fWg5","../../util/EventHelper":"PJes"}],"TwOv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./ElementNotifications"));function t(e){return e&&e.__esModule?e:{default:e}}var o=exports.default={elementNotifications:["type",e.default]};
},{"./ElementNotifications":"KYK7"}],"D1gJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var t=require("min-dom"),i=require("../../util/EventHelper"),n=require("../../icons");const e=2e3,s=(0,n.InfoIcon)();function o(t,n,e){this._eventBus=t,this._canvas=n,this._scopeFilter=e,this._init(),t.on([i.TOGGLE_MODE_EVENT,i.RESET_SIMULATION_EVENT],t=>{this.clear()})}o.prototype._init=function(){this.container=(0,t.domify)('<div class="bts-notifications"></div>'),this._canvas.getContainer().appendChild(this.container)},o.prototype.showNotification=function(i){const{text:n,type:o="info",icon:c=s,scope:r,ttl:a=e}=i;if(r&&!this._scopeFilter.isShown(r))return;const l=c.startsWith("<")?c:`<i class="${c}"></i>`,p=r&&r.colors,h=p?`style="color: ${p.auxiliary}; background: ${p.primary}"`:"",d=(0,t.domify)(`\n    <div class="bts-notification ${o}">\n      <span class="bts-icon">${l}</span>\n      <span class="bts-text" title="${n}">${n}</span>\n      ${r?`<span class="bts-scope" ${h}>${r.id}</span>`:""}\n    </div>\n  `);for(this.container.appendChild(d);this.container.children.length>5;)this.container.children[0].remove();setTimeout(function(){d.remove()},a)},o.prototype.clear=function(){for(;this.container.children.length;)this.container.children[0].remove()},o.$inject=["eventBus","canvas","scopeFilter"];
},{"min-dom":"fWg5","../../util/EventHelper":"PJes","../../icons":"dh36"}],"de3G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("../scope-filter")),t=r(require("./Notifications"));function r(e){return e&&e.__esModule?e:{default:e}}var i=exports.default={__depends__:[e.default],notifications:["type",t.default]};
},{"../scope-filter":"RIr8","./Notifications":"D1gJ"}],"RyNl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./SimulationState")),t=u(require("../element-notifications")),i=u(require("../notifications"));function u(e){return e&&e.__esModule?e:{default:e}}var a=exports.default={__depends__:[t.default,i.default],__init__:["simulationState"],simulationState:["type",e.default]};
},{"./SimulationState":"wFxd","../element-notifications":"TwOv","../notifications":"de3G"}],"h1tW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=c;var e=require("min-dom"),t=require("../../util/EventHelper");const i="--token-simulation-silver-base-97",s="--token-simulation-green-base-44",o="show-scopes",n=3e3;function c(i,s,o,n,c){this._eventBus=i,this._canvas=s,this._scopeFilter=o,this._elementColors=n,this._simulationStyles=c,this._highlight=null,this._init(),i.on(t.TOGGLE_MODE_EVENT,t=>{t.active?(0,e.classes)(this._container).remove("hidden"):((0,e.classes)(this._container).add("hidden"),(0,e.clear)(this._container),this.unhighlightScope())}),i.on(t.SCOPE_FILTER_CHANGED_EVENT,t=>{const i=this.getScopeElements();for(const s of i){const t=s.dataset.scopeId;(0,e.classes)(s).toggle("inactive",!this._scopeFilter.isShown(t))}}),i.on(t.SCOPE_CREATE_EVENT,e=>{this.addScope(e.scope)}),i.on(t.SCOPE_DESTROYED_EVENT,e=>{this.removeScope(e.scope)}),i.on(t.SCOPE_CHANGED_EVENT,e=>{this.updateScope(e.scope)}),i.on(t.RESET_SIMULATION_EVENT,()=>{this.removeAllInstances()})}c.prototype._init=function(){this._container=(0,e.domify)('<div class="bts-scopes hidden"></div>'),this._canvas.getContainer().appendChild(this._container)},c.prototype.addScope=function(t){const{element:i}=t;if(!["bpmn:Process","bpmn:SubProcess","bpmn:Participant"].includes(i.type))return;const s=t.colors,o=s?`style="color: ${s.auxiliary}; background: ${s.primary}"`:"",n=(0,e.domify)(`\n    <div data-scope-id="${t.id}" class="bts-scope"\n         title="View Process Instance ${t.id}" ${o}>\n      ${t.getTokens()}\n    </div>\n  `);e.event.bind(n,"click",()=>{this._scopeFilter.toggle(t)}),e.event.bind(n,"mouseenter",()=>{this.highlightScope(i)}),e.event.bind(n,"mouseleave",()=>{this.unhighlightScope()}),this._scopeFilter.isShown(t)||(0,e.classes)(n).add("inactive"),this._container.appendChild(n)},c.prototype.getScopeElements=function(){return(0,e.queryAll)("[data-scope-id]",this._container)},c.prototype.getScopeElement=function(t){return(0,e.query)(`[data-scope-id="${t.id}"]`,this._container)},c.prototype.updateScope=function(e){const t=this.getScopeElement(e);t&&(t.textContent=e.getTokens())},c.prototype.removeScope=function(e){const t=this.getScopeElement(e);t&&t.remove()},c.prototype.removeAllInstances=function(){this._container.innerHTML=""},c.prototype.highlightScope=function(t){this.unhighlightScope(),this._highlight=t,this._elementColors.add(t,o,this._getHighlightColors(),3e3),t.parent||(0,e.classes)(this._canvas.getContainer()).add("highlight")},c.prototype.unhighlightScope=function(){if(!this._highlight)return;const t=this._highlight;this._elementColors.remove(t,o),t.parent||(0,e.classes)(this._canvas.getContainer()).remove("highlight"),this._highlight=null},c.prototype._getHighlightColors=function(){return{fill:this._simulationStyles.get(i),stroke:this._simulationStyles.get(s)}},c.$inject=["eventBus","canvas","scopeFilter","elementColors","simulationStyles"];
},{"min-dom":"fWg5","../../util/EventHelper":"PJes"}],"J6lJ":[function(require,module,exports) {
"use strict";function t(){this._cache={}}function e(){return{getPropertyValue:()=>""}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t,t.$inject=[],t.prototype.get=function(t){const e=this._cache[t];return e||(this._computedStyle||(this._computedStyle=this._getComputedStyle()),this._cache[t]=this._computedStyle.getPropertyValue(t).trim())},t.prototype._getComputedStyle=function(){return("function"==typeof getComputedStyle?getComputedStyle:e)("undefined"!=typeof document?document.documentElement:{})};
},{}],"pZGl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./SimulationStyles"));function t(e){return e&&e.__esModule?e:{default:e}}var u=exports.default={simulationStyles:["type",e.default]};
},{"./SimulationStyles":"J6lJ"}],"MVGd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("./ShowScopes")),t=s(require("../scope-filter")),r=s(require("../simulation-styles"));function s(e){return e&&e.__esModule?e:{default:e}}var o=exports.default={__depends__:[t.default,r.default],__init__:["showScopes"],showScopes:["type",e.default]};
},{"./ShowScopes":"h1tW","../scope-filter":"RIr8","../simulation-styles":"pZGl"}],"OpPL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var t=require("min-dom"),e=require("../../util/ElementHelper"),n=require("diagram-js/lib/util/EscapeUtil"),s=require("../../util/EventHelper"),i=require("../../icons");const o=(0,i.InfoIcon)();function c(t){const e=t&&t.businessObject.name;return e&&(0,n.escapeHTML)(e)}function l(n,o,l,a,r,p){this._notifications=o,this._tokenSimulationPalette=l,this._canvas=a,this._scopeFilter=r,this._init(),n.on(s.SCOPE_FILTER_CHANGED_EVENT,e=>{const n=(0,t.queryAll)(".bts-entry[data-scope-id]",this._container);for(const s of n){const e=s.dataset.scopeId;(0,t.classes)(s).toggle("inactive",!this._scopeFilter.isShown(e))}}),n.on(s.SCOPE_DESTROYED_EVENT,t=>{const{scope:n}=t,{element:s}=n,o=n.completed;if(!["bpmn:Process","bpmn:Participant","bpmn:SubProcess"].includes(s.type))return;const l=`${(0,e.is)(s,"bpmn:SubProcess")?c(s)||"SubProcess":"Process"} ${o?"finished":"canceled"}`;this.log({text:l,icon:o?(0,i.CheckCircleIcon)():(0,i.TimesCircleIcon)(),scope:n})}),n.on(s.SCOPE_CREATE_EVENT,t=>{const{scope:n}=t,{element:s}=n;if(!["bpmn:Process","bpmn:Participant","bpmn:SubProcess"].includes(s.type))return;const o=`${(0,e.is)(s,"bpmn:SubProcess")?c(s)||"SubProcess":"Process"} started`;this.log({text:o,icon:(0,i.CheckCircleIcon)(),scope:n})}),n.on(s.TRACE_EVENT,t=>{const{action:n,scope:s,element:o}=t;if("exit"!==n)return;const l=s.parent,a=c(o);if((0,e.is)(o,"bpmn:BusinessRuleTask")?this.log({text:a||"Business Rule Task",icon:"bpmn-icon-business-rule",scope:l}):(0,e.is)(o,"bpmn:CallActivity")?this.log({text:a||"Call Activity",icon:"bpmn-icon-call-activity",scope:l}):((0,e.is)(o,"bpmn:IntermediateCatchEvent")||(0,e.is)(o,"bpmn:IntermediateThrowEvent"))&&this.log({text:a||"Intermediate Event",icon:"bpmn-icon-intermediate-event-none",scope:l}),(0,e.is)(o,"bpmn:BoundaryEvent"))this.log({text:a||"Boundary Event",icon:"bpmn-icon-intermediate-event-none",scope:l});else if((0,e.is)(o,"bpmn:ManualTask"))this.log({text:a||"Manual Task",icon:"bpmn-icon-manual",scope:l});else if((0,e.is)(o,"bpmn:ScriptTask"))this.log({text:a||"Script Task",icon:"bpmn-icon-script",scope:l});else if((0,e.is)(o,"bpmn:ServiceTask"))this.log({text:a||"Service Task",icon:"bpmn-icon-service",scope:l});else if((0,e.is)(o,"bpmn:Task"))this.log({text:a||"Task",icon:"bpmn-icon-task",scope:l});else if((0,e.is)(o,"bpmn:UserTask"))this.log({text:a||"User Task",icon:"bpmn-icon-user",scope:l});else if((0,e.is)(o,"bpmn:ExclusiveGateway")){if(o.outgoing.length<2)return;const t=c(o.sequenceFlow);let e=a||"Gateway";t&&(e=e.concat(` ${(0,i.AngleRightIcon)()} ${t}`)),this.log({text:e,icon:"bpmn-icon-gateway-xor",scope:l})}else(0,e.is)(o,"bpmn:EndEvent")?(0,e.isTypedEvent)((0,e.getBusinessObject)(o),"bpmn:TerminateEventDefinition")?this.log({text:a||"Terminate End Event",icon:"bpmn-icon-end-event-terminate",scope:l}):this.log({text:a||"End Event",icon:"bpmn-icon-end-event-none",scope:l}):(0,e.is)(o,"bpmn:StartEvent")&&this.log({text:a||"Start Event",icon:"bpmn-icon-start-event-none",scope:l})}),n.on([s.TOGGLE_MODE_EVENT,s.RESET_SIMULATION_EVENT],t=>{this.clear(),this.toggle(!1)})}l.prototype._init=function(){this._container=(0,t.domify)(`\n    <div class="bts-log hidden djs-scrollable">\n      <div class="bts-header">\n        ${(0,i.LogIcon)("bts-log-icon")}\n        Simulation Log\n        <button class="bts-close">\n          ${(0,i.TimesIcon)()}\n        </button>\n      </div>\n      <div class="bts-content">\n        <p class="bts-entry placeholder">No Entries</p>\n      </div>\n    </div>\n  `),this._placeholder=(0,t.query)(".bts-placeholder",this._container),this._content=(0,t.query)(".bts-content",this._container),t.event.bind(this._content,"mousedown",t=>{t.stopPropagation()}),this._close=(0,t.query)(".bts-close",this._container),t.event.bind(this._close,"click",()=>{this.toggle(!1)}),this._icon=(0,t.query)(".bts-log-icon",this._container),t.event.bind(this._icon,"click",()=>{this.toggle()}),this._canvas.getContainer().appendChild(this._container),this.paletteEntry=(0,t.domify)(`\n    <div class="bts-entry" title="Toggle Simulation Log">\n      ${(0,i.LogIcon)()}\n    </div>\n  `),t.event.bind(this.paletteEntry,"click",()=>{this.toggle()}),this._tokenSimulationPalette.addEntry(this.paletteEntry,3)},l.prototype.isShown=function(){const e=this._container;return!(0,t.classes)(e).has("hidden")},l.prototype.toggle=function(e=!this.isShown()){const n=this._container;e?(0,t.classes)(n).remove("hidden"):(0,t.classes)(n).add("hidden")},l.prototype.log=function(e){const{text:n,type:s="info",icon:i=o,scope:c}=e,l=this._content;(0,t.classes)(this._placeholder).add("hidden"),this.isShown()||this._notifications.showNotification(e);const a=i.startsWith("<")?i:`<i class="${i}"></i>`,r=c&&c.colors,p=r?`style="background: ${r.primary}; color: ${r.auxiliary}"`:"",h=(0,t.domify)(`\n    <p class="bts-entry ${s} ${c&&this._scopeFilter.isShown(c)?"":"inactive"}" ${c?`data-scope-id="${c.id}"`:""}>\n      <span class="bts-icon">${a}</span>\n      <span class="bts-text" title="${n}">${n}</span>\n      ${c?`<span class="bts-scope" data-scope-id="${c.id}" ${p}>${c.id}</span>`:""}\n    </p>\n  `);t.delegate.bind(h,".bts-scope[data-scope-id]","click",t=>{this._scopeFilter.toggle(c)});const d=Math.abs(l.clientHeight+l.scrollTop-l.scrollHeight)<2;l.appendChild(h),d&&(l.scrollTop=l.scrollHeight)},l.prototype.clear=function(){for(;this._content.firstChild;)this._content.removeChild(this._content.firstChild);this._placeholder=(0,t.domify)('<p class="bts-entry placeholder">No Entries</p>'),this._content.appendChild(this._placeholder)},l.$inject=["eventBus","notifications","tokenSimulationPalette","canvas","scopeFilter","simulator"];
},{"min-dom":"fWg5","../../util/ElementHelper":"vDHo","diagram-js/lib/util/EscapeUtil":"eIZy","../../util/EventHelper":"PJes","../../icons":"dh36"}],"CNTD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./Log")),t=u(require("../scope-filter")),r=u(require("../notifications"));function u(e){return e&&e.__esModule?e:{default:e}}var o=exports.default={__depends__:[r.default,t.default],__init__:["log"],log:["type",e.default]};
},{"./Log":"OpPL","../scope-filter":"RIr8","../notifications":"de3G"}],"LEuQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("min-dom"),t=require("../../util/ElementHelper"),n=require("../../util/EventHelper"),i=require("../../icons");const o=["bpmn:InclusiveGateway","bpmn:ComplexGateway"];function s(e){return e.labelTarget}function r(e,t,i,o,s){this._eventBus=e,this._elementRegistry=t,this._elementNotifications=s,this._notifications=o,this._canvasParent=i.getContainer().parentNode,e.on(n.TOGGLE_MODE_EVENT,e=>{e.active?this.enable():this.clear()})}r.prototype.getUnsupportedElements=function(){return this._unsupportedElements},r.prototype.enable=function(){const e=[];this._elementRegistry.forEach(n=>{s(n)||(0,t.is)(n,o)&&(this.showWarning(n),e.push(n))}),e.length&&this._notifications.showNotification({text:"Found unsupported elements",icon:(0,i.ExclamationTriangleIcon)(),type:"warning",ttl:5e3}),this._unsupportedElements=e},r.prototype.clear=function(){(0,e.classes)(this._canvasParent).remove("warning")},r.prototype.showWarning=function(e){this._elementNotifications.addElementNotification(e,{type:"warning",icon:(0,i.ExclamationTriangleIcon)(),text:"Not supported"})},r.$inject=["eventBus","elementRegistry","canvas","notifications","elementNotifications"];
},{"min-dom":"fWg5","../../util/ElementHelper":"vDHo","../../util/EventHelper":"PJes","../../icons":"dh36"}],"zNDl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./ElementSupport")),t=u(require("../element-notifications")),r=u(require("../notifications"));function u(e){return e&&e.__esModule?e:{default:e}}var i=exports.default={__depends__:[t.default,r.default],__init__:["elementSupport"],elementSupport:["type",e.default]};
},{"./ElementSupport":"LEuQ","../element-notifications":"TwOv","../notifications":"de3G"}],"DeY5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var t=require("min-dom"),e=require("../../util/EventHelper"),i=require("../../icons");const s=(0,i.PlayIcon)(),a=(0,i.PauseIcon)(),n=1500;function o(t,i,s,a){this._eventBus=t,this._tokenSimulationPalette=i,this._notifications=s,this.canvasParent=a.getContainer().parentNode,this.isActive=!1,this.isPaused=!0,this._init(),t.on(e.SCOPE_CREATE_EVENT,n,t=>{this.activate(),this.unpause()}),t.on([e.RESET_SIMULATION_EVENT,e.TOGGLE_MODE_EVENT],()=>{this.deactivate(),this.pause()}),t.on(e.TRACE_EVENT,n,t=>{this.unpause()})}o.prototype._init=function(){this.paletteEntry=(0,t.domify)(`\n    <div class="bts-entry disabled" title="Play/Pause Simulation">\n      ${s}\n    </div>\n  `),t.event.bind(this.paletteEntry,"click",this.toggle.bind(this)),this._tokenSimulationPalette.addEntry(this.paletteEntry,1)},o.prototype.toggle=function(){this.isPaused?this.unpause():this.pause()},o.prototype.pause=function(){this.isActive&&((0,t.classes)(this.paletteEntry).remove("active"),(0,t.classes)(this.canvasParent).add("paused"),this.paletteEntry.innerHTML=s,this._eventBus.fire(e.PAUSE_SIMULATION_EVENT),this._notifications.showNotification({text:"Pause Simulation"}),this.isPaused=!0)},o.prototype.unpause=function(){this.isActive&&this.isPaused&&((0,t.classes)(this.paletteEntry).add("active"),(0,t.classes)(this.canvasParent).remove("paused"),this.paletteEntry.innerHTML=a,this._eventBus.fire(e.PLAY_SIMULATION_EVENT),this._notifications.showNotification({text:"Play Simulation"}),this.isPaused=!1)},o.prototype.activate=function(){this.isActive=!0,(0,t.classes)(this.paletteEntry).remove("disabled")},o.prototype.deactivate=function(){this.isActive=!1,(0,t.classes)(this.paletteEntry).remove("active"),(0,t.classes)(this.paletteEntry).add("disabled")},o.$inject=["eventBus","tokenSimulationPalette","notifications","canvas"];
},{"min-dom":"fWg5","../../util/EventHelper":"PJes","../../icons":"dh36"}],"WLGg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./PauseSimulation")),t=u(require("../notifications"));function u(e){return e&&e.__esModule?e:{default:e}}var i=exports.default={__depends__:[t.default],__init__:["pauseSimulation"],pauseSimulation:["type",e.default]};
},{"./PauseSimulation":"DeY5","../notifications":"de3G"}],"f9Wz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var t=require("min-dom"),e=require("../../util/EventHelper"),i=require("../../icons");function n(i,n,s){this._eventBus=i,this._tokenSimulationPalette=n,this._notifications=s,this._init(),i.on(e.SCOPE_CREATE_EVENT,()=>{(0,t.classes)(this._paletteEntry).remove("disabled")}),i.on(e.TOGGLE_MODE_EVENT,t=>{(this._active=t.active)||this.resetSimulation()})}n.prototype._init=function(){this._paletteEntry=(0,t.domify)(`\n    <div class="bts-entry disabled" title="Reset Simulation">\n      ${(0,i.ResetIcon)()}\n    </div>\n  `),t.event.bind(this._paletteEntry,"click",()=>{this.resetSimulation(),this._notifications.showNotification({text:"Reset Simulation",type:"info"})}),this._tokenSimulationPalette.addEntry(this._paletteEntry,2)},n.prototype.resetSimulation=function(){(0,t.classes)(this._paletteEntry).add("disabled"),this._eventBus.fire(e.RESET_SIMULATION_EVENT)},n.$inject=["eventBus","tokenSimulationPalette","notifications"];
},{"min-dom":"fWg5","../../util/EventHelper":"PJes","../../icons":"dh36"}],"UNXK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("./ResetSimulation")),t=i(require("../notifications"));function i(e){return e&&e.__esModule?e:{default:e}}var r=exports.default={__depends__:[t.default],__init__:["resetSimulation"],resetSimulation:["type",e.default]};
},{"./ResetSimulation":"f9Wz","../notifications":"de3G"}],"C1iU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var t=require("min-dom"),e=require("../../util/ElementHelper"),o=require("../../util/EventHelper");const n=10,s=-15,i=500,r="--token-simulation-green-base-44",l="--token-simulation-white";function a(e,n,s,r,l){this._overlays=n,this._scopeFilter=r,this._simulator=s,this._simulationStyles=l,this.overlayIds={},e.on(o.ELEMENT_CHANGED_EVENT,i,t=>{const{element:e}=t;this.removeTokenCounts(e),this.addTokenCounts(e)}),e.on(o.SCOPE_FILTER_CHANGED_EVENT,e=>{const o=(0,t.queryAll)(".bts-token-count[data-scope-id]",n._overlayRoot);for(const n of o){const e=n.dataset.scopeId;(0,t.classes)(n).toggle("inactive",!this._scopeFilter.isShown(e))}})}a.prototype.addTokenCounts=function(t){if((0,e.is)(t,"bpmn:MessageFlow")||(0,e.is)(t,"bpmn:SequenceFlow"))return;const o=this._simulator.findScopes(e=>!e.destroyed&&e.children.some(e=>!e.destroyed&&e.element===t&&!e.children.length));this.addTokenCount(t,o)},a.prototype.addTokenCount=function(e,o){if(!o.length)return;const n=o.map(t=>this._getTokenHTML(e,t)).join(""),s=(0,t.domify)(`\n    <div class="bts-token-count-parent">\n      ${n}\n    </div>\n  `),i={bottom:10,left:-15},r=this._overlays.add(e,"token-count",{position:i,html:s,show:{minZoom:.5}});this.overlayIds[e.id]=r},a.prototype.removeTokenCounts=function(t){this.removeTokenCount(t)},a.prototype.removeTokenCount=function(t){const e=this.overlayIds[t.id];e&&(this._overlays.remove(e),delete this.overlayIds[t.id])},a.prototype._getTokenHTML=function(t,e){const o=e.colors||this._getDefaultColors();return`\n    <div data-scope-id="${e.id}" class="bts-token-count waiting ${this._scopeFilter.isShown(e)?"":"inactive"}"\n         style="color: ${o.auxiliary}; background: ${o.primary}">\n      ${e.getTokensByElement(t)}\n    </div>\n  `},a.prototype._getDefaultColors=function(){return{primary:this._simulationStyles.get(r),auxiliary:this._simuationStyles.get(l)}},a.$inject=["eventBus","overlays","simulator","scopeFilter","simulationStyles"];
},{"min-dom":"fWg5","../../util/ElementHelper":"vDHo","../../util/EventHelper":"PJes"}],"pdzL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./TokenCount")),t=r(require("../scope-filter")),u=r(require("../simulation-styles"));function r(e){return e&&e.__esModule?e:{default:e}}var o=exports.default={__depends__:[t.default,u.default],__init__:["tokenCount"],tokenCount:["type",e.default]};
},{"./TokenCount":"C1iU","../scope-filter":"RIr8","../simulation-styles":"pZGl"}],"m3PQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=require("min-dom"),t=require("../../util/EventHelper"),n=require("../../icons");const i=[["Slow",.5],["Normal",1],["Fast",2]];function a(n,i,a){this._canvas=n,this._animation=i,this._eventBus=a,this._init(i.getAnimationSpeed()),a.on(t.TOGGLE_MODE_EVENT,t=>{t.active?(0,e.classes)(this._container).remove("hidden"):(0,e.classes)(this._container).add("hidden")}),a.on(t.ANIMATION_SPEED_CHANGED_EVENT,e=>{this.setActive(e.speed)})}a.prototype.getToggleSpeed=function(e){return parseFloat(e.dataset.speed)},a.prototype._init=function(t){this._container=(0,e.domify)(`\n    <div class="bts-set-animation-speed hidden">\n      ${(0,n.TachometerIcon)()}\n      <div class="bts-animation-speed-buttons">\n        ${i.map(([e,i],a)=>`\n            <button title="Set animation speed = ${e}" data-speed="${i}" class="bts-animation-speed-button ${i===t?"active":""}">\n              ${Array.from({length:a+1}).map(()=>(0,n.AngleRightIcon)()).join("")}\n            </button>\n          `).join("")}\n      </div>\n    </div>\n  `),e.delegate.bind(this._container,"[data-speed]","click",e=>{const t=e.delegateTarget,n=this.getToggleSpeed(t);this._animation.setAnimationSpeed(n)}),this._canvas.getContainer().appendChild(this._container)},a.prototype.setActive=function(t){(0,e.queryAll)("[data-speed]",this._container).forEach(n=>{const i=this.getToggleSpeed(n)===t;(0,e.classes)(n)[i?"add":"remove"]("active")})},a.$inject=["canvas","animation","eventBus"];
},{"min-dom":"fWg5","../../util/EventHelper":"PJes","../../icons":"dh36"}],"WCgk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./SetAnimationSpeed"));function t(e){return e&&e.__esModule?e:{default:e}}var i=exports.default={__init__:["setAnimationSpeed"],setAnimationSpeed:["type",e.default]};
},{"./SetAnimationSpeed":"m3PQ"}],"R4pf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=require("../../util/ElementHelper"),t=require("../../util/EventHelper");const i="--token-simulation-grey-darken-30",o="--token-simulation-grey-lighten-56";function n(e,t){var i=e.outgoing.filter(s),o=i.indexOf(t||e.sequenceFlow);return i[o+1]?i[o+1]:i[0]}function s(t){return(0,e.is)(t,"bpmn:SequenceFlow")}const l="exclusive-gateway-settings",r=2e3;function u(e,i,o,n,s){this._elementRegistry=i,this._elementColors=o,this._simulator=n,this._simulationStyles=s,e.on(t.TOGGLE_MODE_EVENT,e=>{e.active?this.setSequenceFlowsDefault():this.resetSequenceFlows()})}u.prototype.setSequenceFlowsDefault=function(){const t=this._elementRegistry.filter(t=>(0,e.is)(t,"bpmn:ExclusiveGateway"));for(const e of t)this.setSequenceFlow(e)},u.prototype.resetSequenceFlows=function(){this._elementRegistry.filter(t=>(0,e.is)(t,"bpmn:ExclusiveGateway")).forEach(e=>{e.outgoing.filter(s).length&&this.resetSequenceFlow(e)})},u.prototype.resetSequenceFlow=function(e){this._simulator.setConfig(e,{activeOutgoing:void 0})},u.prototype.setSequenceFlow=function(e){const t=e.outgoing.filter(s);if(t.length<2)return;const{activeOutgoing:r}=this._simulator.getConfig(e);let u;u=r?n(e,r):t[0],this._simulator.setConfig(e,{activeOutgoing:u}),e.outgoing.forEach(e=>{const t=e===u?i:o,n=this._simulationStyles.get(t);this._elementColors.add(e,l,{stroke:n},2e3)})},u.$inject=["eventBus","elementRegistry","elementColors","simulator","simulationStyles"];
},{"../../util/ElementHelper":"vDHo","../../util/EventHelper":"PJes"}],"fj8P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var t=require("bpmn-js/lib/util/ModelUtil"),o=require("../../util/EventHelper");const i=5e4;function e(t,e,s){this._elementRegistry=t,this._eventBus=e,this._graphicsFactory=s,this._originalColors={},this._customColors={},e.on(o.TOGGLE_MODE_EVENT,i,t=>{t.active?this._saveOriginalColors():(this._applyOriginalColors(),this._originalColors={},this._customColors={})}),e.on("saveXML.start",i,()=>{this._applyOriginalColors(),e.once("saveXML.done",()=>this._applyCustomColors())})}function s(t){return"labelTarget"in t}function r(t={}){const o=Object.values(t).reduce((t,o)=>{const{priority:i=1e3}=o;return!t||i>t.priority?o:t},void 0);if(o){const{priority:t,...i}=o;return i}}e.$inject=["elementRegistry","eventBus","graphicsFactory"],e.prototype.add=function(t,o,i,e=1e3){let s=this._customColors[t.id];s||(s=this._customColors[t.id]={}),s[o]={...i,priority:e},this._applyHighestPriorityColor(t)},e.prototype.remove=function(t,o){const i=this._customColors[t.id];i&&(delete i[o],Object.keys(i)||delete this._customColors[t.id]),this._applyHighestPriorityColor(t)},e.prototype._get=function(o){const i=(0,t.getDi)(o);if(i)return s(o)?{stroke:i.label&&i.label.get("color")}:(0,t.isAny)(i,["bpmndi:BPMNEdge","bpmndi:BPMNShape"])?{fill:i.get("background-color"),stroke:i.get("border-color")}:void 0},e.prototype._set=function(o,i={}){const{fill:e,stroke:r}=i,l=(0,t.getDi)(o);l&&(s(o)?l.label&&l.label.set("color",r):(0,t.isAny)(l,["bpmndi:BPMNEdge","bpmndi:BPMNShape"])&&(l.set("background-color",e),l.set("border-color",r)),this._forceRedraw(o))},e.prototype._saveOriginalColors=function(){this._originalColors={},this._elementRegistry.forEach(t=>{this._originalColors[t.id]=this._get(t)})},e.prototype._applyOriginalColors=function(){this._elementRegistry.forEach(t=>{const o=this._originalColors[t.id];o&&this._set(t,o)})},e.prototype._applyCustomColors=function(){this._elementRegistry.forEach(t=>{const o=this._customColors[t.id];o&&this._set(t,r(o))})},e.prototype._applyHighestPriorityColor=function(t){const o=this._customColors[t.id];o?this._set(t,r(o)):this._set(t,this._originalColors[t.id])},e.prototype._forceRedraw=function(t){const o=this._elementRegistry.getGraphics(t),i=t.waypoints?"connection":"shape";this._graphicsFactory.update(i,t,o)};
},{"bpmn-js/lib/util/ModelUtil":"HvoA","../../util/EventHelper":"PJes"}],"R3yT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./ElementColors"));function t(e){return e&&e.__esModule?e:{default:e}}var r=exports.default={elementColors:["type",e.default]};
},{"./ElementColors":"fj8P"}],"dcv3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./ExclusiveGatewaySettings")),t=r(require("../element-colors")),u=r(require("../simulation-styles"));function r(e){return e&&e.__esModule?e:{default:e}}var s=exports.default={__depends__:[t.default,u.default],exclusiveGatewaySettings:["type",e.default]};
},{"./ExclusiveGatewaySettings":"R4pf","../element-colors":"R3yT","../simulation-styles":"pZGl"}],"WCFX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=require("../../util/EventHelper");const t="neutral-element-colors";function o(t,o,s){this._elementRegistry=o,this._elementColors=s,t.on(e.TOGGLE_MODE_EVENT,e=>{const{active:t}=e;t&&this._setNeutralColors()})}o.prototype._setNeutralColors=function(){this._elementRegistry.forEach(e=>{this._elementColors.add(e,t,{stroke:"#212121",fill:"#fff"})})},o.$inject=["eventBus","elementRegistry","elementColors"];
},{"../../util/EventHelper":"PJes"}],"c2r8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./NeutralElementColors")),t=r(require("../element-colors"));function r(e){return e&&e.__esModule?e:{default:e}}var l=exports.default={__depends__:[t.default],__init__:["neutralElementColors"],neutralElementColors:["type",e.default]};
},{"./NeutralElementColors":"WCFX","../element-colors":"R3yT"}],"NBP7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=require("min-dom"),t=require("../../util/EventHelper");function i(i,n){var s=this;this._canvas=n,this.entries=[],this._init(),i.on(t.TOGGLE_MODE_EVENT,function(t){t.active?(0,e.classes)(s.container).remove("hidden"):(0,e.classes)(s.container).add("hidden")})}i.prototype._init=function(){this.container=(0,e.domify)('<div class="bts-palette hidden"></div>'),this._canvas.getContainer().appendChild(this.container)},i.prototype.addEntry=function(e,t){var i=0;this.entries.forEach(function(e){t>=e.index&&i++}),this.container.insertBefore(e,this.container.childNodes[i]),this.entries.push({entry:e,index:t})},i.$inject=["eventBus","canvas"];
},{"min-dom":"fWg5","../../util/EventHelper":"PJes"}],"TEEz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./Palette"));function t(e){return e&&e.__esModule?e:{default:e}}var u=exports.default={__init__:["tokenSimulationPalette"],tokenSimulationPalette:["type",e.default]};
},{"./Palette":"NBP7"}],"DtRP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=m(require("./simulator")),t=m(require("./animation")),u=m(require("./features/colored-scopes")),r=m(require("./features/context-pads")),a=m(require("./features/simulation-state")),s=m(require("./features/show-scopes")),f=m(require("./features/log")),l=m(require("./features/element-support")),i=m(require("./features/pause-simulation")),d=m(require("./features/reset-simulation")),o=m(require("./features/token-count")),n=m(require("./features/set-animation-speed")),q=m(require("./features/exclusive-gateway-settings")),p=m(require("./features/neutral-element-colors")),c=m(require("./features/palette"));function m(e){return e&&e.__esModule?e:{default:e}}var _=exports.default={__depends__:[e.default,t.default,u.default,r.default,a.default,s.default,f.default,l.default,i.default,d.default,o.default,n.default,q.default,p.default,c.default]};
},{"./simulator":"ydMS","./animation":"eGIE","./features/colored-scopes":"vE80","./features/context-pads":"TL4I","./features/simulation-state":"RyNl","./features/show-scopes":"MVGd","./features/log":"CNTD","./features/element-support":"zNDl","./features/pause-simulation":"WLGg","./features/reset-simulation":"UNXK","./features/token-count":"pdzL","./features/set-animation-speed":"WCgk","./features/exclusive-gateway-settings":"dcv3","./features/neutral-element-colors":"c2r8","./features/palette":"TEEz"}],"Dbbs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=require("../../util/EventHelper");const t=10001;function n(n,i,r,a,c,l,s,p){let u=!1;function d(e,t,n){const o=e[t];e[t]=function(){return n.call(this,o,arguments)}}function m(e,t){d(e,t,function(e,t){if(!u)return e.apply(this,t)})}function E(e,t){d(e,t,function(e,t){if(u)throw new Error("model is read-only");return e.apply(this,t)})}n.on(e.TOGGLE_MODE_EVENT,t,e=>{(u=e.active)&&(a.cancel(),i.close(),r.cancel()),s._update()}),m(i,"open"),m(r,"init"),m(a,"activate"),m(r,"init"),m(a,"activate"),E(l,"moveShape"),E(l,"updateAttachment"),E(l,"moveElements"),E(l,"moveConnection"),E(l,"layoutConnection"),E(l,"createConnection"),E(l,"createShape"),E(l,"createLabel"),E(l,"appendShape"),E(l,"removeElements"),E(l,"distributeElements"),E(l,"removeShape"),E(l,"removeConnection"),E(l,"replaceShape"),E(l,"pasteElements"),E(l,"alignElements"),E(l,"resizeShape"),E(l,"createSpace"),E(l,"updateWaypoints"),E(l,"reconnectStart"),E(l,"reconnectEnd"),d(c,"trigger",function(e,t){const n=t[0];if(!u||!o(["undo","redo","copy","paste","removeSelection","spaceTool","lassoTool","globalConnectTool","distributeElements","alignElements","directEditing"],n))return e.apply(this,t)})}function o(e,t){return e.indexOf(t)>-1}n.$inject=["eventBus","contextPad","dragging","directEditing","editorActions","modeling","palette","paletteProvider"];
},{"../../util/EventHelper":"PJes"}],"SKEl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./DisableModeling"));function t(e){return e&&e.__esModule?e:{default:e}}var d=exports.default={__init__:["disableModeling"],disableModeling:["type",e.default]};
},{"./DisableModeling":"Dbbs"}],"jPFd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var t=require("min-dom"),e=require("../../../util/EventHelper"),i=require("../../../icons");function n(e,i,n,s){this._eventBus=e,this._canvas=i,this._selection=n,this._contextPad=s,this._active=!1,e.on("import.parse.start",()=>{this._active&&(this.toggleMode(!1),e.once("import.done",()=>{this.toggleMode(!0)}))}),e.on("diagram.init",()=>{this._canvasParent=this._canvas.getContainer().parentNode,this._palette=(0,t.query)(".djs-palette",this._canvas.getContainer()),this._init()})}n.prototype._init=function(){this._container=(0,t.domify)(`\n    <div class="bts-toggle-mode">\n      Token Simulation <span class="bts-toggle">${(0,i.ToggleOffIcon)()}</span>\n    </div>\n  `),t.event.bind(this._container,"click",()=>this.toggleMode()),this._canvas.getContainer().appendChild(this._container)},n.prototype.toggleMode=function(n=!this._active){if(n!==this._active){if(n)this._container.innerHTML=`Token Simulation <span class="bts-toggle">${(0,i.ToggleOnIcon)()}</span>`,(0,t.classes)(this._canvasParent).add("simulation"),(0,t.classes)(this._palette).add("hidden");else{this._container.innerHTML=`Token Simulation <span class="bts-toggle">${(0,i.ToggleOffIcon)()}</span>`,(0,t.classes)(this._canvasParent).remove("simulation"),(0,t.classes)(this._palette).remove("hidden");const e=this._selection.get();1===e.length&&this._contextPad.open(e[0])}this._eventBus.fire(e.TOGGLE_MODE_EVENT,{active:n}),this._active=n}},n.$inject=["eventBus","canvas","selection","contextPad"];
},{"min-dom":"fWg5","../../../util/EventHelper":"PJes","../../../icons":"dh36"}],"kIRE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./ToggleMode"));function t(e){return e&&e.__esModule?e:{default:e}}var o=exports.default={__init__:["toggleMode"],toggleMode:["type",e.default]};
},{"./ToggleMode":"jPFd"}],"vWHt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("../../util/EventHelper");function t(t,o,i,n,r,g){var u=!1;r.register({toggleTokenSimulation:function(){o.toggleMode()}}),r.register({togglePauseTokenSimulation:function(){u&&i.toggle()}}),r.register({resetTokenSimulation:function(){u&&n.resetSimulation()}});const l=g.get("log",!1);l&&r.register({toggleTokenSimulationLog:function(){l.toggle()}}),t.on(e.TOGGLE_MODE_EVENT,e=>{u=e.active})}t.$inject=["eventBus","toggleMode","pauseSimulation","resetSimulation","editorActions","injector"];
},{"../../util/EventHelper":"PJes"}],"YZdc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./EditorActions"));function e(t){return t&&t.__esModule?t:{default:t}}var o=exports.default={__init__:["tokenSimulationEditorActions"],tokenSimulationEditorActions:["type",t.default]};
},{"./EditorActions":"vWHt"}],"GNrk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=require("../../util/EventHelper");const t=1e4;function n(n,o){var r=o.get("editorActions",!1),u=o.get("keyboard",!1);if(u&&r){var a=!1;n.on("keyboard.init",function(){u.addListener(t,function(e){!function(e){i(["t","T"],e)?r.trigger("toggleTokenSimulation"):a&&(i(["l","L"],e)?r.trigger("toggleTokenSimulationLog"):i([" ","Spacebar"],e)?r.trigger("togglePauseTokenSimulation"):i(["r","R"],e)&&r.trigger("resetTokenSimulation"))}(e.keyEvent)})}),n.on(e.TOGGLE_MODE_EVENT,function(e){var t=e.active;a=!!t})}}function i(e,t){return e.indexOf(t.key)>-1}n.$inject=["eventBus","injector"];
},{"../../util/EventHelper":"PJes"}],"bk9E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./KeyboardBindings"));function t(e){return e&&e.__esModule?e:{default:e}}var i=exports.default={__init__:["tokenSimulationKeyboardBindings"],tokenSimulationKeyboardBindings:["type",e.default]};
},{"./KeyboardBindings":"GNrk"}],"xphD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("./base")),r=a(require("./features/disable-modeling")),t=a(require("./features/toggle-mode/modeler")),u=a(require("./features/editor-actions")),d=a(require("./features/keyboard-bindings"));function a(e){return e&&e.__esModule?e:{default:e}}var s=exports.default={__depends__:[e.default,r.default,t.default,u.default,d.default]};
},{"./base":"DtRP","./features/disable-modeling":"SKEl","./features/toggle-mode/modeler":"kIRE","./features/editor-actions":"YZdc","./features/keyboard-bindings":"bk9E"}],"XRiW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return e.default}});var e=r(require("./lib/modeler"));function r(e){return e&&e.__esModule?e:{default:e}}
},{"./lib/modeler":"xphD"}],"sqQc":[function(require,module,exports) {
module.exports="/1-SubInicio.d82d3060.bpmn";
},{}],"CYMJ":[function(require,module,exports) {
"use strict";var e=t(require("bpmn-js/lib/Modeler"));require("bpmn-js/dist/assets/diagram-js.css"),require("bpmn-js/dist/assets/bpmn-font/css/bpmn-embedded.css");var n=t(require("bpmn-js-token-simulation"));require("bpmn-js-token-simulation/assets/css/bpmn-js-token-simulation.css"),require("./styles.css");var r=t(require("./1-SubInicio.bpmn"));function t(e){return e&&e.__esModule?e:{default:e}}var s=document.getElementById("container"),i=new e.default({container:s,additionalModules:[n.default],keyboard:{bindTo:document}});fetch(r.default).then(function(e){return e.text()}).then(function(e){i.importXML(e).then(function(){return console.log("Diagrama cargado")}).catch(function(e){return console.error("Error al cargar el BPMN",e)})});
},{"bpmn-js/lib/Modeler":"lTH2","bpmn-js/dist/assets/diagram-js.css":"prLV","bpmn-js/dist/assets/bpmn-font/css/bpmn-embedded.css":"RjKz","bpmn-js-token-simulation":"XRiW","bpmn-js-token-simulation/assets/css/bpmn-js-token-simulation.css":"prLV","./styles.css":"prLV","./1-SubInicio.bpmn":"sqQc"}]},{},["CYMJ"], null)
//# sourceMappingURL=/ViewerSubInicio.ea38b9fe.js.map